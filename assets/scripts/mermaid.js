/*!
 * simply v0.4.0
 * Copyright 2023 Nilesh <hello@cloudgeni.us> (https://github.com/beacloudgenius/simply)
 * Licensed under GPL-3.0-or-later
 */!function i(n,a,s){function o(e,t){if(!a[e]){if(!n[e]){var r="function"==typeof require&&require;if(!t&&r)return r(e,!0);if(l)return l(e,!0);throw(t=new Error("Cannot find module '"+e+"'")).code="MODULE_NOT_FOUND",t}r=a[e]={exports:{}},n[e][0].call(r.exports,function(t){return o(n[e][1][t]||t)},r,r.exports,i,n,a,s)}return a[e].exports}for(var l="function"==typeof require&&require,t=0;t<s.length;t++)o(s[t]);return o}({1:[function(t,e,r){e.exports=function(t){return t&&t.__esModule?t:{default:t}},e.exports.__esModule=!0,e.exports.default=e.exports},{}],2:[function(t,hk,uk){!function(ck){!function(){var t,e;t=this,e=function(){"use strict";var I=Object.defineProperty,F=(t,e,r)=>{return i=r,(e="symbol"!=typeof e?e+"":e)in(t=t)?I(t,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[e]=i,r;var i};typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof ck<"u"||typeof self<"u"&&self;function Lr(t){throw new Error('Could not dynamically require "'+t+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Mr,t={exports:{}};(Mr=t).exports=function(){var F;function p(){return F.apply(null,arguments)}function s(t){return t instanceof Array||Object.prototype.toString.call(t)==="[object Array]"}function R(t){return t!=null&&Object.prototype.toString.call(t)==="[object Object]"}function d(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function P(t){if(Object.getOwnPropertyNames)return Object.getOwnPropertyNames(t).length===0;for(var e in t)if(d(t,e))return;return 1}function o(t){return t===void 0}function l(t){return typeof t=="number"||Object.prototype.toString.call(t)==="[object Number]"}function $(t){return t instanceof Date||Object.prototype.toString.call(t)==="[object Date]"}function Y(t,e){for(var r=[],i=t.length,n=0;n<i;++n)r.push(e(t[n],n));return r}function j(t,e){for(var r in e)d(e,r)&&(t[r]=e[r]);return d(e,"toString")&&(t.toString=e.toString),d(e,"valueOf")&&(t.valueOf=e.valueOf),t}function c(t,e,r,i){return Me(t,e,r,i,!0).utc()}function f(t){return t._pf==null&&(t._pf={empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidEra:null,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],era:null,meridiem:null,rfc2822:!1,weekdayMismatch:!1}),t._pf}function z(t){if(t._isValid==null){var e=f(t),r=W.call(e.parsedDateParts,function(t){return t!=null}),r=!isNaN(t._d.getTime())&&e.overflow<0&&!e.empty&&!e.invalidEra&&!e.invalidMonth&&!e.invalidWeekday&&!e.weekdayMismatch&&!e.nullInput&&!e.invalidFormat&&!e.userInvalidated&&(!e.meridiem||e.meridiem&&r);if(t._strict&&(r=r&&e.charsLeftOver===0&&e.unusedTokens.length===0&&e.bigHour===void 0),Object.isFrozen!=null&&Object.isFrozen(t))return r;t._isValid=r}return t._isValid}function U(t){var e=c(NaN);return t!=null?j(f(e),t):f(e).userInvalidated=!0,e}var W=Array.prototype.some||function(t){for(var e=Object(this),r=e.length>>>0,i=0;i<r;i++)if(i in e&&t.call(this,e[i],i,e))return!0;return!1},H=p.momentProperties=[],q=!1;function V(t,e){var r,i,n,a=H.length;if(o(e._isAMomentObject)||(t._isAMomentObject=e._isAMomentObject),o(e._i)||(t._i=e._i),o(e._f)||(t._f=e._f),o(e._l)||(t._l=e._l),o(e._strict)||(t._strict=e._strict),o(e._tzm)||(t._tzm=e._tzm),o(e._isUTC)||(t._isUTC=e._isUTC),o(e._offset)||(t._offset=e._offset),o(e._pf)||(t._pf=f(e)),o(e._locale)||(t._locale=e._locale),0<a)for(r=0;r<a;r++)o(n=e[i=H[r]])||(t[i]=n);return t}function G(t){V(this,t),this._d=new Date(t._d!=null?t._d.getTime():NaN),this.isValid()||(this._d=new Date(NaN)),q===!1&&(q=!0,p.updateOffset(this),q=!1)}function h(t){return t instanceof G||t!=null&&t._isAMomentObject!=null}function X(t){p.suppressDeprecationWarnings===!1&&typeof console<"u"&&console.warn&&console.warn("Deprecation warning: "+t)}function t(a,s){var o=!0;return j(function(){if(p.deprecationHandler!=null&&p.deprecationHandler(null,a),o){for(var t,e,r=[],i=arguments.length,n=0;n<i;n++){if(t="",typeof arguments[n]=="object"){for(e in t+=`
[`+n+"] ",arguments[0])d(arguments[0],e)&&(t+=e+": "+arguments[0][e]+", ");t=t.slice(0,-2)}else t=arguments[n];r.push(t)}X(a+`
Arguments: `+Array.prototype.slice.call(r).join("")+`
`+(new Error).stack),o=!1}return s.apply(this,arguments)},s)}var Z={};function Q(t,e){p.deprecationHandler!=null&&p.deprecationHandler(t,e),Z[t]||(X(e),Z[t]=!0)}function u(t){return typeof Function<"u"&&t instanceof Function||Object.prototype.toString.call(t)==="[object Function]"}function K(t,e){var r,i=j({},t);for(r in e)d(e,r)&&(R(t[r])&&R(e[r])?(i[r]={},j(i[r],t[r]),j(i[r],e[r])):e[r]!=null?i[r]=e[r]:delete i[r]);for(r in t)d(t,r)&&!d(e,r)&&R(t[r])&&(i[r]=j({},i[r]));return i}function J(t){t!=null&&this.set(t)}p.suppressDeprecationWarnings=!1,p.deprecationHandler=null;var tt=Object.keys||function(t){var e,r=[];for(e in t)d(t,e)&&r.push(e);return r};function a(t,e,r){var i=""+Math.abs(t);return(0<=t?r?"+":"":"-")+Math.pow(10,Math.max(0,e-i.length)).toString().substr(1)+i}var et=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,rt=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,it={},nt={};function i(t,e,r,i){var n=typeof i=="string"?function(){return this[i]()}:i;t&&(nt[t]=n),e&&(nt[e[0]]=function(){return a(n.apply(this,arguments),e[1],e[2])}),r&&(nt[r]=function(){return this.localeData().ordinal(n.apply(this,arguments),t)})}function at(t,e){return t.isValid()?(e=st(e,t.localeData()),it[e]=it[e]||function(i){for(var t,n=i.match(et),e=0,a=n.length;e<a;e++)nt[n[e]]?n[e]=nt[n[e]]:n[e]=(t=n[e]).match(/\[[\s\S]/)?t.replace(/^\[|\]$/g,""):t.replace(/\\/g,"");return function(t){for(var e="",r=0;r<a;r++)e+=u(n[r])?n[r].call(t,i):n[r];return e}}(e),it[e](t)):t.localeData().invalidDate()}function st(t,e){var r=5;function i(t){return e.longDateFormat(t)||t}for(rt.lastIndex=0;0<=r&&rt.test(t);)t=t.replace(rt,i),rt.lastIndex=0,--r;return t}var ot={};function e(t,e){var r=t.toLowerCase();ot[r]=ot[r+"s"]=ot[e]=t}function g(t){return typeof t=="string"?ot[t]||ot[t.toLowerCase()]:void 0}function lt(t){var e,r,i={};for(r in t)d(t,r)&&(e=g(r))&&(i[e]=t[r]);return i}var ct={};function r(t,e){ct[t]=e}function ht(t){return t%4==0&&t%100!=0||t%400==0}function y(t){return t<0?Math.ceil(t)||0:Math.floor(t)}function m(t){var t=+t,e=0;return e=t!=0&&isFinite(t)?y(t):e}function ut(e,r){return function(t){return t!=null?(pt(this,e,t),p.updateOffset(this,r),this):dt(this,e)}}function dt(t,e){return t.isValid()?t._d["get"+(t._isUTC?"UTC":"")+e]():NaN}function pt(t,e,r){t.isValid()&&!isNaN(r)&&(e==="FullYear"&&ht(t.year())&&t.month()===1&&t.date()===29?(r=m(r),t._d["set"+(t._isUTC?"UTC":"")+e](r,t.month(),Bt(r,t.month()))):t._d["set"+(t._isUTC?"UTC":"")+e](r))}var n=/\d/,b=/\d\d/,ft=/\d{3}/,gt=/\d{4}/,yt=/[+-]?\d{6}/,_=/\d\d?/,mt=/\d\d\d\d?/,bt=/\d\d\d\d\d\d?/,_t=/\d{1,3}/,xt=/\d{1,4}/,vt=/[+-]?\d{1,6}/,kt=/\d+/,wt=/[+-]?\d+/,Tt=/Z|[+-]\d\d:?\d\d/gi,Ct=/Z|[+-]\d\d(?::?\d\d)?/gi,Et=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i;function x(t,r,i){At[t]=u(r)?r:function(t,e){return t&&i?i:r}}function St(t,e){return d(At,t)?At[t](e._strict,e._locale):new RegExp(v(t.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(t,e,r,i,n){return e||r||i||n})))}function v(t){return t.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}var At={},Dt={};function k(t,r){var e,i,n=r;for(typeof t=="string"&&(t=[t]),l(r)&&(n=function(t,e){e[r]=m(t)}),i=t.length,e=0;e<i;e++)Dt[t[e]]=n}function Lt(t,n){k(t,function(t,e,r,i){r._w=r._w||{},n(t,r._w,r,i)})}var w,T=0,C=1,E=2,S=3,A=4,D=5,Mt=6,Nt=7,Ot=8;function Bt(t,e){if(isNaN(t)||isNaN(e))return NaN;var r=(e%(r=12)+r)%r;return t+=(e-r)/12,r==1?ht(t)?29:28:31-r%7%2}w=Array.prototype.indexOf||function(t){for(var e=0;e<this.length;++e)if(this[e]===t)return e;return-1},i("M",["MM",2],"Mo",function(){return this.month()+1}),i("MMM",0,0,function(t){return this.localeData().monthsShort(this,t)}),i("MMMM",0,0,function(t){return this.localeData().months(this,t)}),e("month","M"),r("month",8),x("M",_),x("MM",_,b),x("MMM",function(t,e){return e.monthsShortRegex(t)}),x("MMMM",function(t,e){return e.monthsRegex(t)}),k(["M","MM"],function(t,e){e[C]=m(t)-1}),k(["MMM","MMMM"],function(t,e,r,i){i=r._locale.monthsParse(t,i,r._strict),i!=null?e[C]=i:f(r).invalidMonth=t});var It="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),Ft="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),Rt=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,Pt=Et,$t=Et;function Yt(t,e){var r;if(t.isValid()){if(typeof e=="string")if(/^\d+$/.test(e))e=m(e);else if(!l(e=t.localeData().monthsParse(e)))return;r=Math.min(t.date(),Bt(t.year(),e)),t._d["set"+(t._isUTC?"UTC":"")+"Month"](e,r)}}function jt(t){return t!=null?(Yt(this,t),p.updateOffset(this,!0),this):dt(this,"Month")}function zt(){function t(t,e){return e.length-t.length}for(var e,r=[],i=[],n=[],a=0;a<12;a++)e=c([2e3,a]),r.push(this.monthsShort(e,"")),i.push(this.months(e,"")),n.push(this.months(e,"")),n.push(this.monthsShort(e,""));for(r.sort(t),i.sort(t),n.sort(t),a=0;a<12;a++)r[a]=v(r[a]),i[a]=v(i[a]);for(a=0;a<24;a++)n[a]=v(n[a]);this._monthsRegex=new RegExp("^("+n.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+i.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+r.join("|")+")","i")}function Ut(t){return ht(t)?366:365}i("Y",0,0,function(){var t=this.year();return t<=9999?a(t,4):"+"+t}),i(0,["YY",2],0,function(){return this.year()%100}),i(0,["YYYY",4],0,"year"),i(0,["YYYYY",5],0,"year"),i(0,["YYYYYY",6,!0],0,"year"),e("year","y"),r("year",1),x("Y",wt),x("YY",_,b),x("YYYY",xt,gt),x("YYYYY",vt,yt),x("YYYYYY",vt,yt),k(["YYYYY","YYYYYY"],T),k("YYYY",function(t,e){e[T]=t.length===2?p.parseTwoDigitYear(t):m(t)}),k("YY",function(t,e){e[T]=p.parseTwoDigitYear(t)}),k("Y",function(t,e){e[T]=parseInt(t,10)}),p.parseTwoDigitYear=function(t){return m(t)+(68<m(t)?1900:2e3)};var Wt=ut("FullYear",!0);function Ht(t,e,r,i,n,a,s){var o;return t<100&&0<=t?(o=new Date(t+400,e,r,i,n,a,s),isFinite(o.getFullYear())&&o.setFullYear(t)):o=new Date(t,e,r,i,n,a,s),o}function qt(t){var e;return t<100&&0<=t?((e=Array.prototype.slice.call(arguments))[0]=t+400,e=new Date(Date.UTC.apply(null,e)),isFinite(e.getUTCFullYear())&&e.setUTCFullYear(t)):e=new Date(Date.UTC.apply(null,arguments)),e}function Vt(t,e,r){return r=7+e-r,r-(7+qt(t,0,r).getUTCDay()-e)%7-1}function Gt(t,e,r,i,n){var a,e=1+7*(e-1)+(7+r-i)%7+Vt(t,i,n),r=e<=0?Ut(a=t-1)+e:e>Ut(t)?(a=t+1,e-Ut(t)):(a=t,e);return{year:a,dayOfYear:r}}function Xt(t,e,r){var i,n,a=Vt(t.year(),e,r),a=Math.floor((t.dayOfYear()-a-1)/7)+1;return a<1?i=a+L(n=t.year()-1,e,r):a>L(t.year(),e,r)?(i=a-L(t.year(),e,r),n=t.year()+1):(n=t.year(),i=a),{week:i,year:n}}function L(t,e,r){var i=Vt(t,e,r),e=Vt(t+1,e,r);return(Ut(t)-i+e)/7}function Zt(t,e){return t.slice(e,7).concat(t.slice(0,e))}i("w",["ww",2],"wo","week"),i("W",["WW",2],"Wo","isoWeek"),e("week","w"),e("isoWeek","W"),r("week",5),r("isoWeek",5),x("w",_),x("ww",_,b),x("W",_),x("WW",_,b),Lt(["w","ww","W","WW"],function(t,e,r,i){e[i.substr(0,1)]=m(t)}),i("d",0,"do","day"),i("dd",0,0,function(t){return this.localeData().weekdaysMin(this,t)}),i("ddd",0,0,function(t){return this.localeData().weekdaysShort(this,t)}),i("dddd",0,0,function(t){return this.localeData().weekdays(this,t)}),i("e",0,0,"weekday"),i("E",0,0,"isoWeekday"),e("day","d"),e("weekday","e"),e("isoWeekday","E"),r("day",11),r("weekday",11),r("isoWeekday",11),x("d",_),x("e",_),x("E",_),x("dd",function(t,e){return e.weekdaysMinRegex(t)}),x("ddd",function(t,e){return e.weekdaysShortRegex(t)}),x("dddd",function(t,e){return e.weekdaysRegex(t)}),Lt(["dd","ddd","dddd"],function(t,e,r,i){i=r._locale.weekdaysParse(t,i,r._strict),i!=null?e.d=i:f(r).invalidWeekday=t}),Lt(["d","e","E"],function(t,e,r,i){e[i]=m(t)});var Qt="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),Kt="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),Jt="Su_Mo_Tu_We_Th_Fr_Sa".split("_"),te=Et,ee=Et,re=Et;function ie(){function t(t,e){return e.length-t.length}for(var e,r,i,n=[],a=[],s=[],o=[],l=0;l<7;l++)i=c([2e3,1]).day(l),e=v(this.weekdaysMin(i,"")),r=v(this.weekdaysShort(i,"")),i=v(this.weekdays(i,"")),n.push(e),a.push(r),s.push(i),o.push(e),o.push(r),o.push(i);n.sort(t),a.sort(t),s.sort(t),o.sort(t),this._weekdaysRegex=new RegExp("^("+o.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+s.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+a.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+n.join("|")+")","i")}function ne(){return this.hours()%12||12}function ae(t,e){i(t,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),e)})}function se(t,e){return e._meridiemParse}i("H",["HH",2],0,"hour"),i("h",["hh",2],0,ne),i("k",["kk",2],0,function(){return this.hours()||24}),i("hmm",0,0,function(){return""+ne.apply(this)+a(this.minutes(),2)}),i("hmmss",0,0,function(){return""+ne.apply(this)+a(this.minutes(),2)+a(this.seconds(),2)}),i("Hmm",0,0,function(){return""+this.hours()+a(this.minutes(),2)}),i("Hmmss",0,0,function(){return""+this.hours()+a(this.minutes(),2)+a(this.seconds(),2)}),ae("a",!0),ae("A",!1),e("hour","h"),r("hour",13),x("a",se),x("A",se),x("H",_),x("h",_),x("k",_),x("HH",_,b),x("hh",_,b),x("kk",_,b),x("hmm",mt),x("hmmss",bt),x("Hmm",mt),x("Hmmss",bt),k(["H","HH"],S),k(["k","kk"],function(t,e,r){t=m(t),e[S]=t===24?0:t}),k(["a","A"],function(t,e,r){r._isPm=r._locale.isPM(t),r._meridiem=t}),k(["h","hh"],function(t,e,r){e[S]=m(t),f(r).bigHour=!0}),k("hmm",function(t,e,r){var i=t.length-2;e[S]=m(t.substr(0,i)),e[A]=m(t.substr(i)),f(r).bigHour=!0}),k("hmmss",function(t,e,r){var i=t.length-4,n=t.length-2;e[S]=m(t.substr(0,i)),e[A]=m(t.substr(i,2)),e[D]=m(t.substr(n)),f(r).bigHour=!0}),k("Hmm",function(t,e,r){var i=t.length-2;e[S]=m(t.substr(0,i)),e[A]=m(t.substr(i))}),k("Hmmss",function(t,e,r){var i=t.length-4,n=t.length-2;e[S]=m(t.substr(0,i)),e[A]=m(t.substr(i,2)),e[D]=m(t.substr(n))});var Et=ut("Hours",!0),oe,le={calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},longDateFormat:{LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},invalidDate:"Invalid date",ordinal:"%d",dayOfMonthOrdinalParse:/\d{1,2}/,relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",w:"a week",ww:"%d weeks",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},months:It,monthsShort:Ft,week:{dow:0,doy:6},weekdays:Qt,weekdaysMin:Jt,weekdaysShort:Kt,meridiemParse:/[ap]\.?m?\.?/i},M={},ce={};function he(t){return t&&t.toLowerCase().replace("_","-")}function ue(t){for(var e,r,i,n,a=0;a<t.length;){for(e=(n=he(t[a]).split("-")).length,r=(r=he(t[a+1]))?r.split("-"):null;0<e;){if(i=de(n.slice(0,e).join("-")))return i;if(r&&r.length>=e&&function(t,e){for(var r=Math.min(t.length,e.length),i=0;i<r;i+=1)if(t[i]!==e[i])return i;return r}(n,r)>=e-1)break;e--}a++}return oe}function de(t){var e;if(M[t]===void 0&&!0&&Mr&&Mr.exports&&t.match("^[^/\\\\]*$")!=null)try{e=oe._abbr,Lr("./locale/"+t),pe(e)}catch{M[t]=null}return M[t]}function pe(t,e){return t&&((e=o(e)?N(t):fe(t,e))?oe=e:typeof console<"u"&&console.warn&&console.warn("Locale "+t+" not found. Did you forget to load it?")),oe._abbr}function fe(t,e){if(e===null)return delete M[t],null;var r,i=le;if(e.abbr=t,M[t]!=null)Q("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),i=M[t]._config;else if(e.parentLocale!=null)if(M[e.parentLocale]!=null)i=M[e.parentLocale]._config;else{if((r=de(e.parentLocale))==null)return ce[e.parentLocale]||(ce[e.parentLocale]=[]),ce[e.parentLocale].push({name:t,config:e}),null;i=r._config}return M[t]=new J(K(i,e)),ce[t]&&ce[t].forEach(function(t){fe(t.name,t.config)}),pe(t),M[t]}function N(t){var e;if(!(t=t&&t._locale&&t._locale._abbr?t._locale._abbr:t))return oe;if(!s(t)){if(e=de(t))return e;t=[t]}return ue(t)}function ge(t){var e=t._a;return e&&f(t).overflow===-2&&(e=e[C]<0||11<e[C]?C:e[E]<1||e[E]>Bt(e[T],e[C])?E:e[S]<0||24<e[S]||e[S]===24&&(e[A]!==0||e[D]!==0||e[Mt]!==0)?S:e[A]<0||59<e[A]?A:e[D]<0||59<e[D]?D:e[Mt]<0||999<e[Mt]?Mt:-1,f(t)._overflowDayOfYear&&(e<T||E<e)&&(e=E),f(t)._overflowWeeks&&e===-1&&(e=Nt),f(t)._overflowWeekday&&e===-1&&(e=Ot),f(t).overflow=e),t}var ye=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,me=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d|))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,be=/Z|[+-]\d\d(?::?\d\d)?/,_e=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/],["YYYYMM",/\d{6}/,!1],["YYYY",/\d{4}/,!1]],xe=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],ve=/^\/?Date\((-?\d+)/i,ke=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/,we={UT:0,GMT:0,EDT:-240,EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480};function Te(t){var e,r,i,n,a,s,o=t._i,l=ye.exec(o)||me.exec(o),o=_e.length,c=xe.length;if(l){for(f(t).iso=!0,e=0,r=o;e<r;e++)if(_e[e][1].exec(l[1])){n=_e[e][0],i=_e[e][2]!==!1;break}if(n==null)t._isValid=!1;else{if(l[3]){for(e=0,r=c;e<r;e++)if(xe[e][1].exec(l[3])){a=(l[2]||" ")+xe[e][0];break}if(a==null)return void(t._isValid=!1)}if(i||a==null){if(l[4]){if(!be.exec(l[4]))return void(t._isValid=!1);s="Z"}t._f=n+(a||"")+(s||""),De(t)}else t._isValid=!1}}else t._isValid=!1}function Ce(t,e,r,i,n,a){return t=[function(t){t=parseInt(t,10);{if(t<=49)return 2e3+t;if(t<=999)return 1900+t}return t}(t),Ft.indexOf(e),parseInt(r,10),parseInt(i,10),parseInt(n,10)],a&&t.push(parseInt(a,10)),t}function Ee(t){var e,r,i,n,a=ke.exec(t._i.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").replace(/^\s\s*/,"").replace(/\s\s*$/,""));a?(e=Ce(a[4],a[3],a[2],a[5],a[6],a[7]),r=a[1],i=e,n=t,r&&Kt.indexOf(r)!==new Date(i[0],i[1],i[2]).getDay()?(f(n).weekdayMismatch=!0,n._isValid=!1):(t._a=e,t._tzm=(r=a[8],i=a[9],n=a[10],r?we[r]:i?0:60*(((r=parseInt(n,10))-(i=r%100))/100)+i),t._d=qt.apply(null,t._a),t._d.setUTCMinutes(t._d.getUTCMinutes()-t._tzm),f(t).rfc2822=!0)):t._isValid=!1}function Se(t,e,r){return t!=null?t:e!=null?e:r}function Ae(t){var e,r,i,n,a,s,o,l,c,h,u,d=[];if(!t._d){for(i=t,n=new Date(p.now()),r=i._useUTC?[n.getUTCFullYear(),n.getUTCMonth(),n.getUTCDate()]:[n.getFullYear(),n.getMonth(),n.getDate()],t._w&&t._a[E]==null&&t._a[C]==null&&((n=(i=t)._w).GG!=null||n.W!=null||n.E!=null?(l=1,c=4,a=Se(n.GG,i._a[T],Xt(O(),1,4).year),s=Se(n.W,1),((o=Se(n.E,1))<1||7<o)&&(h=!0)):(l=i._locale._week.dow,c=i._locale._week.doy,u=Xt(O(),l,c),a=Se(n.gg,i._a[T],u.year),s=Se(n.w,u.week),n.d!=null?((o=n.d)<0||6<o)&&(h=!0):n.e!=null?(o=n.e+l,(n.e<0||6<n.e)&&(h=!0)):o=l),s<1||s>L(a,l,c)?f(i)._overflowWeeks=!0:h!=null?f(i)._overflowWeekday=!0:(u=Gt(a,s,o,l,c),i._a[T]=u.year,i._dayOfYear=u.dayOfYear)),t._dayOfYear!=null&&(n=Se(t._a[T],r[T]),(t._dayOfYear>Ut(n)||t._dayOfYear===0)&&(f(t)._overflowDayOfYear=!0),h=qt(n,0,t._dayOfYear),t._a[C]=h.getUTCMonth(),t._a[E]=h.getUTCDate()),e=0;e<3&&t._a[e]==null;++e)t._a[e]=d[e]=r[e];for(;e<7;e++)t._a[e]=d[e]=t._a[e]==null?e===2?1:0:t._a[e];t._a[S]===24&&t._a[A]===0&&t._a[D]===0&&t._a[Mt]===0&&(t._nextDay=!0,t._a[S]=0),t._d=(t._useUTC?qt:Ht).apply(null,d),a=t._useUTC?t._d.getUTCDay():t._d.getDay(),t._tzm!=null&&t._d.setUTCMinutes(t._d.getUTCMinutes()-t._tzm),t._nextDay&&(t._a[S]=24),t._w&&t._w.d!==void 0&&t._w.d!==a&&(f(t).weekdayMismatch=!0)}}function De(t){if(t._f===p.ISO_8601)Te(t);else if(t._f===p.RFC_2822)Ee(t);else{t._a=[],f(t).empty=!0;for(var e,r,i,n,a,s=""+t._i,o=s.length,l=0,c=st(t._f,t._locale).match(et)||[],h=c.length,u=0;u<h;u++)r=c[u],(e=(s.match(St(r,t))||[])[0])&&(0<(i=s.substr(0,s.indexOf(e))).length&&f(t).unusedInput.push(i),s=s.slice(s.indexOf(e)+e.length),l+=e.length),nt[r]?(e?f(t).empty=!1:f(t).unusedTokens.push(r),i=r,a=t,(n=e)!=null&&d(Dt,i)&&Dt[i](n,a._a,a,i)):t._strict&&!e&&f(t).unusedTokens.push(r);f(t).charsLeftOver=o-l,0<s.length&&f(t).unusedInput.push(s),t._a[S]<=12&&f(t).bigHour===!0&&0<t._a[S]&&(f(t).bigHour=void 0),f(t).parsedDateParts=t._a.slice(0),f(t).meridiem=t._meridiem,t._a[S]=function(t,e,r){return r==null?e:t.meridiemHour!=null?t.meridiemHour(e,r):t.isPM!=null?((t=t.isPM(r))&&e<12&&(e+=12),e=t||e!==12?e:0):e}(t._locale,t._a[S],t._meridiem),(o=f(t).era)!==null&&(t._a[T]=t._locale.erasConvertYear(o,t._a[T])),Ae(t),ge(t)}}function Le(t){var e,r,i,n=t._i,a=t._f;return t._locale=t._locale||N(t._l),n===null||a===void 0&&n===""?U({nullInput:!0}):(typeof n=="string"&&(t._i=n=t._locale.preparse(n)),h(n)?new G(ge(n)):($(n)?t._d=n:s(a)?function(t){var e,r,i,n,a,s,o=!1,l=t._f.length;if(l===0)return f(t).invalidFormat=!0,t._d=new Date(NaN);for(n=0;n<l;n++)a=0,s=!1,e=V({},t),t._useUTC!=null&&(e._useUTC=t._useUTC),e._f=t._f[n],De(e),z(e)&&(s=!0),a=(a+=f(e).charsLeftOver)+10*f(e).unusedTokens.length,f(e).score=a,o?a<i&&(i=a,r=e):(i==null||a<i||s)&&(i=a,r=e,s&&(o=!0));j(t,r||e)}(t):a?De(t):o(a=(n=t)._i)?n._d=new Date(p.now()):$(a)?n._d=new Date(a.valueOf()):typeof a=="string"?(r=n,(e=ve.exec(r._i))!==null?r._d=new Date(+e[1]):(Te(r),r._isValid===!1&&(delete r._isValid,Ee(r),r._isValid===!1&&(delete r._isValid,r._strict?r._isValid=!1:p.createFromInputFallback(r))))):s(a)?(n._a=Y(a.slice(0),function(t){return parseInt(t,10)}),Ae(n)):R(a)?(e=n)._d||(i=(r=lt(e._i)).day===void 0?r.date:r.day,e._a=Y([r.year,r.month,i,r.hour,r.minute,r.second,r.millisecond],function(t){return t&&parseInt(t,10)}),Ae(e)):l(a)?n._d=new Date(a):p.createFromInputFallback(n),z(t)||(t._d=null),t))}function Me(t,e,r,i,n){var a={};return e!==!0&&e!==!1||(i=e,e=void 0),r!==!0&&r!==!1||(i=r,r=void 0),(R(t)&&P(t)||s(t)&&t.length===0)&&(t=void 0),a._isAMomentObject=!0,a._useUTC=a._isUTC=n,a._l=r,a._i=t,a._f=e,a._strict=i,(n=new G(ge(Le(n=a))))._nextDay&&(n.add(1,"d"),n._nextDay=void 0),n}function O(t,e,r,i){return Me(t,e,r,i,!1)}function Ne(t,e){var r,i;if(!(e=e.length===1&&s(e[0])?e[0]:e).length)return O();for(r=e[0],i=1;i<e.length;++i)e[i].isValid()&&!e[i][t](r)||(r=e[i]);return r}p.createFromInputFallback=t("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",function(t){t._d=new Date(t._i+(t._useUTC?" UTC":""))}),p.ISO_8601=function(){},p.RFC_2822=function(){};var mt=t("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var t=O.apply(null,arguments);return this.isValid()&&t.isValid()?t<this?this:t:U()}),bt=t("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var t=O.apply(null,arguments);return this.isValid()&&t.isValid()?this<t?this:t:U()}),Oe=["year","quarter","month","week","day","hour","minute","second","millisecond"];function Be(t){var t=lt(t),e=t.year||0,r=t.quarter||0,i=t.month||0,n=t.week||t.isoWeek||0,a=t.day||0,s=t.hour||0,o=t.minute||0,l=t.second||0,c=t.millisecond||0;this._isValid=function(t){var e,r,i=!1,n=Oe.length;for(e in t)if(d(t,e)&&(w.call(Oe,e)===-1||t[e]!=null&&isNaN(t[e])))return!1;for(r=0;r<n;++r)if(t[Oe[r]]){if(i)return!1;parseFloat(t[Oe[r]])!==m(t[Oe[r]])&&(i=!0)}return!0}(t),this._milliseconds=+c+1e3*l+6e4*o+1e3*s*60*60,this._days=+a+7*n,this._months=+i+3*r+12*e,this._data={},this._locale=N(),this._bubble()}function Ie(t){return t instanceof Be}function Fe(t){return t<0?-1*Math.round(-1*t):Math.round(t)}function Re(t,r){i(t,0,0,function(){var t=this.utcOffset(),e="+";return t<0&&(t=-t,e="-"),e+a(~~(t/60),2)+r+a(~~t%60,2)})}Re("Z",":"),Re("ZZ",""),x("Z",Ct),x("ZZ",Ct),k(["Z","ZZ"],function(t,e,r){r._useUTC=!0,r._tzm=$e(Ct,t)});var Pe=/([\+\-]|\d\d)/gi;function $e(t,e){var e=(e||"").match(t);return e===null?null:(e=60*(t=((e[e.length-1]||[])+"").match(Pe)||["-",0,0])[1]+m(t[2]))===0?0:t[0]==="+"?e:-e}function Ye(t,e){var r;return e._isUTC?(e=e.clone(),r=(h(t)||$(t)?t:O(t)).valueOf()-e.valueOf(),e._d.setTime(e._d.valueOf()+r),p.updateOffset(e,!1),e):O(t).local()}function je(t){return-Math.round(t._d.getTimezoneOffset())}function ze(){return!!this.isValid()&&this._isUTC&&this._offset===0}p.updateOffset=function(){};var Ue=/^(-|\+)?(?:(\d*)[. ])?(\d+):(\d+)(?::(\d+)(\.\d*)?)?$/,We=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;function B(t,e){var r,i=t,n=null;return Ie(t)?i={ms:t._milliseconds,d:t._days,M:t._months}:l(t)||!isNaN(+t)?(i={},e?i[e]=+t:i.milliseconds=+t):(n=Ue.exec(t))?(r=n[1]==="-"?-1:1,i={y:0,d:m(n[E])*r,h:m(n[S])*r,m:m(n[A])*r,s:m(n[D])*r,ms:m(Fe(1e3*n[Mt]))*r}):(n=We.exec(t))?(r=n[1]==="-"?-1:1,i={y:He(n[2],r),M:He(n[3],r),w:He(n[4],r),d:He(n[5],r),h:He(n[6],r),m:He(n[7],r),s:He(n[8],r)}):i==null?i={}:typeof i=="object"&&("from"in i||"to"in i)&&(e=function(t,e){var r;return!t.isValid()||!e.isValid()?{milliseconds:0,months:0}:(e=Ye(e,t),t.isBefore(e)?r=qe(t,e):((r=qe(e,t)).milliseconds=-r.milliseconds,r.months=-r.months),r)}(O(i.from),O(i.to)),(i={}).ms=e.milliseconds,i.M=e.months),n=new Be(i),Ie(t)&&d(t,"_locale")&&(n._locale=t._locale),Ie(t)&&d(t,"_isValid")&&(n._isValid=t._isValid),n}function He(t,e){return t=t&&parseFloat(t.replace(",",".")),(isNaN(t)?0:t)*e}function qe(t,e){var r={};return r.months=e.month()-t.month()+12*(e.year()-t.year()),t.clone().add(r.months,"M").isAfter(e)&&--r.months,r.milliseconds=+e-+t.clone().add(r.months,"M"),r}function Ve(i,n){return function(t,e){var r;return e===null||isNaN(+e)||(Q(n,"moment()."+n+"(period, number) is deprecated. Please use moment()."+n+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),r=t,t=e,e=r),Ge(this,B(t,e),i),this}}function Ge(t,e,r,i){var n=e._milliseconds,a=Fe(e._days),e=Fe(e._months);t.isValid()&&(i=i==null||i,e&&Yt(t,dt(t,"Month")+e*r),a&&pt(t,"Date",dt(t,"Date")+a*r),n&&t._d.setTime(t._d.valueOf()+n*r),i&&p.updateOffset(t,a||e))}function Xe(t){return typeof t=="string"||t instanceof String}function Ze(t){return h(t)||$(t)||Xe(t)||l(t)||function(e){var t=s(e),r=!1;return t&&(r=e.filter(function(t){return!l(t)&&Xe(e)}).length===0),t&&r}(t)||function(t){var e,r,i=R(t)&&!P(t),n=!1,a=["years","year","y","months","month","M","days","day","d","dates","date","D","hours","hour","h","minutes","minute","m","seconds","second","s","milliseconds","millisecond","ms"],s=a.length;for(e=0;e<s;e+=1)r=a[e],n=n||d(t,r);return i&&n}(t)||t==null}function Qe(t,e){if(t.date()<e.date())return-Qe(e,t);var r=12*(e.year()-t.year())+(e.month()-t.month()),i=t.clone().add(r,"months"),e=e-i<0?(e-i)/(i-t.clone().add(r-1,"months")):(e-i)/(t.clone().add(1+r,"months")-i);return-(r+e)||0}function Ke(t){return t===void 0?this._locale._abbr:((t=N(t))!=null&&(this._locale=t),this)}function Je(){return this._locale}B.fn=Be.prototype,B.invalid=function(){return B(NaN)},It=Ve(1,"add"),Qt=Ve(-1,"subtract"),p.defaultFormat="YYYY-MM-DDTHH:mm:ssZ",p.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";var Jt=t("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(t){return t===void 0?this.localeData():this.locale(t)}),tr=126227808e5;function er(t,e){return(t%e+e)%e}function rr(t,e,r){return t<100&&0<=t?new Date(t+400,e,r)-tr:new Date(t,e,r).valueOf()}function ir(t,e,r){return t<100&&0<=t?Date.UTC(t+400,e,r)-tr:Date.UTC(t,e,r)}function nr(t,e){return e.erasAbbrRegex(t)}function ar(){for(var t=[],e=[],r=[],i=[],n=this.eras(),a=0,s=n.length;a<s;++a)e.push(v(n[a].name)),t.push(v(n[a].abbr)),r.push(v(n[a].narrow)),i.push(v(n[a].name)),i.push(v(n[a].abbr)),i.push(v(n[a].narrow));this._erasRegex=new RegExp("^("+i.join("|")+")","i"),this._erasNameRegex=new RegExp("^("+e.join("|")+")","i"),this._erasAbbrRegex=new RegExp("^("+t.join("|")+")","i"),this._erasNarrowRegex=new RegExp("^("+r.join("|")+")","i")}function sr(t,e){i(0,[t,t.length],0,e)}function or(t,e,r,i,n){var a;return t==null?Xt(this,i,n).year:(a=L(t,i,n),function(t,e,r,i,n){return t=Gt(t,e,r,i,n),e=qt(t.year,0,t.dayOfYear),this.year(e.getUTCFullYear()),this.month(e.getUTCMonth()),this.date(e.getUTCDate()),this}.call(this,t,e=a<e?a:e,r,i,n))}i("N",0,0,"eraAbbr"),i("NN",0,0,"eraAbbr"),i("NNN",0,0,"eraAbbr"),i("NNNN",0,0,"eraName"),i("NNNNN",0,0,"eraNarrow"),i("y",["y",1],"yo","eraYear"),i("y",["yy",2],0,"eraYear"),i("y",["yyy",3],0,"eraYear"),i("y",["yyyy",4],0,"eraYear"),x("N",nr),x("NN",nr),x("NNN",nr),x("NNNN",function(t,e){return e.erasNameRegex(t)}),x("NNNNN",function(t,e){return e.erasNarrowRegex(t)}),k(["N","NN","NNN","NNNN","NNNNN"],function(t,e,r,i){i=r._locale.erasParse(t,i,r._strict),i?f(r).era=i:f(r).invalidEra=t}),x("y",kt),x("yy",kt),x("yyy",kt),x("yyyy",kt),x("yo",function(t,e){return e._eraYearOrdinalRegex||kt}),k(["y","yy","yyy","yyyy"],T),k(["yo"],function(t,e,r,i){var n;r._locale._eraYearOrdinalRegex&&(n=t.match(r._locale._eraYearOrdinalRegex)),r._locale.eraYearOrdinalParse?e[T]=r._locale.eraYearOrdinalParse(t,n):e[T]=parseInt(t,10)}),i(0,["gg",2],0,function(){return this.weekYear()%100}),i(0,["GG",2],0,function(){return this.isoWeekYear()%100}),sr("gggg","weekYear"),sr("ggggg","weekYear"),sr("GGGG","isoWeekYear"),sr("GGGGG","isoWeekYear"),e("weekYear","gg"),e("isoWeekYear","GG"),r("weekYear",1),r("isoWeekYear",1),x("G",wt),x("g",wt),x("GG",_,b),x("gg",_,b),x("GGGG",xt,gt),x("gggg",xt,gt),x("GGGGG",vt,yt),x("ggggg",vt,yt),Lt(["gggg","ggggg","GGGG","GGGGG"],function(t,e,r,i){e[i.substr(0,2)]=m(t)}),Lt(["gg","GG"],function(t,e,r,i){e[i]=p.parseTwoDigitYear(t)}),i("Q",0,"Qo","quarter"),e("quarter","Q"),r("quarter",7),x("Q",n),k("Q",function(t,e){e[C]=3*(m(t)-1)}),i("D",["DD",2],"Do","date"),e("date","D"),r("date",9),x("D",_),x("DD",_,b),x("Do",function(t,e){return t?e._dayOfMonthOrdinalParse||e._ordinalParse:e._dayOfMonthOrdinalParseLenient}),k(["D","DD"],E),k("Do",function(t,e){e[E]=m(t.match(_)[0])}),xt=ut("Date",!0),i("DDD",["DDDD",3],"DDDo","dayOfYear"),e("dayOfYear","DDD"),r("dayOfYear",4),x("DDD",_t),x("DDDD",ft),k(["DDD","DDDD"],function(t,e,r){r._dayOfYear=m(t)}),i("m",["mm",2],0,"minute"),e("minute","m"),r("minute",14),x("m",_),x("mm",_,b),k(["m","mm"],A);var lr,gt=ut("Minutes",!1),vt=(i("s",["ss",2],0,"second"),e("second","s"),r("second",15),x("s",_),x("ss",_,b),k(["s","ss"],D),ut("Seconds",!1));for(i("S",0,0,function(){return~~(this.millisecond()/100)}),i(0,["SS",2],0,function(){return~~(this.millisecond()/10)}),i(0,["SSS",3],0,"millisecond"),i(0,["SSSS",4],0,function(){return 10*this.millisecond()}),i(0,["SSSSS",5],0,function(){return 100*this.millisecond()}),i(0,["SSSSSS",6],0,function(){return 1e3*this.millisecond()}),i(0,["SSSSSSS",7],0,function(){return 1e4*this.millisecond()}),i(0,["SSSSSSSS",8],0,function(){return 1e5*this.millisecond()}),i(0,["SSSSSSSSS",9],0,function(){return 1e6*this.millisecond()}),e("millisecond","ms"),r("millisecond",16),x("S",_t,n),x("SS",_t,b),x("SSS",_t,ft),lr="SSSS";lr.length<=9;lr+="S")x(lr,kt);function cr(t,e){e[Mt]=m(1e3*("0."+t))}for(lr="S";lr.length<=9;lr+="S")k(lr,cr);function hr(t){return t}function ur(t,e,r,i){var n=N(),i=c().set(i,e);return n[r](i,t)}function dr(t,e,r){if(l(t)&&(e=t,t=void 0),t=t||"",e!=null)return ur(t,e,r,"month");for(var i=[],n=0;n<12;n++)i[n]=ur(t,n,r,"month");return i}function pr(t,e,r,i){e=(typeof t=="boolean"?l(e)&&(r=e,e=void 0):(e=t,t=!1,l(r=e)&&(r=e,e=void 0)),e||"");var n,a=N(),s=t?a._week.dow:0,o=[];if(r!=null)return ur(e,(r+s)%7,i,"day");for(n=0;n<7;n++)o[n]=ur(e,(n+s)%7,i,"day");return o}yt=ut("Milliseconds",!1),i("z",0,0,"zoneAbbr"),i("zz",0,0,"zoneName"),(n=G.prototype).add=It,n.calendar=function(t,e){arguments.length===1&&(arguments[0]?Ze(arguments[0])?(t=arguments[0],e=void 0):function(t){for(var e=R(t)&&!P(t),r=!1,i=["sameDay","nextDay","lastDay","nextWeek","lastWeek","sameElse"],n=0;n<i.length;n+=1)r=r||d(t,i[n]);return e&&r}(arguments[0])&&(e=arguments[0],t=void 0):e=t=void 0);var t=t||O(),r=Ye(t,this).startOf("day"),r=p.calendarFormat(this,r)||"sameElse",e=e&&(u(e[r])?e[r].call(this,t):e[r]);return this.format(e||this.localeData().calendar(r,this,O(t)))},n.clone=function(){return new G(this)},n.diff=function(t,e,r){var i,n,a;if(!this.isValid())return NaN;if(!(i=Ye(t,this)).isValid())return NaN;switch(n=6e4*(i.utcOffset()-this.utcOffset()),e=g(e)){case"year":a=Qe(this,i)/12;break;case"month":a=Qe(this,i);break;case"quarter":a=Qe(this,i)/3;break;case"second":a=(this-i)/1e3;break;case"minute":a=(this-i)/6e4;break;case"hour":a=(this-i)/36e5;break;case"day":a=(this-i-n)/864e5;break;case"week":a=(this-i-n)/6048e5;break;default:a=this-i}return r?a:y(a)},n.endOf=function(t){var e,r;if((t=g(t))===void 0||t==="millisecond"||!this.isValid())return this;switch(r=this._isUTC?ir:rr,t){case"year":e=r(this.year()+1,0,1)-1;break;case"quarter":e=r(this.year(),this.month()-this.month()%3+3,1)-1;break;case"month":e=r(this.year(),this.month()+1,1)-1;break;case"week":e=r(this.year(),this.month(),this.date()-this.weekday()+7)-1;break;case"isoWeek":e=r(this.year(),this.month(),this.date()-(this.isoWeekday()-1)+7)-1;break;case"day":case"date":e=r(this.year(),this.month(),this.date()+1)-1;break;case"hour":e=this._d.valueOf(),e+=36e5-er(e+(this._isUTC?0:6e4*this.utcOffset()),36e5)-1;break;case"minute":e=this._d.valueOf(),e+=6e4-er(e,6e4)-1;break;case"second":e=this._d.valueOf(),e+=1e3-er(e,1e3)-1;break}return this._d.setTime(e),p.updateOffset(this,!0),this},n.format=function(t){return t=t||(this.isUtc()?p.defaultFormatUtc:p.defaultFormat),t=at(this,t),this.localeData().postformat(t)},n.from=function(t,e){return this.isValid()&&(h(t)&&t.isValid()||O(t).isValid())?B({to:this,from:t}).locale(this.locale()).humanize(!e):this.localeData().invalidDate()},n.fromNow=function(t){return this.from(O(),t)},n.to=function(t,e){return this.isValid()&&(h(t)&&t.isValid()||O(t).isValid())?B({from:this,to:t}).locale(this.locale()).humanize(!e):this.localeData().invalidDate()},n.toNow=function(t){return this.to(O(),t)},n.get=function(t){return u(this[t=g(t)])?this[t]():this},n.invalidAt=function(){return f(this).overflow},n.isAfter=function(t,e){return t=h(t)?t:O(t),!(!this.isValid()||!t.isValid())&&((e=g(e)||"millisecond")==="millisecond"?this.valueOf()>t.valueOf():t.valueOf()<this.clone().startOf(e).valueOf())},n.isBefore=function(t,e){return t=h(t)?t:O(t),!(!this.isValid()||!t.isValid())&&((e=g(e)||"millisecond")==="millisecond"?this.valueOf()<t.valueOf():this.clone().endOf(e).valueOf()<t.valueOf())},n.isBetween=function(t,e,r,i){return t=h(t)?t:O(t),e=h(e)?e:O(e),!!(this.isValid()&&t.isValid()&&e.isValid())&&((i=i||"()")[0]==="("?this.isAfter(t,r):!this.isBefore(t,r))&&(i[1]===")"?this.isBefore(e,r):!this.isAfter(e,r))},n.isSame=function(t,e){var t=h(t)?t:O(t);return!(!this.isValid()||!t.isValid())&&((e=g(e)||"millisecond")==="millisecond"?this.valueOf()===t.valueOf():(t=t.valueOf(),this.clone().startOf(e).valueOf()<=t&&t<=this.clone().endOf(e).valueOf()))},n.isSameOrAfter=function(t,e){return this.isSame(t,e)||this.isAfter(t,e)},n.isSameOrBefore=function(t,e){return this.isSame(t,e)||this.isBefore(t,e)},n.isValid=function(){return z(this)},n.lang=Jt,n.locale=Ke,n.localeData=Je,n.max=bt,n.min=mt,n.parsingFlags=function(){return j({},f(this))},n.set=function(t,e){if(typeof t=="object")for(var r=function(t){var e,r=[];for(e in t)d(t,e)&&r.push({unit:e,priority:ct[e]});return r.sort(function(t,e){return t.priority-e.priority}),r}(t=lt(t)),i=r.length,n=0;n<i;n++)this[r[n].unit](t[r[n].unit]);else if(u(this[t=g(t)]))return this[t](e);return this},n.startOf=function(t){var e,r;if((t=g(t))===void 0||t==="millisecond"||!this.isValid())return this;switch(r=this._isUTC?ir:rr,t){case"year":e=r(this.year(),0,1);break;case"quarter":e=r(this.year(),this.month()-this.month()%3,1);break;case"month":e=r(this.year(),this.month(),1);break;case"week":e=r(this.year(),this.month(),this.date()-this.weekday());break;case"isoWeek":e=r(this.year(),this.month(),this.date()-(this.isoWeekday()-1));break;case"day":case"date":e=r(this.year(),this.month(),this.date());break;case"hour":e=this._d.valueOf(),e-=er(e+(this._isUTC?0:6e4*this.utcOffset()),36e5);break;case"minute":e=this._d.valueOf(),e-=er(e,6e4);break;case"second":e=this._d.valueOf(),e-=er(e,1e3);break}return this._d.setTime(e),p.updateOffset(this,!0),this},n.subtract=Qt,n.toArray=function(){var t=this;return[t.year(),t.month(),t.date(),t.hour(),t.minute(),t.second(),t.millisecond()]},n.toObject=function(){var t=this;return{years:t.year(),months:t.month(),date:t.date(),hours:t.hours(),minutes:t.minutes(),seconds:t.seconds(),milliseconds:t.milliseconds()}},n.toDate=function(){return new Date(this.valueOf())},n.toISOString=function(t){if(!this.isValid())return null;var e=(t=t!==!0)?this.clone().utc():this;return e.year()<0||9999<e.year()?at(e,t?"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYYYY-MM-DD[T]HH:mm:ss.SSSZ"):u(Date.prototype.toISOString)?t?this.toDate().toISOString():new Date(this.valueOf()+60*this.utcOffset()*1e3).toISOString().replace("Z",at(e,"Z")):at(e,t?"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYY-MM-DD[T]HH:mm:ss.SSSZ")},n.inspect=function(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var t,e="moment",r="";return this.isLocal()||(e=this.utcOffset()===0?"moment.utc":"moment.parseZone",r="Z"),e="["+e+'("]',t=0<=this.year()&&this.year()<=9999?"YYYY":"YYYYYY",this.format(e+t+"-MM-DD[T]HH:mm:ss.SSS"+(r+'[")]'))},typeof Symbol<"u"&&Symbol.for!=null&&(n[Symbol.for("nodejs.util.inspect.custom")]=function(){return"Moment<"+this.format()+">"}),n.toJSON=function(){return this.isValid()?this.toISOString():null},n.toString=function(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")},n.unix=function(){return Math.floor(this.valueOf()/1e3)},n.valueOf=function(){return this._d.valueOf()-6e4*(this._offset||0)},n.creationData=function(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}},n.eraName=function(){for(var t,e=this.localeData().eras(),r=0,i=e.length;r<i;++r)if(t=this.clone().startOf("day").valueOf(),e[r].since<=t&&t<=e[r].until||e[r].until<=t&&t<=e[r].since)return e[r].name;return""},n.eraNarrow=function(){for(var t,e=this.localeData().eras(),r=0,i=e.length;r<i;++r)if(t=this.clone().startOf("day").valueOf(),e[r].since<=t&&t<=e[r].until||e[r].until<=t&&t<=e[r].since)return e[r].narrow;return""},n.eraAbbr=function(){for(var t,e=this.localeData().eras(),r=0,i=e.length;r<i;++r)if(t=this.clone().startOf("day").valueOf(),e[r].since<=t&&t<=e[r].until||e[r].until<=t&&t<=e[r].since)return e[r].abbr;return""},n.eraYear=function(){for(var t,e,r=this.localeData().eras(),i=0,n=r.length;i<n;++i)if(t=r[i].since<=r[i].until?1:-1,e=this.clone().startOf("day").valueOf(),r[i].since<=e&&e<=r[i].until||r[i].until<=e&&e<=r[i].since)return(this.year()-p(r[i].since).year())*t+r[i].offset;return this.year()},n.year=Wt,n.isLeapYear=function(){return ht(this.year())},n.weekYear=function(t){return or.call(this,t,this.week(),this.weekday(),this.localeData()._week.dow,this.localeData()._week.doy)},n.isoWeekYear=function(t){return or.call(this,t,this.isoWeek(),this.isoWeekday(),1,4)},n.quarter=n.quarters=function(t){return t==null?Math.ceil((this.month()+1)/3):this.month(3*(t-1)+this.month()%3)},n.month=jt,n.daysInMonth=function(){return Bt(this.year(),this.month())},n.week=n.weeks=function(t){var e=this.localeData().week(this);return t==null?e:this.add(7*(t-e),"d")},n.isoWeek=n.isoWeeks=function(t){var e=Xt(this,1,4).week;return t==null?e:this.add(7*(t-e),"d")},n.weeksInYear=function(){var t=this.localeData()._week;return L(this.year(),t.dow,t.doy)},n.weeksInWeekYear=function(){var t=this.localeData()._week;return L(this.weekYear(),t.dow,t.doy)},n.isoWeeksInYear=function(){return L(this.year(),1,4)},n.isoWeeksInISOWeekYear=function(){return L(this.isoWeekYear(),1,4)},n.date=xt,n.day=n.days=function(t){if(!this.isValid())return t!=null?this:NaN;var e,r,i=this._isUTC?this._d.getUTCDay():this._d.getDay();return t!=null?(e=t,r=this.localeData(),t=typeof e!="string"?e:isNaN(e)?typeof(e=r.weekdaysParse(e))=="number"?e:null:parseInt(e,10),this.add(t-i,"d")):i},n.weekday=function(t){if(!this.isValid())return t!=null?this:NaN;var e=(this.day()+7-this.localeData()._week.dow)%7;return t==null?e:this.add(t-e,"d")},n.isoWeekday=function(t){return this.isValid()?t!=null?(e=t,r=this.localeData(),r=typeof e=="string"?r.weekdaysParse(e)%7||7:isNaN(e)?null:e,this.day(this.day()%7?r:r-7)):this.day()||7:t!=null?this:NaN;var e,r},n.dayOfYear=function(t){var e=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return t==null?e:this.add(t-e,"d")},n.hour=n.hours=Et,n.minute=n.minutes=gt,n.second=n.seconds=vt,n.millisecond=n.milliseconds=yt,n.utcOffset=function(t,e,r){var i,n=this._offset||0;if(!this.isValid())return t!=null?this:NaN;if(t==null)return this._isUTC?n:je(this);if(typeof t=="string"){if((t=$e(Ct,t))===null)return this}else Math.abs(t)<16&&!r&&(t*=60);return!this._isUTC&&e&&(i=je(this)),this._offset=t,this._isUTC=!0,i!=null&&this.add(i,"m"),n!==t&&(!e||this._changeInProgress?Ge(this,B(t-n,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,p.updateOffset(this,!0),this._changeInProgress=null)),this},n.utc=function(t){return this.utcOffset(0,t)},n.local=function(t){return this._isUTC&&(this.utcOffset(0,t),this._isUTC=!1,t&&this.subtract(je(this),"m")),this},n.parseZone=function(){var t;return this._tzm!=null?this.utcOffset(this._tzm,!1,!0):typeof this._i=="string"&&((t=$e(Tt,this._i))!=null?this.utcOffset(t):this.utcOffset(0,!0)),this},n.hasAlignedHourOffset=function(t){return!!this.isValid()&&(t=t?O(t).utcOffset():0,(this.utcOffset()-t)%60==0)},n.isDST=function(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()},n.isLocal=function(){return!!this.isValid()&&!this._isUTC},n.isUtcOffset=function(){return!!this.isValid()&&this._isUTC},n.isUtc=ze,n.isUTC=ze,n.zoneAbbr=function(){return this._isUTC?"UTC":""},n.zoneName=function(){return this._isUTC?"Coordinated Universal Time":""},n.dates=t("dates accessor is deprecated. Use date instead.",xt),n.months=t("months accessor is deprecated. Use month instead",jt),n.years=t("years accessor is deprecated. Use year instead",Wt),n.zone=t("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",function(t,e){return t!=null?(this.utcOffset(t=typeof t!="string"?-t:t,e),this):-this.utcOffset()}),n.isDSTShifted=t("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",function(){if(!o(this._isDSTShifted))return this._isDSTShifted;var t,e={};return V(e,this),(e=Le(e))._a?(t=(e._isUTC?c:O)(e._a),this._isDSTShifted=this.isValid()&&0<function(t,e,r){for(var i=Math.min(t.length,e.length),n=Math.abs(t.length-e.length),a=0,s=0;s<i;s++)(r&&t[s]!==e[s]||!r&&m(t[s])!==m(e[s]))&&a++;return a+n}(e._a,t.toArray())):this._isDSTShifted=!1,this._isDSTShifted}),(b=J.prototype).calendar=function(t,e,r){return u(t=this._calendar[t]||this._calendar.sameElse)?t.call(e,r):t},b.longDateFormat=function(t){var e=this._longDateFormat[t],r=this._longDateFormat[t.toUpperCase()];return e||!r?e:(this._longDateFormat[t]=r.match(et).map(function(t){return t==="MMMM"||t==="MM"||t==="DD"||t==="dddd"?t.slice(1):t}).join(""),this._longDateFormat[t])},b.invalidDate=function(){return this._invalidDate},b.ordinal=function(t){return this._ordinal.replace("%d",t)},b.preparse=hr,b.postformat=hr,b.relativeTime=function(t,e,r,i){var n=this._relativeTime[r];return u(n)?n(t,e,r,i):n.replace(/%d/i,t)},b.pastFuture=function(t,e){return u(t=this._relativeTime[0<t?"future":"past"])?t(e):t.replace(/%s/i,e)},b.set=function(t){var e,r;for(r in t)d(t,r)&&(u(e=t[r])?this[r]=e:this["_"+r]=e);this._config=t,this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)},b.eras=function(t,e){for(var r,i=this._eras||N("en")._eras,n=0,a=i.length;n<a;++n){switch(typeof i[n].since){case"string":r=p(i[n].since).startOf("day"),i[n].since=r.valueOf();break}switch(typeof i[n].until){case"undefined":i[n].until=1/0;break;case"string":r=p(i[n].until).startOf("day").valueOf(),i[n].until=r.valueOf();break}}return i},b.erasParse=function(t,e,r){var i,n,a,s,o,l=this.eras();for(t=t.toUpperCase(),i=0,n=l.length;i<n;++i)if(a=l[i].name.toUpperCase(),s=l[i].abbr.toUpperCase(),o=l[i].narrow.toUpperCase(),r)switch(e){case"N":case"NN":case"NNN":if(s===t)return l[i];break;case"NNNN":if(a===t)return l[i];break;case"NNNNN":if(o===t)return l[i];break}else if(0<=[a,s,o].indexOf(t))return l[i]},b.erasConvertYear=function(t,e){var r=t.since<=t.until?1:-1;return e===void 0?p(t.since).year():p(t.since).year()+(e-t.offset)*r},b.erasAbbrRegex=function(t){return d(this,"_erasAbbrRegex")||ar.call(this),t?this._erasAbbrRegex:this._erasRegex},b.erasNameRegex=function(t){return d(this,"_erasNameRegex")||ar.call(this),t?this._erasNameRegex:this._erasRegex},b.erasNarrowRegex=function(t){return d(this,"_erasNarrowRegex")||ar.call(this),t?this._erasNarrowRegex:this._erasRegex},b.months=function(t,e){return t?(s(this._months)?this._months:this._months[(this._months.isFormat||Rt).test(e)?"format":"standalone"])[t.month()]:s(this._months)?this._months:this._months.standalone},b.monthsShort=function(t,e){return t?(s(this._monthsShort)?this._monthsShort:this._monthsShort[Rt.test(e)?"format":"standalone"])[t.month()]:s(this._monthsShort)?this._monthsShort:this._monthsShort.standalone},b.monthsParse=function(t,e,r){var i,n;if(this._monthsParseExact)return function(t,e,r){var i,n,a,t=t.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],i=0;i<12;++i)a=c([2e3,i]),this._shortMonthsParse[i]=this.monthsShort(a,"").toLocaleLowerCase(),this._longMonthsParse[i]=this.months(a,"").toLocaleLowerCase();return r?e==="MMM"?(n=w.call(this._shortMonthsParse,t))!==-1?n:null:(n=w.call(this._longMonthsParse,t))!==-1?n:null:e==="MMM"?(n=w.call(this._shortMonthsParse,t))!==-1||(n=w.call(this._longMonthsParse,t))!==-1?n:null:(n=w.call(this._longMonthsParse,t))!==-1||(n=w.call(this._shortMonthsParse,t))!==-1?n:null}.call(this,t,e,r);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),i=0;i<12;i++)if(n=c([2e3,i]),r&&!this._longMonthsParse[i]&&(this._longMonthsParse[i]=new RegExp("^"+this.months(n,"").replace(".","")+"$","i"),this._shortMonthsParse[i]=new RegExp("^"+this.monthsShort(n,"").replace(".","")+"$","i")),r||this._monthsParse[i]||(n="^"+this.months(n,"")+"|^"+this.monthsShort(n,""),this._monthsParse[i]=new RegExp(n.replace(".",""),"i")),r&&e==="MMMM"&&this._longMonthsParse[i].test(t)||r&&e==="MMM"&&this._shortMonthsParse[i].test(t)||!r&&this._monthsParse[i].test(t))return i},b.monthsRegex=function(t){return this._monthsParseExact?(d(this,"_monthsRegex")||zt.call(this),t?this._monthsStrictRegex:this._monthsRegex):(d(this,"_monthsRegex")||(this._monthsRegex=$t),this._monthsStrictRegex&&t?this._monthsStrictRegex:this._monthsRegex)},b.monthsShortRegex=function(t){return this._monthsParseExact?(d(this,"_monthsRegex")||zt.call(this),t?this._monthsShortStrictRegex:this._monthsShortRegex):(d(this,"_monthsShortRegex")||(this._monthsShortRegex=Pt),this._monthsShortStrictRegex&&t?this._monthsShortStrictRegex:this._monthsShortRegex)},b.week=function(t){return Xt(t,this._week.dow,this._week.doy).week},b.firstDayOfYear=function(){return this._week.doy},b.firstDayOfWeek=function(){return this._week.dow},b.weekdays=function(t,e){return e=s(this._weekdays)?this._weekdays:this._weekdays[t&&t!==!0&&this._weekdays.isFormat.test(e)?"format":"standalone"],t===!0?Zt(e,this._week.dow):t?e[t.day()]:e},b.weekdaysMin=function(t){return t===!0?Zt(this._weekdaysMin,this._week.dow):t?this._weekdaysMin[t.day()]:this._weekdaysMin},b.weekdaysShort=function(t){return t===!0?Zt(this._weekdaysShort,this._week.dow):t?this._weekdaysShort[t.day()]:this._weekdaysShort},b.weekdaysParse=function(t,e,r){var i,n;if(this._weekdaysParseExact)return function(t,e,r){var i,n,a,t=t.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],i=0;i<7;++i)a=c([2e3,1]).day(i),this._minWeekdaysParse[i]=this.weekdaysMin(a,"").toLocaleLowerCase(),this._shortWeekdaysParse[i]=this.weekdaysShort(a,"").toLocaleLowerCase(),this._weekdaysParse[i]=this.weekdays(a,"").toLocaleLowerCase();return r?e==="dddd"?(n=w.call(this._weekdaysParse,t))!==-1?n:null:e==="ddd"?(n=w.call(this._shortWeekdaysParse,t))!==-1?n:null:(n=w.call(this._minWeekdaysParse,t))!==-1?n:null:e==="dddd"?(n=w.call(this._weekdaysParse,t))!==-1||(n=w.call(this._shortWeekdaysParse,t))!==-1||(n=w.call(this._minWeekdaysParse,t))!==-1?n:null:e==="ddd"?(n=w.call(this._shortWeekdaysParse,t))!==-1||(n=w.call(this._weekdaysParse,t))!==-1||(n=w.call(this._minWeekdaysParse,t))!==-1?n:null:(n=w.call(this._minWeekdaysParse,t))!==-1||(n=w.call(this._weekdaysParse,t))!==-1||(n=w.call(this._shortWeekdaysParse,t))!==-1?n:null}.call(this,t,e,r);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),i=0;i<7;i++)if(n=c([2e3,1]).day(i),r&&!this._fullWeekdaysParse[i]&&(this._fullWeekdaysParse[i]=new RegExp("^"+this.weekdays(n,"").replace(".","\\.?")+"$","i"),this._shortWeekdaysParse[i]=new RegExp("^"+this.weekdaysShort(n,"").replace(".","\\.?")+"$","i"),this._minWeekdaysParse[i]=new RegExp("^"+this.weekdaysMin(n,"").replace(".","\\.?")+"$","i")),this._weekdaysParse[i]||(n="^"+this.weekdays(n,"")+"|^"+this.weekdaysShort(n,"")+"|^"+this.weekdaysMin(n,""),this._weekdaysParse[i]=new RegExp(n.replace(".",""),"i")),r&&e==="dddd"&&this._fullWeekdaysParse[i].test(t)||r&&e==="ddd"&&this._shortWeekdaysParse[i].test(t)||r&&e==="dd"&&this._minWeekdaysParse[i].test(t)||!r&&this._weekdaysParse[i].test(t))return i},b.weekdaysRegex=function(t){return this._weekdaysParseExact?(d(this,"_weekdaysRegex")||ie.call(this),t?this._weekdaysStrictRegex:this._weekdaysRegex):(d(this,"_weekdaysRegex")||(this._weekdaysRegex=te),this._weekdaysStrictRegex&&t?this._weekdaysStrictRegex:this._weekdaysRegex)},b.weekdaysShortRegex=function(t){return this._weekdaysParseExact?(d(this,"_weekdaysRegex")||ie.call(this),t?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(d(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=ee),this._weekdaysShortStrictRegex&&t?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)},b.weekdaysMinRegex=function(t){return this._weekdaysParseExact?(d(this,"_weekdaysRegex")||ie.call(this),t?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(d(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=re),this._weekdaysMinStrictRegex&&t?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)},b.isPM=function(t){return(t+"").toLowerCase().charAt(0)==="p"},b.meridiem=function(t,e,r){return 11<t?r?"pm":"PM":r?"am":"AM"},pe("en",{eras:[{since:"0001-01-01",until:1/0,offset:1,name:"Anno Domini",narrow:"AD",abbr:"AD"},{since:"0000-12-31",until:-1/0,offset:1,name:"Before Christ",narrow:"BC",abbr:"BC"}],dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(t){var e=t%10;return t+(m(t%100/10)===1?"th":e==1?"st":e==2?"nd":e==3?"rd":"th")}}),p.lang=t("moment.lang is deprecated. Use moment.locale instead.",pe),p.langData=t("moment.langData is deprecated. Use moment.localeData instead.",N);var fr=Math.abs;function gr(t,e,r,i){return e=B(e,r),t._milliseconds+=i*e._milliseconds,t._days+=i*e._days,t._months+=i*e._months,t._bubble()}function yr(t){return t<0?Math.floor(t):Math.ceil(t)}function mr(t){return 4800*t/146097}function br(t){return 146097*t/4800}function _r(t){return function(){return this.as(t)}}function xr(t){return function(){return this.isValid()?this._data[t]:NaN}}_t=_r("ms"),ft=_r("s"),It=_r("m"),bt=_r("h"),mt=_r("d"),Qt=_r("w"),Et=_r("M"),gt=_r("Q"),vt=_r("y");var yt=xr("milliseconds"),xt=xr("seconds"),Wt=xr("minutes"),b=xr("hours"),vr=xr("days"),kr=xr("months"),wr=xr("years"),Tr=Math.round,Cr={ss:44,s:45,m:45,h:22,d:26,w:null,M:11};function Er(t,e,r,i){var n=B(t).abs(),a=Tr(n.as("s")),s=Tr(n.as("m")),o=Tr(n.as("h")),l=Tr(n.as("d")),c=Tr(n.as("M")),h=Tr(n.as("w")),n=Tr(n.as("y")),a=(a<=r.ss?["s",a]:a<r.s&&["ss",a])||s<=1&&["m"]||s<r.m&&["mm",s]||o<=1&&["h"]||o<r.h&&["hh",o]||l<=1&&["d"]||l<r.d&&["dd",l];return(a=(a=r.w!=null?a||h<=1&&["w"]||h<r.w&&["ww",h]:a)||c<=1&&["M"]||c<r.M&&["MM",c]||n<=1&&["y"]||["yy",n])[2]=e,a[3]=0<+t,a[4]=i,function(t,e,r,i,n){return n.relativeTime(e||1,!!r,t,i)}.apply(null,a)}var Sr=Math.abs;function Ar(t){return(0<t)-(t<0)||+t}function Dr(){if(!this.isValid())return this.localeData().invalidDate();var t,e,r,i,n,a,s,o=Sr(this._milliseconds)/1e3,l=Sr(this._days),c=Sr(this._months),h=this.asSeconds();return h?(t=y(o/60),e=y(t/60),o%=60,t%=60,r=y(c/12),c%=12,i=o?o.toFixed(3).replace(/\.?0+$/,""):"",n=Ar(this._months)!==Ar(h)?"-":"",a=Ar(this._days)!==Ar(h)?"-":"",s=Ar(this._milliseconds)!==Ar(h)?"-":"",(h<0?"-":"")+"P"+(r?n+r+"Y":"")+(c?n+c+"M":"")+(l?a+l+"D":"")+(e||t||o?"T":"")+(e?s+e+"H":"")+(t?s+t+"M":"")+(o?s+i+"S":"")):"P0D"}var I=Be.prototype;return I.isValid=function(){return this._isValid},I.abs=function(){var t=this._data;return this._milliseconds=fr(this._milliseconds),this._days=fr(this._days),this._months=fr(this._months),t.milliseconds=fr(t.milliseconds),t.seconds=fr(t.seconds),t.minutes=fr(t.minutes),t.hours=fr(t.hours),t.months=fr(t.months),t.years=fr(t.years),this},I.add=function(t,e){return gr(this,t,e,1)},I.subtract=function(t,e){return gr(this,t,e,-1)},I.as=function(t){if(!this.isValid())return NaN;var e,r,i=this._milliseconds;if((t=g(t))==="month"||t==="quarter"||t==="year")switch(e=this._days+i/864e5,r=this._months+mr(e),t){case"month":return r;case"quarter":return r/3;case"year":return r/12}else switch(e=this._days+Math.round(br(this._months)),t){case"week":return e/7+i/6048e5;case"day":return e+i/864e5;case"hour":return 24*e+i/36e5;case"minute":return 1440*e+i/6e4;case"second":return 86400*e+i/1e3;case"millisecond":return Math.floor(864e5*e)+i;default:throw new Error("Unknown unit "+t)}},I.asMilliseconds=_t,I.asSeconds=ft,I.asMinutes=It,I.asHours=bt,I.asDays=mt,I.asWeeks=Qt,I.asMonths=Et,I.asQuarters=gt,I.asYears=vt,I.valueOf=function(){return this.isValid()?this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*m(this._months/12):NaN},I._bubble=function(){var t=this._milliseconds,e=this._days,r=this._months,i=this._data;return 0<=t&&0<=e&&0<=r||t<=0&&e<=0&&r<=0||(t+=864e5*yr(br(r)+e),r=e=0),i.milliseconds=t%1e3,t=y(t/1e3),i.seconds=t%60,t=y(t/60),i.minutes=t%60,t=y(t/60),i.hours=t%24,e+=y(t/24),r+=t=y(mr(e)),e-=yr(br(t)),t=y(r/12),r%=12,i.days=e,i.months=r,i.years=t,this},I.clone=function(){return B(this)},I.get=function(t){return t=g(t),this.isValid()?this[t+"s"]():NaN},I.milliseconds=yt,I.seconds=xt,I.minutes=Wt,I.hours=b,I.days=vr,I.weeks=function(){return y(this.days()/7)},I.months=kr,I.years=wr,I.humanize=function(t,e){if(!this.isValid())return this.localeData().invalidDate();var r=!1,i=Cr;return typeof t=="object"&&(e=t,t=!1),typeof t=="boolean"&&(r=t),typeof e=="object"&&(i=Object.assign({},Cr,e),e.s!=null&&e.ss==null&&(i.ss=e.s-1)),t=this.localeData(),e=Er(this,!r,i,t),r&&(e=t.pastFuture(+this,e)),t.postformat(e)},I.toISOString=Dr,I.toString=Dr,I.toJSON=Dr,I.locale=Ke,I.localeData=Je,I.toIsoString=t("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",Dr),I.lang=Jt,i("X",0,0,"unix"),i("x",0,0,"valueOf"),x("x",wt),x("X",/[+-]?\d+(\.\d{1,3})?/),k("X",function(t,e,r){r._d=new Date(1e3*parseFloat(t))}),k("x",function(t,e,r){r._d=new Date(m(t))}),p.version="2.29.4",F=O,p.fn=n,p.min=function(){return Ne("isBefore",[].slice.call(arguments,0))},p.max=function(){return Ne("isAfter",[].slice.call(arguments,0))},p.now=function(){return Date.now?Date.now():+new Date},p.utc=c,p.unix=function(t){return O(1e3*t)},p.months=function(t,e){return dr(t,e,"months")},p.isDate=$,p.locale=pe,p.invalid=U,p.duration=B,p.isMoment=h,p.weekdays=function(t,e,r){return pr(t,e,r,"weekdays")},p.parseZone=function(){return O.apply(null,arguments).parseZone()},p.localeData=N,p.isDuration=Ie,p.monthsShort=function(t,e){return dr(t,e,"monthsShort")},p.weekdaysMin=function(t,e,r){return pr(t,e,r,"weekdaysMin")},p.defineLocale=fe,p.updateLocale=function(t,e){var r,i;return e!=null?(i=le,M[t]!=null&&M[t].parentLocale!=null?M[t].set(K(M[t]._config,e)):(e=K(i=(r=de(t))!=null?r._config:i,e),r==null&&(e.abbr=t),(i=new J(e)).parentLocale=M[t],M[t]=i),pe(t)):M[t]!=null&&(M[t].parentLocale!=null?(M[t]=M[t].parentLocale,t===pe()&&pe(t)):M[t]!=null&&delete M[t]),M[t]},p.locales=function(){return tt(M)},p.weekdaysShort=function(t,e,r){return pr(t,e,r,"weekdaysShort")},p.normalizeUnits=g,p.relativeTimeRounding=function(t){return t===void 0?Tr:typeof t=="function"&&(Tr=t,!0)},p.relativeTimeThreshold=function(t,e){return Cr[t]!==void 0&&(e===void 0?Cr[t]:(Cr[t]=e,t==="s"&&(Cr.ss=e-1),!0))},p.calendarFormat=function(t,e){return(t=t.diff(e,"days",!0))<-6?"sameElse":t<-1?"lastWeek":t<0?"lastDay":t<1?"sameDay":t<2?"nextDay":t<7?"nextWeek":"sameElse"},p.prototype=n,p.HTML5_FMT={DATETIME_LOCAL:"YYYY-MM-DDTHH:mm",DATETIME_LOCAL_SECONDS:"YYYY-MM-DDTHH:mm:ss",DATETIME_LOCAL_MS:"YYYY-MM-DDTHH:mm:ss.SSS",DATE:"YYYY-MM-DD",TIME:"HH:mm",TIME_SECONDS:"HH:mm:ss",TIME_MS:"HH:mm:ss.SSS",WEEK:"GGGG-[W]WW",MONTH:"YYYY-MM"},p}();function R(t="fatal"){let e=P.fatal;"string"==typeof t?(t=t.toLowerCase())in P&&(e=P[t]):"number"==typeof t&&(e=t),S.trace=()=>{},S.debug=()=>{},S.info=()=>{},S.warn=()=>{},S.error=()=>{},S.fatal=()=>{},e<=P.fatal&&(S.fatal=console.error?console.error.bind(console,$("FATAL"),"color: orange"):console.log.bind(console,"[35m",$("FATAL"))),e<=P.error&&(S.error=console.error?console.error.bind(console,$("ERROR"),"color: orange"):console.log.bind(console,"[31m",$("ERROR"))),e<=P.warn&&(S.warn=console.warn?console.warn.bind(console,$("WARN"),"color: orange"):console.log.bind(console,"[33m",$("WARN"))),e<=P.info&&(S.info=console.info?console.info.bind(console,$("INFO"),"color: lightblue"):console.log.bind(console,"[34m",$("INFO"))),e<=P.debug&&(S.debug=console.debug?console.debug.bind(console,$("DEBUG"),"color: lightgreen"):console.log.bind(console,"[32m",$("DEBUG"))),e<=P.trace&&(S.trace=console.debug?console.debug.bind(console,$("TRACE"),"color: lightgreen"):console.log.bind(console,"[32m",$("TRACE")))}const tt=t.exports,P={trace:0,debug:1,info:2,warn:3,error:4,fatal:5},S={trace:()=>{},debug:()=>{},info:()=>{},warn:()=>{},error:()=>{},fatal:()=>{}},$=t=>`%c${tt().format("ss.SSS")} : ${t} : `;var t={},Y=(Object.defineProperty(t,"__esModule",{value:!0}),t.sanitizeUrl=void 0),j=/^([^\w]*)(javascript|data|vbscript)/im,z=/&#(\w+)(^\w|;)?/g,U=/[\u0000-\u001F\u007F-\u009F\u2000-\u200D\uFEFF]/gim,W=/^([^:]+):/gm,H=[".","/"];function q(t,e){return null==t||null==e?NaN:t<e?-1:e<t?1:e<=t?0:NaN}function V(r){let a,s,n;function o(t,e,r=0,i=t.length){if(r<i){if(0!==a(e,e))return i;do{var n=r+i>>>1;s(t[n],e)<0?r=1+n:i=n}while(r<i)}return r}return n=2!==r.length?(a=q,s=(t,e)=>q(r(t),e),(t,e)=>r(t)-e):(a=r===q||r===function(t,e){return null==t||null==e?NaN:e<t?-1:t<e?1:t<=e?0:NaN}?r:G,s=r),{left:o,center:function(t,e,r=0,i=t.length){return i=o(t,e,r,i-1),r<i&&n(t[i-1],e)>-n(t[i],e)?i-1:i},right:function(t,e,r=0,i=t.length){if(r<i){if(0!==a(e,e))return i;do{var n=r+i>>>1;s(t[n],e)<=0?r=1+n:i=n}while(r<i)}return r}}}function G(){return 0}Y=t.sanitizeUrl=function(t){var e;return!(t=(t||"").replace(z,function(t,e){return String.fromCharCode(e)}).replace(U,"").trim())||!(-1<H.indexOf(t[0]))&&(e=t.match(W))&&(e=e[0],j.test(e))?"about:blank":t},t=V(q).right;V(function(t){return null===t?NaN:+t}).center;const X=t;class Z extends Map{constructor(t,e=function(t){return null!==t&&"object"==typeof t?t.valueOf():t}){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:e}}),null!=t)for(var[r,i]of t)this.set(r,i)}get(t){return super.get(Q(this,t))}has(t){return super.has(Q(this,t))}set(t,e){return super.set(function({_intern:t,_key:e},r){e=e(r);return t.has(e)?t.get(e):(t.set(e,r),r)}(this,t),e)}delete(t){return super.delete(function({_intern:t,_key:e},r){e=e(r);return t.has(e)&&(r=t.get(e),t.delete(e)),r}(this,t))}}function Q({_intern:t,_key:e},r){e=e(r);return t.has(e)?t.get(e):r}var et=Math.sqrt(50),rt=Math.sqrt(10),it=Math.sqrt(2);function nt(t,e,r){e=(e-t)/Math.max(0,r),t=Math.floor(Math.log(e)/Math.LN10),r=e/Math.pow(10,t);return 0<=t?(et<=r?10:rt<=r?5:it<=r?2:1)*Math.pow(10,t):-Math.pow(10,-t)/(et<=r?10:rt<=r?5:it<=r?2:1)}function at(t,e,r){var r=Math.abs(e-t)/Math.max(0,r),i=Math.pow(10,Math.floor(Math.log(r)/Math.LN10)),r=r/i;return et<=r?i*=10:rt<=r?i*=5:it<=r&&(i*=2),e<t?-i:i}function st(t){return t}var ot=1,lt=2,ct=3,ht=4,ut=1e-6;function dt(t){return"translate("+t+",0)"}function pt(t){return"translate(0,"+t+")"}function ft(e){return t=>+e(t)}function gt(e,r){return r=Math.max(0,e.bandwidth()-2*r)/2,e.round()&&(r=Math.round(r)),t=>+e(t)+r}function yt(){return!this.__axis}function mt(p,f){var g=[],y=null,m=null,b=6,_=6,x=3,v=typeof window<"u"&&1<window.devicePixelRatio?0:.5,k=p===ot||p===ht?-1:1,w=p===ht||p===lt?"x":"y",T=p===ot||p===ct?dt:pt;function e(t){var e=null==y?f.ticks?f.ticks.apply(f,g):f.domain():y,r=null==m?f.tickFormat?f.tickFormat.apply(f,g):st:m,i=Math.max(b,0)+x,n=f.range(),a=+n[0]+v,n=+n[n.length-1]+v,s=(f.bandwidth?gt:ft)(f.copy(),v),o=t.selection?t.selection():t,l=o.selectAll(".domain").data([null]),c=(e=o.selectAll(".tick").data(e,f).order()).exit(),h=e.enter().append("g").attr("class","tick"),u=e.select("line"),d=e.select("text"),l=l.merge(l.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),e=e.merge(h),u=u.merge(h.append("line").attr("stroke","currentColor").attr(w+"2",k*b)),d=d.merge(h.append("text").attr("fill","currentColor").attr(w,k*i).attr("dy",p===ot?"0em":p===ct?"0.71em":"0.32em"));t!==o&&(l=l.transition(t),e=e.transition(t),u=u.transition(t),d=d.transition(t),c=c.transition(t).attr("opacity",ut).attr("transform",function(t){return isFinite(t=s(t))?T(t+v):this.getAttribute("transform")}),h.attr("opacity",ut).attr("transform",function(t){var e=this.parentNode.__axis;return T((e&&isFinite(e=e(t))?e:s(t))+v)})),c.remove(),l.attr("d",p===ht||p===lt?_?"M"+k*_+","+a+"H"+v+"V"+n+"H"+k*_:"M"+v+","+a+"V"+n:_?"M"+a+","+k*_+"V"+v+"H"+n+"V"+k*_:"M"+a+","+v+"H"+n),e.attr("opacity",1).attr("transform",function(t){return T(s(t)+v)}),u.attr(w+"2",k*b),d.attr(w,k*i).text(r),o.filter(yt).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",p===lt?"start":p===ht?"end":"middle"),o.each(function(){this.__axis=s})}return e.scale=function(t){return arguments.length?(f=t,e):f},e.ticks=function(){return g=Array.from(arguments),e},e.tickArguments=function(t){return arguments.length?(g=null==t?[]:Array.from(t),e):g.slice()},e.tickValues=function(t){return arguments.length?(y=null==t?null:Array.from(t),e):y&&y.slice()},e.tickFormat=function(t){return arguments.length?(m=t,e):m},e.tickSize=function(t){return arguments.length?(b=_=+t,e):b},e.tickSizeInner=function(t){return arguments.length?(b=+t,e):b},e.tickSizeOuter=function(t){return arguments.length?(_=+t,e):_},e.tickPadding=function(t){return arguments.length?(x=+t,e):x},e.offset=function(t){return arguments.length?(v=+t,e):v},e}var bt={value:()=>{}};function _t(){for(var t,e=0,r=arguments.length,i={};e<r;++e){if(!(t=arguments[e]+"")||t in i||/[\s.]/.test(t))throw new Error("illegal type: "+t);i[t]=[]}return new xt(i)}function xt(t){this._=t}function vt(t,e,r){for(var i=0,n=t.length;i<n;++i)if(t[i].name===e){t[i]=bt,t=t.slice(0,i).concat(t.slice(i+1));break}return null!=r&&t.push({name:e,value:r}),t}xt.prototype=_t.prototype={constructor:xt,on:function(t,e){var r,i,n=this._,a=(i=n,(t+"").trim().split(/^|\s+/).map(function(t){var e="",r=t.indexOf(".");if(0<=r&&(e=t.slice(r+1),t=t.slice(0,r)),t&&!i.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:e}})),s=-1,o=a.length;if(!(arguments.length<2)){if(null!=e&&"function"!=typeof e)throw new Error("invalid callback: "+e);for(;++s<o;)if(r=(t=a[s]).type)n[r]=vt(n[r],t.name,e);else if(null==e)for(r in n)n[r]=vt(n[r],t.name,null);return this}for(;++s<o;)if(r=(r=(t=a[s]).type)&&function(t,e){for(var r,i=0,n=t.length;i<n;++i)if((r=t[i]).name===e)return r.value}(n[r],t.name))return r},copy:function(){var t,e={},r=this._;for(t in r)e[t]=r[t].slice();return new xt(e)},call:function(t,e){if(0<(r=arguments.length-2))for(var r,i,n=new Array(r),a=0;a<r;++a)n[a]=arguments[a+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(a=0,r=(i=this._[t]).length;a<r;++a)i[a].value.apply(e,n)},apply:function(t,e,r){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var i=this._[t],n=0,a=i.length;n<a;++n)i[n].value.apply(e,r)}};var kt="http://www.w3.org/1999/xhtml";const wt={svg:"http://www.w3.org/2000/svg",xhtml:kt,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Tt(t){var e=t+="",r=e.indexOf(":");return 0<=r&&"xmlns"!==(e=t.slice(0,r))&&(t=t.slice(r+1)),wt.hasOwnProperty(e)?{space:wt[e],local:t}:t}function Ct(t){t=Tt(t);return(t.local?function(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}:function(r){return function(){var t=this.ownerDocument,e=this.namespaceURI;return e===kt&&t.documentElement.namespaceURI===kt?t.createElement(r):t.createElementNS(e,r)}})(t)}function Et(){}function St(t){return null==t?Et:function(){return this.querySelector(t)}}function At(t){return null==t?[]:Array.isArray(t)?t:Array.from(t)}function Dt(){return[]}function Lt(t){return null==t?Dt:function(){return this.querySelectorAll(t)}}function Mt(t){return function(){return this.matches(t)}}function Nt(e){return function(t){return t.matches(e)}}var Ot=Array.prototype.find;function Bt(){return this.firstElementChild}var It=Array.prototype.filter;function Ft(){return Array.from(this.children)}function Rt(t){return new Array(t.length)}function Pt(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}function $t(t,e,r,i,n,a){for(var s,o=0,l=e.length,c=a.length;o<c;++o)(s=e[o])?(s.__data__=a[o],i[o]=s):r[o]=new Pt(t,a[o]);for(;o<l;++o)(s=e[o])&&(n[o]=s)}function Yt(t,e,r,i,n,a,s){for(var o,l,c=new Map,h=e.length,u=a.length,d=new Array(h),p=0;p<h;++p)(o=e[p])&&(d[p]=l=s.call(o,o.__data__,p,e)+"",c.has(l)?n[p]=o:c.set(l,o));for(p=0;p<u;++p)l=s.call(t,a[p],p,a)+"",(o=c.get(l))?((i[p]=o).__data__=a[p],c.delete(l)):r[p]=new Pt(t,a[p]);for(p=0;p<h;++p)(o=e[p])&&c.get(d[p])===o&&(n[p]=o)}function jt(t){return t.__data__}function zt(t,e){return t<e?-1:e<t?1:e<=t?0:NaN}function Ut(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function Wt(t,e){return t.style.getPropertyValue(e)||Ut(t).getComputedStyle(t,null).getPropertyValue(e)}function Ht(t){return t.trim().split(/^|\s+/)}function qt(t){return t.classList||new Vt(t)}function Vt(t){this._node=t,this._names=Ht(t.getAttribute("class")||"")}function Gt(t,e){for(var r=qt(t),i=-1,n=e.length;++i<n;)r.add(e[i])}function Xt(t,e){for(var r=qt(t),i=-1,n=e.length;++i<n;)r.remove(e[i])}function Zt(){this.textContent=""}function Qt(){this.innerHTML=""}function Kt(){this.nextSibling&&this.parentNode.appendChild(this)}function Jt(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function te(){return null}function ee(){var t=this.parentNode;t&&t.removeChild(this)}function re(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function ie(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function ne(a){return function(){var t=this.__on;if(t){for(var e,r=0,i=-1,n=t.length;r<n;++r)e=t[r],a.type&&e.type!==a.type||e.name!==a.name?t[++i]=e:this.removeEventListener(e.type,e.listener,e.options);++i?t.length=i:delete this.__on}}}function ae(s,o,l){return function(){function t(t){r.call(this,t,this.__data__)}var e,r,i=this.__on;r=o;if(i)for(var n=0,a=i.length;n<a;++n)if((e=i[n]).type===s.type&&e.name===s.name)return this.removeEventListener(e.type,e.listener,e.options),this.addEventListener(e.type,e.listener=t,e.options=l),void(e.value=o);this.addEventListener(s.type,t,l),e={type:s.type,name:s.name,value:o,listener:t,options:l},i?i.push(e):this.__on=[e]}}function se(t,e,r){var i=Ut(t),n=i.CustomEvent;"function"==typeof n?n=new n(e,r):(n=i.document.createEvent("Event"),r?(n.initEvent(e,r.bubbles,r.cancelable),n.detail=r.detail):n.initEvent(e,!1,!1)),t.dispatchEvent(n)}Pt.prototype={constructor:Pt,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}},Vt.prototype={add:function(t){this._names.indexOf(t)<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){t=this._names.indexOf(t);0<=t&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return 0<=this._names.indexOf(t)}};var oe=[null];function le(t,e){this._groups=t,this._parents=e}function ce(){return new le([[document.documentElement]],oe)}function K(t){return"string"==typeof t?new le([[document.querySelector(t)]],[document.documentElement]):new le([[t]],oe)}function he(t){return"string"==typeof t?new le([document.querySelectorAll(t)],[document.documentElement]):new le([At(t)],oe)}function ue(t,e,r){(t.prototype=e.prototype=r).constructor=t}function de(t,e){var r,i=Object.create(t.prototype);for(r in e)i[r]=e[r];return i}function pe(){}le.prototype=ce.prototype={constructor:le,select:function(t){"function"!=typeof t&&(t=St(t));for(var e=this._groups,r=e.length,i=new Array(r),n=0;n<r;++n)for(var a,s,o=e[n],l=o.length,c=i[n]=new Array(l),h=0;h<l;++h)(a=o[h])&&(s=t.call(a,a.__data__,h,o))&&("__data__"in a&&(s.__data__=a.__data__),c[h]=s);return new le(i,this._parents)},selectAll:function(t){var e;t="function"==typeof t?(e=t,function(){return At(e.apply(this,arguments))}):Lt(t);for(var r=this._groups,i=r.length,n=[],a=[],s=0;s<i;++s)for(var o,l=r[s],c=l.length,h=0;h<c;++h)(o=l[h])&&(n.push(t.call(o,o.__data__,h,l)),a.push(o));return new le(n,a)},selectChild:function(t){return this.select(null==t?Bt:(e="function"==typeof t?t:Nt(t),function(){return Ot.call(this.children,e)}));var e},selectChildren:function(t){return this.selectAll(null==t?Ft:(e="function"==typeof t?t:Nt(t),function(){return It.call(this.children,e)}));var e},filter:function(t){"function"!=typeof t&&(t=Mt(t));for(var e=this._groups,r=e.length,i=new Array(r),n=0;n<r;++n)for(var a,s=e[n],o=s.length,l=i[n]=[],c=0;c<o;++c)(a=s[c])&&t.call(a,a.__data__,c,s)&&l.push(a);return new le(i,this._parents)},data:function(t,e){if(!arguments.length)return Array.from(this,jt);var r,i=e?Yt:$t,n=this._parents,a=this._groups;"function"!=typeof t&&(r=t,t=function(){return r});for(var s=a.length,o=new Array(s),l=new Array(s),c=new Array(s),h=0;h<s;++h){var u=n[h],d=a[h],p=d.length,f="object"==typeof(f=t.call(u,u&&u.__data__,h,n))&&"length"in f?f:Array.from(f),g=f.length,y=l[h]=new Array(g),m=o[h]=new Array(g);i(u,d,y,m,c[h]=new Array(p),f,e);for(var b,_,x=0,v=0;x<g;++x)if(b=y[x]){for(v<=x&&(v=x+1);!(_=m[v])&&++v<g;);b._next=_||null}}return(o=new le(o,n))._enter=l,o._exit=c,o},enter:function(){return new le(this._enter||this._groups.map(Rt),this._parents)},exit:function(){return new le(this._exit||this._groups.map(Rt),this._parents)},join:function(t,e,r){var i=this.enter(),n=this,a=this.exit(),i="function"==typeof t?(i=t(i))&&i.selection():i.append(t+"");return null!=e&&(n=(n=e(n))&&n.selection()),null==r?a.remove():r(a),i&&n?i.merge(n).order():n},merge:function(t){for(var t=t.selection?t.selection():t,e=this._groups,r=t._groups,i=e.length,t=r.length,n=Math.min(i,t),a=new Array(i),s=0;s<n;++s)for(var o,l=e[s],c=r[s],h=l.length,u=a[s]=new Array(h),d=0;d<h;++d)(o=l[d]||c[d])&&(u[d]=o);for(;s<i;++s)a[s]=e[s];return new le(a,this._parents)},selection:function(){return this},order:function(){for(var t=this._groups,e=-1,r=t.length;++e<r;)for(var i,n=t[e],a=n.length-1,s=n[a];0<=--a;)(i=n[a])&&(s&&4^i.compareDocumentPosition(s)&&s.parentNode.insertBefore(i,s),s=i);return this},sort:function(r){function t(t,e){return t&&e?r(t.__data__,e.__data__):!t-!e}r=r||zt;for(var e=this._groups,i=e.length,n=new Array(i),a=0;a<i;++a){for(var s,o=e[a],l=o.length,c=n[a]=new Array(l),h=0;h<l;++h)(s=o[h])&&(c[h]=s);c.sort(t)}return new le(n,this._parents).order()},call:function(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this},nodes:function(){return Array.from(this)},node:function(){for(var t=this._groups,e=0,r=t.length;e<r;++e)for(var i=t[e],n=0,a=i.length;n<a;++n){var s=i[n];if(s)return s}return null},size:function(){let t=0;for(const e of this)++t;return t},empty:function(){return!this.node()},each:function(t){for(var e=this._groups,r=0,i=e.length;r<i;++r)for(var n,a=e[r],s=0,o=a.length;s<o;++s)(n=a[s])&&t.call(n,n.__data__,s,a);return this},attr:function(t,e){var r,t=Tt(t);return arguments.length<2?(r=this.node(),t.local?r.getAttributeNS(t.space,t.local):r.getAttribute(t)):this.each((null==e?t.local?function(t){return function(){this.removeAttributeNS(t.space,t.local)}}:function(t){return function(){this.removeAttribute(t)}}:"function"==typeof e?t.local?function(e,r){return function(){var t=r.apply(this,arguments);null==t?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,t)}}:function(e,r){return function(){var t=r.apply(this,arguments);null==t?this.removeAttribute(e):this.setAttribute(e,t)}}:t.local?function(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}:function(t,e){return function(){this.setAttribute(t,e)}})(t,e))},style:function(t,e,r){return 1<arguments.length?this.each((null==e?function(t){return function(){this.style.removeProperty(t)}}:"function"==typeof e?function(e,r,i){return function(){var t=r.apply(this,arguments);null==t?this.style.removeProperty(e):this.style.setProperty(e,t,i)}}:function(t,e,r){return function(){this.style.setProperty(t,e,r)}})(t,e,null==r?"":r)):Wt(this.node(),t)},property:function(t,e){return 1<arguments.length?this.each((null==e?function(t){return function(){delete this[t]}}:"function"==typeof e?function(e,r){return function(){var t=r.apply(this,arguments);null==t?delete this[e]:this[e]=t}}:function(t,e){return function(){this[t]=e}})(t,e)):this.node()[t]},classed:function(t,e){var r=Ht(t+"");if(arguments.length<2){for(var i=qt(this.node()),n=-1,a=r.length;++n<a;)if(!i.contains(r[n]))return!1;return!0}return this.each(("function"==typeof e?function(t,e){return function(){(e.apply(this,arguments)?Gt:Xt)(this,t)}}:e?function(t){return function(){Gt(this,t)}}:function(t){return function(){Xt(this,t)}})(r,e))},text:function(t){return arguments.length?this.each(null==t?Zt:("function"==typeof t?function(e){return function(){var t=e.apply(this,arguments);this.textContent=null==t?"":t}}:function(t){return function(){this.textContent=t}})(t)):this.node().textContent},html:function(t){return arguments.length?this.each(null==t?Qt:("function"==typeof t?function(e){return function(){var t=e.apply(this,arguments);this.innerHTML=null==t?"":t}}:function(t){return function(){this.innerHTML=t}})(t)):this.node().innerHTML},raise:function(){return this.each(Kt)},lower:function(){return this.each(Jt)},append:function(t){var e="function"==typeof t?t:Ct(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})},insert:function(t,e){var r="function"==typeof t?t:Ct(t),i=null==e?te:"function"==typeof e?e:St(e);return this.select(function(){return this.insertBefore(r.apply(this,arguments),i.apply(this,arguments)||null)})},remove:function(){return this.each(ee)},clone:function(t){return this.select(t?ie:re)},datum:function(t){return arguments.length?this.property("__data__",t):this.node().__data__},on:function(t,e,r){var i,n,a=(t+"").trim().split(/^|\s+/).map(function(t){var e="",r=t.indexOf(".");return 0<=r&&(e=t.slice(r+1),t=t.slice(0,r)),{type:t,name:e}}),s=a.length;if(!(arguments.length<2)){for(o=e?ae:ne,i=0;i<s;++i)this.each(o(a[i],e,r));return this}var o=this.node().__on;if(o)for(var l,c=0,h=o.length;c<h;++c)for(i=0,l=o[c];i<s;++i)if((n=a[i]).type===l.type&&n.name===l.name)return l.value},dispatch:function(t,e){return this.each(("function"==typeof e?function(t,e){return function(){return se(this,t,e.apply(this,arguments))}}:function(t,e){return function(){return se(this,t,e)}})(t,e))},[Symbol.iterator]:function*(){for(var t=this._groups,e=0,r=t.length;e<r;++e)for(var i,n=t[e],a=0,s=n.length;a<s;++a)(i=n[a])&&(yield i)}};var t="\\s*([+-]?\\d+)\\s*",fe="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",e="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",ge=/^#([0-9a-f]{3,8})$/,ye=new RegExp(`^rgb\\(${t},${t},${t}\\)$`),me=new RegExp(`^rgb\\(${e},${e},${e}\\)$`),be=new RegExp(`^rgba\\(${t},${t},${t},${fe}\\)$`),_e=new RegExp(`^rgba\\(${e},${e},${e},${fe}\\)$`),xe=new RegExp(`^hsl\\(${fe},${e},${e}\\)$`),ve=new RegExp(`^hsla\\(${fe},${e},${e},${fe}\\)$`),ke={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function we(){return this.rgb().formatHex()}function Te(){return this.rgb().formatRgb()}function Ce(t){var e,r;return t=(t+"").trim().toLowerCase(),(e=ge.exec(t))?(r=e[1].length,e=parseInt(e[1],16),6===r?Ee(e):3===r?new Le(e>>8&15|e>>4&240,e>>4&15|240&e,(15&e)<<4|15&e,1):8===r?Se(e>>24&255,e>>16&255,e>>8&255,(255&e)/255):4===r?Se(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|240&e,((15&e)<<4|15&e)/255):null):(e=ye.exec(t))?new Le(e[1],e[2],e[3],1):(e=me.exec(t))?new Le(255*e[1]/100,255*e[2]/100,255*e[3]/100,1):(e=be.exec(t))?Se(e[1],e[2],e[3],e[4]):(e=_e.exec(t))?Se(255*e[1]/100,255*e[2]/100,255*e[3]/100,e[4]):(e=xe.exec(t))?Fe(e[1],e[2]/100,e[3]/100,1):(e=ve.exec(t))?Fe(e[1],e[2]/100,e[3]/100,e[4]):ke.hasOwnProperty(t)?Ee(ke[t]):"transparent"===t?new Le(NaN,NaN,NaN,0):null}function Ee(t){return new Le(t>>16&255,t>>8&255,255&t,1)}function Se(t,e,r,i){return new Le(t=i<=0?e=r=NaN:t,e,r,i)}function Ae(t){return(t=t instanceof pe?t:Ce(t))?new Le((t=t.rgb()).r,t.g,t.b,t.opacity):new Le}function De(t,e,r,i){return 1===arguments.length?Ae(t):new Le(t,e,r,null==i?1:i)}function Le(t,e,r,i){this.r=+t,this.g=+e,this.b=+r,this.opacity=+i}function Me(){return"#"+Ie(this.r)+Ie(this.g)+Ie(this.b)}function Ne(){var t=Oe(this.opacity);return(1===t?"rgb(":"rgba(")+Be(this.r)+`, ${Be(this.g)}, `+Be(this.b)+(1===t?")":`, ${t})`)}function Oe(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function Be(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function Ie(t){return((t=Be(t))<16?"0":"")+t.toString(16)}function Fe(t,e,r,i){return i<=0?t=e=r=NaN:r<=0||1<=r?t=e=NaN:e<=0&&(t=NaN),new Pe(t,e,r,i)}function Re(t){var e,r,i,n,a,s,o,l;return t instanceof Pe?new Pe(t.h,t.s,t.l,t.opacity):(t=t instanceof pe?t:Ce(t))?t instanceof Pe?t:(e=(t=t.rgb()).r/255,r=t.g/255,i=t.b/255,n=Math.min(e,r,i),s=NaN,l=((a=Math.max(e,r,i))+n)/2,(o=a-n)?(s=e===a?(r-i)/o+6*(r<i):r===a?(i-e)/o+2:(e-r)/o+4,o/=l<.5?a+n:2-a-n,s*=60):o=0<l&&l<1?0:s,new Pe(s,o,l,t.opacity)):new Pe}function Pe(t,e,r,i){this.h=+t,this.s=+e,this.l=+r,this.opacity=+i}function $e(t){return(t=(t||0)%360)<0?t+360:t}function Ye(t){return Math.max(0,Math.min(1,t||0))}function je(t,e,r){return 255*(t<60?e+(r-e)*t/60:t<180?r:t<240?e+(r-e)*(240-t)/60:e)}ue(pe,Ce,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:we,formatHex:we,formatHex8:function(){return this.rgb().formatHex8()},formatHsl:function(){return Re(this).formatHsl()},formatRgb:Te,toString:Te}),ue(Le,De,de(pe,{brighter(t){return t=null==t?1/.7:Math.pow(1/.7,t),new Le(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=null==t?.7:Math.pow(.7,t),new Le(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new Le(Be(this.r),Be(this.g),Be(this.b),Oe(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Me,formatHex:Me,formatHex8:function(){return"#"+Ie(this.r)+Ie(this.g)+Ie(this.b)+Ie(255*(isNaN(this.opacity)?1:this.opacity))},formatRgb:Ne,toString:Ne})),ue(Pe,function(t,e,r,i){return 1===arguments.length?Re(t):new Pe(t,e,r,null==i?1:i)},de(pe,{brighter(t){return t=null==t?1/.7:Math.pow(1/.7,t),new Pe(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=null==t?.7:Math.pow(.7,t),new Pe(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+360*(this.h<0),e=isNaN(t)||isNaN(this.s)?0:this.s,r=this.l,e=r+(r<.5?r:1-r)*e,r=2*r-e;return new Le(je(240<=t?t-240:120+t,r,e),je(t,r,e),je(t<120?240+t:t-120,r,e),this.opacity)},clamp(){return new Pe($e(this.h),Ye(this.s),Ye(this.l),Oe(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){var t=Oe(this.opacity);return(1===t?"hsl(":"hsla(")+$e(this.h)+`, ${100*Ye(this.s)}%, ${100*Ye(this.l)}%`+(1===t?")":`, ${t})`)}}));const ze=Math.PI/180,Ue=180/Math.PI,We=.96422,He=1,qe=.82521,Ve=4/29,Ge=6/29,Xe=3*Ge*Ge,Ze=Ge*Ge*Ge;function Qe(t){var e,r,i,n,a,s;return t instanceof Ke?new Ke(t.l,t.a,t.b,t.opacity):t instanceof nr?ar(t):(n=Je((.2225045*(e=rr((t=t instanceof Le?t:Ae(t)).r))+.7168786*(r=rr(t.g))+.0606169*(i=rr(t.b)))/He),e===r&&r===i?a=s=n:(a=Je((.4360747*e+.3850649*r+.1430804*i)/We),s=Je((.0139322*e+.0971045*r+.7141733*i)/qe)),new Ke(116*n-16,500*(a-n),200*(n-s),t.opacity))}function Ke(t,e,r,i){this.l=+t,this.a=+e,this.b=+r,this.opacity=+i}function Je(t){return t>Ze?Math.pow(t,1/3):t/Xe+Ve}function tr(t){return t>Ge?t*t*t:Xe*(t-Ve)}function er(t){return 255*(t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055)}function rr(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function ir(t,e,r,i){return 1===arguments.length?(n=t)instanceof nr?new nr(n.h,n.c,n.l,n.opacity):0===(n=n instanceof Ke?n:Qe(n)).a&&0===n.b?new nr(NaN,0<n.l&&n.l<100?0:NaN,n.l,n.opacity):new nr((a=Math.atan2(n.b,n.a)*Ue)<0?360+a:a,Math.sqrt(n.a*n.a+n.b*n.b),n.l,n.opacity):new nr(t,e,r,null==i?1:i);var n,a}function nr(t,e,r,i){this.h=+t,this.c=+e,this.l=+r,this.opacity=+i}function ar(t){var e;return isNaN(t.h)?new Ke(t.l,0,0,t.opacity):(e=t.h*ze,new Ke(t.l,Math.cos(e)*t.c,Math.sin(e)*t.c,t.opacity))}ue(Ke,function(t,e,r,i){return 1===arguments.length?Qe(t):new Ke(t,e,r,null==i?1:i)},de(pe,{brighter(t){return new Ke(this.l+18*(null==t?1:t),this.a,this.b,this.opacity)},darker(t){return new Ke(this.l-18*(null==t?1:t),this.a,this.b,this.opacity)},rgb(){var t=(this.l+16)/116,e=isNaN(this.a)?t:t+this.a/500,r=isNaN(this.b)?t:t-this.b/200;return new Le(er(3.1338561*(e=We*tr(e))-1.6168667*(t=He*tr(t))-.4906146*(r=qe*tr(r))),er(-.9787684*e+1.9161415*t+.033454*r),er(.0719453*e-.2289914*t+1.4052427*r),this.opacity)}})),ue(nr,ir,de(pe,{brighter(t){return new nr(this.h,this.c,this.l+18*(null==t?1:t),this.opacity)},darker(t){return new nr(this.h,this.c,this.l-18*(null==t?1:t),this.opacity)},rgb(){return ar(this).rgb()}}));const sr=t=>()=>t;function or(e,r){return function(t){return e+t*r}}function lr(a){return 1==(a=+a)?cr:function(t,e){return e-t?(r=t,i=e,n=a,r=Math.pow(r,n),i=Math.pow(i,n)-r,n=1/n,function(t){return Math.pow(r+t*i,n)}):sr(isNaN(t)?e:t);var r,i,n}}function cr(t,e){var r=e-t;return r?or(t,r):sr(isNaN(t)?e:t)}const hr=function t(e){var s=lr(e);function r(e,t){var r=s((e=De(e)).r,(t=De(t)).r),i=s(e.g,t.g),n=s(e.b,t.b),a=cr(e.opacity,t.opacity);return function(t){return e.r=r(t),e.g=i(t),e.b=n(t),e.opacity=a(t),e+""}}return r.gamma=t,r}(1);function ur(e,r){return e=+e,r=+r,function(t){return e*(1-t)+r*t}}var dr=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,pr=new RegExp(dr.source,"g");function fr(t,i){var e,r,n,a,s,o=dr.lastIndex=pr.lastIndex=0,l=-1,c=[],h=[];for(t+="",i+="";(e=dr.exec(t))&&(r=pr.exec(i));)(n=r.index)>o&&(n=i.slice(o,n),c[l]?c[l]+=n:c[++l]=n),(e=e[0])===(r=r[0])?c[l]?c[l]+=r:c[++l]=r:(c[++l]=null,h.push({i:l,x:ur(e,r)})),o=pr.lastIndex;return o<i.length&&(n=i.slice(o),c[l]?c[l]+=n:c[++l]=n),c.length<2?h[0]?(s=h[0].x,function(t){return s(t)+""}):(a=i,function(){return a}):(i=h.length,function(t){for(var e,r=0;r<i;++r)c[(e=h[r]).i]=e.x(t);return c.join("")})}function gr(t,e){var r=typeof e;return null==e||"boolean"==r?sr(e):("number"==r?ur:"string"==r?(r=Ce(e))?(e=r,hr):fr:e instanceof Ce?hr:e instanceof Date?function(e,r){var i=new Date;return e=+e,r=+r,function(t){return i.setTime(e*(1-t)+r*t),i}}:(r=e,!ArrayBuffer.isView(r)||r instanceof DataView?Array.isArray(e)?function(t,e){for(var r=e?e.length:0,i=t?Math.min(r,t.length):0,n=new Array(i),a=new Array(r),s=0;s<i;++s)n[s]=gr(t[s],e[s]);for(;s<r;++s)a[s]=e[s];return function(t){for(s=0;s<i;++s)a[s]=n[s](t);return a}}:"function"!=typeof e.valueOf&&"function"!=typeof e.toString||isNaN(e)?function(t,e){var r,i={},n={};for(r in null!==t&&"object"==typeof t||(t={}),e=null!==e&&"object"==typeof e?e:{})r in t?i[r]=gr(t[r],e[r]):n[r]=e[r];return function(t){for(r in i)n[r]=i[r](t);return n}}:ur:function(e,r){r=r||[];var i,n=e?Math.min(r.length,e.length):0,a=r.slice();return function(t){for(i=0;i<n;++i)a[i]=e[i]*(1-t)+r[i]*t;return a}}))(t,e)}function yr(e,r){return e=+e,r=+r,function(t){return Math.round(e*(1-t)+r*t)}}var mr,br=180/Math.PI,_r={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function xr(t,e,r,i,n,a){var s,o,l;return(s=Math.sqrt(t*t+e*e))&&(t/=s,e/=s),(l=t*r+e*i)&&(r-=t*l,i-=e*l),(o=Math.sqrt(r*r+i*i))&&(r/=o,i/=o,l/=o),t*i<e*r&&(t=-t,e=-e,l=-l,s=-s),{translateX:n,translateY:a,rotate:Math.atan2(e,t)*br,skewX:Math.atan(l)*br,scaleX:s,scaleY:o}}function vr(u,d,p,f){function g(t){return t.length?t.pop()+" ":""}return function(t,e){var r,i,n,a,s,o,l,c=[],h=[];return t=u(t),e=u(e),r=t.translateX,i=t.translateY,n=e.translateX,a=e.translateY,s=c,o=h,r!==n||i!==a?(l=s.push("translate(",null,d,null,p),o.push({i:l-4,x:ur(r,n)},{i:l-2,x:ur(i,a)})):(n||a)&&s.push("translate("+n+d+a+p),o=t.rotate,r=e.rotate,l=c,i=h,o!==r?(180<o-r?r+=360:180<r-o&&(o+=360),i.push({i:l.push(g(l)+"rotate(",null,f)-2,x:ur(o,r)})):r&&l.push(g(l)+"rotate("+r+f),s=t.skewX,n=e.skewX,a=c,i=h,s!==n?i.push({i:a.push(g(a)+"skewX(",null,f)-2,x:ur(s,n)}):n&&a.push(g(a)+"skewX("+n+f),o=t.scaleX,r=t.scaleY,i=e.scaleX,s=e.scaleY,a=c,n=h,o!==i||r!==s?(t=a.push(g(a)+"scale(",null,",",null,")"),n.push({i:t-4,x:ur(o,i)},{i:t-2,x:ur(r,s)})):1===i&&1===s||a.push(g(a)+"scale("+i+","+s+")"),function(t){for(var e,r=-1,i=h.length;++r<i;)c[(e=h[r]).i]=e.x(t);return c.join("")}}}var kr,wr=vr(function(t){return(t=new("function"==typeof DOMMatrix?DOMMatrix:WebKitCSSMatrix)(t+"")).isIdentity?_r:xr(t.a,t.b,t.c,t.d,t.e,t.f)},"px, ","px)","deg)"),Tr=vr(function(t){return null!=t&&((mr=mr||document.createElementNS("http://www.w3.org/2000/svg","g")).setAttribute("transform",t),t=mr.transform.baseVal.consolidate())?xr((t=t.matrix).a,t.b,t.c,t.d,t.e,t.f):_r},", ",")",")");function Cr(e,t){var r=kr((e=ir(e)).h,(t=ir(t)).h),i=cr(e.c,t.c),n=cr(e.l,t.l),a=cr(e.opacity,t.opacity);return function(t){return e.h=r(t),e.c=i(t),e.l=n(t),e.opacity=a(t),e+""}}kr=function(t,e){var r=e-t;return r?or(t,180<r||r<-180?r-360*Math.round(r/360):r):sr(isNaN(t)?e:t)};var Er,Sr,Ar=0,Dr=0,Nr=0,Or=1e3,Br=0,Ir=0,Fr=0,Rr="object"==typeof performance&&performance.now?performance:Date,Pr="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function $r(){return Ir||(Pr(Yr),Ir=Rr.now()+Fr)}function Yr(){Ir=0}function jr(){this._call=this._time=this._next=null}function zr(t,e,r){var i=new jr;return i.restart(t,e,r),i}function Ur(){Ir=(Br=Rr.now())+Fr,Ar=Dr=0;try{$r(),++Ar;for(var t,e=Er;e;)0<=(t=Ir-e._time)&&e._call.call(void 0,t),e=e._next;--Ar}finally{for(var r,i,n=Er,a=1/(Ar=0);n;)n=n._call?(a>n._time&&(a=n._time),(r=n)._next):(i=n._next,n._next=null,r?r._next=i:Er=i);Sr=r,Hr(a),Ir=0}}function Wr(){var t=Rr.now(),e=t-Br;Or<e&&(Fr-=e,Br=t)}function Hr(t){Ar||(Dr=Dr&&clearTimeout(Dr),24<t-Ir?(t<1/0&&(Dr=setTimeout(Ur,t-Rr.now()-Fr)),Nr=Nr&&clearInterval(Nr)):(Nr||(Br=Rr.now(),Nr=setInterval(Wr,Or)),Ar=1,Pr(Ur)))}function qr(e,r,t){var i=new jr;return r=null==r?0:+r,i.restart(t=>{i.stop(),e(t+r)},r,t),i}jr.prototype=zr.prototype={constructor:jr,restart:function(t,e,r){if("function"!=typeof t)throw new TypeError("callback is not a function");r=(null==r?$r():+r)+(null==e?0:+e),this._next||Sr===this||(Sr?Sr._next=this:Er=this,Sr=this),this._call=t,this._time=r,Hr()},stop:function(){this._call&&(this._call=null,this._time=1/0,Hr())}};var Vr=_t("start","end","cancel","interrupt"),Gr=[],Xr=0,Zr=1,Qr=2,Kr=3,Jr=4,ti=5,ei=6;function ri(t,e,r,i,n,a){var s,o,l,c,h,u=t.__transition;if(u){if(r in u)return}else t.__transition={};function d(t){var e,r,i,n;if(l.state!==Zr)return f();for(e in h)if(n=h[e],n.name===l.name){if(n.state===Kr)return qr(d);n.state===Jr?(n.state=ei,n.timer.stop(),n.on.call("interrupt",s,s.__data__,n.index,n.group),delete h[e]):+e<o&&(n.state=ei,n.timer.stop(),n.on.call("cancel",s,s.__data__,n.index,n.group),delete h[e])}if(qr(function(){l.state===Kr&&(l.state=Jr,l.timer.restart(p,l.delay,l.time),p(t))}),l.state=Qr,l.on.call("start",s,s.__data__,l.index,l.group),l.state===Qr){for(l.state=Kr,c=new Array(i=l.tween.length),e=0,r=-1;e<i;++e)(n=l.tween[e].value.call(s,s.__data__,l.index,l.group))&&(c[++r]=n);c.length=r+1}}function p(t){for(var e=t<l.duration?l.ease.call(null,t/l.duration):(l.timer.restart(f),l.state=ti,1),r=-1,i=c.length;++r<i;)c[r].call(s,e);l.state===ti&&(l.on.call("end",s,s.__data__,l.index,l.group),f())}function f(){for(var t in l.state=ei,l.timer.stop(),delete h[o],h)return;delete s.__transition}s=t,o=r,l={name:e,index:i,group:n,on:Vr,tween:Gr,time:a.time,delay:a.delay,duration:a.duration,ease:a.ease,timer:null,state:Xr},((h=s.__transition)[o]=l).timer=zr(function(t){l.state=Zr,l.timer.restart(d,l.delay,l.time),l.delay<=t&&d(t-l.delay)},0,l.time)}function ii(t,e){t=ai(t,e);if(t.state>Xr)throw new Error("too late; already scheduled");return t}function ni(t,e){t=ai(t,e);if(t.state>Kr)throw new Error("too late; already running");return t}function ai(t,e){t=t.__transition;if(t=t&&t[e])return t;throw new Error("transition not found")}function si(t,e,r){var i=t._id;return t.each(function(){var t=ni(this,i);(t.value||(t.value={}))[e]=r.apply(this,arguments)}),function(t){return ai(t,i).value[e]}}function oi(t,e){var r;return("number"==typeof e?ur:e instanceof Ce?hr:(r=Ce(e))?(e=r,hr):fr)(t,e)}function li(i,n){var a,s;function t(){var e,r,t=n.apply(this,arguments);return a=t!==s?(s=t)&&(e=i,r=t,function(t){this.setAttributeNS(e.space,e.local,r.call(this,t))}):a}return t._value=n,t}function ci(i,n){var a,s;function t(){var e,r,t=n.apply(this,arguments);return a=t!==s?(s=t)&&(e=i,r=t,function(t){this.setAttribute(e,r.call(this,t))}):a}return t._value=n,t}var hi=ce.prototype.constructor;function ui(t){return function(){this.style.removeProperty(t)}}function di(n,a,s){var o,l;function t(){var e,r,i,t=a.apply(this,arguments);return o=t!==l?(l=t)&&(e=n,r=t,i=s,function(t){this.style.setProperty(e,r.call(this,t),i)}):o}return t._value=a,t}function pi(r){var i,n;function t(){var e,t=r.apply(this,arguments);return i=t!==n?(n=t)&&(e=t,function(t){this.textContent=e.call(this,t)}):i}return t._value=r,t}var fi=0;function gi(t,e,r,i){this._groups=t,this._parents=e,this._name=r,this._id=i}t=ce.prototype;gi.prototype={constructor:gi,select:function(t){var e=this._name,r=this._id;"function"!=typeof t&&(t=St(t));for(var i=this._groups,n=i.length,a=new Array(n),s=0;s<n;++s)for(var o,l,c=i[s],h=c.length,u=a[s]=new Array(h),d=0;d<h;++d)(o=c[d])&&(l=t.call(o,o.__data__,d,c))&&("__data__"in o&&(l.__data__=o.__data__),u[d]=l,ri(u[d],e,r,d,u,ai(o,r)));return new gi(a,this._parents,e,r)},selectAll:function(t){var e=this._name,r=this._id;"function"!=typeof t&&(t=Lt(t));for(var i=this._groups,n=i.length,a=[],s=[],o=0;o<n;++o)for(var l,c=i[o],h=c.length,u=0;u<h;++u)if(l=c[u]){for(var d,p=t.call(l,l.__data__,u,c),f=ai(l,r),g=0,y=p.length;g<y;++g)(d=p[g])&&ri(d,e,r,g,p,f);a.push(p),s.push(l)}return new gi(a,s,e,r)},selectChild:t.selectChild,selectChildren:t.selectChildren,filter:function(t){"function"!=typeof t&&(t=Mt(t));for(var e=this._groups,r=e.length,i=new Array(r),n=0;n<r;++n)for(var a,s=e[n],o=s.length,l=i[n]=[],c=0;c<o;++c)(a=s[c])&&t.call(a,a.__data__,c,s)&&l.push(a);return new gi(i,this._parents,this._name,this._id)},merge:function(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,r=t._groups,i=e.length,t=r.length,n=Math.min(i,t),a=new Array(i),s=0;s<n;++s)for(var o,l=e[s],c=r[s],h=l.length,u=a[s]=new Array(h),d=0;d<h;++d)(o=l[d]||c[d])&&(u[d]=o);for(;s<i;++s)a[s]=e[s];return new gi(a,this._parents,this._name,this._id)},selection:function(){return new hi(this._groups,this._parents)},transition:function(){for(var t=this._name,e=this._id,r=++fi,i=this._groups,n=i.length,a=0;a<n;++a)for(var s,o=i[a],l=o.length,c=0;c<l;++c)(s=o[c])&&ri(s,t,r,c,o,{time:(s=ai(s,e)).time+s.delay+s.duration,delay:0,duration:s.duration,ease:s.ease});return new gi(i,this._parents,t,r)},call:t.call,nodes:t.nodes,node:t.node,size:t.size,empty:t.empty,each:t.each,on:function(t,e){var r,i,n,a,s,o,l=this._id;return arguments.length<2?ai(this.node(),l).on.on(t):this.each((r=l,n=e,o=((i=t)+"").trim().split(/^|\s+/).every(function(t){var e=t.indexOf(".");return!(t=0<=e?t.slice(0,e):t)||"start"===t})?ii:ni,function(){var t=o(this,r),e=t.on;e!==a&&(s=(a=e).copy()).on(i,n),t.on=s}))},attr:function(t,e){var r=Tt(t),i="transform"===r?Tr:oi;return this.attrTween(t,"function"==typeof e?(r.local?function(i,n,a){var s,o,l;return function(){var t,e,r=a(this);return null==r?void this.removeAttributeNS(i.space,i.local):(t=this.getAttributeNS(i.space,i.local))===(e=r+"")?null:t===s&&e===o?l:(o=e,l=n(s=t,r))}}:function(i,n,a){var s,o,l;return function(){var t,e,r=a(this);return null==r?void this.removeAttribute(i):(t=this.getAttribute(i))===(e=r+"")?null:t===s&&e===o?l:(o=e,l=n(s=t,r))}})(r,i,si(this,"attr."+t,e)):null==e?(r.local?function(t){return function(){this.removeAttributeNS(t.space,t.local)}}:function(t){return function(){this.removeAttribute(t)}})(r):(r.local?function(e,r,i){var n,a,s=i+"";return function(){var t=this.getAttributeNS(e.space,e.local);return t===s?null:t===n?a:a=r(n=t,i)}}:function(e,r,i){var n,a,s=i+"";return function(){var t=this.getAttribute(e);return t===s?null:t===n?a:a=r(n=t,i)}})(r,i,e))},attrTween:function(t,e){var r="attr."+t;if(arguments.length<2)return(r=this.tween(r))&&r._value;if(null==e)return this.tween(r,null);if("function"!=typeof e)throw new Error;return t=Tt(t),this.tween(r,(t.local?li:ci)(t,e))},style:function(t,e,r){var i,n,a,s,o,l,c,h,u,d,p,f,g,y,m,b,_,x,v,k,w,T,C,E,S,A="transform"==(t+="")?wr:oi;return null==e?this.styleTween(t,(w=t,T=A,function(){var t=Wt(this,w),e=(this.style.removeProperty(w),Wt(this,w));return t===e?null:t===C&&e===E?S:S=T(C=t,E=e)})).on("end.style."+t,ui(t)):"function"==typeof e?this.styleTween(t,(b=A,_=si(this,"style."+(m=t),e),function(){var t=Wt(this,m),e=_(this),r=e+"";return null==e&&(this.style.removeProperty(m),r=e=Wt(this,m)),t===r?null:t===x&&r===v?k:(v=r,k=b(x=t,e))})).each((c=this._id,y="end."+(g="style."+(h=t)),function(){var t=ni(this,c),e=t.on,r=null==t.value[g]?f=f||ui(h):void 0;e===u&&p===r||(d=(u=e).copy()).on(y,p=r),t.on=d})):this.styleTween(t,(i=t,n=A,l=(a=e)+"",function(){var t=Wt(this,i);return t===l?null:t===s?o:o=n(s=t,a)}),r).on("end.style."+t,null)},styleTween:function(t,e,r){var i="style."+(t+="");if(arguments.length<2)return(i=this.tween(i))&&i._value;if(null==e)return this.tween(i,null);if("function"!=typeof e)throw new Error;return this.tween(i,di(t,e,null==r?"":r))},text:function(t){return this.tween("text","function"==typeof t?(r=si(this,"text",t),function(){var t=r(this);this.textContent=null==t?"":t}):(e=null==t?"":t+"",function(){this.textContent=e}));var e,r},textTween:function(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(null==t)return this.tween(e,null);if("function"!=typeof t)throw new Error;return this.tween(e,pi(t))},remove:function(){return this.on("end.remove",(r=this._id,function(){var t,e=this.parentNode;for(t in this.__transition)if(+t!==r)return;e&&e.removeChild(this)}));var r},tween:function(t,e){var r=this._id;if(t+="",arguments.length<2){for(var i,n=ai(this.node(),r).tween,a=0,s=n.length;a<s;++a)if((i=n[a]).name===t)return i.value;return null}return this.each((null==e?function(n,a){var s,o;return function(){var t=ni(this,n),e=t.tween;if(e!==s)for(var r=0,i=(o=s=e).length;r<i;++r)if(o[r].name===a){(o=o.slice()).splice(r,1);break}t.tween=o}}:function(a,s,o){var l,c;if("function"!=typeof o)throw new Error;return function(){var t=ni(this,a),e=t.tween;if(e!==l){c=(l=e).slice();for(var r={name:s,value:o},i=0,n=c.length;i<n;++i)if(c[i].name===s){c[i]=r;break}i===n&&c.push(r)}t.tween=c}})(r,t,e))},delay:function(t){var e=this._id;return arguments.length?this.each(("function"==typeof t?function(t,e){return function(){ii(this,t).delay=+e.apply(this,arguments)}}:function(t,e){return e=+e,function(){ii(this,t).delay=e}})(e,t)):ai(this.node(),e).delay},duration:function(t){var e=this._id;return arguments.length?this.each(("function"==typeof t?function(t,e){return function(){ni(this,t).duration=+e.apply(this,arguments)}}:function(t,e){return e=+e,function(){ni(this,t).duration=e}})(e,t)):ai(this.node(),e).duration},ease:function(t){var e=this._id;return arguments.length?this.each(function(t,e){if("function"!=typeof e)throw new Error;return function(){ni(this,t).ease=e}}(e,t)):ai(this.node(),e).ease},easeVarying:function(t){if("function"!=typeof t)throw new Error;return this.each((e=this._id,r=t,function(){var t=r.apply(this,arguments);if("function"!=typeof t)throw new Error;ni(this,e).ease=t}));var e,r},end:function(){var n,a,s=this,o=s._id,l=s.size();return new Promise(function(t,e){var r={value:e},i={value:function(){0==--l&&t()}};s.each(function(){var t=ni(this,o),e=t.on;e!==n&&((a=(n=e).copy())._.cancel.push(r),a._.interrupt.push(r),a._.end.push(i)),t.on=a}),0===l&&t()})},[Symbol.iterator]:t[Symbol.iterator]};var yi={time:null,delay:0,duration:250,ease:function(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}};ce.prototype.interrupt=function(o){return this.each(function(){var t,e,r,i=this,n=o,a=i.__transition,s=!0;if(a){for(r in n=null==n?null:n+"",a)(t=a[r]).name!==n?s=!1:(e=t.state>Qr&&t.state<ti,t.state=ei,t.timer.stop(),t.on.call(e?"interrupt":"cancel",i,i.__data__,t.index,t.group),delete a[r]);s&&delete i.__transition}})},ce.prototype.transition=function(t){var e,r;t=t instanceof gi?(e=t._id,t._name):(e=++fi,(r=yi).time=$r(),null==t?null:t+"");for(var i=this._groups,n=i.length,a=0;a<n;++a)for(var s,o=i[a],l=o.length,c=0;c<l;++c)(s=o[c])&&ri(s,t,e,c,o,r||function(t,e){for(var r;!(r=t.__transition)||!(r=r[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return r}(s,e));return new gi(i,this._parents,t,e)};const mi=Math.PI,bi=2*mi,_i=1e-6,xi=bi-_i;function vi(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function ki(){return new vi}function wi(t){if(t.ok)return t.text();throw new Error(t.status+" "+t.statusText)}vi.prototype=ki.prototype={constructor:vi,moveTo:function(t,e){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)},closePath:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(t,e){this._+="L"+(this._x1=+t)+","+(this._y1=+e)},quadraticCurveTo:function(t,e,r,i){this._+="Q"+ +t+","+ +e+","+(this._x1=+r)+","+(this._y1=+i)},bezierCurveTo:function(t,e,r,i,n,a){this._+="C"+ +t+","+ +e+","+ +r+","+ +i+","+(this._x1=+n)+","+(this._y1=+a)},arcTo:function(t,e,r,i,n){var a,s,o=this._x1,l=this._y1,c=(r=+r)-(t=+t),h=(i=+i)-(e=+e),u=o-t,d=l-e,p=u*u+d*d;if((n=+n)<0)throw new Error("negative radius: "+n);null===this._x1?this._+="M"+(this._x1=t)+","+(this._y1=e):p>_i&&(Math.abs(d*c-h*u)>_i&&n?(s=c*c+h*h,i=(r=r-o)*r+(o=i-l)*o,l=Math.sqrt(s),a=Math.sqrt(p),p=(s=n*Math.tan((mi-Math.acos((s+p-i)/(2*l*a)))/2))/a,i=s/l,Math.abs(p-1)>_i&&(this._+="L"+(t+p*u)+","+(e+p*d)),this._+="A"+n+","+n+",0,0,"+ +(u*o<d*r)+","+(this._x1=t+i*c)+","+(this._y1=e+i*h)):this._+="L"+(this._x1=t)+","+(this._y1=e))},arc:function(t,e,r,i,n,a){t=+t,e=+e,a=!!a;var s=(r=+r)*Math.cos(i),o=r*Math.sin(i),l=t+s,c=e+o,h=1^a,a=a?i-n:n-i;if(r<0)throw new Error("negative radius: "+r);null===this._x1?this._+="M"+l+","+c:(Math.abs(this._x1-l)>_i||Math.abs(this._y1-c)>_i)&&(this._+="L"+l+","+c),r&&((a=a<0?a%bi+bi:a)>xi?this._+="A"+r+","+r+",0,1,"+h+","+(t-s)+","+(e-o)+"A"+r+","+r+",0,1,"+h+","+(this._x1=l)+","+(this._y1=c):a>_i&&(this._+="A"+r+","+r+",0,"+ +(a>=mi)+","+h+","+(this._x1=t+r*Math.cos(n))+","+(this._y1=e+r*Math.sin(n))))},rect:function(t,e,r,i){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)+"h"+ +r+"v"+ +i+"h"+-r+"Z"},toString:function(){return this._}};Ti="image/svg+xml";var Ti,Ci=(t,e)=>{return fetch(t,e).then(wi).then(t=>(new DOMParser).parseFromString(t,Ti))};function Ei(t,e){var r;return(e=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0?null:[1<(r=t.slice(0,e)).length?r[0]+r.slice(2):r,+t.slice(e+1)]}function Si(t){return(t=Ei(Math.abs(t)))?t[1]:NaN}var Ai,Di=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Li(t){var e;if(e=Di.exec(t))return new Mi({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]});throw new Error("invalid format: "+t)}function Mi(t){this.fill=void 0===t.fill?" ":t.fill+"",this.align=void 0===t.align?">":t.align+"",this.sign=void 0===t.sign?"-":t.sign+"",this.symbol=void 0===t.symbol?"":t.symbol+"",this.zero=!!t.zero,this.width=void 0===t.width?void 0:+t.width,this.comma=!!t.comma,this.precision=void 0===t.precision?void 0:+t.precision,this.trim=!!t.trim,this.type=void 0===t.type?"":t.type+""}function Ni(t,e){var r,e=Ei(t,e);return e?(r=e[0],(e=e[1])<0?"0."+new Array(-e).join("0")+r:r.length>e+1?r.slice(0,e+1)+"."+r.slice(e+1):r+new Array(e-r.length+2).join("0")):t+""}Li.prototype=Mi.prototype,Mi.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};const Oi={"%":(t,e)=>(100*t).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:function(t){return 1e21<=Math.abs(t=Math.round(t))?t.toLocaleString("en").replace(/,/g,""):t.toString(10)},e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>Ni(100*t,e),r:Ni,s:function(t,e){var r,i,n=Ei(t,e);return n?(r=n[0],(n=(n=n[1])-(Ai=3*Math.max(-8,Math.min(8,Math.floor(n/3))))+1)===(i=r.length)?r:i<n?r+new Array(n-i+1).join("0"):0<n?r.slice(0,n)+"."+r.slice(n):"0."+new Array(1-n).join("0")+Ei(t,Math.max(0,e+n-1))[0]):t+""},X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function Bi(t){return t}var Ii,Fi,Ri=Array.prototype.map,Pi=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function $i(t){var e,o,l,k=void 0===t.grouping||void 0===t.thousands?Bi:(o=Ri.call(t.grouping,Number),l=t.thousands+"",function(t,e){for(var r=t.length,i=[],n=0,a=o[0],s=0;0<r&&0<a&&(e<s+a+1&&(a=Math.max(1,e-s)),i.push(t.substring(r-=a,r+a)),!((s+=a+1)>e));)a=o[n=(n+1)%o.length];return i.reverse().join(l)}),i=void 0===t.currency?"":t.currency[0]+"",n=void 0===t.currency?"":t.currency[1]+"",w=void 0===t.decimal?".":t.decimal+"",T=void 0===t.numerals?Bi:(e=Ri.call(t.numerals,String),function(t){return t.replace(/[0-9]/g,function(t){return e[+t]})}),a=void 0===t.percent?"%":t.percent+"",C=void 0===t.minus?"−":t.minus+"",E=void 0===t.nan?"NaN":t.nan+"";function s(t){var c=(t=Li(t)).fill,h=t.align,u=t.sign,e=t.symbol,d=t.zero,p=t.width,f=t.comma,g=t.precision,y=t.trim,m=t.type,b=("n"===m?(f=!0,m="g"):Oi[m]||(void 0===g&&(g=12),y=!0,m="g"),(d||"0"===c&&"="===h)&&(d=!0,c="0",h="="),"$"===e?i:"#"===e&&/[boxX]/.test(m)?"0"+m.toLowerCase():""),_="$"===e?n:/[%p]/.test(m)?a:"",x=Oi[m],v=/[defgprs%]/.test(m);function r(t){var e,r,i,n=b,a=_;if("c"===m)a=x(t)+a,t="";else{var s=(t=+t)<0||1/t<0;if(t=isNaN(t)?E:x(Math.abs(t),g),y&&(t=function(t){t:for(var e,r=t.length,i=1,n=-1;i<r;++i)switch(t[i]){case".":n=e=i;break;case"0":0===n&&(n=i),e=i;break;default:if(!+t[i])break t;0<n&&(n=0)}return 0<n?t.slice(0,n)+t.slice(e+1):t}(t)),n=((s=s&&0==+t&&"+"!==u?!1:s)?"("===u?u:C:"-"===u||"("===u?"":u)+n,a=("s"===m?Pi[8+Ai/3]:"")+a+(s&&"("===u?")":""),v)for(e=-1,r=t.length;++e<r;)if((i=t.charCodeAt(e))<48||57<i){a=(46===i?w+t.slice(e+1):t.slice(e))+a,t=t.slice(0,e);break}}f&&!d&&(t=k(t,1/0));var o=n.length+t.length+a.length,l=o<p?new Array(p-o+1).join(c):"";switch(f&&d&&(t=k(l+t,l.length?p-a.length:1/0),l=""),h){case"<":t=n+t+a+l;break;case"=":t=n+l+t+a;break;case"^":t=l.slice(0,o=l.length>>1)+n+t+a+l.slice(o);break;default:t=l+n+t+a}return T(t)}return g=void 0===g?6:/[gprs]/.test(m)?Math.max(1,Math.min(21,g)):Math.max(0,Math.min(20,g)),r.toString=function(){return t+""},r}return{format:s,formatPrefix:function(t,e){var r=s(((t=Li(t)).type="f",t)),t=3*Math.max(-8,Math.min(8,Math.floor(Si(e)/3))),i=Math.pow(10,-t),n=Pi[8+t/3];return function(t){return r(i*t)+n}}}}function Yi(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t)}return this}e=$i({thousands:",",grouping:[3],currency:["$",""]}),Ii=e.format,Fi=e.formatPrefix;const ji=Symbol("implicit");function zi(t){return+t}var Ui=[0,1];function Wi(t){return t}function Hi(e,r){return(r-=e=+e)?function(t){return(t-e)/r}:(t=isNaN(r)?NaN:.5,function(){return t});var t}function qi(t,e,r){var i=t[0],t=t[1],n=e[0],e=e[1],n=t<i?(i=Hi(t,i),r(e,n)):(i=Hi(i,t),r(n,e));return function(t){return n(i(t))}}function Vi(r,t,e){var i=Math.min(r.length,t.length)-1,n=new Array(i),a=new Array(i),s=-1;for(r[i]<r[0]&&(r=r.slice().reverse(),t=t.slice().reverse());++s<i;)n[s]=Hi(r[s],r[s+1]),a[s]=e(t[s],t[s+1]);return function(t){var e=X(r,t,1,i)-1;return a[e](n[e](t))}}function Gi(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function Xi(){var r,i,e,n,a,s,o=Ui,l=Ui,c=gr,h=Wi;function u(){var e,r,t,i=Math.min(o.length,l.length);return h!==Wi&&(e=o[0],(r=o[i-1])<e&&(t=e,e=r,r=t),h=function(t){return Math.max(e,Math.min(r,t))}),n=2<i?Vi:qi,a=s=null,d}function d(t){return null==t||isNaN(t=+t)?e:(a=a||n(o.map(r),l,c))(r(h(t)))}return d.invert=function(t){return h(i((s=s||n(l,o.map(r),ur))(t)))},d.domain=function(t){return arguments.length?(o=Array.from(t,zi),u()):o.slice()},d.range=function(t){return arguments.length?(l=Array.from(t),u()):l.slice()},d.rangeRound=function(t){return l=Array.from(t),c=yr,u()},d.clamp=function(t){return arguments.length?(h=!!t||Wi,u()):h!==Wi},d.interpolate=function(t){return arguments.length?(c=t,u()):c},d.unknown=function(t){return arguments.length?(e=t,d):e},function(t,e){return r=t,i=e,u()}}function Zi(){return Xi()(Wi,Wi)}function Qi(t,e,r,i){var n,a,s=at(t,e,r);switch((i=Li(null==i?",f":i)).type){case"s":var o=Math.max(Math.abs(t),Math.abs(e));return null!=i.precision||isNaN((a=s,a=Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(Si(o)/3)))-Si(Math.abs(a)))))||(i.precision=a),Fi(i,o);case"":case"e":case"g":case"p":case"r":null!=i.precision||isNaN((o=s,n=Math.max(Math.abs(t),Math.abs(e)),o=Math.abs(o),n=Math.abs(n)-o,a=Math.max(0,Si(n)-Si(o))+1))||(i.precision=a-("e"===i.type));break;case"f":case"%":null!=i.precision||isNaN(a=Math.max(0,-Si(Math.abs(s))))||(i.precision=a-2*("%"===i.type))}return Ii(i)}function Ki(c){var h=c.domain;return c.ticks=function(t){var e,r,i,n,a=h(),s=a[0],a=a[a.length-1],t=null==t?10:t,o=-1;if(t=+t,(s=+s)===(a=+a)&&0<t)return[s];if((e=a<s)&&(r=s,s=a,a=r),0===(n=nt(s,a,t))||!isFinite(n))return[];if(0<n){let t=Math.round(s/n),e=Math.round(a/n);for(t*n<s&&++t,e*n>a&&--e,i=new Array(r=e-t+1);++o<r;)i[o]=(t+o)*n}else{n=-n;let t=Math.round(s*n),e=Math.round(a*n);for(t/n<s&&++t,e/n>a&&--e,i=new Array(r=e-t+1);++o<r;)i[o]=(t+o)/n}return e&&i.reverse(),i},c.tickFormat=function(t,e){var r=h();return Qi(r[0],r[r.length-1],null==t?10:t,e)},c.nice=function(t){null==t&&(t=10);var e,r,i=h(),n=0,a=i.length-1,s=i[n],o=i[a],l=10;for(o<s&&(r=s,s=o,o=r,r=n,n=a,a=r);0<l--;){if((r=nt(s,o,t))===e)return i[n]=s,i[a]=o,h(i);if(0<r)s=Math.floor(s/r)*r,o=Math.ceil(o/r)*r;else{if(!(r<0))break;s=Math.ceil(s*r)/r,o=Math.floor(o*r)/r}e=r}return c},c}var Ji=new Date,tn=new Date;function en(a,s,r,i){function o(t){return a(t=0===arguments.length?new Date:new Date(+t)),t}return o.floor=function(t){return a(t=new Date(+t)),t},o.ceil=function(t){return a(t=new Date(t-1)),s(t,1),a(t),t},o.round=function(t){var e=o(t),r=o.ceil(t);return t-e<r-t?e:r},o.offset=function(t,e){return s(t=new Date(+t),null==e?1:Math.floor(e)),t},o.range=function(t,e,r){var i,n=[];if(t=o.ceil(t),r=null==r?1:Math.floor(r),t<e&&0<r)for(;n.push(i=new Date(+t)),s(t,r),a(t),i<t&&t<e;);return n},o.filter=function(r){return en(function(t){if(t<=t)for(;a(t),!r(t);)t.setTime(t-1)},function(t,e){if(t<=t)if(e<0)for(;++e<=0;)for(;s(t,-1),!r(t););else for(;0<=--e;)for(;s(t,1),!r(t););})},r&&(o.count=function(t,e){return Ji.setTime(+t),tn.setTime(+e),a(Ji),a(tn),Math.floor(r(Ji,tn))},o.every=function(e){return e=Math.floor(e),isFinite(e)&&0<e?1<e?o.filter(i?function(t){return i(t)%e==0}:function(t){return o.count(0,t)%e==0}):o:null}),o}var rn=en(function(){},function(t,e){t.setTime(+t+e)},function(t,e){return e-t});rn.every=function(r){return r=Math.floor(r),isFinite(r)&&0<r?1<r?en(function(t){t.setTime(Math.floor(t/r)*r)},function(t,e){t.setTime(+t+e*r)},function(t,e){return(e-t)/r}):rn:null};const nn=rn,an=(rn.range,1e3),sn=6e4,on=36e5,ln=864e5,cn=7*ln,hn=(ln,365*ln);fe=en(function(t){t.setTime(t-t.getMilliseconds())},function(t,e){t.setTime(+t+e*an)},function(t,e){return(e-t)/an},function(t){return t.getUTCSeconds()});const un=fe;fe.range;t=en(function(t){t.setTime(t-t.getMilliseconds()-t.getSeconds()*an)},function(t,e){t.setTime(+t+e*sn)},function(t,e){return(e-t)/sn},function(t){return t.getMinutes()});const dn=t;t.range;e=en(function(t){t.setTime(t-t.getMilliseconds()-t.getSeconds()*an-t.getMinutes()*sn)},function(t,e){t.setTime(+t+e*on)},function(t,e){return(e-t)/on},function(t){return t.getHours()});const pn=e;e.range;fe=en(t=>t.setHours(0,0,0,0),(t,e)=>t.setDate(t.getDate()+e),(t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*sn)/ln,t=>t.getDate()-1);const fn=fe;function gn(e){return en(function(t){t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},function(t,e){t.setDate(t.getDate()+7*e)},function(t,e){return(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*sn)/cn})}fe.range;var yn=gn(0),mn=gn(1),t=gn(2),e=gn(3),bn=gn(4),fe=gn(5),r=gn(6),t=(yn.range,mn.range,t.range,e.range,bn.range,fe.range,r.range,en(function(t){t.setDate(1),t.setHours(0,0,0,0)},function(t,e){t.setMonth(t.getMonth()+e)},function(t,e){return e.getMonth()-t.getMonth()+12*(e.getFullYear()-t.getFullYear())},function(t){return t.getMonth()}));const _n=t;t.range;e=en(function(t){t.setMonth(0,1),t.setHours(0,0,0,0)},function(t,e){t.setFullYear(t.getFullYear()+e)},function(t,e){return e.getFullYear()-t.getFullYear()},function(t){return t.getFullYear()});e.every=function(r){return isFinite(r=Math.floor(r))&&0<r?en(function(t){t.setFullYear(Math.floor(t.getFullYear()/r)*r),t.setMonth(0,1),t.setHours(0,0,0,0)},function(t,e){t.setFullYear(t.getFullYear()+e*r)}):null};const xn=e;e.range;fe=en(function(t){t.setUTCSeconds(0,0)},function(t,e){t.setTime(+t+e*sn)},function(t,e){return(e-t)/sn},function(t){return t.getUTCMinutes()}),r=fe,fe.range,t=en(function(t){t.setUTCMinutes(0,0,0)},function(t,e){t.setTime(+t+e*on)},function(t,e){return(e-t)/on},function(t){return t.getUTCHours()}),e=t,t.range,fe=en(function(t){t.setUTCHours(0,0,0,0)},function(t,e){t.setUTCDate(t.getUTCDate()+e)},function(t,e){return(e-t)/ln},function(t){return t.getUTCDate()-1});const vn=fe;function kn(e){return en(function(t){t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},function(t,e){t.setUTCDate(t.getUTCDate()+7*e)},function(t,e){return(e-t)/cn})}fe.range;var wn=kn(0),Tn=kn(1),t=kn(2),fe=kn(3),Cn=kn(4),En=kn(5),Sn=kn(6),t=(wn.range,Tn.range,t.range,fe.range,Cn.range,En.range,Sn.range,en(function(t){t.setUTCDate(1),t.setUTCHours(0,0,0,0)},function(t,e){t.setUTCMonth(t.getUTCMonth()+e)},function(t,e){return e.getUTCMonth()-t.getUTCMonth()+12*(e.getUTCFullYear()-t.getUTCFullYear())},function(t){return t.getUTCMonth()})),fe=t,En=(t.range,en(function(t){t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},function(t,e){t.setUTCFullYear(t.getUTCFullYear()+e)},function(t,e){return e.getUTCFullYear()-t.getUTCFullYear()},function(t){return t.getUTCFullYear()}));En.every=function(r){return isFinite(r=Math.floor(r))&&0<r?en(function(t){t.setUTCFullYear(Math.floor(t.getUTCFullYear()/r)*r),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},function(t,e){t.setUTCFullYear(t.getUTCFullYear()+e*r)}):null};const An=En;function Dn(a,t,e,r,i,n){const s=[[un,1,an],[un,5,5e3],[un,15,15e3],[un,30,3e4],[n,1,sn],[n,5,3e5],[n,15,9e5],[n,30,18e5],[i,1,on],[i,3,3*on],[i,6,6*on],[i,12,432e5],[r,1,ln],[r,2,2*ln],[e,1,cn],[t,1,2592e6],[t,3,7776e6],[a,1,hn]];function o(t,e,r){var i=Math.abs(e-t)/r,n=V(([,,t])=>t).right(s,i);return n===s.length?a.every(at(t/hn,e/hn,r)):0===n?nn.every(Math.max(at(t,e,r),1)):([t,e]=s[i/s[n-1][2]<s[n][2]/i?n-1:n],t.every(e))}return[function(t,e,r){var i=e<t;i&&([t,e]=[e,t]);r=(r=r&&"function"==typeof r.range?r:o(t,e,r))?r.range(t,+e+1):[];return i?r.reverse():r},o]}En.range,Dn(An,fe,wn,vn,e,r);const[Ln,Mn]=Dn(xn,_n,yn,fn,pn,dn);function Nn(t){var e;return 0<=t.y&&t.y<100?((e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L)).setFullYear(t.y),e):new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function On(t){var e;return 0<=t.y&&t.y<100?((e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L))).setUTCFullYear(t.y),e):new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function Bn(t,e,r){return{y:t,m:e,d:r,H:0,M:0,S:0,L:0}}function In(t){var i=t.dateTime,n=t.date,a=t.time,e=t.periods,r=t.days,s=t.shortDays,o=t.months,l=t.shortMonths,c=Un(e),h=Wn(e),u=Un(r),d=Wn(r),p=Un(s),f=Wn(s),g=Un(o),y=Wn(o),m=Un(l),b=Wn(l),_={a:function(t){return s[t.getDay()]},A:function(t){return r[t.getDay()]},b:function(t){return l[t.getMonth()]},B:function(t){return o[t.getMonth()]},c:null,d:ua,e:ua,f:ya,g:Sa,G:Da,H:da,I:pa,j:fa,L:ga,m:ma,M:ba,p:function(t){return e[+(12<=t.getHours())]},q:function(t){return 1+~~(t.getMonth()/3)},Q:Ka,s:Ja,S:_a,u:xa,U:va,V:wa,w:Ta,W:Ca,x:null,X:null,y:Ea,Y:Aa,Z:La,"%":Qa},x={a:function(t){return s[t.getUTCDay()]},A:function(t){return r[t.getUTCDay()]},b:function(t){return l[t.getUTCMonth()]},B:function(t){return o[t.getUTCMonth()]},c:null,d:Ma,e:Ma,f:Fa,g:Va,G:Xa,H:Na,I:Oa,j:Ba,L:Ia,m:Ra,M:Pa,p:function(t){return e[+(12<=t.getUTCHours())]},q:function(t){return 1+~~(t.getUTCMonth()/3)},Q:Ka,s:Ja,S:$a,u:Ya,U:ja,V:Ua,w:Wa,W:Ha,x:null,X:null,y:qa,Y:Ga,Z:Za,"%":Qa},v={a:function(t,e,r){e=p.exec(e.slice(r));return e?(t.w=f.get(e[0].toLowerCase()),r+e[0].length):-1},A:function(t,e,r){e=u.exec(e.slice(r));return e?(t.w=d.get(e[0].toLowerCase()),r+e[0].length):-1},b:function(t,e,r){e=m.exec(e.slice(r));return e?(t.m=b.get(e[0].toLowerCase()),r+e[0].length):-1},B:function(t,e,r){e=g.exec(e.slice(r));return e?(t.m=y.get(e[0].toLowerCase()),r+e[0].length):-1},c:function(t,e,r){return T(t,i,e,r)},d:ea,e:ea,f:oa,g:Qn,G:Zn,H:ia,I:ia,j:ra,L:sa,m:ta,M:na,p:function(t,e,r){e=c.exec(e.slice(r));return e?(t.p=h.get(e[0].toLowerCase()),r+e[0].length):-1},q:Jn,Q:ca,s:ha,S:aa,u:qn,U:Vn,V:Gn,w:Hn,W:Xn,x:function(t,e,r){return T(t,n,e,r)},X:function(t,e,r){return T(t,a,e,r)},y:Qn,Y:Zn,Z:Kn,"%":la};function k(l,c){return function(t){var e,r,i,n=[],a=-1,s=0,o=l.length;for(t instanceof Date||(t=new Date(+t));++a<o;)37===l.charCodeAt(a)&&(n.push(l.slice(s,a)),null!=(r=Rn[e=l.charAt(++a)])?e=l.charAt(++a):r="e"===e?" ":"0",(i=c[e])&&(e=i(t,r)),n.push(e),s=a+1);return n.push(l.slice(s,a)),n.join("")}}function w(n,a){return function(t){var e,r,i=Bn(1900,void 0,1);if(T(i,n,t+="",0)!=t.length)return null;if("Q"in i)return new Date(i.Q);if("s"in i)return new Date(1e3*i.s+("L"in i?i.L:0));if(!a||"Z"in i||(i.Z=0),"p"in i&&(i.H=i.H%12+12*i.p),void 0===i.m&&(i.m="q"in i?i.q:0),"V"in i){if(i.V<1||53<i.V)return null;"w"in i||(i.w=1),"Z"in i?(e=4<(r=(e=On(Bn(i.y,0,1))).getUTCDay())||0===r?Tn.ceil(e):Tn(e),e=vn.offset(e,7*(i.V-1)),i.y=e.getUTCFullYear(),i.m=e.getUTCMonth(),i.d=e.getUTCDate()+(i.w+6)%7):(e=4<(r=(e=Nn(Bn(i.y,0,1))).getDay())||0===r?mn.ceil(e):mn(e),e=fn.offset(e,7*(i.V-1)),i.y=e.getFullYear(),i.m=e.getMonth(),i.d=e.getDate()+(i.w+6)%7)}else("W"in i||"U"in i)&&("w"in i||(i.w="u"in i?i.u%7:"W"in i?1:0),r="Z"in i?On(Bn(i.y,0,1)).getUTCDay():Nn(Bn(i.y,0,1)).getDay(),i.m=0,i.d="W"in i?(i.w+6)%7+7*i.W-(r+5)%7:i.w+7*i.U-(r+6)%7);return("Z"in i?(i.H+=i.Z/100|0,i.M+=i.Z%100,On):Nn)(i)}}function T(t,e,r,i){for(var n,a,s=0,o=e.length,l=r.length;s<o;){if(l<=i)return-1;if(37===(n=e.charCodeAt(s++))){if(n=e.charAt(s++),!(a=v[n in Rn?e.charAt(s++):n])||(i=a(t,r,i))<0)return-1}else if(n!=r.charCodeAt(i++))return-1}return i}return _.x=k(n,_),_.X=k(a,_),_.c=k(i,_),x.x=k(n,x),x.X=k(a,x),x.c=k(i,x),{format:function(t){var e=k(t+="",_);return e.toString=function(){return t},e},parse:function(t){var e=w(t+="",!1);return e.toString=function(){return t},e},utcFormat:function(t){var e=k(t+="",x);return e.toString=function(){return t},e},utcParse:function(t){var e=w(t+="",!0);return e.toString=function(){return t},e}}}var Fn,Rn={"-":"",_:" ",0:"0"},Pn=/^\s*\d+/,$n=/^%/,Yn=/[\\^$*+?|[\]().{}]/g;function jn(t,e,r){var i=t<0?"-":"",t=(i?-t:t)+"",n=t.length;return i+(n<r?new Array(r-n+1).join(e)+t:t)}function zn(t){return t.replace(Yn,"\\$&")}function Un(t){return new RegExp("^(?:"+t.map(zn).join("|")+")","i")}function Wn(t){return new Map(t.map((t,e)=>[t.toLowerCase(),e]))}function Hn(t,e,r){e=Pn.exec(e.slice(r,r+1));return e?(t.w=+e[0],r+e[0].length):-1}function qn(t,e,r){e=Pn.exec(e.slice(r,r+1));return e?(t.u=+e[0],r+e[0].length):-1}function Vn(t,e,r){e=Pn.exec(e.slice(r,r+2));return e?(t.U=+e[0],r+e[0].length):-1}function Gn(t,e,r){e=Pn.exec(e.slice(r,r+2));return e?(t.V=+e[0],r+e[0].length):-1}function Xn(t,e,r){e=Pn.exec(e.slice(r,r+2));return e?(t.W=+e[0],r+e[0].length):-1}function Zn(t,e,r){e=Pn.exec(e.slice(r,r+4));return e?(t.y=+e[0],r+e[0].length):-1}function Qn(t,e,r){e=Pn.exec(e.slice(r,r+2));return e?(t.y=+e[0]+(68<+e[0]?1900:2e3),r+e[0].length):-1}function Kn(t,e,r){e=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(r,r+6));return e?(t.Z=e[1]?0:-(e[2]+(e[3]||"00")),r+e[0].length):-1}function Jn(t,e,r){e=Pn.exec(e.slice(r,r+1));return e?(t.q=3*e[0]-3,r+e[0].length):-1}function ta(t,e,r){e=Pn.exec(e.slice(r,r+2));return e?(t.m=e[0]-1,r+e[0].length):-1}function ea(t,e,r){e=Pn.exec(e.slice(r,r+2));return e?(t.d=+e[0],r+e[0].length):-1}function ra(t,e,r){e=Pn.exec(e.slice(r,r+3));return e?(t.m=0,t.d=+e[0],r+e[0].length):-1}function ia(t,e,r){e=Pn.exec(e.slice(r,r+2));return e?(t.H=+e[0],r+e[0].length):-1}function na(t,e,r){e=Pn.exec(e.slice(r,r+2));return e?(t.M=+e[0],r+e[0].length):-1}function aa(t,e,r){e=Pn.exec(e.slice(r,r+2));return e?(t.S=+e[0],r+e[0].length):-1}function sa(t,e,r){e=Pn.exec(e.slice(r,r+3));return e?(t.L=+e[0],r+e[0].length):-1}function oa(t,e,r){e=Pn.exec(e.slice(r,r+6));return e?(t.L=Math.floor(e[0]/1e3),r+e[0].length):-1}function la(t,e,r){e=$n.exec(e.slice(r,r+1));return e?r+e[0].length:-1}function ca(t,e,r){e=Pn.exec(e.slice(r));return e?(t.Q=+e[0],r+e[0].length):-1}function ha(t,e,r){e=Pn.exec(e.slice(r));return e?(t.s=+e[0],r+e[0].length):-1}function ua(t,e){return jn(t.getDate(),e,2)}function da(t,e){return jn(t.getHours(),e,2)}function pa(t,e){return jn(t.getHours()%12||12,e,2)}function fa(t,e){return jn(1+fn.count(xn(t),t),e,3)}function ga(t,e){return jn(t.getMilliseconds(),e,3)}function ya(t,e){return ga(t,e)+"000"}function ma(t,e){return jn(t.getMonth()+1,e,2)}function ba(t,e){return jn(t.getMinutes(),e,2)}function _a(t,e){return jn(t.getSeconds(),e,2)}function xa(t){t=t.getDay();return 0===t?7:t}function va(t,e){return jn(yn.count(xn(t)-1,t),e,2)}function ka(t){var e=t.getDay();return 4<=e||0===e?bn(t):bn.ceil(t)}function wa(t,e){return t=ka(t),jn(bn.count(xn(t),t)+(4===xn(t).getDay()),e,2)}function Ta(t){return t.getDay()}function Ca(t,e){return jn(mn.count(xn(t)-1,t),e,2)}function Ea(t,e){return jn(t.getFullYear()%100,e,2)}function Sa(t,e){return jn((t=ka(t)).getFullYear()%100,e,2)}function Aa(t,e){return jn(t.getFullYear()%1e4,e,4)}function Da(t,e){var r=t.getDay();return jn((t=4<=r||0===r?bn(t):bn.ceil(t)).getFullYear()%1e4,e,4)}function La(t){t=t.getTimezoneOffset();return(0<t?"-":(t*=-1,"+"))+jn(t/60|0,"0",2)+jn(t%60,"0",2)}function Ma(t,e){return jn(t.getUTCDate(),e,2)}function Na(t,e){return jn(t.getUTCHours(),e,2)}function Oa(t,e){return jn(t.getUTCHours()%12||12,e,2)}function Ba(t,e){return jn(1+vn.count(An(t),t),e,3)}function Ia(t,e){return jn(t.getUTCMilliseconds(),e,3)}function Fa(t,e){return Ia(t,e)+"000"}function Ra(t,e){return jn(t.getUTCMonth()+1,e,2)}function Pa(t,e){return jn(t.getUTCMinutes(),e,2)}function $a(t,e){return jn(t.getUTCSeconds(),e,2)}function Ya(t){t=t.getUTCDay();return 0===t?7:t}function ja(t,e){return jn(wn.count(An(t)-1,t),e,2)}function za(t){var e=t.getUTCDay();return 4<=e||0===e?Cn(t):Cn.ceil(t)}function Ua(t,e){return t=za(t),jn(Cn.count(An(t),t)+(4===An(t).getUTCDay()),e,2)}function Wa(t){return t.getUTCDay()}function Ha(t,e){return jn(Tn.count(An(t)-1,t),e,2)}function qa(t,e){return jn(t.getUTCFullYear()%100,e,2)}function Va(t,e){return jn((t=za(t)).getUTCFullYear()%100,e,2)}function Ga(t,e){return jn(t.getUTCFullYear()%1e4,e,4)}function Xa(t,e){var r=t.getUTCDay();return jn((t=4<=r||0===r?Cn(t):Cn.ceil(t)).getUTCFullYear()%1e4,e,4)}function Za(){return"+0000"}function Qa(){return"%"}function Ka(t){return+t}function Ja(t){return Math.floor(+t/1e3)}function ts(t){return new Date(t)}function es(t){return t instanceof Date?+t:+new Date(+t)}function rs(r,o,e,i,n,a,s,l,c,h){var u=Zi(),d=u.invert,p=u.domain,f=h(".%L"),g=h(":%S"),y=h("%I:%M"),m=h("%I %p"),b=h("%a %d"),_=h("%b %d"),x=h("%B"),v=h("%Y");function k(t){return(c(t)<t?f:l(t)<t?g:s(t)<t?y:a(t)<t?m:i(t)<t?n(t)<t?b:_:e(t)<t?x:v)(t)}return u.invert=function(t){return new Date(d(t))},u.domain=function(t){return arguments.length?p(Array.from(t,es)):p().map(ts)},u.ticks=function(t){var e=p();return r(e[0],e[e.length-1],null==t?10:t)},u.tickFormat=function(t,e){return null==e?k:h(e)},u.nice=function(t){var e,r,i,n,a,s=p();return(t=t&&"function"==typeof t.range?t:o(s[0],s[s.length-1],null==t?10:t))?p((t=t,r=0,i=(s=(s=s).slice()).length-1,n=s[r],(a=s[i])<n&&(e=r,r=i,i=e,e=n,n=a,a=e),s[r]=t.floor(n),s[i]=t.ceil(a),s)):u},u.copy=function(){return Gi(u,rs(r,o,e,i,n,a,s,l,c,h))},u}function is(t){return function(){return t}}Sn=In({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]}),Fn=Sn.format,Sn.parse,Sn.utcFormat,Sn.utcParse;const ns=Math.abs,as=Math.atan2,ss=Math.cos,os=Math.max,ls=Math.min,cs=Math.sin,hs=Math.sqrt,us=1e-12,ds=Math.PI,ps=ds/2,fs=2*ds;function gs(t){return 1<=t?ps:t<=-1?-ps:Math.asin(t)}function ys(t){return t.innerRadius}function ms(t){return t.outerRadius}function bs(t){return t.startAngle}function _s(t){return t.endAngle}function xs(t){return t&&t.padAngle}function vs(t,e,r,i,n,a,s){var o=t-r,l=e-i,s=(s?a:-a)/hs(o*o+l*l),l=s*l,s=-s*o,o=t+l,t=e+s,e=r+l,r=i+s,i=(o+e)/2,c=(t+r)/2,h=e-o,u=r-t,d=h*h+u*u,a=n-a,o=o*r-e*t,r=(u<0?-1:1)*hs(os(0,a*a*d-o*o)),e=(o*u-h*r)/d,t=(-o*h-u*r)/d,p=(o*u+h*r)/d,o=(-o*h+u*r)/d,h=e-i,u=t-c,r=p-i,d=o-c;return r*r+d*d<h*h+u*u&&(e=p,t=o),{cx:e,cy:t,x01:-l,y01:-s,x11:e*(n/a-1),y11:t*(n/a-1)}}function ks(){var A=ys,D=ms,L=is(0),M=null,N=bs,O=_s,B=xs,I=null;function e(){var t,e,r,i,n,a,s,o,l,c,h,u,d,p,f,g,y,m,b,_,x,v,k=+A.apply(this,arguments),w=+D.apply(this,arguments),T=N.apply(this,arguments)-ps,C=O.apply(this,arguments)-ps,E=ns(C-T),S=T<C;if(I=I||(t=ki()),w<k&&(e=w,w=k,k=e),w>us?E>fs-us?(I.moveTo(w*ss(T),w*cs(T)),I.arc(0,0,w,T,C,!S),k>us&&(I.moveTo(k*ss(C),k*cs(C)),I.arc(0,0,k,C,T,S))):(i=e=T,n=r=C,s=a=E,d=(h=B.apply(this,arguments)/2)>us&&(M?+M.apply(this,arguments):hs(k*k+w*w)),v=x=o=ls(ns(w-k)/2,+L.apply(this,arguments)),d>us&&(u=gs(d/k*cs(h)),d=gs(d/w*cs(h)),(a-=2*u)>us?(i+=u*=S?1:-1,n-=u):(a=0,i=n=(T+C)/2),(s-=2*d)>us?(e+=d*=S?1:-1,r-=d):(s=0,e=r=(T+C)/2)),h=w*ss(e),u=w*cs(e),d=k*ss(n),T=k*cs(n),o>us&&(p=w*ss(r),f=w*cs(r),g=k*ss(i),y=k*cs(i),E<ds)&&(C=function(t,e,r,i,n,a,s,o){var l=(o=o-a)*(r=r-t)-(s=s-n)*(i=i-e);if(!(l*l<us))return[t+(l=(s*(e-a)-o*(t-n))/l)*r,e+l*i]}(h,u,g,y,p,f,d,T))&&(E=h-C[0],b=u-C[1],_=p-C[0],m=f-C[1],b=1/cs((1<(E=(E*_+b*m)/(hs(E*E+b*b)*hs(_*_+m*m)))?0:E<-1?ds:Math.acos(E))/2),_=hs(C[0]*C[0]+C[1]*C[1]),x=ls(o,(k-_)/(b-1)),v=ls(o,(w-_)/(1+b))),s>us?v>us?(l=vs(g,y,h,u,w,v,S),c=vs(p,f,d,T,w,v,S),I.moveTo(l.cx+l.x01,l.cy+l.y01),v<o?I.arc(l.cx,l.cy,v,as(l.y01,l.x01),as(c.y01,c.x01),!S):(I.arc(l.cx,l.cy,v,as(l.y01,l.x01),as(l.y11,l.x11),!S),I.arc(0,0,w,as(l.cy+l.y11,l.cx+l.x11),as(c.cy+c.y11,c.cx+c.x11),!S),I.arc(c.cx,c.cy,v,as(c.y11,c.x11),as(c.y01,c.x01),!S))):(I.moveTo(h,u),I.arc(0,0,w,e,r,!S)):I.moveTo(h,u),k>us&&a>us?x>us?(l=vs(d,T,p,f,k,-x,S),c=vs(h,u,g,y,k,-x,S),I.lineTo(l.cx+l.x01,l.cy+l.y01),x<o?I.arc(l.cx,l.cy,x,as(l.y01,l.x01),as(c.y01,c.x01),!S):(I.arc(l.cx,l.cy,x,as(l.y01,l.x01),as(l.y11,l.x11),!S),I.arc(0,0,k,as(l.cy+l.y11,l.cx+l.x11),as(c.cy+c.y11,c.cx+c.x11),S),I.arc(c.cx,c.cy,x,as(c.y11,c.x11),as(c.y01,c.x01),!S))):I.arc(0,0,k,n,i,S):I.lineTo(d,T)):I.moveTo(0,0),I.closePath(),t)return I=null,t+""||null}return e.centroid=function(){var t=(+A.apply(this,arguments)+ +D.apply(this,arguments))/2,e=(+N.apply(this,arguments)+ +O.apply(this,arguments))/2-ds/2;return[ss(e)*t,cs(e)*t]},e.innerRadius=function(t){return arguments.length?(A="function"==typeof t?t:is(+t),e):A},e.outerRadius=function(t){return arguments.length?(D="function"==typeof t?t:is(+t),e):D},e.cornerRadius=function(t){return arguments.length?(L="function"==typeof t?t:is(+t),e):L},e.padRadius=function(t){return arguments.length?(M=null==t?null:"function"==typeof t?t:is(+t),e):M},e.startAngle=function(t){return arguments.length?(N="function"==typeof t?t:is(+t),e):N},e.endAngle=function(t){return arguments.length?(O="function"==typeof t?t:is(+t),e):O},e.padAngle=function(t){return arguments.length?(B="function"==typeof t?t:is(+t),e):B},e.context=function(t){return arguments.length?(I=null==t?null:t,e):I},e}function ws(t){return"object"==typeof t&&"length"in t?t:Array.from(t)}function Ts(t){this._context=t}function Cs(t){return new Ts(t)}function Es(t){return t[0]}function Ss(t){return t[1]}function As(s,o){var l=is(!0),c=null,h=Cs,u=null;function e(t){var e,r,i,n=(t=ws(t)).length,a=!1;for(null==c&&(u=h(i=ki())),e=0;e<=n;++e)!(e<n&&l(r=t[e],e,t))===a&&((a=!a)?u.lineStart():u.lineEnd()),a&&u.point(+s(r,e,t),+o(r,e,t));if(i)return u=null,i+""||null}return s="function"==typeof s?s:void 0===s?Es:is(s),o="function"==typeof o?o:void 0===o?Ss:is(o),e.x=function(t){return arguments.length?(s="function"==typeof t?t:is(+t),e):s},e.y=function(t){return arguments.length?(o="function"==typeof t?t:is(+t),e):o},e.defined=function(t){return arguments.length?(l="function"==typeof t?t:is(!!t),e):l},e.curve=function(t){return arguments.length?(h=t,null!=c&&(u=h(c)),e):h},e.context=function(t){return arguments.length?(null==t?c=u=null:u=h(c=t),e):c},e}function Ds(t,e){return e<t?-1:t<e?1:t<=e?0:NaN}function Ls(t){return t}function Ms(){}function Ns(t,e,r){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+r)/6)}function Os(t){this._context=t}function Bs(t){return new Os(t)}function Is(t){this._context=t}function Fs(t){this._context=t}function Rs(t){this._context=t}function Ps(t){return t<0?-1:1}function $s(t,e,r){var i=t._x1-t._x0,e=e-t._x1,n=(t._y1-t._y0)/(i||e<0&&-0),r=(r-t._y1)/(e||i<0&&-0),t=(n*e+r*i)/(i+e);return(Ps(n)+Ps(r))*Math.min(Math.abs(n),Math.abs(r),.5*Math.abs(t))||0}function Ys(t,e){var r=t._x1-t._x0;return r?(3*(t._y1-t._y0)/r-e)/2:e}function js(t,e,r){var i=t._x0,n=t._y0,a=t._x1,s=t._y1,o=(a-i)/3;t._context.bezierCurveTo(i+o,n+o*e,a-o,s-o*r,a,s)}function zs(t){this._context=t}function Us(t){this._context=new Ws(t)}function Ws(t){this._context=t}function Hs(t){this._context=t}function qs(t){var e,r,i=t.length-1,n=new Array(i),a=new Array(i),s=new Array(i);for(a[n[0]=0]=2,s[0]=t[0]+2*t[1],e=1;e<i-1;++e)n[e]=1,a[e]=4,s[e]=4*t[e]+2*t[e+1];for(n[i-1]=2,a[i-1]=7,s[i-1]=8*t[i-1]+t[i],e=1;e<i;++e)r=n[e]/a[e-1],a[e]-=r,s[e]-=r*s[e-1];for(n[i-1]=s[i-1]/a[i-1],e=i-2;0<=e;--e)n[e]=(s[e]-n[e+1])/a[e];for(a[i-1]=(t[i]+n[i-1])/2,e=0;e<i-1;++e)a[e]=2*t[e+1]-n[e+1];return[n,a]}function Vs(t,e){this._context=t,this._t=e}function Gs(t){return(Gs="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Xs(t,e){return(Xs=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Zs(t,e,r){return(Zs=function(){if(!("u"<typeof Reflect||!Reflect.construct||Reflect.construct.sham)){if("function"==typeof Proxy)return 1;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),1}catch{}}}()?Reflect.construct:function(t,e,r){var i=[null];i.push.apply(i,e);e=new(Function.bind.apply(t,i));return r&&Xs(e,r.prototype),e}).apply(null,arguments)}function Qs(t){return function(t){if(Array.isArray(t))return Ks(t)}(t)||function(t){if(typeof Symbol<"u"&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){{var r;if(t)return"string"==typeof t?Ks(t,e):"Map"===(r="Object"===(r=Object.prototype.toString.call(t).slice(8,-1))&&t.constructor?t.constructor.name:r)||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Ks(t,e):void 0}}(t)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Ks(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,i=new Array(e);r<e;r++)i[r]=t[r];return i}Ts.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e)}}},Os.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:Ns(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Ns(this,t,e)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}},Is.prototype={areaStart:Ms,areaEnd:Ms,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x2,this._y2),this._context.closePath();break;case 2:this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break;case 3:this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4)}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x2=t,this._y2=e;break;case 1:this._point=2,this._x3=t,this._y3=e;break;case 2:this._point=3,this._x4=t,this._y4=e,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+e)/6);break;default:Ns(this,t,e)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}},Fs.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var r=(this._x0+4*this._x1+t)/6,i=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(r,i):this._context.moveTo(r,i);break;case 3:this._point=4;default:Ns(this,t,e)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}},Rs.prototype={areaStart:Ms,areaEnd:Ms,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}},zs.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:js(this,this._t0,Ys(this,this._t0))}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var r=NaN;if(e=+e,(t=+t)!==this._x1||e!==this._y1){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,js(this,Ys(this,r=$s(this,t,e)),r);break;default:js(this,this._t0,r=$s(this,t,e))}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=r}}},(Us.prototype=Object.create(zs.prototype)).point=function(t,e){zs.prototype.point.call(this,e,t)},Ws.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,r,i,n,a){this._context.bezierCurveTo(e,t,i,r,a,n)}},Hs.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,r=t.length;if(r)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),2===r)this._context.lineTo(t[1],e[1]);else for(var i=qs(t),n=qs(e),a=0,s=1;s<r;++a,++s)this._context.bezierCurveTo(i[0][a],n[0][a],i[1][a],n[1][a],t[s],e[s]);(this._line||0!==this._line&&1===r)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}},Vs.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&2===this._point&&this._context.lineTo(this._x,this._y),(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),0<=this._line&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:var r;this._t<=0?(this._context.lineTo(this._x,e),this._context.lineTo(t,e)):(r=this._x*(1-this._t)+t*this._t,this._context.lineTo(r,this._y),this._context.lineTo(r,e))}this._x=t,this._y=e}};var Js,to=Object.hasOwnProperty,eo=Object.setPrototypeOf,ro=Object.isFrozen,io=Object.getPrototypeOf,no=Object.getOwnPropertyDescriptor,ao=Object.freeze,t=Object.seal,so=Object.create,En=typeof Reflect<"u"&&Reflect,oo=En.apply,lo=En.construct,oo=oo||function(t,e,r){return t.apply(e,r)},ao=ao||function(t){return t},t=t||function(t){return t},lo=lo||function(t,e){return Zs(t,Qs(e))},co=vo(Array.prototype.forEach),ho=vo(Array.prototype.pop),uo=vo(Array.prototype.push),po=vo(String.prototype.toLowerCase),fo=vo(String.prototype.toString),go=vo(String.prototype.match),yo=vo(String.prototype.replace),mo=vo(String.prototype.indexOf),bo=vo(String.prototype.trim),_o=vo(RegExp.prototype.test),xo=(Js=TypeError,function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];return lo(Js,e)});function vo(n){return function(t){for(var e=arguments.length,r=new Array(1<e?e-1:0),i=1;i<e;i++)r[i-1]=arguments[i];return oo(n,t,r)}}function ko(t,e,r){r=r||po,eo&&eo(t,null);for(var i=e.length;i--;){var n,a=e[i];"string"==typeof a&&(n=r(a))!==a&&(ro(e)||(e[i]=n),a=n),t[a]=!0}return t}function wo(t){var e,r=so(null);for(e in t)oo(to,t,[e])&&(r[e]=t[e]);return r}function To(t,e){for(;null!==t;){var r=no(t,e);if(r){if(r.get)return vo(r.get);if("function"==typeof r.value)return vo(r.value)}t=io(t)}return function(t){return console.warn("fallback value for",t),null}}var Co=ao(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),Eo=ao(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),So=ao(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),Ao=ao(["animate","color-profile","cursor","discard","fedropshadow","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),Do=ao(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover"]),Lo=ao(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),Mo=ao(["#text"]),No=ao(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),Oo=ao(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),Bo=ao(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),Io=ao(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),Fo=t(/\{\{[\w\W]*|[\w\W]*\}\}/gm),Ro=t(/<%[\w\W]*|[\w\W]*%>/gm),Po=t(/\${[\w\W]*}/gm),$o=t(/^data-[\-\w.\u00B7-\uFFFF]/),Yo=t(/^aria-[\-\w]+$/),jo=t(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),zo=t(/^(?:\w+script|data):/i),Uo=t(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),Wo=t(/^html$/i);var Ho=function F(t){var o=0<arguments.length&&void 0!==t?t:"u"<typeof window?null:window,c=function(t){return F(t)};if(c.version="2.4.1",c.removed=[],o&&o.document&&9===o.document.nodeType){var l=o.document,n=o.document,R=o.DocumentFragment,t=o.HTMLTemplateElement,h=o.Node,P=o.Element,e=o.NodeFilter,$=void 0===(r=o.NamedNodeMap)?o.NamedNodeMap||o.MozNamedAttrMap:r,Y=o.HTMLFormElement,j=o.DOMParser,u=o.trustedTypes,z=To(r=P.prototype,"cloneNode"),U=To(r,"nextSibling"),W=To(r,"childNodes"),d=To(r,"parentNode"),p=("function"==typeof t&&(r=n.createElement("template")).content&&r.content.ownerDocument&&(n=r.content.ownerDocument),function(t,e){if("object"!==Gs(t)||"function"!=typeof t.createPolicy)return null;var r=null,i="data-tt-policy-suffix",e="dompurify"+((r=e.currentScript&&e.currentScript.hasAttribute(i)?e.currentScript.getAttribute(i):r)?"#"+r:"");try{return t.createPolicy(e,{createHTML:function(t){return t},createScriptURL:function(t){return t}})}catch{return console.warn("TrustedTypes policy "+e+" could not be created."),null}}(u,l)),H=p?p.createHTML(""):"",t=n,a=t.implementation,q=t.createNodeIterator,V=t.createDocumentFragment,G=t.getElementsByTagName,X=l.importNode,r={};try{r=wo(n).documentMode?n.documentMode:{}}catch{}var Z,f,g,i={},Q=(c.isSupported="function"==typeof d&&a&&typeof a.createHTMLDocument<"u"&&9!==r,Fo),K=Ro,J=Po,tt=$o,et=Yo,rt=zo,it=Uo,nt=jo,y=null,at=ko({},[].concat(Qs(Co),Qs(Eo),Qs(So),Qs(Do),Qs(Mo))),m=null,st=ko({},[].concat(Qs(No),Qs(Oo),Qs(Bo),Qs(Io))),b=Object.seal(Object.create(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),_=null,ot=null,lt=!0,ct=!0,ht=!1,x=!1,v=!1,ut=!1,dt=!1,k=!1,w=!1,T=!1,pt=!0,ft=!1,gt="user-content-",yt=!0,C=!1,s={},E=null,mt=ko({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]),bt=null,_t=ko({},["audio","video","img","source","image","track"]),xt=null,vt=ko({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),S="http://www.w3.org/1998/Math/MathML",A="http://www.w3.org/2000/svg",D="http://www.w3.org/1999/xhtml",L=D,kt=null,wt=ko({},[S,A,D],fo),Tt=["application/xhtml+xml","text/html"],M=null,Ct=n.createElement("form"),Et=function(t){return t instanceof RegExp||t instanceof Function},St=function(t){M&&M===t||(t=wo(t=t&&"object"===Gs(t)?t:{}),f=-1===Tt.indexOf(t.PARSER_MEDIA_TYPE)?"text/html":t.PARSER_MEDIA_TYPE,g="application/xhtml+xml"===f?fo:po,y="ALLOWED_TAGS"in t?ko({},t.ALLOWED_TAGS,g):at,m="ALLOWED_ATTR"in t?ko({},t.ALLOWED_ATTR,g):st,kt="ALLOWED_NAMESPACES"in t?ko({},t.ALLOWED_NAMESPACES,fo):wt,xt="ADD_URI_SAFE_ATTR"in t?ko(wo(vt),t.ADD_URI_SAFE_ATTR,g):vt,bt="ADD_DATA_URI_TAGS"in t?ko(wo(_t),t.ADD_DATA_URI_TAGS,g):_t,E="FORBID_CONTENTS"in t?ko({},t.FORBID_CONTENTS,g):mt,_="FORBID_TAGS"in t?ko({},t.FORBID_TAGS,g):{},ot="FORBID_ATTR"in t?ko({},t.FORBID_ATTR,g):{},s="USE_PROFILES"in t&&t.USE_PROFILES,lt=!1!==t.ALLOW_ARIA_ATTR,ct=!1!==t.ALLOW_DATA_ATTR,ht=t.ALLOW_UNKNOWN_PROTOCOLS||!1,x=t.SAFE_FOR_TEMPLATES||!1,v=t.WHOLE_DOCUMENT||!1,k=t.RETURN_DOM||!1,w=t.RETURN_DOM_FRAGMENT||!1,T=t.RETURN_TRUSTED_TYPE||!1,dt=t.FORCE_BODY||!1,pt=!1!==t.SANITIZE_DOM,ft=t.SANITIZE_NAMED_PROPS||!1,yt=!1!==t.KEEP_CONTENT,C=t.IN_PLACE||!1,nt=t.ALLOWED_URI_REGEXP||nt,L=t.NAMESPACE||D,t.CUSTOM_ELEMENT_HANDLING&&Et(t.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(b.tagNameCheck=t.CUSTOM_ELEMENT_HANDLING.tagNameCheck),t.CUSTOM_ELEMENT_HANDLING&&Et(t.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(b.attributeNameCheck=t.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),t.CUSTOM_ELEMENT_HANDLING&&"boolean"==typeof t.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements&&(b.allowCustomizedBuiltInElements=t.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),x&&(ct=!1),w&&(k=!0),s&&(y=ko({},Qs(Mo)),m=[],!0===s.html&&(ko(y,Co),ko(m,No)),!0===s.svg&&(ko(y,Eo),ko(m,Oo),ko(m,Io)),!0===s.svgFilters&&(ko(y,So),ko(m,Oo),ko(m,Io)),!0===s.mathMl)&&(ko(y,Do),ko(m,Bo),ko(m,Io)),t.ADD_TAGS&&ko(y=y===at?wo(y):y,t.ADD_TAGS,g),t.ADD_ATTR&&ko(m=m===st?wo(m):m,t.ADD_ATTR,g),t.ADD_URI_SAFE_ATTR&&ko(xt,t.ADD_URI_SAFE_ATTR,g),t.FORBID_CONTENTS&&ko(E=E===mt?wo(E):E,t.FORBID_CONTENTS,g),yt&&(y["#text"]=!0),v&&ko(y,["html","head","body"]),y.table&&(ko(y,["tbody"]),delete _.tbody),ao&&ao(t),M=t)},At=ko({},["mi","mo","mn","ms","mtext"]),Dt=ko({},["foreignobject","desc","title","annotation-xml"]),Lt=ko({},["title","style","font","a","script"]),N=ko({},Eo),Mt=(ko(N,So),ko(N,Ao),ko({},Do)),O=(ko(Mt,Lo),function(t){uo(c.removed,{element:t});try{t.parentNode.removeChild(t)}catch{try{t.outerHTML=H}catch{t.remove()}}}),Nt=function(t,e){try{uo(c.removed,{attribute:e.getAttributeNode(t),from:e})}catch{uo(c.removed,{attribute:null,from:e})}if(e.removeAttribute(t),"is"===t&&!m[t])if(k||w)try{O(e)}catch{}else try{e.setAttribute(t,"")}catch{}},Ot=function(t){dt?t="<remove></remove>"+t:r=(r=go(t,/^[\r\n\t ]+/))&&r[0],"application/xhtml+xml"===f&&L===D&&(t='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+t+"</body></html>");var e,r,i=p?p.createHTML(t):t;if(L===D)try{e=(new j).parseFromString(i,f)}catch{}if(!e||!e.documentElement){e=a.createDocument(L,"template",null);try{e.documentElement.innerHTML=Z?"":i}catch{}}return i=e.body||e.documentElement,t&&r&&i.insertBefore(n.createTextNode(r),i.childNodes[0]||null),L===D?G.call(e,v?"html":"body")[0]:v?e.documentElement:i},Bt=function(t){return q.call(t.ownerDocument||t,t,e.SHOW_ELEMENT|e.SHOW_COMMENT|e.SHOW_TEXT,null,!1)},B=function(t){return"object"===Gs(h)?t instanceof h:t&&"object"===Gs(t)&&"number"==typeof t.nodeType&&"string"==typeof t.nodeName},I=function(t,e,r){i[t]&&co(i[t],function(t){t.call(c,e,r,M)})},It=function(t){if(I("beforeSanitizeElements",t,null),(!((a=t)instanceof Y)||"string"==typeof a.nodeName&&"string"==typeof a.textContent&&"function"==typeof a.removeChild&&a.attributes instanceof $&&"function"==typeof a.removeAttribute&&"function"==typeof a.setAttribute&&"string"==typeof a.namespaceURI&&"function"==typeof a.insertBefore&&"function"==typeof a.hasChildNodes)&&!_o(/[\u0080-\uFFFF]/,t.nodeName)){var e,r,i,n,a=g(t.nodeName);if(I("uponSanitizeElement",t,{tagName:a,allowedTags:y}),!(t.hasChildNodes()&&!B(t.firstElementChild)&&(!B(t.content)||!B(t.content.firstElementChild))&&_o(/<[/\w]/g,t.innerHTML)&&_o(/<[/\w]/g,t.textContent)||"select"===a&&_o(/<template/i,t.innerHTML))){if(y[a]&&!_[a])return t instanceof P&&((r=d(e=t))&&r.tagName||(r={namespaceURI:L,tagName:"template"}),i=po(e.tagName),n=po(r.tagName),!kt[e.namespaceURI]||(e.namespaceURI===A?r.namespaceURI===D?"svg"!==i:r.namespaceURI===S?"svg"!==i||"annotation-xml"!==n&&!At[n]:!Boolean(N[i]):e.namespaceURI===S?r.namespaceURI===D?"math"!==i:r.namespaceURI===A?"math"!==i||!Dt[n]:!Boolean(Mt[i]):e.namespaceURI===D?r.namespaceURI===A&&!Dt[n]||r.namespaceURI===S&&!At[n]||Mt[i]||!Lt[i]&&N[i]:"application/xhtml+xml"!==f||!kt[e.namespaceURI]))||("noscript"===a||"noembed"===a)&&_o(/<\/no(script|embed)/i,t.innerHTML)?(O(t),!0):(x&&3===t.nodeType&&(r=t.textContent,r=yo(r,Q," "),r=yo(r,K," "),r=yo(r,J," "),t.textContent!==r)&&(uo(c.removed,{element:t.cloneNode()}),t.textContent=r),I("afterSanitizeElements",t,null),!1);if(!_[a]&&Rt(a)&&(b.tagNameCheck instanceof RegExp&&_o(b.tagNameCheck,a)||b.tagNameCheck instanceof Function&&b.tagNameCheck(a)))return!1;if(yt&&!E[a]){var s=d(t)||t.parentNode,o=W(t)||t.childNodes;if(o&&s)for(var l=o.length-1;0<=l;--l)s.insertBefore(z(o[l],!0),U(t))}}}return O(t),!0},Ft=function(t,e,r){if(pt&&("id"===e||"name"===e)&&(r in n||r in Ct))return!1;if((!ct||ot[e]||!_o(tt,e))&&(!lt||!_o(et,e)))if(!m[e]||ot[e]){if(!(Rt(t)&&(b.tagNameCheck instanceof RegExp&&_o(b.tagNameCheck,t)||b.tagNameCheck instanceof Function&&b.tagNameCheck(t))&&(b.attributeNameCheck instanceof RegExp&&_o(b.attributeNameCheck,e)||b.attributeNameCheck instanceof Function&&b.attributeNameCheck(e))||"is"===e&&b.allowCustomizedBuiltInElements&&(b.tagNameCheck instanceof RegExp&&_o(b.tagNameCheck,r)||b.tagNameCheck instanceof Function&&b.tagNameCheck(r))))return!1}else if(!xt[e]&&!_o(nt,yo(r,it,""))&&("src"!==e&&"xlink:href"!==e&&"href"!==e||"script"===t||0!==mo(r,"data:")||!bt[t])&&(!ht||_o(rt,yo(r,it,"")))&&r)return!1;return!0},Rt=function(t){return 0<t.indexOf("-")},Pt=function(t){I("beforeSanitizeAttributes",t,null);var e=t.attributes;if(e){for(var r={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:m},i=e.length;i--;){var n=(o=e[i]).name,a=o.namespaceURI,s="value"===n?o.value:bo(o.value),o=g(n);if(r.attrName=o,r.attrValue=s,r.keepAttr=!0,r.forceKeepAttr=void 0,I("uponSanitizeAttribute",t,r),s=r.attrValue,!r.forceKeepAttr&&(Nt(n,t),r.keepAttr))if(_o(/\/>/i,s))Nt(n,t);else{x&&(s=yo(s,Q," "),s=yo(s,K," "),s=yo(s,J," "));var l=g(t.nodeName);if(Ft(l,o,s)){if(!ft||"id"!==o&&"name"!==o||(Nt(n,t),s=gt+s),p&&"object"===Gs(u)&&"function"==typeof u.getAttributeType&&!a)switch(u.getAttributeType(l,o)){case"TrustedHTML":s=p.createHTML(s);break;case"TrustedScriptURL":s=p.createScriptURL(s)}try{a?t.setAttributeNS(a,n,s):t.setAttribute(n,s),ho(c.removed)}catch{}}}}I("afterSanitizeAttributes",t,null)}},$t=function t(e){var r,i=Bt(e);for(I("beforeSanitizeShadowDOM",e,null);r=i.nextNode();)I("uponSanitizeShadowNode",r,null),It(r)||(r.content instanceof R&&t(r.content),Pt(r));I("afterSanitizeShadowDOM",e,null)};c.sanitize=function(t){var e,r,i,n,a=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};if("string"!=typeof(t=(Z=!t)?"\x3c!--\x3e":t)&&!B(t)){if("function"!=typeof t.toString)throw xo("toString is not a function");if("string"!=typeof(t=t.toString()))throw xo("dirty is not a string, aborting")}if(!c.isSupported){if("object"===Gs(o.toStaticHTML)||"function"==typeof o.toStaticHTML){if("string"==typeof t)return o.toStaticHTML(t);if(B(t))return o.toStaticHTML(t.outerHTML)}return t}if(ut||St(a),c.removed=[],C="string"!=typeof t&&C){if(t.nodeName){a=g(t.nodeName);if(!y[a]||_[a])throw xo("root node is forbidden and cannot be sanitized in-place")}}else if(t instanceof h)1===(a=(e=Ot("\x3c!----\x3e")).ownerDocument.importNode(t,!0)).nodeType&&"BODY"===a.nodeName||"HTML"===a.nodeName?e=a:e.appendChild(a);else{if(!k&&!x&&!v&&-1===t.indexOf("<"))return p&&T?p.createHTML(t):t;if(!(e=Ot(t)))return k?null:T?H:""}e&&dt&&O(e.firstChild);for(var s=Bt(C?t:e);r=s.nextNode();)3===r.nodeType&&r===i||It(r)||(r.content instanceof R&&$t(r.content),Pt(r),i=r);if(i=null,C)return t;if(k){if(w)for(n=V.call(e.ownerDocument);e.firstChild;)n.appendChild(e.firstChild);else n=e;return n=m.shadowroot?X.call(l,n,!0):n}return a=v?e.outerHTML:e.innerHTML,v&&y["!doctype"]&&e.ownerDocument&&e.ownerDocument.doctype&&e.ownerDocument.doctype.name&&_o(Wo,e.ownerDocument.doctype.name)&&(a="<!DOCTYPE "+e.ownerDocument.doctype.name+`>
`+a),x&&(a=yo(a,Q," "),a=yo(a,K," "),a=yo(a,J," ")),p&&T?p.createHTML(a):a},c.setConfig=function(t){St(t),ut=!0},c.clearConfig=function(){M=null,ut=!1},c.isValidAttribute=function(t,e,r){return M||St({}),t=g(t),e=g(e),Ft(t,e,r)},c.addHook=function(t,e){"function"==typeof e&&(i[t]=i[t]||[],uo(i[t],e))},c.removeHook=function(t){if(i[t])return ho(i[t])},c.removeHooks=function(t){i[t]&&(i[t]=[])},c.removeAllHooks=function(){i={}}}else c.isSupported=!1;return c}();const qo=t=>Ho.sanitize(t),Vo=(t,e)=>{var r;return!1!==(null==(r=e.flowchart)?void 0:r.htmlLabels)&&("antiscript"===(r=e.securityLevel)||"strict"===r?t=qo(t):"loose"!==r&&(t=(t=(t=Qo(t)).replace(/</g,"&lt;").replace(/>/g,"&gt;")).replace(/=/g,"&equals;"),t=Zo(t))),t},Go=(t,e)=>t&&(t=(e.dompurifyConfig?Ho.sanitize(Vo(t,e),e.dompurifyConfig):Ho.sanitize(Vo(t,e),{FORBID_TAGS:["style"]})).toString()),Xo=/<br\s*\/?>/gi,Zo=t=>t.replace(/#br#/g,"<br/>"),Qo=t=>t.replace(Xo,"#br#"),Ko=t=>!(!1===t||["false","null","0"].includes(String(t).trim().toLowerCase())),Jo=function(t){let e=t;return t.includes("~")?(e=(e=e.replace(/~([^~].*)/,"<$1")).replace(/~([^~]*)$/,">$1"),Jo(e)):e},tl={getRows:t=>t?Qo(t).replace(/\\n/g,"#br#").split("#br#"):[""],sanitizeText:Go,sanitizeTextOrArray:(t,e)=>"string"==typeof t?Go(t,e):t.flat().map(t=>Go(t,e)),hasBreaks:t=>Xo.test(t),splitBreaks:t=>t.split(Xo),lineBreakRegex:Xo,removeScript:qo,getUrl:t=>{let e="";return e=t?(e=(e=window.location.protocol+"//"+window.location.host+window.location.pathname+window.location.search).replaceAll(/\(/g,"\\(")).replaceAll(/\)/g,"\\)"):e},evaluate:Ko},el={min:{r:0,g:0,b:0,s:0,l:0,a:0},max:{r:255,g:255,b:255,h:360,s:100,l:100,a:1},clamp:{r:t=>255<=t?255:t<0?0:t,g:t=>255<=t?255:t<0?0:t,b:t=>255<=t?255:t<0?0:t,h:t=>t%360,s:t=>100<=t?100:t<0?0:t,l:t=>100<=t?100:t<0?0:t,a:t=>1<=t?1:t<0?0:t},toLinear:t=>{var e=t/255;return.03928<t?Math.pow((.055+e)/1.055,2.4):e/12.92},hue2rgb:(t,e,r)=>(r<0&&(r+=1),1<r&&--r,r<1/6?t+6*(e-t)*r:r<.5?e:r<2/3?t+(e-t)*(2/3-r)*6:t),hsl2rgb:({h:t,s:e,l:r},i)=>{if(!e)return 2.55*r;t/=360,e/=100;var n=(r/=100)<.5?r*(1+e):r+e-r*e,a=2*r-n;switch(i){case"r":return 255*el.hue2rgb(a,n,t+1/3);case"g":return 255*el.hue2rgb(a,n,t);case"b":return 255*el.hue2rgb(a,n,t-1/3)}},rgb2hsl:({r:t,g:e,b:r},i)=>{t/=255,e/=255,r/=255;var n=Math.max(t,e,r),a=Math.min(t,e,r),s=(n+a)/2;if("l"===i)return 100*s;if(n===a)return 0;var o=n-a;if("s"===i)return 100*(.5<s?o/(2-n-a):o/(n+a));switch(n){case t:return 60*((e-r)/o+(e<r?6:0));case e:return 60*((r-t)/o+2);case r:return 60*((t-e)/o+4);default:return-1}}},rl={channel:el,lang:{clamp:(t,e,r)=>r<e?Math.min(e,Math.max(r,t)):Math.min(r,Math.max(e,t)),round:t=>Math.round(1e10*t)/1e10},unit:{dec2hex:t=>{t=Math.round(t).toString(16);return 1<t.length?t:"0"+t}}},il={};for(let t=0;t<=255;t++)il[t]=rl.unit.dec2hex(t);const nl={ALL:0,RGB:1,HSL:2};const al=class{constructor(){this.type=nl.ALL}get(){return this.type}set(t){if(this.type&&this.type!==t)throw new Error("Cannot change both RGB and HSL channels at the same time");this.type=t}reset(){this.type=nl.ALL}is(t){return this.type===t}};const sl=class{constructor(t,e){this.color=e,this.changed=!1,this.data=t,this.type=new al}set(t,e){return this.color=e,this.changed=!1,this.data=t,this.type.type=nl.ALL,this}_ensureHSL(){var t=this.data,{h:e,s:r,l:i}=t;void 0===e&&(t.h=rl.channel.rgb2hsl(t,"h")),void 0===r&&(t.s=rl.channel.rgb2hsl(t,"s")),void 0===i&&(t.l=rl.channel.rgb2hsl(t,"l"))}_ensureRGB(){var t=this.data,{r:e,g:r,b:i}=t;void 0===e&&(t.r=rl.channel.hsl2rgb(t,"r")),void 0===r&&(t.g=rl.channel.hsl2rgb(t,"g")),void 0===i&&(t.b=rl.channel.hsl2rgb(t,"b"))}get r(){var t=this.data,e=t.r;return this.type.is(nl.HSL)||void 0===e?(this._ensureHSL(),rl.channel.hsl2rgb(t,"r")):e}get g(){var t=this.data,e=t.g;return this.type.is(nl.HSL)||void 0===e?(this._ensureHSL(),rl.channel.hsl2rgb(t,"g")):e}get b(){var t=this.data,e=t.b;return this.type.is(nl.HSL)||void 0===e?(this._ensureHSL(),rl.channel.hsl2rgb(t,"b")):e}get h(){var t=this.data,e=t.h;return this.type.is(nl.RGB)||void 0===e?(this._ensureRGB(),rl.channel.rgb2hsl(t,"h")):e}get s(){var t=this.data,e=t.s;return this.type.is(nl.RGB)||void 0===e?(this._ensureRGB(),rl.channel.rgb2hsl(t,"s")):e}get l(){var t=this.data,e=t.l;return this.type.is(nl.RGB)||void 0===e?(this._ensureRGB(),rl.channel.rgb2hsl(t,"l")):e}get a(){return this.data.a}set r(t){this.type.set(nl.RGB),this.changed=!0,this.data.r=t}set g(t){this.type.set(nl.RGB),this.changed=!0,this.data.g=t}set b(t){this.type.set(nl.RGB),this.changed=!0,this.data.b=t}set h(t){this.type.set(nl.HSL),this.changed=!0,this.data.h=t}set s(t){this.type.set(nl.HSL),this.changed=!0,this.data.s=t}set l(t){this.type.set(nl.HSL),this.changed=!0,this.data.l=t}set a(t){this.changed=!0,this.data.a=t}},ol=new sl({r:0,g:0,b:0,a:0},"transparent"),ll={re:/^#((?:[a-f0-9]{2}){2,4}|[a-f0-9]{3})$/i,parse:t=>{if(35===t.charCodeAt(0)){var e,r,i,n,a,s=t.match(ll.re);if(s)return s=s[1],e=parseInt(s,16),r=(a=4<(s=s.length))?1:17,i=a?8:4,n=(s=s%4==0)?0:-1,a=a?255:15,ol.set({r:(e>>i*(3+n)&a)*r,g:(e>>i*(2+n)&a)*r,b:(e>>i*(1+n)&a)*r,a:s?(e&a)*r/255:1},t)}},stringify:t=>{var{r:t,g:e,b:r,a:i}=t;return i<1?"#"+il[Math.round(t)]+il[Math.round(e)]+il[Math.round(r)]+il[Math.round(255*i)]:"#"+il[Math.round(t)]+il[Math.round(e)]+il[Math.round(r)]}},cl=ll,hl={re:/^hsla?\(\s*?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e-?\d+)?(?:deg|grad|rad|turn)?)\s*?(?:,|\s)\s*?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e-?\d+)?%)\s*?(?:,|\s)\s*?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e-?\d+)?%)(?:\s*?(?:,|\/)\s*?\+?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e-?\d+)?(%)?))?\s*?\)$/i,hueRe:/^(.+?)(deg|grad|rad|turn)$/i,_hue2deg:t=>{var e=t.match(hl.hueRe);if(e){var[,r,e]=e;switch(e){case"grad":return rl.channel.clamp.h(.9*parseFloat(r));case"rad":return rl.channel.clamp.h(180*parseFloat(r)/Math.PI);case"turn":return rl.channel.clamp.h(360*parseFloat(r))}}return rl.channel.clamp.h(parseFloat(t))},parse:t=>{var e=t.charCodeAt(0);if(104===e||72===e){var r,i,n,a,e=t.match(hl.re);if(e)return[,e,r,i,n,a]=e,ol.set({h:hl._hue2deg(e),s:rl.channel.clamp.s(parseFloat(r)),l:rl.channel.clamp.l(parseFloat(i)),a:n?rl.channel.clamp.a(a?parseFloat(n)/100:parseFloat(n)):1},t)}},stringify:t=>{var{h:t,s:e,l:r,a:i}=t;return i<1?`hsla(${rl.lang.round(t)}, ${rl.lang.round(e)}%, ${rl.lang.round(r)}%, ${i})`:`hsl(${rl.lang.round(t)}, ${rl.lang.round(e)}%, ${rl.lang.round(r)}%)`}},ul=hl,dl={colors:{aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyanaqua:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",transparent:"#00000000",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"},parse:t=>{t=t.toLowerCase();t=dl.colors[t];if(t)return cl.parse(t)},stringify:t=>{var e=cl.stringify(t);for(const r in dl.colors)if(dl.colors[r]===e)return r}},pl=dl,fl={re:/^rgba?\(\s*?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e\d+)?(%?))\s*?(?:,|\s)\s*?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e\d+)?(%?))\s*?(?:,|\s)\s*?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e\d+)?(%?))(?:\s*?(?:,|\/)\s*?\+?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e\d+)?(%?)))?\s*?\)$/i,parse:t=>{var e=t.charCodeAt(0);if(114===e||82===e){var r,i,n,a,s,o,l,e=t.match(fl.re);if(e)return[,e,r,i,n,a,s,o,l]=e,ol.set({r:rl.channel.clamp.r(r?2.55*parseFloat(e):parseFloat(e)),g:rl.channel.clamp.g(n?2.55*parseFloat(i):parseFloat(i)),b:rl.channel.clamp.b(s?2.55*parseFloat(a):parseFloat(a)),a:o?rl.channel.clamp.a(l?parseFloat(o)/100:parseFloat(o)):1},t)}},stringify:t=>{var{r:t,g:e,b:r,a:i}=t;return i<1?`rgba(${rl.lang.round(t)}, ${rl.lang.round(e)}, ${rl.lang.round(r)}, ${rl.lang.round(i)})`:`rgb(${rl.lang.round(t)}, ${rl.lang.round(e)}, ${rl.lang.round(r)})`}},gl=fl,yl={format:{keyword:pl,hex:cl,rgb:gl,rgba:gl,hsl:ul,hsla:ul},parse:t=>{if("string"!=typeof t)return t;var e=cl.parse(t)||gl.parse(t)||ul.parse(t)||pl.parse(t);if(e)return e;throw new Error(`Unsupported color format: "${t}"`)},stringify:t=>!t.changed&&t.color?t.color:(t.type.is(nl.HSL)||void 0===t.data.r?ul:t.a<1||!Number.isInteger(t.r)||!Number.isInteger(t.g)||!Number.isInteger(t.b)?gl:cl).stringify(t)},ml=(t,e)=>{var r=yl.parse(t);for(const i in e)r[i]=rl.channel.clamp[i](e[i]);return yl.stringify(r)},bl=(t,e,r=0,i=1)=>{return"number"!=typeof t?ml(t,{a:e}):(t=ol.set({r:rl.channel.clamp.r(t),g:rl.channel.clamp.g(e),b:rl.channel.clamp.b(r),a:rl.channel.clamp.a(i)}),yl.stringify(t))},_l=(t,e,r)=>{var t=yl.parse(t),i=t[e],r=rl.channel.clamp[e](i+r);return i!==r&&(t[e]=r),yl.stringify(t)},xl=(t,e)=>_l(t,"l",e),vl=(t,e)=>_l(t,"l",-e),i=(t,e)=>{var r=yl.parse(t),i={};for(const n in e)e[n]&&(i[n]=r[n]+e[n]);return ml(t,i)},n=(t,e=100)=>{var r=yl.parse(t),[r,t,e=50]=(r.r=255-r.r,r.g=255-r.g,r.b=255-r.b,[r,t,e]),{r,g:i,b:n,a}=yl.parse(r),{r:t,g:s,b:o,a:l}=yl.parse(t),c=2*(e=e/100)-1,h=a-l,r=r*(c=(1+(c*h==-1?c:(c+h)/(1+c*h)))/2)+t*(h=1-c),t=i*c+s*h,i=n*c+o*h,s=a*e+l*(1-e);return bl(r,t,i,s)},kl=(t,e)=>e?i(t,{s:-40,l:10}):i(t,{s:-40,l:-10}),wl="#ffffff",Tl="#f2f2f2";class Cl{constructor(){this.background="#f4f4f4",this.darkMode=!1,this.primaryColor="#fff4dd",this.noteBkgColor="#fff5ad",this.noteTextColor="#333",this.THEME_COLOR_LIMIT=12,this.fontFamily='"trebuchet ms", verdana, arial, sans-serif',this.fontSize="16px"}updateColors(){if(this.primaryTextColor=this.primaryTextColor||(this.darkMode?"#eee":"#333"),this.secondaryColor=this.secondaryColor||i(this.primaryColor,{h:-120}),this.tertiaryColor=this.tertiaryColor||i(this.primaryColor,{h:180,l:5}),this.primaryBorderColor=this.primaryBorderColor||kl(this.primaryColor,this.darkMode),this.secondaryBorderColor=this.secondaryBorderColor||kl(this.secondaryColor,this.darkMode),this.tertiaryBorderColor=this.tertiaryBorderColor||kl(this.tertiaryColor,this.darkMode),this.noteBorderColor=this.noteBorderColor||kl(this.noteBkgColor,this.darkMode),this.noteBkgColor=this.noteBkgColor||"#fff5ad",this.noteTextColor=this.noteTextColor||"#333",this.secondaryTextColor=this.secondaryTextColor||n(this.secondaryColor),this.tertiaryTextColor=this.tertiaryTextColor||n(this.tertiaryColor),this.lineColor=this.lineColor||n(this.background),this.textColor=this.textColor||this.primaryTextColor,this.nodeBkg=this.nodeBkg||this.primaryColor,this.mainBkg=this.mainBkg||this.primaryColor,this.nodeBorder=this.nodeBorder||this.primaryBorderColor,this.clusterBkg=this.clusterBkg||this.tertiaryColor,this.clusterBorder=this.clusterBorder||this.tertiaryBorderColor,this.defaultLinkColor=this.defaultLinkColor||this.lineColor,this.titleColor=this.titleColor||this.tertiaryTextColor,this.edgeLabelBackground=this.edgeLabelBackground||(this.darkMode?vl(this.secondaryColor,30):this.secondaryColor),this.nodeTextColor=this.nodeTextColor||this.primaryTextColor,this.actorBorder=this.actorBorder||this.primaryBorderColor,this.actorBkg=this.actorBkg||this.mainBkg,this.actorTextColor=this.actorTextColor||this.primaryTextColor,this.actorLineColor=this.actorLineColor||"grey",this.labelBoxBkgColor=this.labelBoxBkgColor||this.actorBkg,this.signalColor=this.signalColor||this.textColor,this.signalTextColor=this.signalTextColor||this.textColor,this.labelBoxBorderColor=this.labelBoxBorderColor||this.actorBorder,this.labelTextColor=this.labelTextColor||this.actorTextColor,this.loopTextColor=this.loopTextColor||this.actorTextColor,this.activationBorderColor=this.activationBorderColor||vl(this.secondaryColor,10),this.activationBkgColor=this.activationBkgColor||this.secondaryColor,this.sequenceNumberColor=this.sequenceNumberColor||n(this.lineColor),this.sectionBkgColor=this.sectionBkgColor||this.tertiaryColor,this.altSectionBkgColor=this.altSectionBkgColor||"white",this.sectionBkgColor=this.sectionBkgColor||this.secondaryColor,this.sectionBkgColor2=this.sectionBkgColor2||this.primaryColor,this.excludeBkgColor=this.excludeBkgColor||"#eeeeee",this.taskBorderColor=this.taskBorderColor||this.primaryBorderColor,this.taskBkgColor=this.taskBkgColor||this.primaryColor,this.activeTaskBorderColor=this.activeTaskBorderColor||this.primaryColor,this.activeTaskBkgColor=this.activeTaskBkgColor||xl(this.primaryColor,23),this.gridColor=this.gridColor||"lightgrey",this.doneTaskBkgColor=this.doneTaskBkgColor||"lightgrey",this.doneTaskBorderColor=this.doneTaskBorderColor||"grey",this.critBorderColor=this.critBorderColor||"#ff8888",this.critBkgColor=this.critBkgColor||"red",this.todayLineColor=this.todayLineColor||"red",this.taskTextColor=this.taskTextColor||this.textColor,this.taskTextOutsideColor=this.taskTextOutsideColor||this.textColor,this.taskTextLightColor=this.taskTextLightColor||this.textColor,this.taskTextColor=this.taskTextColor||this.primaryTextColor,this.taskTextDarkColor=this.taskTextDarkColor||this.textColor,this.taskTextClickableColor=this.taskTextClickableColor||"#003163",this.personBorder=this.personBorder||this.primaryBorderColor,this.personBkg=this.personBkg||this.mainBkg,this.transitionColor=this.transitionColor||this.lineColor,this.transitionLabelColor=this.transitionLabelColor||this.textColor,this.stateLabelColor=this.stateLabelColor||this.stateBkg||this.primaryTextColor,this.stateBkg=this.stateBkg||this.mainBkg,this.labelBackgroundColor=this.labelBackgroundColor||this.stateBkg,this.compositeBackground=this.compositeBackground||this.background||this.tertiaryColor,this.altBackground=this.altBackground||this.tertiaryColor,this.compositeTitleBackground=this.compositeTitleBackground||this.mainBkg,this.compositeBorder=this.compositeBorder||this.nodeBorder,this.innerEndBackground=this.nodeBorder,this.errorBkgColor=this.errorBkgColor||this.tertiaryColor,this.errorTextColor=this.errorTextColor||this.tertiaryTextColor,this.transitionColor=this.transitionColor||this.lineColor,this.specialStateColor=this.lineColor,this.cScale0=this.cScale0||this.primaryColor,this.cScale1=this.cScale1||this.secondaryColor,this.cScale2=this.cScale2||this.tertiaryColor,this.cScale3=this.cScale3||i(this.primaryColor,{h:30}),this.cScale4=this.cScale4||i(this.primaryColor,{h:60}),this.cScale5=this.cScale5||i(this.primaryColor,{h:90}),this.cScale6=this.cScale6||i(this.primaryColor,{h:120}),this.cScale7=this.cScale7||i(this.primaryColor,{h:150}),this.cScale8=this.cScale8||i(this.primaryColor,{h:210,l:150}),this.cScale9=this.cScale9||i(this.primaryColor,{h:270}),this.cScale10=this.cScale10||i(this.primaryColor,{h:300}),this.cScale11=this.cScale11||i(this.primaryColor,{h:330}),this.darkMode)for(let t=0;t<this.THEME_COLOR_LIMIT;t++)this["cScale"+t]=vl(this["cScale"+t],75);else for(let t=0;t<this.THEME_COLOR_LIMIT;t++)this["cScale"+t]=vl(this["cScale"+t],25);for(let t=0;t<this.THEME_COLOR_LIMIT;t++)this["cScaleInv"+t]=this["cScaleInv"+t]||n(this["cScale"+t]);for(let t=0;t<this.THEME_COLOR_LIMIT;t++)this.darkMode?this["cScalePeer"+t]=this["cScalePeer"+t]||xl(this["cScale"+t],10):this["cScalePeer"+t]=this["cScalePeer"+t]||vl(this["cScale"+t],10);this.scaleLabelColor=this.scaleLabelColor||this.labelTextColor;for(let t=0;t<this.THEME_COLOR_LIMIT;t++)this["cScaleLabel"+t]=this["cScaleLabel"+t]||this.scaleLabelColor;this.classText=this.classText||this.textColor,this.fillType0=this.fillType0||this.primaryColor,this.fillType1=this.fillType1||this.secondaryColor,this.fillType2=this.fillType2||i(this.primaryColor,{h:64}),this.fillType3=this.fillType3||i(this.secondaryColor,{h:64}),this.fillType4=this.fillType4||i(this.primaryColor,{h:-64}),this.fillType5=this.fillType5||i(this.secondaryColor,{h:-64}),this.fillType6=this.fillType6||i(this.primaryColor,{h:128}),this.fillType7=this.fillType7||i(this.secondaryColor,{h:128}),this.pie1=this.pie1||this.primaryColor,this.pie2=this.pie2||this.secondaryColor,this.pie3=this.pie3||this.tertiaryColor,this.pie4=this.pie4||i(this.primaryColor,{l:-10}),this.pie5=this.pie5||i(this.secondaryColor,{l:-10}),this.pie6=this.pie6||i(this.tertiaryColor,{l:-10}),this.pie7=this.pie7||i(this.primaryColor,{h:60,l:-10}),this.pie8=this.pie8||i(this.primaryColor,{h:-60,l:-10}),this.pie9=this.pie9||i(this.primaryColor,{h:120,l:0}),this.pie10=this.pie10||i(this.primaryColor,{h:60,l:-20}),this.pie11=this.pie11||i(this.primaryColor,{h:-60,l:-20}),this.pie12=this.pie12||i(this.primaryColor,{h:120,l:-10}),this.pieTitleTextSize=this.pieTitleTextSize||"25px",this.pieTitleTextColor=this.pieTitleTextColor||this.taskTextDarkColor,this.pieSectionTextSize=this.pieSectionTextSize||"17px",this.pieSectionTextColor=this.pieSectionTextColor||this.textColor,this.pieLegendTextSize=this.pieLegendTextSize||"17px",this.pieLegendTextColor=this.pieLegendTextColor||this.taskTextDarkColor,this.pieStrokeColor=this.pieStrokeColor||"black",this.pieStrokeWidth=this.pieStrokeWidth||"2px",this.pieOpacity=this.pieOpacity||"0.7",this.requirementBackground=this.requirementBackground||this.primaryColor,this.requirementBorderColor=this.requirementBorderColor||this.primaryBorderColor,this.requirementBorderSize=this.requirementBorderSize||this.primaryBorderColor,this.requirementTextColor=this.requirementTextColor||this.primaryTextColor,this.relationColor=this.relationColor||this.lineColor,this.relationLabelBackground=this.relationLabelBackground||(this.darkMode?vl(this.secondaryColor,30):this.secondaryColor),this.relationLabelColor=this.relationLabelColor||this.actorTextColor,this.git0=this.git0||this.primaryColor,this.git1=this.git1||this.secondaryColor,this.git2=this.git2||this.tertiaryColor,this.git3=this.git3||i(this.primaryColor,{h:-30}),this.git4=this.git4||i(this.primaryColor,{h:-60}),this.git5=this.git5||i(this.primaryColor,{h:-90}),this.git6=this.git6||i(this.primaryColor,{h:60}),this.git7=this.git7||i(this.primaryColor,{h:120}),this.darkMode?(this.git0=xl(this.git0,25),this.git1=xl(this.git1,25),this.git2=xl(this.git2,25),this.git3=xl(this.git3,25),this.git4=xl(this.git4,25),this.git5=xl(this.git5,25),this.git6=xl(this.git6,25),this.git7=xl(this.git7,25)):(this.git0=vl(this.git0,25),this.git1=vl(this.git1,25),this.git2=vl(this.git2,25),this.git3=vl(this.git3,25),this.git4=vl(this.git4,25),this.git5=vl(this.git5,25),this.git6=vl(this.git6,25),this.git7=vl(this.git7,25)),this.gitInv0=this.gitInv0||n(this.git0),this.gitInv1=this.gitInv1||n(this.git1),this.gitInv2=this.gitInv2||n(this.git2),this.gitInv3=this.gitInv3||n(this.git3),this.gitInv4=this.gitInv4||n(this.git4),this.gitInv5=this.gitInv5||n(this.git5),this.gitInv6=this.gitInv6||n(this.git6),this.gitInv7=this.gitInv7||n(this.git7),this.branchLabelColor=this.branchLabelColor||(this.darkMode?"black":this.labelTextColor),this.gitBranchLabel0=this.gitBranchLabel0||this.branchLabelColor,this.gitBranchLabel1=this.gitBranchLabel1||this.branchLabelColor,this.gitBranchLabel2=this.gitBranchLabel2||this.branchLabelColor,this.gitBranchLabel3=this.gitBranchLabel3||this.branchLabelColor,this.gitBranchLabel4=this.gitBranchLabel4||this.branchLabelColor,this.gitBranchLabel5=this.gitBranchLabel5||this.branchLabelColor,this.gitBranchLabel6=this.gitBranchLabel6||this.branchLabelColor,this.gitBranchLabel7=this.gitBranchLabel7||this.branchLabelColor,this.tagLabelColor=this.tagLabelColor||this.primaryTextColor,this.tagLabelBackground=this.tagLabelBackground||this.primaryColor,this.tagLabelBorder=this.tagBorder||this.primaryBorderColor,this.tagLabelFontSize=this.tagLabelFontSize||"10px",this.commitLabelColor=this.commitLabelColor||this.secondaryTextColor,this.commitLabelBackground=this.commitLabelBackground||this.secondaryColor,this.commitLabelFontSize=this.commitLabelFontSize||"10px",this.attributeBackgroundColorOdd=this.attributeBackgroundColorOdd||wl,this.attributeBackgroundColorEven=this.attributeBackgroundColorEven||Tl}calculate(e){var t;"object"!=typeof e?this.updateColors():((t=Object.keys(e)).forEach(t=>{this[t]=e[t]}),this.updateColors(),t.forEach(t=>{this[t]=e[t]}))}}class El{constructor(){this.background="#333",this.primaryColor="#1f2020",this.secondaryColor=xl(this.primaryColor,16),this.tertiaryColor=i(this.primaryColor,{h:-160}),this.primaryBorderColor=n(this.background),this.secondaryBorderColor=kl(this.secondaryColor,this.darkMode),this.tertiaryBorderColor=kl(this.tertiaryColor,this.darkMode),this.primaryTextColor=n(this.primaryColor),this.secondaryTextColor=n(this.secondaryColor),this.tertiaryTextColor=n(this.tertiaryColor),this.lineColor=n(this.background),this.textColor=n(this.background),this.mainBkg="#1f2020",this.secondBkg="calculated",this.mainContrastColor="lightgrey",this.darkTextColor=xl(n("#323D47"),10),this.lineColor="calculated",this.border1="#81B1DB",this.border2=bl(255,255,255,.25),this.arrowheadColor="calculated",this.fontFamily='"trebuchet ms", verdana, arial, sans-serif',this.fontSize="16px",this.labelBackground="#181818",this.textColor="#ccc",this.THEME_COLOR_LIMIT=12,this.nodeBkg="calculated",this.nodeBorder="calculated",this.clusterBkg="calculated",this.clusterBorder="calculated",this.defaultLinkColor="calculated",this.titleColor="#F9FFFE",this.edgeLabelBackground="calculated",this.actorBorder="calculated",this.actorBkg="calculated",this.actorTextColor="calculated",this.actorLineColor="calculated",this.signalColor="calculated",this.signalTextColor="calculated",this.labelBoxBkgColor="calculated",this.labelBoxBorderColor="calculated",this.labelTextColor="calculated",this.loopTextColor="calculated",this.noteBorderColor="calculated",this.noteBkgColor="#fff5ad",this.noteTextColor="calculated",this.activationBorderColor="calculated",this.activationBkgColor="calculated",this.sequenceNumberColor="black",this.sectionBkgColor=vl("#EAE8D9",30),this.altSectionBkgColor="calculated",this.sectionBkgColor2="#EAE8D9",this.taskBorderColor=bl(255,255,255,70),this.taskBkgColor="calculated",this.taskTextColor="calculated",this.taskTextLightColor="calculated",this.taskTextOutsideColor="calculated",this.taskTextClickableColor="#003163",this.activeTaskBorderColor=bl(255,255,255,50),this.activeTaskBkgColor="#81B1DB",this.gridColor="calculated",this.doneTaskBkgColor="calculated",this.doneTaskBorderColor="grey",this.critBorderColor="#E83737",this.critBkgColor="#E83737",this.taskTextDarkColor="calculated",this.todayLineColor="#DB5757",this.personBorder="calculated",this.personBkg="calculated",this.labelColor="calculated",this.errorBkgColor="#a44141",this.errorTextColor="#ddd"}updateColors(){this.secondBkg=xl(this.mainBkg,16),this.lineColor=this.mainContrastColor,this.arrowheadColor=this.mainContrastColor,this.nodeBkg=this.mainBkg,this.nodeBorder=this.border1,this.clusterBkg=this.secondBkg,this.clusterBorder=this.border2,this.defaultLinkColor=this.lineColor,this.edgeLabelBackground=xl(this.labelBackground,25),this.actorBorder=this.border1,this.actorBkg=this.mainBkg,this.actorTextColor=this.mainContrastColor,this.actorLineColor=this.mainContrastColor,this.signalColor=this.mainContrastColor,this.signalTextColor=this.mainContrastColor,this.labelBoxBkgColor=this.actorBkg,this.labelBoxBorderColor=this.actorBorder,this.labelTextColor=this.mainContrastColor,this.loopTextColor=this.mainContrastColor,this.noteBorderColor=this.secondaryBorderColor,this.noteBkgColor=this.secondBkg,this.noteTextColor=this.secondaryTextColor,this.activationBorderColor=this.border1,this.activationBkgColor=this.secondBkg,this.altSectionBkgColor=this.background,this.taskBkgColor=xl(this.mainBkg,23),this.taskTextColor=this.darkTextColor,this.taskTextLightColor=this.mainContrastColor,this.taskTextOutsideColor=this.taskTextLightColor,this.gridColor=this.mainContrastColor,this.doneTaskBkgColor=this.mainContrastColor,this.taskTextDarkColor=this.darkTextColor,this.transitionColor=this.transitionColor||this.lineColor,this.transitionLabelColor=this.transitionLabelColor||this.textColor,this.stateLabelColor=this.stateLabelColor||this.stateBkg||this.primaryTextColor,this.stateBkg=this.stateBkg||this.mainBkg,this.labelBackgroundColor=this.labelBackgroundColor||this.stateBkg,this.compositeBackground=this.compositeBackground||this.background||this.tertiaryColor,this.altBackground=this.altBackground||"#555",this.compositeTitleBackground=this.compositeTitleBackground||this.mainBkg,this.compositeBorder=this.compositeBorder||this.nodeBorder,this.innerEndBackground=this.primaryBorderColor,this.specialStateColor="#f4f4f4",this.errorBkgColor=this.errorBkgColor||this.tertiaryColor,this.errorTextColor=this.errorTextColor||this.tertiaryTextColor,this.fillType0=this.primaryColor,this.fillType1=this.secondaryColor,this.fillType2=i(this.primaryColor,{h:64}),this.fillType3=i(this.secondaryColor,{h:64}),this.fillType4=i(this.primaryColor,{h:-64}),this.fillType5=i(this.secondaryColor,{h:-64}),this.fillType6=i(this.primaryColor,{h:128}),this.fillType7=i(this.secondaryColor,{h:128}),this.cScale1=this.cScale1||"#0b0000",this.cScale2=this.cScale2||"#4d1037",this.cScale3=this.cScale3||"#3f5258",this.cScale4=this.cScale4||"#4f2f1b",this.cScale5=this.cScale5||"#6e0a0a",this.cScale6=this.cScale6||"#3b0048",this.cScale7=this.cScale7||"#995a01",this.cScale8=this.cScale8||"#154706",this.cScale9=this.cScale9||"#161722",this.cScale10=this.cScale10||"#00296f",this.cScale11=this.cScale11||"#01629c",this.cScale12=this.cScale12||"#010029",this.cScale0=this.cScale0||this.primaryColor,this.cScale1=this.cScale1||this.secondaryColor,this.cScale2=this.cScale2||this.tertiaryColor,this.cScale3=this.cScale3||i(this.primaryColor,{h:30}),this.cScale4=this.cScale4||i(this.primaryColor,{h:60}),this.cScale5=this.cScale5||i(this.primaryColor,{h:90}),this.cScale6=this.cScale6||i(this.primaryColor,{h:120}),this.cScale7=this.cScale7||i(this.primaryColor,{h:150}),this.cScale8=this.cScale8||i(this.primaryColor,{h:210}),this.cScale9=this.cScale9||i(this.primaryColor,{h:270}),this.cScale10=this.cScale10||i(this.primaryColor,{h:300}),this.cScale11=this.cScale11||i(this.primaryColor,{h:330});for(let t=0;t<this.THEME_COLOR_LIMIT;t++)this["cScaleInv"+t]=this["cScaleInv"+t]||n(this["cScale"+t]);for(let t=0;t<this.THEME_COLOR_LIMIT;t++)this["cScalePeer"+t]=this["cScalePeer"+t]||xl(this["cScale"+t],10);this.scaleLabelColor=this.scaleLabelColor||(this.darkMode?"black":this.labelTextColor);for(let t=0;t<this.THEME_COLOR_LIMIT;t++)this["cScaleLabel"+t]=this["cScaleLabel"+t]||this.scaleLabelColor;for(let t=0;t<this.THEME_COLOR_LIMIT;t++)this["pie"+t]=this["cScale"+t];this.pieTitleTextSize=this.pieTitleTextSize||"25px",this.pieTitleTextColor=this.pieTitleTextColor||this.taskTextDarkColor,this.pieSectionTextSize=this.pieSectionTextSize||"17px",this.pieSectionTextColor=this.pieSectionTextColor||this.textColor,this.pieLegendTextSize=this.pieLegendTextSize||"17px",this.pieLegendTextColor=this.pieLegendTextColor||this.taskTextDarkColor,this.pieStrokeColor=this.pieStrokeColor||"black",this.pieStrokeWidth=this.pieStrokeWidth||"2px",this.pieOpacity=this.pieOpacity||"0.7",this.classText=this.primaryTextColor,this.requirementBackground=this.requirementBackground||this.primaryColor,this.requirementBorderColor=this.requirementBorderColor||this.primaryBorderColor,this.requirementBorderSize=this.requirementBorderSize||this.primaryBorderColor,this.requirementTextColor=this.requirementTextColor||this.primaryTextColor,this.relationColor=this.relationColor||this.lineColor,this.relationLabelBackground=this.relationLabelBackground||(this.darkMode?vl(this.secondaryColor,30):this.secondaryColor),this.relationLabelColor=this.relationLabelColor||this.actorTextColor,this.git0=xl(this.secondaryColor,20),this.git1=xl(this.pie2||this.secondaryColor,20),this.git2=xl(this.pie3||this.tertiaryColor,20),this.git3=xl(this.pie4||i(this.primaryColor,{h:-30}),20),this.git4=xl(this.pie5||i(this.primaryColor,{h:-60}),20),this.git5=xl(this.pie6||i(this.primaryColor,{h:-90}),10),this.git6=xl(this.pie7||i(this.primaryColor,{h:60}),10),this.git7=xl(this.pie8||i(this.primaryColor,{h:120}),20),this.gitInv0=this.gitInv0||n(this.git0),this.gitInv1=this.gitInv1||n(this.git1),this.gitInv2=this.gitInv2||n(this.git2),this.gitInv3=this.gitInv3||n(this.git3),this.gitInv4=this.gitInv4||n(this.git4),this.gitInv5=this.gitInv5||n(this.git5),this.gitInv6=this.gitInv6||n(this.git6),this.gitInv7=this.gitInv7||n(this.git7),this.tagLabelColor=this.tagLabelColor||this.primaryTextColor,this.tagLabelBackground=this.tagLabelBackground||this.primaryColor,this.tagLabelBorder=this.tagBorder||this.primaryBorderColor,this.tagLabelFontSize=this.tagLabelFontSize||"10px",this.commitLabelColor=this.commitLabelColor||this.secondaryTextColor,this.commitLabelBackground=this.commitLabelBackground||this.secondaryColor,this.commitLabelFontSize=this.commitLabelFontSize||"10px",this.attributeBackgroundColorOdd=this.attributeBackgroundColorOdd||xl(this.background,12),this.attributeBackgroundColorEven=this.attributeBackgroundColorEven||xl(this.background,2)}calculate(e){var t;"object"!=typeof e?this.updateColors():((t=Object.keys(e)).forEach(t=>{this[t]=e[t]}),this.updateColors(),t.forEach(t=>{this[t]=e[t]}))}}class Sl{constructor(){this.background="#f4f4f4",this.primaryColor="#ECECFF",this.secondaryColor=i(this.primaryColor,{h:120}),this.secondaryColor="#ffffde",this.tertiaryColor=i(this.primaryColor,{h:-160}),this.primaryBorderColor=kl(this.primaryColor,this.darkMode),this.secondaryBorderColor=kl(this.secondaryColor,this.darkMode),this.tertiaryBorderColor=kl(this.tertiaryColor,this.darkMode),this.primaryTextColor=n(this.primaryColor),this.secondaryTextColor=n(this.secondaryColor),this.tertiaryTextColor=n(this.tertiaryColor),this.lineColor=n(this.background),this.textColor=n(this.background),this.background="white",this.mainBkg="#ECECFF",this.secondBkg="#ffffde",this.lineColor="#333333",this.border1="#9370DB",this.border2="#aaaa33",this.arrowheadColor="#333333",this.fontFamily='"trebuchet ms", verdana, arial, sans-serif',this.fontSize="16px",this.labelBackground="#e8e8e8",this.textColor="#333",this.THEME_COLOR_LIMIT=12,this.nodeBkg="calculated",this.nodeBorder="calculated",this.clusterBkg="calculated",this.clusterBorder="calculated",this.defaultLinkColor="calculated",this.titleColor="calculated",this.edgeLabelBackground="calculated",this.actorBorder="calculated",this.actorBkg="calculated",this.actorTextColor="black",this.actorLineColor="grey",this.signalColor="calculated",this.signalTextColor="calculated",this.labelBoxBkgColor="calculated",this.labelBoxBorderColor="calculated",this.labelTextColor="calculated",this.loopTextColor="calculated",this.noteBorderColor="calculated",this.noteBkgColor="#fff5ad",this.noteTextColor="calculated",this.activationBorderColor="#666",this.activationBkgColor="#f4f4f4",this.sequenceNumberColor="white",this.sectionBkgColor="calculated",this.altSectionBkgColor="calculated",this.sectionBkgColor2="calculated",this.excludeBkgColor="#eeeeee",this.taskBorderColor="calculated",this.taskBkgColor="calculated",this.taskTextLightColor="calculated",this.taskTextColor=this.taskTextLightColor,this.taskTextDarkColor="calculated",this.taskTextOutsideColor=this.taskTextDarkColor,this.taskTextClickableColor="calculated",this.activeTaskBorderColor="calculated",this.activeTaskBkgColor="calculated",this.gridColor="calculated",this.doneTaskBkgColor="calculated",this.doneTaskBorderColor="calculated",this.critBorderColor="calculated",this.critBkgColor="calculated",this.todayLineColor="calculated",this.sectionBkgColor=bl(102,102,255,.49),this.altSectionBkgColor="white",this.sectionBkgColor2="#fff400",this.taskBorderColor="#534fbc",this.taskBkgColor="#8a90dd",this.taskTextLightColor="white",this.taskTextColor="calculated",this.taskTextDarkColor="black",this.taskTextOutsideColor="calculated",this.taskTextClickableColor="#003163",this.activeTaskBorderColor="#534fbc",this.activeTaskBkgColor="#bfc7ff",this.gridColor="lightgrey",this.doneTaskBkgColor="lightgrey",this.doneTaskBorderColor="grey",this.critBorderColor="#ff8888",this.critBkgColor="red",this.todayLineColor="red",this.personBorder="calculated",this.personBkg="calculated",this.labelColor="black",this.errorBkgColor="#552222",this.errorTextColor="#552222",this.updateColors()}updateColors(){this.cScale0=this.cScale0||this.primaryColor,this.cScale1=this.cScale1||this.secondaryColor,this.cScale2=this.cScale2||this.tertiaryColor,this.cScale3=this.cScale3||i(this.primaryColor,{h:30}),this.cScale4=this.cScale4||i(this.primaryColor,{h:60}),this.cScale5=this.cScale5||i(this.primaryColor,{h:90}),this.cScale6=this.cScale6||i(this.primaryColor,{h:120}),this.cScale7=this.cScale7||i(this.primaryColor,{h:150}),this.cScale8=this.cScale8||i(this.primaryColor,{h:210}),this.cScale9=this.cScale9||i(this.primaryColor,{h:270}),this.cScale10=this.cScale10||i(this.primaryColor,{h:300}),this.cScale11=this.cScale11||i(this.primaryColor,{h:330}),this.cScalePeer1=this.cScalePeer1||vl(this.secondaryColor,45),this.cScalePeer2=this.cScalePeer2||vl(this.tertiaryColor,40);for(let t=0;t<this.THEME_COLOR_LIMIT;t++)this["cScale"+t]=vl(this["cScale"+t],10),this["cScalePeer"+t]=this["cScalePeer"+t]||vl(this["cScale"+t],25);for(let t=0;t<this.THEME_COLOR_LIMIT;t++)this["cScaleInv"+t]=this["cScaleInv"+t]||i(this["cScale"+t],{h:180});if(this.scaleLabelColor="calculated"!==this.scaleLabelColor&&this.scaleLabelColor?this.scaleLabelColor:this.labelTextColor,"calculated"!==this.labelTextColor){this.cScaleLabel0=this.cScaleLabel0||n(this.labelTextColor),this.cScaleLabel3=this.cScaleLabel3||n(this.labelTextColor);for(let t=0;t<this.THEME_COLOR_LIMIT;t++)this["cScaleLabel"+t]=this["cScaleLabel"+t]||this.labelTextColor}this.nodeBkg=this.mainBkg,this.nodeBorder=this.border1,this.clusterBkg=this.secondBkg,this.clusterBorder=this.border2,this.defaultLinkColor=this.lineColor,this.titleColor=this.textColor,this.edgeLabelBackground=this.labelBackground,this.actorBorder=xl(this.border1,23),this.actorBkg=this.mainBkg,this.labelBoxBkgColor=this.actorBkg,this.signalColor=this.textColor,this.signalTextColor=this.textColor,this.labelBoxBorderColor=this.actorBorder,this.labelTextColor=this.actorTextColor,this.loopTextColor=this.actorTextColor,this.noteBorderColor=this.border2,this.noteTextColor=this.actorTextColor,this.taskTextColor=this.taskTextLightColor,this.taskTextOutsideColor=this.taskTextDarkColor,this.transitionColor=this.transitionColor||this.lineColor,this.transitionLabelColor=this.transitionLabelColor||this.textColor,this.stateLabelColor=this.stateLabelColor||this.stateBkg||this.primaryTextColor,this.stateBkg=this.stateBkg||this.mainBkg,this.labelBackgroundColor=this.labelBackgroundColor||this.stateBkg,this.compositeBackground=this.compositeBackground||this.background||this.tertiaryColor,this.altBackground=this.altBackground||"#f0f0f0",this.compositeTitleBackground=this.compositeTitleBackground||this.mainBkg,this.compositeBorder=this.compositeBorder||this.nodeBorder,this.innerEndBackground=this.nodeBorder,this.specialStateColor=this.lineColor,this.errorBkgColor=this.errorBkgColor||this.tertiaryColor,this.errorTextColor=this.errorTextColor||this.tertiaryTextColor,this.transitionColor=this.transitionColor||this.lineColor,this.classText=this.primaryTextColor,this.fillType0=this.primaryColor,this.fillType1=this.secondaryColor,this.fillType2=i(this.primaryColor,{h:64}),this.fillType3=i(this.secondaryColor,{h:64}),this.fillType4=i(this.primaryColor,{h:-64}),this.fillType5=i(this.secondaryColor,{h:-64}),this.fillType6=i(this.primaryColor,{h:128}),this.fillType7=i(this.secondaryColor,{h:128}),this.pie1=this.pie1||this.primaryColor,this.pie2=this.pie2||this.secondaryColor,this.pie3=this.pie3||i(this.tertiaryColor,{l:-40}),this.pie4=this.pie4||i(this.primaryColor,{l:-10}),this.pie5=this.pie5||i(this.secondaryColor,{l:-30}),this.pie6=this.pie6||i(this.tertiaryColor,{l:-20}),this.pie7=this.pie7||i(this.primaryColor,{h:60,l:-20}),this.pie8=this.pie8||i(this.primaryColor,{h:-60,l:-40}),this.pie9=this.pie9||i(this.primaryColor,{h:120,l:-40}),this.pie10=this.pie10||i(this.primaryColor,{h:60,l:-40}),this.pie11=this.pie11||i(this.primaryColor,{h:-90,l:-40}),this.pie12=this.pie12||i(this.primaryColor,{h:120,l:-30}),this.pieTitleTextSize=this.pieTitleTextSize||"25px",this.pieTitleTextColor=this.pieTitleTextColor||this.taskTextDarkColor,this.pieSectionTextSize=this.pieSectionTextSize||"17px",this.pieSectionTextColor=this.pieSectionTextColor||this.textColor,this.pieLegendTextSize=this.pieLegendTextSize||"17px",this.pieLegendTextColor=this.pieLegendTextColor||this.taskTextDarkColor,this.pieStrokeColor=this.pieStrokeColor||"black",this.pieStrokeWidth=this.pieStrokeWidth||"2px",this.pieOpacity=this.pieOpacity||"0.7",this.requirementBackground=this.requirementBackground||this.primaryColor,this.requirementBorderColor=this.requirementBorderColor||this.primaryBorderColor,this.requirementBorderSize=this.requirementBorderSize||this.primaryBorderColor,this.requirementTextColor=this.requirementTextColor||this.primaryTextColor,this.relationColor=this.relationColor||this.lineColor,this.relationLabelBackground=this.relationLabelBackground||this.labelBackground,this.relationLabelColor=this.relationLabelColor||this.actorTextColor,this.git0=this.git0||this.primaryColor,this.git1=this.git1||this.secondaryColor,this.git2=this.git2||this.tertiaryColor,this.git3=this.git3||i(this.primaryColor,{h:-30}),this.git4=this.git4||i(this.primaryColor,{h:-60}),this.git5=this.git5||i(this.primaryColor,{h:-90}),this.git6=this.git6||i(this.primaryColor,{h:60}),this.git7=this.git7||i(this.primaryColor,{h:120}),this.darkMode?(this.git0=xl(this.git0,25),this.git1=xl(this.git1,25),this.git2=xl(this.git2,25),this.git3=xl(this.git3,25),this.git4=xl(this.git4,25),this.git5=xl(this.git5,25),this.git6=xl(this.git6,25),this.git7=xl(this.git7,25)):(this.git0=vl(this.git0,25),this.git1=vl(this.git1,25),this.git2=vl(this.git2,25),this.git3=vl(this.git3,25),this.git4=vl(this.git4,25),this.git5=vl(this.git5,25),this.git6=vl(this.git6,25),this.git7=vl(this.git7,25)),this.gitInv0=this.gitInv0||vl(n(this.git0),25),this.gitInv1=this.gitInv1||n(this.git1),this.gitInv2=this.gitInv2||n(this.git2),this.gitInv3=this.gitInv3||n(this.git3),this.gitInv4=this.gitInv4||n(this.git4),this.gitInv5=this.gitInv5||n(this.git5),this.gitInv6=this.gitInv6||n(this.git6),this.gitInv7=this.gitInv7||n(this.git7),this.gitBranchLabel0=this.gitBranchLabel0||n(this.labelTextColor),this.gitBranchLabel1=this.gitBranchLabel1||this.labelTextColor,this.gitBranchLabel2=this.gitBranchLabel2||this.labelTextColor,this.gitBranchLabel3=this.gitBranchLabel3||n(this.labelTextColor),this.gitBranchLabel4=this.gitBranchLabel4||this.labelTextColor,this.gitBranchLabel5=this.gitBranchLabel5||this.labelTextColor,this.gitBranchLabel6=this.gitBranchLabel6||this.labelTextColor,this.gitBranchLabel7=this.gitBranchLabel7||this.labelTextColor,this.tagLabelColor=this.tagLabelColor||this.primaryTextColor,this.tagLabelBackground=this.tagLabelBackground||this.primaryColor,this.tagLabelBorder=this.tagBorder||this.primaryBorderColor,this.tagLabelFontSize=this.tagLabelFontSize||"10px",this.commitLabelColor=this.commitLabelColor||this.secondaryTextColor,this.commitLabelBackground=this.commitLabelBackground||this.secondaryColor,this.commitLabelFontSize=this.commitLabelFontSize||"10px",this.attributeBackgroundColorOdd=this.attributeBackgroundColorOdd||wl,this.attributeBackgroundColorEven=this.attributeBackgroundColorEven||Tl}calculate(e){var t;"object"!=typeof e?this.updateColors():((t=Object.keys(e)).forEach(t=>{this[t]=e[t]}),this.updateColors(),t.forEach(t=>{this[t]=e[t]}))}}class Al{constructor(){this.background="#f4f4f4",this.primaryColor="#cde498",this.secondaryColor="#cdffb2",this.background="white",this.mainBkg="#cde498",this.secondBkg="#cdffb2",this.lineColor="green",this.border1="#13540c",this.border2="#6eaa49",this.arrowheadColor="green",this.fontFamily='"trebuchet ms", verdana, arial, sans-serif',this.fontSize="16px",this.tertiaryColor=xl("#cde498",10),this.primaryBorderColor=kl(this.primaryColor,this.darkMode),this.secondaryBorderColor=kl(this.secondaryColor,this.darkMode),this.tertiaryBorderColor=kl(this.tertiaryColor,this.darkMode),this.primaryTextColor=n(this.primaryColor),this.secondaryTextColor=n(this.secondaryColor),this.tertiaryTextColor=n(this.primaryColor),this.lineColor=n(this.background),this.textColor=n(this.background),this.THEME_COLOR_LIMIT=12,this.nodeBkg="calculated",this.nodeBorder="calculated",this.clusterBkg="calculated",this.clusterBorder="calculated",this.defaultLinkColor="calculated",this.titleColor="#333",this.edgeLabelBackground="#e8e8e8",this.actorBorder="calculated",this.actorBkg="calculated",this.actorTextColor="black",this.actorLineColor="grey",this.signalColor="#333",this.signalTextColor="#333",this.labelBoxBkgColor="calculated",this.labelBoxBorderColor="#326932",this.labelTextColor="calculated",this.loopTextColor="calculated",this.noteBorderColor="calculated",this.noteBkgColor="#fff5ad",this.noteTextColor="calculated",this.activationBorderColor="#666",this.activationBkgColor="#f4f4f4",this.sequenceNumberColor="white",this.sectionBkgColor="#6eaa49",this.altSectionBkgColor="white",this.sectionBkgColor2="#6eaa49",this.excludeBkgColor="#eeeeee",this.taskBorderColor="calculated",this.taskBkgColor="#487e3a",this.taskTextLightColor="white",this.taskTextColor="calculated",this.taskTextDarkColor="black",this.taskTextOutsideColor="calculated",this.taskTextClickableColor="#003163",this.activeTaskBorderColor="calculated",this.activeTaskBkgColor="calculated",this.gridColor="lightgrey",this.doneTaskBkgColor="lightgrey",this.doneTaskBorderColor="grey",this.critBorderColor="#ff8888",this.critBkgColor="red",this.todayLineColor="red",this.personBorder="calculated",this.personBkg="calculated",this.labelColor="black",this.errorBkgColor="#552222",this.errorTextColor="#552222"}updateColors(){this.cScale0=this.cScale0||this.primaryColor,this.cScale1=this.cScale1||this.secondaryColor,this.cScale2=this.cScale2||this.tertiaryColor,this.cScale3=this.cScale3||i(this.primaryColor,{h:30}),this.cScale4=this.cScale4||i(this.primaryColor,{h:60}),this.cScale5=this.cScale5||i(this.primaryColor,{h:90}),this.cScale6=this.cScale6||i(this.primaryColor,{h:120}),this.cScale7=this.cScale7||i(this.primaryColor,{h:150}),this.cScale8=this.cScale8||i(this.primaryColor,{h:210}),this.cScale9=this.cScale9||i(this.primaryColor,{h:270}),this.cScale10=this.cScale10||i(this.primaryColor,{h:300}),this.cScale11=this.cScale11||i(this.primaryColor,{h:330}),this.cScalePeer1=this.cScalePeer1||vl(this.secondaryColor,45),this.cScalePeer2=this.cScalePeer2||vl(this.tertiaryColor,40);for(let t=0;t<this.THEME_COLOR_LIMIT;t++)this["cScale"+t]=vl(this["cScale"+t],10),this["cScalePeer"+t]=this["cScalePeer"+t]||vl(this["cScale"+t],25);for(let t=0;t<this.THEME_COLOR_LIMIT;t++)this["cScaleInv"+t]=this["cScaleInv"+t]||i(this["cScale"+t],{h:180});this.scaleLabelColor="calculated"!==this.scaleLabelColor&&this.scaleLabelColor?this.scaleLabelColor:this.labelTextColor;for(let t=0;t<this.THEME_COLOR_LIMIT;t++)this["cScaleLabel"+t]=this["cScaleLabel"+t]||this.scaleLabelColor;this.nodeBkg=this.mainBkg,this.nodeBorder=this.border1,this.clusterBkg=this.secondBkg,this.clusterBorder=this.border2,this.defaultLinkColor=this.lineColor,this.actorBorder=vl(this.mainBkg,20),this.actorBkg=this.mainBkg,this.labelBoxBkgColor=this.actorBkg,this.labelTextColor=this.actorTextColor,this.loopTextColor=this.actorTextColor,this.noteBorderColor=this.border2,this.noteTextColor=this.actorTextColor,this.taskBorderColor=this.border1,this.taskTextColor=this.taskTextLightColor,this.taskTextOutsideColor=this.taskTextDarkColor,this.activeTaskBorderColor=this.taskBorderColor,this.activeTaskBkgColor=this.mainBkg,this.transitionColor=this.transitionColor||this.lineColor,this.transitionLabelColor=this.transitionLabelColor||this.textColor,this.stateLabelColor=this.stateLabelColor||this.stateBkg||this.primaryTextColor,this.stateBkg=this.stateBkg||this.mainBkg,this.labelBackgroundColor=this.labelBackgroundColor||this.stateBkg,this.compositeBackground=this.compositeBackground||this.background||this.tertiaryColor,this.altBackground=this.altBackground||"#f0f0f0",this.compositeTitleBackground=this.compositeTitleBackground||this.mainBkg,this.compositeBorder=this.compositeBorder||this.nodeBorder,this.innerEndBackground=this.primaryBorderColor,this.specialStateColor=this.lineColor,this.errorBkgColor=this.errorBkgColor||this.tertiaryColor,this.errorTextColor=this.errorTextColor||this.tertiaryTextColor,this.transitionColor=this.transitionColor||this.lineColor,this.classText=this.primaryTextColor,this.fillType0=this.primaryColor,this.fillType1=this.secondaryColor,this.fillType2=i(this.primaryColor,{h:64}),this.fillType3=i(this.secondaryColor,{h:64}),this.fillType4=i(this.primaryColor,{h:-64}),this.fillType5=i(this.secondaryColor,{h:-64}),this.fillType6=i(this.primaryColor,{h:128}),this.fillType7=i(this.secondaryColor,{h:128}),this.pie1=this.pie1||this.primaryColor,this.pie2=this.pie2||this.secondaryColor,this.pie3=this.pie3||this.tertiaryColor,this.pie4=this.pie4||i(this.primaryColor,{l:-30}),this.pie5=this.pie5||i(this.secondaryColor,{l:-30}),this.pie6=this.pie6||i(this.tertiaryColor,{h:40,l:-40}),this.pie7=this.pie7||i(this.primaryColor,{h:60,l:-10}),this.pie8=this.pie8||i(this.primaryColor,{h:-60,l:-10}),this.pie9=this.pie9||i(this.primaryColor,{h:120,l:0}),this.pie10=this.pie10||i(this.primaryColor,{h:60,l:-50}),this.pie11=this.pie11||i(this.primaryColor,{h:-60,l:-50}),this.pie12=this.pie12||i(this.primaryColor,{h:120,l:-50}),this.pieTitleTextSize=this.pieTitleTextSize||"25px",this.pieTitleTextColor=this.pieTitleTextColor||this.taskTextDarkColor,this.pieSectionTextSize=this.pieSectionTextSize||"17px",this.pieSectionTextColor=this.pieSectionTextColor||this.textColor,this.pieLegendTextSize=this.pieLegendTextSize||"17px",this.pieLegendTextColor=this.pieLegendTextColor||this.taskTextDarkColor,this.pieStrokeColor=this.pieStrokeColor||"black",this.pieStrokeWidth=this.pieStrokeWidth||"2px",this.pieOpacity=this.pieOpacity||"0.7",this.requirementBackground=this.requirementBackground||this.primaryColor,this.requirementBorderColor=this.requirementBorderColor||this.primaryBorderColor,this.requirementBorderSize=this.requirementBorderSize||this.primaryBorderColor,this.requirementTextColor=this.requirementTextColor||this.primaryTextColor,this.relationColor=this.relationColor||this.lineColor,this.relationLabelBackground=this.relationLabelBackground||this.edgeLabelBackground,this.relationLabelColor=this.relationLabelColor||this.actorTextColor,this.git0=this.git0||this.primaryColor,this.git1=this.git1||this.secondaryColor,this.git2=this.git2||this.tertiaryColor,this.git3=this.git3||i(this.primaryColor,{h:-30}),this.git4=this.git4||i(this.primaryColor,{h:-60}),this.git5=this.git5||i(this.primaryColor,{h:-90}),this.git6=this.git6||i(this.primaryColor,{h:60}),this.git7=this.git7||i(this.primaryColor,{h:120}),this.darkMode?(this.git0=xl(this.git0,25),this.git1=xl(this.git1,25),this.git2=xl(this.git2,25),this.git3=xl(this.git3,25),this.git4=xl(this.git4,25),this.git5=xl(this.git5,25),this.git6=xl(this.git6,25),this.git7=xl(this.git7,25)):(this.git0=vl(this.git0,25),this.git1=vl(this.git1,25),this.git2=vl(this.git2,25),this.git3=vl(this.git3,25),this.git4=vl(this.git4,25),this.git5=vl(this.git5,25),this.git6=vl(this.git6,25),this.git7=vl(this.git7,25)),this.gitInv0=this.gitInv0||n(this.git0),this.gitInv1=this.gitInv1||n(this.git1),this.gitInv2=this.gitInv2||n(this.git2),this.gitInv3=this.gitInv3||n(this.git3),this.gitInv4=this.gitInv4||n(this.git4),this.gitInv5=this.gitInv5||n(this.git5),this.gitInv6=this.gitInv6||n(this.git6),this.gitInv7=this.gitInv7||n(this.git7),this.tagLabelColor=this.tagLabelColor||this.primaryTextColor,this.tagLabelBackground=this.tagLabelBackground||this.primaryColor,this.tagLabelBorder=this.tagBorder||this.primaryBorderColor,this.tagLabelFontSize=this.tagLabelFontSize||"10px",this.commitLabelColor=this.commitLabelColor||this.secondaryTextColor,this.commitLabelBackground=this.commitLabelBackground||this.secondaryColor,this.commitLabelFontSize=this.commitLabelFontSize||"10px",this.attributeBackgroundColorOdd=this.attributeBackgroundColorOdd||wl,this.attributeBackgroundColorEven=this.attributeBackgroundColorEven||Tl}calculate(e){var t;"object"!=typeof e?this.updateColors():((t=Object.keys(e)).forEach(t=>{this[t]=e[t]}),this.updateColors(),t.forEach(t=>{this[t]=e[t]}))}}class Dl{constructor(){this.primaryColor="#eee",this.contrast="#707070",this.secondaryColor=xl(this.contrast,55),this.background="#ffffff",this.tertiaryColor=i(this.primaryColor,{h:-160}),this.primaryBorderColor=kl(this.primaryColor,this.darkMode),this.secondaryBorderColor=kl(this.secondaryColor,this.darkMode),this.tertiaryBorderColor=kl(this.tertiaryColor,this.darkMode),this.primaryTextColor=n(this.primaryColor),this.secondaryTextColor=n(this.secondaryColor),this.tertiaryTextColor=n(this.tertiaryColor),this.lineColor=n(this.background),this.textColor=n(this.background),this.mainBkg="#eee",this.secondBkg="calculated",this.lineColor="#666",this.border1="#999",this.border2="calculated",this.note="#ffa",this.text="#333",this.critical="#d42",this.done="#bbb",this.arrowheadColor="#333333",this.fontFamily='"trebuchet ms", verdana, arial, sans-serif',this.fontSize="16px",this.THEME_COLOR_LIMIT=12,this.nodeBkg="calculated",this.nodeBorder="calculated",this.clusterBkg="calculated",this.clusterBorder="calculated",this.defaultLinkColor="calculated",this.titleColor="calculated",this.edgeLabelBackground="white",this.actorBorder="calculated",this.actorBkg="calculated",this.actorTextColor="calculated",this.actorLineColor="calculated",this.signalColor="calculated",this.signalTextColor="calculated",this.labelBoxBkgColor="calculated",this.labelBoxBorderColor="calculated",this.labelTextColor="calculated",this.loopTextColor="calculated",this.noteBorderColor="calculated",this.noteBkgColor="calculated",this.noteTextColor="calculated",this.activationBorderColor="#666",this.activationBkgColor="#f4f4f4",this.sequenceNumberColor="white",this.sectionBkgColor="calculated",this.altSectionBkgColor="white",this.sectionBkgColor2="calculated",this.excludeBkgColor="#eeeeee",this.taskBorderColor="calculated",this.taskBkgColor="calculated",this.taskTextLightColor="white",this.taskTextColor="calculated",this.taskTextDarkColor="calculated",this.taskTextOutsideColor="calculated",this.taskTextClickableColor="#003163",this.activeTaskBorderColor="calculated",this.activeTaskBkgColor="calculated",this.gridColor="calculated",this.doneTaskBkgColor="calculated",this.doneTaskBorderColor="calculated",this.critBkgColor="calculated",this.critBorderColor="calculated",this.todayLineColor="calculated",this.personBorder="calculated",this.personBkg="calculated",this.labelColor="black",this.errorBkgColor="#552222",this.errorTextColor="#552222"}updateColors(){this.secondBkg=xl(this.contrast,55),this.border2=this.contrast,this.cScale0=this.cScale0||"#555",this.cScale1=this.cScale1||"#F4F4F4",this.cScale2=this.cScale2||"#555",this.cScale3=this.cScale3||"#BBB",this.cScale4=this.cScale4||"#777",this.cScale5=this.cScale5||"#999",this.cScale6=this.cScale6||"#DDD",this.cScale7=this.cScale7||"#FFF",this.cScale8=this.cScale8||"#DDD",this.cScale9=this.cScale9||"#BBB",this.cScale10=this.cScale10||"#999",this.cScale11=this.cScale11||"#777";for(let t=0;t<this.THEME_COLOR_LIMIT;t++)this["cScaleInv"+t]=this["cScaleInv"+t]||n(this["cScale"+t]);for(let t=0;t<this.THEME_COLOR_LIMIT;t++)this.darkMode?this["cScalePeer"+t]=this["cScalePeer"+t]||xl(this["cScale"+t],10):this["cScalePeer"+t]=this["cScalePeer"+t]||vl(this["cScale"+t],10);this.scaleLabelColor=this.scaleLabelColor||(this.darkMode?"black":this.labelTextColor),this.cScaleLabel0=this.cScaleLabel0||this.cScale1,this.cScaleLabel2=this.cScaleLabel2||this.cScale1;for(let t=0;t<this.THEME_COLOR_LIMIT;t++)this["cScaleLabel"+t]=this["cScaleLabel"+t]||this.scaleLabelColor;this.nodeBkg=this.mainBkg,this.nodeBorder=this.border1,this.clusterBkg=this.secondBkg,this.clusterBorder=this.border2,this.defaultLinkColor=this.lineColor,this.titleColor=this.text,this.actorBorder=xl(this.border1,23),this.actorBkg=this.mainBkg,this.actorTextColor=this.text,this.actorLineColor=this.lineColor,this.signalColor=this.text,this.signalTextColor=this.text,this.labelBoxBkgColor=this.actorBkg,this.labelBoxBorderColor=this.actorBorder,this.labelTextColor=this.text,this.loopTextColor=this.text,this.noteBorderColor="#999",this.noteBkgColor="#666",this.noteTextColor="#fff",this.sectionBkgColor=xl(this.contrast,30),this.sectionBkgColor2=xl(this.contrast,30),this.taskBorderColor=vl(this.contrast,10),this.taskBkgColor=this.contrast,this.taskTextColor=this.taskTextLightColor,this.taskTextDarkColor=this.text,this.taskTextOutsideColor=this.taskTextDarkColor,this.activeTaskBorderColor=this.taskBorderColor,this.activeTaskBkgColor=this.mainBkg,this.gridColor=xl(this.border1,30),this.doneTaskBkgColor=this.done,this.doneTaskBorderColor=this.lineColor,this.critBkgColor=this.critical,this.critBorderColor=vl(this.critBkgColor,10),this.todayLineColor=this.critBkgColor,this.transitionColor=this.transitionColor||"#000",this.transitionLabelColor=this.transitionLabelColor||this.textColor,this.stateLabelColor=this.stateLabelColor||this.stateBkg||this.primaryTextColor,this.stateBkg=this.stateBkg||this.mainBkg,this.labelBackgroundColor=this.labelBackgroundColor||this.stateBkg,this.compositeBackground=this.compositeBackground||this.background||this.tertiaryColor,this.altBackground=this.altBackground||"#f4f4f4",this.compositeTitleBackground=this.compositeTitleBackground||this.mainBkg,this.stateBorder=this.stateBorder||"#000",this.innerEndBackground=this.primaryBorderColor,this.specialStateColor="#222",this.errorBkgColor=this.errorBkgColor||this.tertiaryColor,this.errorTextColor=this.errorTextColor||this.tertiaryTextColor,this.classText=this.primaryTextColor,this.fillType0=this.primaryColor,this.fillType1=this.secondaryColor,this.fillType2=i(this.primaryColor,{h:64}),this.fillType3=i(this.secondaryColor,{h:64}),this.fillType4=i(this.primaryColor,{h:-64}),this.fillType5=i(this.secondaryColor,{h:-64}),this.fillType6=i(this.primaryColor,{h:128}),this.fillType7=i(this.secondaryColor,{h:128});for(let t=0;t<this.THEME_COLOR_LIMIT;t++)this["pie"+t]=this["cScale"+t];this.pie12=this.pie0,this.pieTitleTextSize=this.pieTitleTextSize||"25px",this.pieTitleTextColor=this.pieTitleTextColor||this.taskTextDarkColor,this.pieSectionTextSize=this.pieSectionTextSize||"17px",this.pieSectionTextColor=this.pieSectionTextColor||this.textColor,this.pieLegendTextSize=this.pieLegendTextSize||"17px",this.pieLegendTextColor=this.pieLegendTextColor||this.taskTextDarkColor,this.pieStrokeColor=this.pieStrokeColor||"black",this.pieStrokeWidth=this.pieStrokeWidth||"2px",this.pieOpacity=this.pieOpacity||"0.7",this.requirementBackground=this.requirementBackground||this.primaryColor,this.requirementBorderColor=this.requirementBorderColor||this.primaryBorderColor,this.requirementBorderSize=this.requirementBorderSize||this.primaryBorderColor,this.requirementTextColor=this.requirementTextColor||this.primaryTextColor,this.relationColor=this.relationColor||this.lineColor,this.relationLabelBackground=this.relationLabelBackground||this.edgeLabelBackground,this.relationLabelColor=this.relationLabelColor||this.actorTextColor,this.git0=vl(this.pie1,25)||this.primaryColor,this.git1=this.pie2||this.secondaryColor,this.git2=this.pie3||this.tertiaryColor,this.git3=this.pie4||i(this.primaryColor,{h:-30}),this.git4=this.pie5||i(this.primaryColor,{h:-60}),this.git5=this.pie6||i(this.primaryColor,{h:-90}),this.git6=this.pie7||i(this.primaryColor,{h:60}),this.git7=this.pie8||i(this.primaryColor,{h:120}),this.gitInv0=this.gitInv0||n(this.git0),this.gitInv1=this.gitInv1||n(this.git1),this.gitInv2=this.gitInv2||n(this.git2),this.gitInv3=this.gitInv3||n(this.git3),this.gitInv4=this.gitInv4||n(this.git4),this.gitInv5=this.gitInv5||n(this.git5),this.gitInv6=this.gitInv6||n(this.git6),this.gitInv7=this.gitInv7||n(this.git7),this.branchLabelColor=this.branchLabelColor||this.labelTextColor,this.gitBranchLabel0=this.branchLabelColor,this.gitBranchLabel1="white",this.gitBranchLabel2=this.branchLabelColor,this.gitBranchLabel3="white",this.gitBranchLabel4=this.branchLabelColor,this.gitBranchLabel5=this.branchLabelColor,this.gitBranchLabel6=this.branchLabelColor,this.gitBranchLabel7=this.branchLabelColor,this.tagLabelColor=this.tagLabelColor||this.primaryTextColor,this.tagLabelBackground=this.tagLabelBackground||this.primaryColor,this.tagLabelBorder=this.tagBorder||this.primaryBorderColor,this.tagLabelFontSize=this.tagLabelFontSize||"10px",this.commitLabelColor=this.commitLabelColor||this.secondaryTextColor,this.commitLabelBackground=this.commitLabelBackground||this.secondaryColor,this.commitLabelFontSize=this.commitLabelFontSize||"10px",this.attributeBackgroundColorOdd=this.attributeBackgroundColorOdd||wl,this.attributeBackgroundColorEven=this.attributeBackgroundColorEven||Tl}calculate(e){var t;"object"!=typeof e?this.updateColors():((t=Object.keys(e)).forEach(t=>{this[t]=e[t]}),this.updateColors(),t.forEach(t=>{this[t]=e[t]}))}}const Ll={base:{getThemeVariables:t=>{var e=new Cl;return e.calculate(t),e}},dark:{getThemeVariables:t=>{var e=new El;return e.calculate(t),e}},default:{getThemeVariables:t=>{var e=new Sl;return e.calculate(t),e}},forest:{getThemeVariables:t=>{var e=new Al;return e.calculate(t),e}},neutral:{getThemeVariables:t=>{var e=new Dl;return e.calculate(t),e}}},Ml={theme:"default",themeVariables:Ll.default.getThemeVariables(),themeCSS:void 0,maxTextSize:5e4,darkMode:!1,fontFamily:'"trebuchet ms", verdana, arial, sans-serif;',logLevel:5,securityLevel:"strict",startOnLoad:!0,arrowMarkerAbsolute:!1,secure:["secure","securityLevel","startOnLoad","maxTextSize"],deterministicIds:!1,deterministicIDSeed:void 0,flowchart:{titleTopMargin:25,diagramPadding:8,htmlLabels:!0,nodeSpacing:50,rankSpacing:50,curve:"basis",padding:15,useMaxWidth:!0,defaultRenderer:"dagre-wrapper"},sequence:{hideUnusedParticipants:!1,activationWidth:10,diagramMarginX:50,diagramMarginY:10,actorMargin:50,width:150,height:65,boxMargin:10,boxTextMargin:5,noteMargin:10,messageMargin:35,messageAlign:"center",mirrorActors:!0,forceMenus:!1,bottomMarginAdj:1,useMaxWidth:!0,rightAngles:!1,showSequenceNumbers:!1,actorFontSize:14,actorFontFamily:'"Open Sans", sans-serif',actorFontWeight:400,noteFontSize:14,noteFontFamily:'"trebuchet ms", verdana, arial, sans-serif',noteFontWeight:400,noteAlign:"center",messageFontSize:16,messageFontFamily:'"trebuchet ms", verdana, arial, sans-serif',messageFontWeight:400,wrap:!1,wrapPadding:10,labelBoxWidth:50,labelBoxHeight:20,messageFont:function(){return{fontFamily:this.messageFontFamily,fontSize:this.messageFontSize,fontWeight:this.messageFontWeight}},noteFont:function(){return{fontFamily:this.noteFontFamily,fontSize:this.noteFontSize,fontWeight:this.noteFontWeight}},actorFont:function(){return{fontFamily:this.actorFontFamily,fontSize:this.actorFontSize,fontWeight:this.actorFontWeight}}},gantt:{titleTopMargin:25,barHeight:20,barGap:4,topPadding:50,rightPadding:75,leftPadding:75,gridLineStartPadding:35,fontSize:11,sectionFontSize:11,numberSectionStyles:4,axisFormat:"%Y-%m-%d",tickInterval:void 0,useMaxWidth:!0,topAxis:!1,useWidth:void 0},journey:{diagramMarginX:50,diagramMarginY:10,leftMargin:150,width:150,height:50,boxMargin:10,boxTextMargin:5,noteMargin:10,messageMargin:35,messageAlign:"center",bottomMarginAdj:1,useMaxWidth:!0,rightAngles:!1,taskFontSize:14,taskFontFamily:'"Open Sans", sans-serif',taskMargin:50,activationWidth:10,textPlacement:"fo",actorColours:["#8FBC8F","#7CFC00","#00FFFF","#20B2AA","#B0E0E6","#FFFFE0"],sectionFills:["#191970","#8B008B","#4B0082","#2F4F4F","#800000","#8B4513","#00008B"],sectionColours:["#fff"]},class:{titleTopMargin:25,arrowMarkerAbsolute:!1,dividerMargin:10,padding:5,textHeight:10,useMaxWidth:!0,defaultRenderer:"dagre-wrapper"},state:{titleTopMargin:25,dividerMargin:10,sizeUnit:5,padding:8,textHeight:10,titleShift:-15,noteMargin:10,forkWidth:70,forkHeight:7,miniPadding:2,fontSizeFactor:5.02,fontSize:24,labelHeight:16,edgeLengthFactor:"20",compositTitleSize:35,radius:5,useMaxWidth:!0,defaultRenderer:"dagre-wrapper"},er:{titleTopMargin:25,diagramPadding:20,layoutDirection:"TB",minEntityWidth:100,minEntityHeight:75,entityPadding:15,stroke:"gray",fill:"honeydew",fontSize:12,useMaxWidth:!0},pie:{useWidth:void 0,useMaxWidth:!0},requirement:{useWidth:void 0,useMaxWidth:!0,rect_fill:"#f9f9f9",text_color:"#333",rect_border_size:"0.5px",rect_border_color:"#bbb",rect_min_width:200,rect_min_height:200,fontSize:14,rect_padding:10,line_height:20},gitGraph:{titleTopMargin:25,diagramPadding:8,nodeLabel:{width:75,height:100,x:-25,y:0},mainBranchName:"main",mainBranchOrder:0,showCommitLabel:!0,showBranches:!0,rotateCommitLabel:!0},c4:{useWidth:void 0,diagramMarginX:50,diagramMarginY:10,c4ShapeMargin:50,c4ShapePadding:20,width:216,height:60,boxMargin:10,useMaxWidth:!0,c4ShapeInRow:4,nextLinePaddingX:0,c4BoundaryInRow:2,personFontSize:14,personFontFamily:'"Open Sans", sans-serif',personFontWeight:"normal",external_personFontSize:14,external_personFontFamily:'"Open Sans", sans-serif',external_personFontWeight:"normal",systemFontSize:14,systemFontFamily:'"Open Sans", sans-serif',systemFontWeight:"normal",external_systemFontSize:14,external_systemFontFamily:'"Open Sans", sans-serif',external_systemFontWeight:"normal",system_dbFontSize:14,system_dbFontFamily:'"Open Sans", sans-serif',system_dbFontWeight:"normal",external_system_dbFontSize:14,external_system_dbFontFamily:'"Open Sans", sans-serif',external_system_dbFontWeight:"normal",system_queueFontSize:14,system_queueFontFamily:'"Open Sans", sans-serif',system_queueFontWeight:"normal",external_system_queueFontSize:14,external_system_queueFontFamily:'"Open Sans", sans-serif',external_system_queueFontWeight:"normal",boundaryFontSize:14,boundaryFontFamily:'"Open Sans", sans-serif',boundaryFontWeight:"normal",messageFontSize:12,messageFontFamily:'"Open Sans", sans-serif',messageFontWeight:"normal",containerFontSize:14,containerFontFamily:'"Open Sans", sans-serif',containerFontWeight:"normal",external_containerFontSize:14,external_containerFontFamily:'"Open Sans", sans-serif',external_containerFontWeight:"normal",container_dbFontSize:14,container_dbFontFamily:'"Open Sans", sans-serif',container_dbFontWeight:"normal",external_container_dbFontSize:14,external_container_dbFontFamily:'"Open Sans", sans-serif',external_container_dbFontWeight:"normal",container_queueFontSize:14,container_queueFontFamily:'"Open Sans", sans-serif',container_queueFontWeight:"normal",external_container_queueFontSize:14,external_container_queueFontFamily:'"Open Sans", sans-serif',external_container_queueFontWeight:"normal",componentFontSize:14,componentFontFamily:'"Open Sans", sans-serif',componentFontWeight:"normal",external_componentFontSize:14,external_componentFontFamily:'"Open Sans", sans-serif',external_componentFontWeight:"normal",component_dbFontSize:14,component_dbFontFamily:'"Open Sans", sans-serif',component_dbFontWeight:"normal",external_component_dbFontSize:14,external_component_dbFontFamily:'"Open Sans", sans-serif',external_component_dbFontWeight:"normal",component_queueFontSize:14,component_queueFontFamily:'"Open Sans", sans-serif',component_queueFontWeight:"normal",external_component_queueFontSize:14,external_component_queueFontFamily:'"Open Sans", sans-serif',external_component_queueFontWeight:"normal",wrap:!0,wrapPadding:10,personFont:function(){return{fontFamily:this.personFontFamily,fontSize:this.personFontSize,fontWeight:this.personFontWeight}},external_personFont:function(){return{fontFamily:this.external_personFontFamily,fontSize:this.external_personFontSize,fontWeight:this.external_personFontWeight}},systemFont:function(){return{fontFamily:this.systemFontFamily,fontSize:this.systemFontSize,fontWeight:this.systemFontWeight}},external_systemFont:function(){return{fontFamily:this.external_systemFontFamily,fontSize:this.external_systemFontSize,fontWeight:this.external_systemFontWeight}},system_dbFont:function(){return{fontFamily:this.system_dbFontFamily,fontSize:this.system_dbFontSize,fontWeight:this.system_dbFontWeight}},external_system_dbFont:function(){return{fontFamily:this.external_system_dbFontFamily,fontSize:this.external_system_dbFontSize,fontWeight:this.external_system_dbFontWeight}},system_queueFont:function(){return{fontFamily:this.system_queueFontFamily,fontSize:this.system_queueFontSize,fontWeight:this.system_queueFontWeight}},external_system_queueFont:function(){return{fontFamily:this.external_system_queueFontFamily,fontSize:this.external_system_queueFontSize,fontWeight:this.external_system_queueFontWeight}},containerFont:function(){return{fontFamily:this.containerFontFamily,fontSize:this.containerFontSize,fontWeight:this.containerFontWeight}},external_containerFont:function(){return{fontFamily:this.external_containerFontFamily,fontSize:this.external_containerFontSize,fontWeight:this.external_containerFontWeight}},container_dbFont:function(){return{fontFamily:this.container_dbFontFamily,fontSize:this.container_dbFontSize,fontWeight:this.container_dbFontWeight}},external_container_dbFont:function(){return{fontFamily:this.external_container_dbFontFamily,fontSize:this.external_container_dbFontSize,fontWeight:this.external_container_dbFontWeight}},container_queueFont:function(){return{fontFamily:this.container_queueFontFamily,fontSize:this.container_queueFontSize,fontWeight:this.container_queueFontWeight}},external_container_queueFont:function(){return{fontFamily:this.external_container_queueFontFamily,fontSize:this.external_container_queueFontSize,fontWeight:this.external_container_queueFontWeight}},componentFont:function(){return{fontFamily:this.componentFontFamily,fontSize:this.componentFontSize,fontWeight:this.componentFontWeight}},external_componentFont:function(){return{fontFamily:this.external_componentFontFamily,fontSize:this.external_componentFontSize,fontWeight:this.external_componentFontWeight}},component_dbFont:function(){return{fontFamily:this.component_dbFontFamily,fontSize:this.component_dbFontSize,fontWeight:this.component_dbFontWeight}},external_component_dbFont:function(){return{fontFamily:this.external_component_dbFontFamily,fontSize:this.external_component_dbFontSize,fontWeight:this.external_component_dbFontWeight}},component_queueFont:function(){return{fontFamily:this.component_queueFontFamily,fontSize:this.component_queueFontSize,fontWeight:this.component_queueFontWeight}},external_component_queueFont:function(){return{fontFamily:this.external_component_queueFontFamily,fontSize:this.external_component_queueFontSize,fontWeight:this.external_component_queueFontWeight}},boundaryFont:function(){return{fontFamily:this.boundaryFontFamily,fontSize:this.boundaryFontSize,fontWeight:this.boundaryFontWeight}},messageFont:function(){return{fontFamily:this.messageFontFamily,fontSize:this.messageFontSize,fontWeight:this.messageFontWeight}},person_bg_color:"#08427B",person_border_color:"#073B6F",external_person_bg_color:"#686868",external_person_border_color:"#8A8A8A",system_bg_color:"#1168BD",system_border_color:"#3C7FC0",system_db_bg_color:"#1168BD",system_db_border_color:"#3C7FC0",system_queue_bg_color:"#1168BD",system_queue_border_color:"#3C7FC0",external_system_bg_color:"#999999",external_system_border_color:"#8A8A8A",external_system_db_bg_color:"#999999",external_system_db_border_color:"#8A8A8A",external_system_queue_bg_color:"#999999",external_system_queue_border_color:"#8A8A8A",container_bg_color:"#438DD5",container_border_color:"#3C7FC0",container_db_bg_color:"#438DD5",container_db_border_color:"#3C7FC0",container_queue_bg_color:"#438DD5",container_queue_border_color:"#3C7FC0",external_container_bg_color:"#B3B3B3",external_container_border_color:"#A6A6A6",external_container_db_bg_color:"#B3B3B3",external_container_db_border_color:"#A6A6A6",external_container_queue_bg_color:"#B3B3B3",external_container_queue_border_color:"#A6A6A6",component_bg_color:"#85BBF0",component_border_color:"#78A8D8",component_db_bg_color:"#85BBF0",component_db_border_color:"#78A8D8",component_queue_bg_color:"#85BBF0",component_queue_border_color:"#78A8D8",external_component_bg_color:"#CCCCCC",external_component_border_color:"#BFBFBF",external_component_db_bg_color:"#CCCCCC",external_component_db_border_color:"#BFBFBF",external_component_queue_bg_color:"#CCCCCC",external_component_queue_border_color:"#BFBFBF"},mindmap:{useMaxWidth:!0,padding:10,maxNodeWidth:200},fontSize:16},Nl=(Ml.class&&(Ml.class.arrowMarkerAbsolute=Ml.arrowMarkerAbsolute),Ml.gitGraph&&(Ml.gitGraph.arrowMarkerAbsolute=Ml.arrowMarkerAbsolute),(r,i="")=>Object.keys(r).reduce((t,e)=>Array.isArray(r[e])?t:"object"==typeof r[e]&&null!==r[e]?[...t,i+e,...Nl(r[e],"")]:[...t,i+e],[])),Ol=Nl(Ml,""),Bl=Ml;function Il(t){return"u"<typeof t||null===t}var Fl={isNothing:Il,isObject:function(t){return"object"==typeof t&&null!==t},toArray:function(t){return Array.isArray(t)?t:Il(t)?[]:[t]},repeat:function(t,e){for(var r="",i=0;i<e;i+=1)r+=t;return r},isNegativeZero:function(t){return 0===t&&Number.NEGATIVE_INFINITY===1/t},extend:function(t,e){var r,i,n,a;if(e)for(r=0,i=(a=Object.keys(e)).length;r<i;r+=1)t[n=a[r]]=e[n];return t}};function Rl(t,e){var r="",i=t.reason||"(unknown reason)";return t.mark?(t.mark.name&&(r+='in "'+t.mark.name+'" '),r+="("+(t.mark.line+1)+":"+(t.mark.column+1)+")",!e&&t.mark.snippet&&(r+=`

`+t.mark.snippet),i+" "+r):i}function Pl(t,e){Error.call(this),this.name="YAMLException",this.reason=t,this.mark=e,this.message=Rl(this,!1),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack||""}((Pl.prototype=Object.create(Error.prototype)).constructor=Pl).prototype.toString=function(t){return this.name+": "+Rl(this,t)};var $l=Pl;function Yl(t,e,r,i,n){var a="",s="",n=Math.floor(n/2)-1;return n<i-e&&(e=i-n+(a=" ... ").length),n<r-i&&(r=i+n-(s=" ...").length),{str:a+t.slice(e,r).replace(/\t/g,"→")+s,pos:i-e+a.length}}function jl(t,e){return Fl.repeat(" ",e-t.length)+t}var zl=function(t,e){if(e=Object.create(e||null),!t.buffer)return null;e.maxLength||(e.maxLength=79),"number"!=typeof e.indent&&(e.indent=1),"number"!=typeof e.linesBefore&&(e.linesBefore=3),"number"!=typeof e.linesAfter&&(e.linesAfter=2);for(var r,i=/\r?\n|\r|\0/g,n=[0],a=[],s=-1;r=i.exec(t.buffer);)a.push(r.index),n.push(r.index+r[0].length),t.position<=r.index&&s<0&&(s=n.length-2);s<0&&(s=n.length-1);for(var o,l="",c=Math.min(t.line+e.linesAfter,a.length).toString().length,h=e.maxLength-(e.indent+c+3),u=1;u<=e.linesBefore&&!(s-u<0);u++)o=Yl(t.buffer,n[s-u],a[s-u],t.position-(n[s]-n[s-u]),h),l=Fl.repeat(" ",e.indent)+jl((t.line-u+1).toString(),c)+" | "+o.str+`
`+l;for(o=Yl(t.buffer,n[s],a[s],t.position,h),l=(l+=Fl.repeat(" ",e.indent)+jl((t.line+1).toString(),c)+" | "+o.str+`
`)+(Fl.repeat("-",e.indent+c+3+o.pos)+`^
`),u=1;u<=e.linesAfter&&!(a.length<=s+u);u++)o=Yl(t.buffer,n[s+u],a[s+u],t.position-(n[s]-n[s+u]),h),l+=Fl.repeat(" ",e.indent)+jl((t.line+u+1).toString(),c)+" | "+o.str+`
`;return l.replace(/\n$/,"")},Ul=["kind","multi","resolve","construct","instanceOf","predicate","represent","representName","defaultStyle","styleAliases"],Wl=["scalar","sequence","mapping"];var Hl=function(e,t){if(t=t||{},Object.keys(t).forEach(function(t){if(-1===Ul.indexOf(t))throw new $l('Unknown option "'+t+'" is met in definition of "'+e+'" YAML type.')}),this.options=t,this.tag=e,this.kind=t.kind||null,this.resolve=t.resolve||function(){return!0},this.construct=t.construct||function(t){return t},this.instanceOf=t.instanceOf||null,this.predicate=t.predicate||null,this.represent=t.represent||null,this.representName=t.representName||null,this.defaultStyle=t.defaultStyle||null,this.multi=t.multi||!1,this.styleAliases=(r=t.styleAliases||null,i={},null!==r&&Object.keys(r).forEach(function(e){r[e].forEach(function(t){i[String(t)]=e})}),i),-1===Wl.indexOf(this.kind))throw new $l('Unknown kind "'+this.kind+'" is specified for "'+e+'" YAML type.');var r,i};function ql(t,e){var n=[];return t[e].forEach(function(r){var i=n.length;n.forEach(function(t,e){t.tag===r.tag&&t.kind===r.kind&&t.multi===r.multi&&(i=e)}),n[i]=r}),n}function Vl(t){return this.extend(t)}Vl.prototype.extend=function(t){var e=[],r=[];if(t instanceof Hl)r.push(t);else if(Array.isArray(t))r=r.concat(t);else{if(!t||!Array.isArray(t.implicit)&&!Array.isArray(t.explicit))throw new $l("Schema.extend argument should be a Type, [ Type ], or a schema definition ({ implicit: [...], explicit: [...] })");t.implicit&&(e=e.concat(t.implicit)),t.explicit&&(r=r.concat(t.explicit))}e.forEach(function(t){if(!(t instanceof Hl))throw new $l("Specified list of YAML types (or a single Type object) contains a non-Type object.");if(t.loadKind&&"scalar"!==t.loadKind)throw new $l("There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.");if(t.multi)throw new $l("There is a multi type in the implicit list of a schema. Multi tags can only be listed as explicit.")}),r.forEach(function(t){if(!(t instanceof Hl))throw new $l("Specified list of YAML types (or a single Type object) contains a non-Type object.")});t=Object.create(Vl.prototype);return t.implicit=(this.implicit||[]).concat(e),t.explicit=(this.explicit||[]).concat(r),t.compiledImplicit=ql(t,"implicit"),t.compiledExplicit=ql(t,"explicit"),t.compiledTypeMap=function(){var t,e,r={scalar:{},sequence:{},mapping:{},fallback:{},multi:{scalar:[],sequence:[],mapping:[],fallback:[]}};function i(t){t.multi?(r.multi[t.kind].push(t),r.multi.fallback.push(t)):r[t.kind][t.tag]=r.fallback[t.tag]=t}for(t=0,e=arguments.length;t<e;t+=1)arguments[t].forEach(i);return r}(t.compiledImplicit,t.compiledExplicit),t};fe=new Vl({explicit:[new Hl("tag:yaml.org,2002:str",{kind:"scalar",construct:function(t){return null!==t?t:""}}),new Hl("tag:yaml.org,2002:seq",{kind:"sequence",construct:function(t){return null!==t?t:[]}}),new Hl("tag:yaml.org,2002:map",{kind:"mapping",construct:function(t){return null!==t?t:{}}})]});e=new Hl("tag:yaml.org,2002:null",{kind:"scalar",resolve:function(t){var e;return null===t||1===(e=t.length)&&"~"===t||4===e&&("null"===t||"Null"===t||"NULL"===t)},construct:function(){return null},predicate:function(t){return null===t},represent:{canonical:function(){return"~"},lowercase:function(){return"null"},uppercase:function(){return"NULL"},camelcase:function(){return"Null"},empty:function(){return""}},defaultStyle:"lowercase"});r=new Hl("tag:yaml.org,2002:bool",{kind:"scalar",resolve:function(t){var e;return null!==t&&(4===(e=t.length)&&("true"===t||"True"===t||"TRUE"===t)||5===e&&("false"===t||"False"===t||"FALSE"===t))},construct:function(t){return"true"===t||"True"===t||"TRUE"===t},predicate:function(t){return"[object Boolean]"===Object.prototype.toString.call(t)},represent:{lowercase:function(t){return t?"true":"false"},uppercase:function(t){return t?"TRUE":"FALSE"},camelcase:function(t){return t?"True":"False"}},defaultStyle:"lowercase"});var Sn=new Hl("tag:yaml.org,2002:int",{kind:"scalar",resolve:function(t){if(null===t)return!1;var e,r,i,n,a=t.length,s=0,o=!1;if(!a)return!1;if("0"===(e="-"!==(e=t[s])&&"+"!==e?e:t[++s])){if(s+1===a)return!0;if("b"===(e=t[++s])){for(s++;s<a;s++)if("_"!==(e=t[s])){if("0"!==e&&"1"!==e)return!1;o=!0}return o&&"_"!==e}if("x"===e){for(s++;s<a;s++)if("_"!==(e=t[s])){if(!(48<=(i=t.charCodeAt(s))&&i<=57||65<=i&&i<=70||97<=i&&i<=102))return!1;o=!0}return o&&"_"!==e}if("o"===e){for(s++;s<a;s++)if("_"!==(e=t[s])){if(!(48<=(r=t.charCodeAt(s))&&r<=55))return!1;o=!0}return o&&"_"!==e}}if("_"===e)return!1;for(;s<a;s++)if("_"!==(e=t[s])){if(!(48<=(n=t.charCodeAt(s))&&n<=57))return!1;o=!0}return!(!o||"_"===e)},construct:function(t){var e,r=1;if("-"!==(e=(t=-1!==t.indexOf("_")?t.replace(/_/g,""):t)[0])&&"+"!==e||("-"===e&&(r=-1),e=(t=t.slice(1))[0]),"0"===t)return 0;if("0"===e){if("b"===t[1])return r*parseInt(t.slice(2),2);if("x"===t[1])return r*parseInt(t.slice(2),16);if("o"===t[1])return r*parseInt(t.slice(2),8)}return r*parseInt(t,10)},predicate:function(t){return"[object Number]"===Object.prototype.toString.call(t)&&t%1==0&&!Fl.isNegativeZero(t)},represent:{binary:function(t){return 0<=t?"0b"+t.toString(2):"-0b"+t.toString(2).slice(1)},octal:function(t){return 0<=t?"0o"+t.toString(8):"-0o"+t.toString(8).slice(1)},decimal:function(t){return t.toString(10)},hexadecimal:function(t){return 0<=t?"0x"+t.toString(16).toUpperCase():"-0x"+t.toString(16).toUpperCase().slice(1)}},defaultStyle:"decimal",styleAliases:{binary:[2,"bin"],octal:[8,"oct"],decimal:[10,"dec"],hexadecimal:[16,"hex"]}}),Gl=new RegExp("^(?:[-+]?(?:[0-9][0-9_]*)(?:\\.[0-9_]*)?(?:[eE][-+]?[0-9]+)?|\\.[0-9_]+(?:[eE][-+]?[0-9]+)?|[-+]?\\.(?:inf|Inf|INF)|\\.(?:nan|NaN|NAN))$");var Xl=/^[-+]?[0-9]+e/;var En=new Hl("tag:yaml.org,2002:float",{kind:"scalar",resolve:function(t){return!(null===t||!Gl.test(t)||"_"===t[t.length-1])},construct:function(t){var e="-"===(t=t.replace(/_/g,"").toLowerCase())[0]?-1:1;return".inf"===(t=0<="+-".indexOf(t[0])?t.slice(1):t)?1==e?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:".nan"===t?NaN:e*parseFloat(t,10)},predicate:function(t){return"[object Number]"===Object.prototype.toString.call(t)&&(t%1!=0||Fl.isNegativeZero(t))},represent:function(t,e){if(isNaN(t))switch(e){case"lowercase":return".nan";case"uppercase":return".NAN";case"camelcase":return".NaN"}else if(Number.POSITIVE_INFINITY===t)switch(e){case"lowercase":return".inf";case"uppercase":return".INF";case"camelcase":return".Inf"}else if(Number.NEGATIVE_INFINITY===t)switch(e){case"lowercase":return"-.inf";case"uppercase":return"-.INF";case"camelcase":return"-.Inf"}else if(Fl.isNegativeZero(t))return"-0.0";return e=t.toString(10),Xl.test(e)?e.replace("e",".e"):e},defaultStyle:"lowercase"}),t=fe.extend({implicit:[e,r,Sn,En]}),Zl=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9])-([0-9][0-9])$"),Ql=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:[Tt]|[ \\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\\.([0-9]*))?(?:[ \\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?$");e=new Hl("tag:yaml.org,2002:timestamp",{kind:"scalar",resolve:function(t){return null!==t&&(null!==Zl.exec(t)||null!==Ql.exec(t))},construct:function(t){var e,r,i,n,a,s=0,o=null,l=Zl.exec(t);if(null===(l=null===l?Ql.exec(t):l))throw new Error("Date resolve error");if(t=+l[1],e=+l[2]-1,r=+l[3],!l[4])return new Date(Date.UTC(t,e,r));if(i=+l[4],n=+l[5],a=+l[6],l[7]){for(s=l[7].slice(0,3);s.length<3;)s+="0";s=+s}return l[9]&&(o=6e4*(60*+l[10]+ +(l[11]||0)),"-"===l[9])&&(o=-o),l=new Date(Date.UTC(t,e,r,i,n,a,s)),o&&l.setTime(l.getTime()-o),l},instanceOf:Date,represent:function(t){return t.toISOString()}});var r=new Hl("tag:yaml.org,2002:merge",{kind:"scalar",resolve:function(t){return"<<"===t||null===t}}),Kl=`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=
\r`;var Sn=new Hl("tag:yaml.org,2002:binary",{kind:"scalar",resolve:function(t){if(null===t)return!1;for(var e,r=0,i=t.length,n=Kl,a=0;a<i;a++)if(!(64<(e=n.indexOf(t.charAt(a))))){if(e<0)return!1;r+=6}return r%8==0},construct:function(t){for(var e=t.replace(/[\r\n=]/g,""),r=e.length,i=Kl,n=0,a=[],s=0;s<r;s++)s%4==0&&s&&(a.push(n>>16&255),a.push(n>>8&255),a.push(255&n)),n=n<<6|i.indexOf(e.charAt(s));return 0==(t=r%4*6)?(a.push(n>>16&255),a.push(n>>8&255),a.push(255&n)):18==t?(a.push(n>>10&255),a.push(n>>2&255)):12==t&&a.push(n>>4&255),new Uint8Array(a)},predicate:function(t){return"[object Uint8Array]"===Object.prototype.toString.call(t)},represent:function(t){for(var e,r="",i=0,n=t.length,a=Kl,s=0;s<n;s++)s%3==0&&s&&(r=(r=(r=(r+=a[i>>18&63])+a[i>>12&63])+a[i>>6&63])+a[63&i]),i=(i<<8)+t[s];return 0==(e=n%3)?r=(r=(r=(r+=a[i>>18&63])+a[i>>12&63])+a[i>>6&63])+a[63&i]:2==e?r=(r=(r=(r+=a[i>>10&63])+a[i>>4&63])+a[i<<2&63])+a[64]:1==e&&(r=(r=(r=(r+=a[i>>2&63])+a[i<<4&63])+a[64])+a[64]),r}}),Jl=Object.prototype.hasOwnProperty,tc=Object.prototype.toString;var En=new Hl("tag:yaml.org,2002:omap",{kind:"sequence",resolve:function(t){if(null!==t)for(var e,r,i,n=[],a=t,s=0,o=a.length;s<o;s+=1){if(e=a[s],i=!1,"[object Object]"!==tc.call(e))return!1;for(r in e)if(Jl.call(e,r)){if(i)return!1;i=!0}if(!i)return!1;if(-1!==n.indexOf(r))return!1;n.push(r)}return!0},construct:function(t){return null!==t?t:[]}}),ec=Object.prototype.toString;var a=new Hl("tag:yaml.org,2002:pairs",{kind:"sequence",resolve:function(t){if(null!==t)for(var e,r,i=t,n=new Array(i.length),a=0,s=i.length;a<s;a+=1){if(e=i[a],"[object Object]"!==ec.call(e)||1!==(r=Object.keys(e)).length)return!1;n[a]=[r[0],e[r[0]]]}return!0},construct:function(t){if(null===t)return[];for(var e,r,i=t,n=new Array(i.length),a=0,s=i.length;a<s;a+=1)e=i[a],r=Object.keys(e),n[a]=[r[0],e[r[0]]];return n}}),rc=Object.prototype.hasOwnProperty;var ic=new Hl("tag:yaml.org,2002:set",{kind:"mapping",resolve:function(t){if(null!==t){var e,r=t;for(e in r)if(rc.call(r,e)&&null!==r[e])return!1}return!0},construct:function(t){return null!==t?t:{}}}),nc=t.extend({implicit:[e,r],explicit:[Sn,En,a,ic]}),ac=Object.prototype.hasOwnProperty,sc=1,oc=2,lc=3,cc=4,hc=1,uc=2,dc=3,pc=/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F-\x84\x86-\x9F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,fc=/[\x85\u2028\u2029]/,gc=/[,\[\]\{\}]/,yc=/^(?:!|!!|![a-z\-]+!)$/i,mc=/^(?:!|[^,\[\]\{\}])(?:%[0-9a-f]{2}|[0-9a-z\-#;\/\?:@&=\+\$,_\.!~\*'\(\)\[\]])*$/i;function bc(t){return Object.prototype.toString.call(t)}function _c(t){return 10===t||13===t}function xc(t){return 9===t||32===t}function vc(t){return 9===t||32===t||10===t||13===t}function kc(t){return 44===t||91===t||93===t||123===t||125===t}function wc(t){return 48===t?"\0":97===t?"":98===t?"\b":116===t||9===t?"\t":110===t?`
`:118===t?"\v":102===t?"\f":114===t?"\r":101===t?"":32===t?" ":34===t?'"':47===t?"/":92===t?"\\":78===t?"":95===t?" ":76===t?"\u2028":80===t?"\u2029":""}for(var Tc=new Array(256),Cc=new Array(256),Ec=0;Ec<256;Ec++)Tc[Ec]=wc(Ec)?1:0,Cc[Ec]=wc(Ec);function Sc(t,e){this.input=t,this.filename=e.filename||null,this.schema=e.schema||nc,this.onWarning=e.onWarning||null,this.legacy=e.legacy||!1,this.json=e.json||!1,this.listener=e.listener||null,this.implicitTypes=this.schema.compiledImplicit,this.typeMap=this.schema.compiledTypeMap,this.length=t.length,this.position=0,this.line=0,this.lineStart=0,this.lineIndent=0,this.firstTabInLine=-1,this.documents=[]}function Ac(t,e){t={name:t.filename,buffer:t.input.slice(0,-1),position:t.position,line:t.line,column:t.position-t.lineStart};return t.snippet=zl(t),new $l(e,t)}function Dc(t,e){throw Ac(t,e)}function Lc(t,e){t.onWarning&&t.onWarning.call(null,Ac(t,e))}var Mc={YAML:function(t,e,r){var i,n;null!==t.version&&Dc(t,"duplication of %YAML directive"),1!==r.length&&Dc(t,"YAML directive accepts exactly one argument"),null===(n=/^([0-9]+)\.([0-9]+)$/.exec(r[0]))&&Dc(t,"ill-formed argument of the YAML directive"),i=parseInt(n[1],10),n=parseInt(n[2],10),1!==i&&Dc(t,"unacceptable YAML version of the document"),t.version=r[0],t.checkLineBreaks=n<2,1!==n&&2!==n&&Lc(t,"unsupported YAML version of the document")},TAG:function(t,e,r){var i;2!==r.length&&Dc(t,"TAG directive accepts exactly two arguments"),i=r[0],r=r[1],yc.test(i)||Dc(t,"ill-formed tag handle (first argument) of the TAG directive"),ac.call(t.tagMap,i)&&Dc(t,'there is a previously declared suffix for "'+i+'" tag handle'),mc.test(r)||Dc(t,"ill-formed tag prefix (second argument) of the TAG directive");try{r=decodeURIComponent(r)}catch{Dc(t,"tag prefix is malformed: "+r)}t.tagMap[i]=r}};function Nc(t,e,r,i){var n,a,s,o;if(e<r){if(o=t.input.slice(e,r),i)for(n=0,a=o.length;n<a;n+=1)9===(s=o.charCodeAt(n))||32<=s&&s<=1114111||Dc(t,"expected valid JSON character");else pc.test(o)&&Dc(t,"the stream contains non-printable characters");t.result+=o}}function Oc(t,e,r,i){var n,a,s,o;for(Fl.isObject(r)||Dc(t,"cannot merge mappings; the provided source object is unacceptable"),s=0,o=(n=Object.keys(r)).length;s<o;s+=1)a=n[s],ac.call(e,a)||(e[a]=r[a],i[a]=!0)}function Bc(t,e,r,i,n,a,s,o,l){var c,h;if(Array.isArray(n))for(c=0,h=(n=Array.prototype.slice.call(n)).length;c<h;c+=1)Array.isArray(n[c])&&Dc(t,"nested arrays are not supported inside keys"),"object"==typeof n&&"[object Object]"===bc(n[c])&&(n[c]="[object Object]");if("object"==typeof n&&"[object Object]"===bc(n)&&(n="[object Object]"),n=String(n),null===e&&(e={}),"tag:yaml.org,2002:merge"===i)if(Array.isArray(a))for(c=0,h=a.length;c<h;c+=1)Oc(t,e,a[c],r);else Oc(t,e,a,r);else t.json||ac.call(r,n)||!ac.call(e,n)||(t.line=s||t.line,t.lineStart=o||t.lineStart,t.position=l||t.position,Dc(t,"duplicated mapping key")),"__proto__"===n?Object.defineProperty(e,n,{configurable:!0,enumerable:!0,writable:!0,value:a}):e[n]=a,delete r[n];return e}function Ic(t){var e=t.input.charCodeAt(t.position);10===e?t.position++:13===e?(t.position++,10===t.input.charCodeAt(t.position)&&t.position++):Dc(t,"a line break is expected"),t.line+=1,t.lineStart=t.position,t.firstTabInLine=-1}function Fc(t,e,r){for(var i=0,n=t.input.charCodeAt(t.position);0!==n;){for(;xc(n);)9===n&&-1===t.firstTabInLine&&(t.firstTabInLine=t.position),n=t.input.charCodeAt(++t.position);if(e&&35===n)for(;10!==(n=t.input.charCodeAt(++t.position))&&13!==n&&0!==n;);if(!_c(n))break;for(Ic(t),n=t.input.charCodeAt(t.position),i++,t.lineIndent=0;32===n;)t.lineIndent++,n=t.input.charCodeAt(++t.position)}return-1!==r&&0!==i&&t.lineIndent<r&&Lc(t,"deficient indentation"),i}function Rc(t){var e=t.position,r=t.input.charCodeAt(e);return(45===r||46===r)&&r===t.input.charCodeAt(e+1)&&r===t.input.charCodeAt(e+2)&&(0===(r=t.input.charCodeAt(e+=3))||vc(r))}function Pc(t,e){1===e?t.result+=" ":1<e&&(t.result+=Fl.repeat(`
`,e-1))}function $c(t,e){var r,i,n,a,s,o,l,c=t.input.charCodeAt(t.position);if(34===c){for(t.kind="scalar",t.result="",t.position++,r=i=t.position;0!==(c=t.input.charCodeAt(t.position));){if(34===c)return Nc(t,r,t.position,!0),t.position++,1;if(92===c){if(Nc(t,r,t.position,!0),_c(c=t.input.charCodeAt(++t.position)))Fc(t,!1,e);else if(c<256&&Tc[c])t.result+=Cc[c],t.position++;else if(0<(s=120===(l=c)?2:117===l?4:85===l?8:0)){for(n=s,a=0;0<n;n--)c=t.input.charCodeAt(++t.position),0<=(s=48<=(o=c)&&o<=57?o-48:97<=(o=32|o)&&o<=102?o-97+10:-1)?a=(a<<4)+s:Dc(t,"expected hexadecimal character");t.result+=(l=a)<=65535?String.fromCharCode(l):String.fromCharCode(55296+(l-65536>>10),56320+(l-65536&1023)),t.position++}else Dc(t,"unknown escape sequence");r=i=t.position}else _c(c)?(Nc(t,r,i,!0),Pc(t,Fc(t,!1,e)),r=i=t.position):t.position===t.lineStart&&Rc(t)?Dc(t,"unexpected end of the document within a double quoted scalar"):(t.position++,i=t.position)}Dc(t,"unexpected end of the stream within a double quoted scalar")}}function Yc(t,e){var r,i,n=t.tag,a=t.anchor,s=[],o=!1;if(-1!==t.firstTabInLine)return!1;for(null!==t.anchor&&(t.anchorMap[t.anchor]=s),i=t.input.charCodeAt(t.position);0!==i&&(-1!==t.firstTabInLine&&(t.position=t.firstTabInLine,Dc(t,"tab characters must not be used in indentation")),45===i)&&vc(t.input.charCodeAt(t.position+1));)if(o=!0,t.position++,Fc(t,!0,-1)&&t.lineIndent<=e)s.push(null),i=t.input.charCodeAt(t.position);else if(r=t.line,jc(t,e,lc,!1,!0),s.push(t.result),Fc(t,!0,-1),i=t.input.charCodeAt(t.position),(t.line===r||t.lineIndent>e)&&0!==i)Dc(t,"bad indentation of a sequence entry");else if(t.lineIndent<e)break;return!!o&&(t.tag=n,t.anchor=a,t.kind="sequence",t.result=s,!0)}function jc(t,e,r,i,n){var a,s,o,l,c,h,u,d=1,p=!1,f=!1;if(null!==t.listener&&t.listener("open",t),t.tag=null,t.anchor=null,t.kind=null,t.result=null,a=s=o=cc===r||lc===r,i&&Fc(t,!0,-1)&&(p=!0,t.lineIndent>e?d=1:t.lineIndent===e?d=0:t.lineIndent<e&&(d=-1)),1===d)for(;function(t){var e,r,i,n=!1,a=!1,s=t.input.charCodeAt(t.position);if(33===s){if(null!==t.tag&&Dc(t,"duplication of a tag property"),60===(s=t.input.charCodeAt(++t.position))?(n=!0,s=t.input.charCodeAt(++t.position)):33===s?(a=!0,r="!!",s=t.input.charCodeAt(++t.position)):r="!",e=t.position,n){for(;0!==(s=t.input.charCodeAt(++t.position))&&62!==s;);t.position<t.length?(i=t.input.slice(e,t.position),s=t.input.charCodeAt(++t.position)):Dc(t,"unexpected end of the stream within a verbatim tag")}else{for(;0!==s&&!vc(s);)33===s&&(a?Dc(t,"tag suffix cannot contain exclamation marks"):(r=t.input.slice(e-1,t.position+1),yc.test(r)||Dc(t,"named tag handle cannot contain such characters"),a=!0,e=t.position+1)),s=t.input.charCodeAt(++t.position);i=t.input.slice(e,t.position),gc.test(i)&&Dc(t,"tag suffix cannot contain flow indicator characters")}i&&!mc.test(i)&&Dc(t,"tag name cannot contain such characters: "+i);try{i=decodeURIComponent(i)}catch{Dc(t,"tag name is malformed: "+i)}return n?t.tag=i:ac.call(t.tagMap,r)?t.tag=t.tagMap[r]+i:"!"===r?t.tag="!"+i:"!!"===r?t.tag="tag:yaml.org,2002:"+i:Dc(t,'undeclared tag handle "'+r+'"'),1}}(t)||function(t){var e,r=t.input.charCodeAt(t.position);if(38===r){for(null!==t.anchor&&Dc(t,"duplication of an anchor property"),r=t.input.charCodeAt(++t.position),e=t.position;0!==r&&!vc(r)&&!kc(r);)r=t.input.charCodeAt(++t.position);return t.position===e&&Dc(t,"name of an anchor node must contain at least one character"),t.anchor=t.input.slice(e,t.position),1}}(t);)Fc(t,!0,-1)?(p=!0,o=a,t.lineIndent>e?d=1:t.lineIndent===e?d=0:t.lineIndent<e&&(d=-1)):o=!1;if(o=o&&(p||n),1!==d&&cc!==r||(i=sc===r||oc===r?e:e+1,n=t.position-t.lineStart,1===d?o&&(Yc(t,n)||function(t,e,r){var i,n,a,s,o,l,c,h=t.tag,u=t.anchor,d={},p=Object.create(null),f=null,g=null,y=null,m=!1,b=!1;if(-1===t.firstTabInLine){for(null!==t.anchor&&(t.anchorMap[t.anchor]=d),c=t.input.charCodeAt(t.position);0!==c;){if(m||-1===t.firstTabInLine||(t.position=t.firstTabInLine,Dc(t,"tab characters must not be used in indentation")),i=t.input.charCodeAt(t.position+1),a=t.line,63!==c&&58!==c||!vc(i)){if(s=t.line,o=t.lineStart,l=t.position,!jc(t,r,oc,!1,!0))break;if(t.line===a){for(c=t.input.charCodeAt(t.position);xc(c);)c=t.input.charCodeAt(++t.position);if(58===c)vc(c=t.input.charCodeAt(++t.position))||Dc(t,"a whitespace character is expected after the key-value separator within a block mapping"),m&&(Bc(t,d,p,f,g,null,s,o,l),f=g=y=null),n=m=!(b=!0),f=t.tag,g=t.result;else{if(!b)return t.tag=h,t.anchor=u,1;Dc(t,"can not read an implicit mapping pair; a colon is missed")}}else{if(!b)return t.tag=h,t.anchor=u,1;Dc(t,"can not read a block mapping entry; a multiline key may not be an implicit key")}}else 63===c?(m&&(Bc(t,d,p,f,g,null,s,o,l),f=g=y=null),n=m=b=!0):m?n=!(m=!1):Dc(t,"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line"),t.position+=1,c=i;if((t.line===a||t.lineIndent>e)&&(m&&(s=t.line,o=t.lineStart,l=t.position),jc(t,e,cc,!0,n)&&(m?g=t.result:y=t.result),m||(Bc(t,d,p,f,g,y,s,o,l),f=g=y=null),Fc(t,!0,-1),c=t.input.charCodeAt(t.position)),(t.line===a||t.lineIndent>e)&&0!==c)Dc(t,"bad indentation of a mapping entry");else if(t.lineIndent<e)break}return m&&Bc(t,d,p,f,g,null,s,o,l),b&&(t.tag=h,t.anchor=u,t.kind="mapping",t.result=d),b}}(t,n,i))||function(t,e){var r,i,n,a,s,o,l,c,h,u,d,p=!0,f=t.tag,g=t.anchor,y=Object.create(null),m=t.input.charCodeAt(t.position);if(91===m)c=!(s=93),a=[];else{if(123!==m)return;s=125,c=!0,a={}}for(null!==t.anchor&&(t.anchorMap[t.anchor]=a),m=t.input.charCodeAt(++t.position);0!==m;){if(Fc(t,!0,e),(m=t.input.charCodeAt(t.position))===s)return t.position++,t.tag=f,t.anchor=g,t.kind=c?"mapping":"sequence",t.result=a,1;p?44===m&&Dc(t,"expected the node content, but found ','"):Dc(t,"missed comma between flow collection entries"),d=null,o=l=!1,63===m&&vc(t.input.charCodeAt(t.position+1))&&(o=l=!0,t.position++,Fc(t,!0,e)),r=t.line,i=t.lineStart,n=t.position,jc(t,e,sc,!1,!0),u=t.tag,h=t.result,Fc(t,!0,e),m=t.input.charCodeAt(t.position),!l&&t.line!==r||58!==m||(o=!0,m=t.input.charCodeAt(++t.position),Fc(t,!0,e),jc(t,e,sc,!1,!0),d=t.result),c?Bc(t,a,y,u,h,d,r,i,n):o?a.push(Bc(t,null,y,u,h,d,r,i,n)):a.push(h),Fc(t,!0,e),44===(m=t.input.charCodeAt(t.position))?(p=!0,m=t.input.charCodeAt(++t.position)):p=!1}Dc(t,"unexpected end of the stream within a flow collection")}(t,i)?f=!0:(s&&function(t,e){var r,i,n,a=hc,s=!1,o=!1,l=e,c=0,h=!1,u=t.input.charCodeAt(t.position);if(124===u)i=!1;else{if(62!==u)return;i=!0}for(t.kind="scalar",t.result="";0!==u;)if(43===(u=t.input.charCodeAt(++t.position))||45===u)hc===a?a=43===u?dc:uc:Dc(t,"repeat of a chomping mode identifier");else{if(!(0<=(n=48<=(n=u)&&n<=57?n-48:-1)))break;0==n?Dc(t,"bad explicit indentation width of a block scalar; it cannot be less than one"):o?Dc(t,"repeat of an indentation width identifier"):(l=e+n-1,o=!0)}if(xc(u)){for(;xc(u=t.input.charCodeAt(++t.position)););if(35===u)for(;!_c(u=t.input.charCodeAt(++t.position))&&0!==u;);}for(;0!==u;){for(Ic(t),t.lineIndent=0,u=t.input.charCodeAt(t.position);(!o||t.lineIndent<l)&&32===u;)t.lineIndent++,u=t.input.charCodeAt(++t.position);if(!o&&t.lineIndent>l&&(l=t.lineIndent),_c(u))c++;else{if(t.lineIndent<l){a===dc?t.result+=Fl.repeat(`
`,s?1+c:c):a===hc&&s&&(t.result+=`
`);break}for(i?xc(u)?(h=!0,t.result+=Fl.repeat(`
`,s?1+c:c)):h?(h=!1,t.result+=Fl.repeat(`
`,c+1)):0===c?s&&(t.result+=" "):t.result+=Fl.repeat(`
`,c):t.result+=Fl.repeat(`
`,s?1+c:c),o=s=!0,c=0,r=t.position;!_c(u)&&0!==u;)u=t.input.charCodeAt(++t.position);Nc(t,r,t.position,!1)}}return 1}(t,i)||function(t,e){var r,i,n=t.input.charCodeAt(t.position);if(39===n){for(t.kind="scalar",t.result="",t.position++,r=i=t.position;0!==(n=t.input.charCodeAt(t.position));)if(39===n){if(Nc(t,r,t.position,!0),39!==(n=t.input.charCodeAt(++t.position)))return 1;r=t.position,t.position++,i=t.position}else _c(n)?(Nc(t,r,i,!0),Pc(t,Fc(t,!1,e)),r=i=t.position):t.position===t.lineStart&&Rc(t)?Dc(t,"unexpected end of the document within a single quoted scalar"):(t.position++,i=t.position);Dc(t,"unexpected end of the stream within a single quoted scalar")}}(t,i)||$c(t,i)?f=!0:function(t){var e,r=t.input.charCodeAt(t.position);if(42===r){for(r=t.input.charCodeAt(++t.position),e=t.position;0!==r&&!vc(r)&&!kc(r);)r=t.input.charCodeAt(++t.position);return t.position===e&&Dc(t,"name of an alias node must contain at least one character"),e=t.input.slice(e,t.position),ac.call(t.anchorMap,e)||Dc(t,'unidentified alias "'+e+'"'),t.result=t.anchorMap[e],Fc(t,!0,-1),1}}(t)?(f=!0,null===t.tag&&null===t.anchor||Dc(t,"alias node should not have any properties")):function(t,e,r){var i,n,a,s,o,l,c,h=t.kind,u=t.result,d=t.input.charCodeAt(t.position);if(!(vc(d)||kc(d)||35===d||38===d||42===d||33===d||124===d||62===d||39===d||34===d||37===d||64===d||96===d||(63===d||45===d)&&(vc(i=t.input.charCodeAt(t.position+1))||r&&kc(i)))){for(t.kind="scalar",t.result="",n=a=t.position,s=!1;0!==d;){if(58===d){if(vc(i=t.input.charCodeAt(t.position+1))||r&&kc(i))break}else if(35===d){if(vc(t.input.charCodeAt(t.position-1)))break}else{if(t.position===t.lineStart&&Rc(t)||r&&kc(d))break;if(_c(d)){if(o=t.line,l=t.lineStart,c=t.lineIndent,Fc(t,!1,-1),t.lineIndent>=e){s=!0,d=t.input.charCodeAt(t.position);continue}t.position=a,t.line=o,t.lineStart=l,t.lineIndent=c;break}}s&&(Nc(t,n,a,!1),Pc(t,t.line-o),n=a=t.position,s=!1),xc(d)||(a=t.position+1),d=t.input.charCodeAt(++t.position)}return Nc(t,n,a,!1),t.result||(t.kind=h,t.result=u,0)}}(t,i,sc===r)&&(f=!0,null===t.tag)&&(t.tag="?"),null!==t.anchor&&(t.anchorMap[t.anchor]=t.result)):0===d&&(f=o&&Yc(t,n))),null===t.tag)null!==t.anchor&&(t.anchorMap[t.anchor]=t.result);else if("?"===t.tag){for(null!==t.result&&"scalar"!==t.kind&&Dc(t,'unacceptable node kind for !<?> tag; it should be "scalar", not "'+t.kind+'"'),l=0,c=t.implicitTypes.length;l<c;l+=1)if((u=t.implicitTypes[l]).resolve(t.result)){t.result=u.construct(t.result),t.tag=u.tag,null!==t.anchor&&(t.anchorMap[t.anchor]=t.result);break}}else if("!"!==t.tag){if(ac.call(t.typeMap[t.kind||"fallback"],t.tag))u=t.typeMap[t.kind||"fallback"][t.tag];else for(u=null,l=0,c=(h=t.typeMap.multi[t.kind||"fallback"]).length;l<c;l+=1)if(t.tag.slice(0,h[l].tag.length)===h[l].tag){u=h[l];break}u||Dc(t,"unknown tag !<"+t.tag+">"),null!==t.result&&u.kind!==t.kind&&Dc(t,"unacceptable node kind for !<"+t.tag+'> tag; it should be "'+u.kind+'", not "'+t.kind+'"'),u.resolve(t.result,t.tag)?(t.result=u.construct(t.result,t.tag),null!==t.anchor&&(t.anchorMap[t.anchor]=t.result)):Dc(t,"cannot resolve a node with !<"+t.tag+"> explicit tag")}return null!==t.listener&&t.listener("close",t),null!==t.tag||null!==t.anchor||f}function zc(t,e){e=e||{};var r=new Sc(t=0!==(t=String(t)).length&&(10!==t.charCodeAt(t.length-1)&&13!==t.charCodeAt(t.length-1)&&(t+=`
`),65279===t.charCodeAt(0))?t.slice(1):t,e),e=t.indexOf("\0");for(-1!==e&&(r.position=e,Dc(r,"null byte is not allowed in input")),r.input+="\0";32===r.input.charCodeAt(r.position);)r.lineIndent+=1,r.position+=1;for(;r.position<r.length-1;){i=void 0;l=void 0;n=void 0;a=void 0;s=void 0;c=void 0;o=void 0;var i=r;var n,a,s,o,l=i.position,c=!1;for(i.version=null,i.checkLineBreaks=i.legacy,i.tagMap=Object.create(null),i.anchorMap=Object.create(null);0!==(o=i.input.charCodeAt(i.position))&&(Fc(i,!0,-1),o=i.input.charCodeAt(i.position),!(0<i.lineIndent||37!==o));){for(c=!0,o=i.input.charCodeAt(++i.position),n=i.position;0!==o&&!vc(o);)o=i.input.charCodeAt(++i.position);for(s=[],(a=i.input.slice(n,i.position)).length<1&&Dc(i,"directive name must not be less than one character in length");0!==o;){for(;xc(o);)o=i.input.charCodeAt(++i.position);if(35===o){for(;0!==(o=i.input.charCodeAt(++i.position))&&!_c(o););break}if(_c(o))break;for(n=i.position;0!==o&&!vc(o);)o=i.input.charCodeAt(++i.position);s.push(i.input.slice(n,i.position))}0!==o&&Ic(i),ac.call(Mc,a)?Mc[a](i,a,s):Lc(i,'unknown document directive "'+a+'"')}Fc(i,!0,-1),0===i.lineIndent&&45===i.input.charCodeAt(i.position)&&45===i.input.charCodeAt(i.position+1)&&45===i.input.charCodeAt(i.position+2)?(i.position+=3,Fc(i,!0,-1)):c&&Dc(i,"directives end mark is expected"),jc(i,i.lineIndent-1,cc,!1,!0),Fc(i,!0,-1),i.checkLineBreaks&&fc.test(i.input.slice(l,i.position))&&Lc(i,"non-ASCII line breaks are interpreted as content"),i.documents.push(i.result),i.position===i.lineStart&&Rc(i)?46===i.input.charCodeAt(i.position)&&(i.position+=3,Fc(i,!0,-1)):i.position<i.length-1&&Dc(i,"end of the stream or a document separator is expected")}return r.documents}var Uc=fe,Wc={loadAll:function(t,e,r){null!==e&&"object"==typeof e&&"u"<typeof r&&(r=e,e=null);var i=zc(t,r);if("function"!=typeof e)return i;for(var n=0,a=i.length;n<a;n+=1)e(i[n])},load:function(t,e){if(0!==(t=zc(t,e)).length){if(1===t.length)return t[0];throw new $l("expected a single document in the stream, but found more")}}}.load;const Hc=/^-{3}\s*[\n\r](.*?)[\n\r]-{3}\s*[\n\r]+/s;function qc(e,r,i){const{depth:n,clobber:a}=Object.assign({depth:2,clobber:!1},i);return Array.isArray(r)&&!Array.isArray(e)?(r.forEach(t=>qc(e,t,i)),e):Array.isArray(r)&&Array.isArray(e)?(r.forEach(t=>{e.includes(t)||e.push(t)}),e):void 0===e||n<=0?null!=e&&"object"==typeof e&&"object"==typeof r?Object.assign(e,r):r:(void 0!==r&&"object"==typeof e&&"object"==typeof r&&Object.keys(r).forEach(t=>{"object"!=typeof r[t]||void 0!==e[t]&&"object"!=typeof e[t]?(a||"object"!=typeof e[t]&&"object"!=typeof r[t])&&(e[t]=r[t]):(void 0===e[t]&&(e[t]=Array.isArray(r[t])?[]:{}),e[t]=qc(e[t],r[t],{depth:n-1,clobber:a}))}),e)}const Vc=/%{2}{\s*(?:(\w+)\s*:|(\w+))\s*(?:(\w+)|((?:(?!}%{2}).|\r?\n)*))?\s*(?:}%{2})?/gi,Gc=/\s*%%.*\n/gm,Xc={},Zc=function(t,e){t=t.replace(Hc,"").replace(Vc,"").replace(Gc,`
`);for(var[r,{detector:i}]of Object.entries(Xc))if(i(t,e))return r;throw new Error("No diagram type detected for text: "+t)},Qc=(t,e,r)=>{if(Xc[t])throw new Error(`Detector with key ${t} already exists`);Xc[t]={detector:e,loader:r},S.debug(`Detector with key ${t} added`+(r?" with loader":""))},Kc=t=>Xc[t].loader,Jc=qc;t="object"==typeof ck&&ck&&ck.Object===Object&&ck,e="object"==typeof self&&self&&self.Object===Object&&self;const th=t||e||Function("return this")();var r=th.Symbol,Sn=Object.prototype,eh=Sn.hasOwnProperty,rh=Sn.toString,ih=r?r.toStringTag:void 0;var nh=Object.prototype.toString;var ah="[object Null]",sh="[object Undefined]",oh=r?r.toStringTag:void 0;function lh(t){{if(null==t)return void 0===t?sh:ah;if(oh&&oh in Object(t)){var e=t,r=eh.call(e,ih),i=e[ih];try{var n=!(e[ih]=void 0)}catch{}var a=rh.call(e);return n&&(r?e[ih]=i:delete e[ih]),a}return nh.call(t)}}function ch(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}var hh="[object AsyncFunction]",uh="[object Function]",dh="[object GeneratorFunction]",ph="[object Proxy]";function fh(t){if(ch(t))return(t=lh(t))==uh||t==dh||t==hh||t==ph}const gh=th["__core-js_shared__"];var yh=(En=/[^.]+$/.exec(gh&&gh.keys&&gh.keys.IE_PROTO||""))?"Symbol(src)_1."+En:"";var mh=Function.prototype.toString;function bh(t){if(null!=t){try{return mh.call(t)}catch{}try{return t+""}catch{}}return""}var _h=/^\[object .+?Constructor\]$/,a=Function.prototype,ic=Object.prototype,fe=a.toString,e=ic.hasOwnProperty,xh=RegExp("^"+fe.call(e).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function vh(t){var e;return ch(t)&&(e=t,!(yh&&yh in e))&&(fh(t)?xh:_h).test(bh(t))}function kh(t,e){e=e;t=null==(t=t)?void 0:t[e];return vh(t)?t:void 0}const wh=kh(Object,"create");var Th=Object.prototype.hasOwnProperty;var Ch=Object.prototype.hasOwnProperty;function Eh(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var i=t[e];this.set(i[0],i[1])}}function Sh(t,e){return t===e||t!=t&&e!=e}function Ah(t,e){for(var r=t.length;r--;)if(Sh(t[r][0],e))return r;return-1}Eh.prototype.clear=function(){this.__data__=wh?wh(null):{},this.size=0},Eh.prototype.delete=function(t){return t=this.has(t)&&delete this.__data__[t],this.size-=t?1:0,t},Eh.prototype.get=function(t){var e,r=this.__data__;return wh?"__lodash_hash_undefined__"===(e=r[t])?void 0:e:Th.call(r,t)?r[t]:void 0},Eh.prototype.has=function(t){var e=this.__data__;return wh?void 0!==e[t]:Ch.call(e,t)},Eh.prototype.set=function(t,e){var r=this.__data__;return this.size+=this.has(t)?0:1,r[t]=wh&&void 0===e?"__lodash_hash_undefined__":e,this};var Dh=Array.prototype.splice;function Lh(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var i=t[e];this.set(i[0],i[1])}}Lh.prototype.clear=function(){this.__data__=[],this.size=0},Lh.prototype.delete=function(t){var e=this.__data__;return!((t=Ah(e,t))<0||(t==e.length-1?e.pop():Dh.call(e,t,1),--this.size,0))},Lh.prototype.get=function(t){var e=this.__data__;return(t=Ah(e,t))<0?void 0:e[t][1]},Lh.prototype.has=function(t){return-1<Ah(this.__data__,t)},Lh.prototype.set=function(t,e){var r=this.__data__,i=Ah(r,t);return i<0?(++this.size,r.push([t,e])):r[i][1]=e,this};const Mh=kh(th,"Map");function Nh(t,e){var r,i,t=t.__data__;return("string"==(i=typeof(r=e))||"number"==i||"symbol"==i||"boolean"==i?"__proto__"!==r:null===r)?t["string"==typeof e?"string":"hash"]:t.map}function Oh(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var i=t[e];this.set(i[0],i[1])}}Oh.prototype.clear=function(){this.size=0,this.__data__={hash:new Eh,map:new(Mh||Lh),string:new Eh}},Oh.prototype.delete=function(t){return t=Nh(this,t).delete(t),this.size-=t?1:0,t},Oh.prototype.get=function(t){return Nh(this,t).get(t)},Oh.prototype.has=function(t){return Nh(this,t).has(t)},Oh.prototype.set=function(t,e){var r=Nh(this,t),i=r.size;return r.set(t,e),this.size+=r.size==i?0:1,this};function Bh(i,n){if("function"!=typeof i||null!=n&&"function"!=typeof n)throw new TypeError("Expected a function");function a(){var t=arguments,e=n?n.apply(this,t):t[0],r=a.cache;return r.has(e)?r.get(e):(t=i.apply(this,t),a.cache=r.set(e,t)||r,t)}return a.cache=new(Bh.Cache||Oh),a}Bh.Cache=Oh;function Ih(e,r=null){try{for(var t,i,n,a=new RegExp(`[%]{2}(?![{]${Ph.source})(?=[}][%]{2}).*
`,"ig"),s=(e=e.trim().replace(a,"").replace(/'/gm,'"'),S.debug(`Detecting diagram directive${null!==r?" type:"+r:""} based on the text:`+e),[]);null!==(t=Rh.exec(e));)t.index===Rh.lastIndex&&Rh.lastIndex++,(t&&!r||r&&t[1]&&t[1].match(r)||r&&t[2]&&t[2].match(r))&&(i=t[1]||t[2],n=t[3]?t[3].trim():t[4]?JSON.parse(t[4].trim()):null,s.push({type:i,args:n}));return 0===s.length&&s.push({type:e,args:null}),1===s.length?s[0]:s}catch(t){return S.error(`ERROR: ${t.message} - Unable to parse directive
      ${null!==r?" type:"+r:""} based on the text:`+e),{type:null,args:null}}}const Fh={curveBasis:Bs,curveBasisClosed:function(t){return new Is(t)},curveBasisOpen:function(t){return new Fs(t)},curveLinear:Cs,curveLinearClosed:function(t){return new Rs(t)},curveMonotoneX:function(t){return new zs(t)},curveMonotoneY:function(t){return new Us(t)},curveNatural:function(t){return new Hs(t)},curveStep:function(t){return new Vs(t,.5)},curveStepAfter:function(t){return new Vs(t,1)},curveStepBefore:function(t){return new Vs(t,0)}},Rh=/%{2}{\s*(?:(\w+)\s*:|(\w+))\s*(?:(\w+)|((?:(?!}%{2}).|\r?\n)*))?\s*(?:}%{2})?/gi,Ph=/\s*(?:(\w+)(?=:):|(\w+))\s*(?:(\w+)|((?:(?!}%{2}).|\r?\n)*))?\s*(?:}%{2})?/gi;function $h(t,e){return t&&(t="curve"+(t.charAt(0).toUpperCase()+t.slice(1)),Fh[t])||e}function Yh(t,e){return t&&e?Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2)):0}function jh(t){let e="",r="";for(const i of t)void 0!==i&&(i.startsWith("color:")||i.startsWith("text-align:")?r=r+i+";":e=e+i+";");return{style:e,labelStyle:r}}let zh=0;const Uh=()=>(zh++,"id-"+Math.random().toString(36).substr(2,12)+"-"+zh);const Wh=t=>{{var r=t.length;let e="";var i="0123456789abcdef",n=i.length;for(let t=0;t<r;t++)e+=i.charAt(Math.floor(Math.random()*n));return e}},Hh=Bh((t,s,o)=>{if(!t||(o=Object.assign({fontSize:12,fontWeight:400,fontFamily:"Arial",joinWith:"<br/>"},o),tl.lineBreakRegex.test(t)))return t;const l=t.split(" "),c=[];let h="";return l.forEach((t,e)=>{var r,i,n=Gh(t+" ",o),a=Gh(h,o);h=s<n?({hyphenatedStrings:r,remainingWord:i}=qh(t,s,"-",o),c.push(h,...r),i):s<=a+n?(c.push(h),t):[h,t].filter(Boolean).join(" "),e+1===l.length&&c.push(h)}),c.filter(t=>""!==t).join(o.joinWith)},(t,e,r)=>""+t+e+r.fontSize+r.fontWeight+r.fontFamily+r.joinWith),qh=Bh((t,i,n="-",a)=>{a=Object.assign({fontSize:12,fontWeight:400,fontFamily:"Arial",margin:0},a);const s=[...t],o=[];let l="";return s.forEach((t,e)=>{var r,t=""+l+t;l=Gh(t,a)>=i?(e=e+1,e=s.length===e,r=t+n,o.push(e?t:r),""):t}),{hyphenatedStrings:o,remainingWord:l}},(t,e,r="-",i)=>""+t+e+r+i.fontSize+i.fontWeight+i.fontFamily);function Vh(t,e){return e=Object.assign({fontSize:12,fontWeight:400,fontFamily:"Arial",margin:15},e),Xh(t,e).height}function Gh(t,e){return e=Object.assign({fontSize:12,fontWeight:400,fontFamily:"Arial"},e),Xh(t,e).width}const Xh=Bh((t,e)=>{var{fontSize:r,fontFamily:e,fontWeight:i}=e=Object.assign({fontSize:12,fontWeight:400,fontFamily:"Arial"},e);if(!t)return{width:0,height:0};var e=["sans-serif",e],n=t.split(tl.lineBreakRegex),a=[],t=K("body");if(!t.remove)return{width:0,height:0,lineHeight:0};var s,o=t.append("svg");for(const d of e){var l,c={width:0,height:0,lineHeight:0};for(const p of n){var h={x:0,y:0,fill:void 0,anchor:"start",style:"#666",width:100,height:100,textMargin:0,rx:0,ry:0,valign:void 0},h=(h.text=p,s=o,u=l=void 0,l=(h=h).text.replace(tl.lineBreakRegex," "),(s=s.append("text")).attr("x",h.x),s.attr("y",h.y),s.style("text-anchor",h.anchor),s.style("font-family",h.fontFamily),s.style("font-size",h.fontSize),s.style("font-weight",h.fontWeight),s.attr("fill",h.fill),void 0!==h.class&&s.attr("class",h.class),(u=s.append("tspan")).attr("x",h.x+2*h.textMargin),u.attr("fill",h.fill),u.text(l),s.style("font-size",r).style("font-weight",i).style("font-family",d)),u=(h._groups||h)[0][0].getBBox();c.width=Math.round(Math.max(c.width,u.width)),l=Math.round(u.height),c.height+=l,c.lineHeight=Math.round(Math.max(c.lineHeight,l))}a.push(c)}return o.remove(),a[isNaN(a[1].height)||isNaN(a[1].width)||isNaN(a[1].lineHeight)||a[0].height>a[1].height&&a[0].width>a[1].width&&a[0].lineHeight>a[1].lineHeight?0:1]},(t,e)=>""+t+e.fontSize+e.fontWeight+e.fontFamily);let Zh;const Qh=e=>{if(S.debug("directiveSanitizer called with",e),"object"==typeof e&&(e.length?e.forEach(t=>Qh(t)):Object.keys(e).forEach(t=>{S.debug("Checking key",t),t.startsWith("__")&&(S.debug("sanitize deleting __ option",t),delete e[t]),t.includes("proto")&&(S.debug("sanitize deleting proto option",t),delete e[t]),t.includes("constr")&&(S.debug("sanitize deleting constr option",t),delete e[t]),t.includes("themeCSS")&&(S.debug("sanitizing themeCss option"),e[t]=Kh(e[t])),t.includes("fontFamily")&&(S.debug("sanitizing fontFamily option"),e[t]=Kh(e[t])),t.includes("altFontFamily")&&(S.debug("sanitizing altFontFamily option"),e[t]=Kh(e[t])),Ol.includes(t)?"object"==typeof e[t]&&(S.debug("sanitize deleting object",t),Qh(e[t])):(S.debug("sanitize deleting option",t),delete e[t])})),e.themeVariables)for(const r of Object.keys(e.themeVariables)){var t=e.themeVariables[r];t&&t.match&&!t.match(/^[\d "#%(),.;A-Za-z]+$/)&&(e.themeVariables[r]="")}S.debug("After sanitization",e)},Kh=t=>{let e=0,r=0;for(const i of t){if(e<r)return"{ /* ERROR: Unbalanced CSS */ }";"{"===i?e++:"}"===i&&r++}return e!==r?"{ /* ERROR: Unbalanced CSS */ }":t};function Jh(t){return"str"in t}const t1={assignWithDepth:Jc,wrapLabel:Hh,calculateTextHeight:Vh,calculateTextWidth:Gh,calculateTextDimensions:Xh,detectInit:function(t,r){var e,i=Ih(t,/(?:init\b)|(?:initialize\b)/);let n={};if(n=Array.isArray(i)?(e=i.map(t=>t.args),Qh(e),Jc(n,[...e])):i.args){let e=Zc(t,r);["config"].forEach(t=>{void 0!==n[t]&&("flowchart-v2"===e&&(e="flowchart"),n[e]=n[t],delete n[t])})}return n},detectDirective:Ih,isSubstringInArray:function(t,e){for(var[r,i]of e.entries())if(i.match(t))return r;return-1},interpolateToCurve:$h,calcLabelPosition:function(t){if(1===t.length)return t[0];{let r,e=0,i=(t.forEach(t=>{e+=Yh(t,r),r=t}),e/2),n;return r=void 0,t.forEach(t=>{var e;r&&!n&&((e=Yh(t,r))<i?i-=e:((e=i/e)<=0&&(n=r),1<=e&&(n={x:t.x,y:t.y}),0<e&&e<1&&(n={x:(1-e)*r.x+e*t.x,y:(1-e)*r.y+e*t.y}))),r=t}),n}},calcCardinalityPosition:(t,e,r)=>{let i,n=(S.info("our points "+JSON.stringify(e)),e[0]!==r&&(e=e.reverse()),25),a;i=void 0,e.forEach(t=>{var e;i&&!a&&((e=Yh(t,i))<n?n-=e:((e=n/e)<=0&&(a=i),1<=e&&(a={x:t.x,y:t.y}),0<e&&e<1&&(a={x:(1-e)*i.x+e*t.x,y:(1-e)*i.y+e*t.y}))),i=t});var r=t?10:5,t=Math.atan2(e[0].y-a.y,e[0].x-a.x),s={x:0,y:0};return s.x=Math.sin(t)*r+(e[0].x+a.x)/2,s.y=-Math.cos(t)*r+(e[0].y+a.y)/2,s},calcTerminalLabelPosition:function(t,e,r){let i=JSON.parse(JSON.stringify(r)),n,a=(S.info("our points",i),(i="start_left"!==e&&"start_right"!==e?i.reverse():i).forEach(t=>{n=t}),25+t),s;n=void 0,i.forEach(t=>{var e;n&&!s&&((e=Yh(t,n))<a?a-=e:((e=a/e)<=0&&(s=n),1<=e&&(s={x:t.x,y:t.y}),0<e&&e<1&&(s={x:(1-e)*n.x+e*t.x,y:(1-e)*n.y+e*t.y}))),n=t});var r=10+.5*t,t=Math.atan2(i[0].y-s.y,i[0].x-s.x),o={x:0,y:0};return o.x=Math.sin(t)*r+(i[0].x+s.x)/2,o.y=-Math.cos(t)*r+(i[0].y+s.y)/2,"start_left"===e&&(o.x=Math.sin(t+Math.PI)*r+(i[0].x+s.x)/2,o.y=-Math.cos(t+Math.PI)*r+(i[0].y+s.y)/2),"end_right"===e&&(o.x=Math.sin(t-Math.PI)*r+(i[0].x+s.x)/2-5,o.y=-Math.cos(t-Math.PI)*r+(i[0].y+s.y)/2-5),"end_left"===e&&(o.x=Math.sin(t)*r+(i[0].x+s.x)/2-5,o.y=-Math.cos(t)*r+(i[0].y+s.y)/2-5),o},formatUrl:function(t,e){if(t=t.trim())return"loose"!==e.securityLevel?Y(t):t},getStylesFromArray:jh,generateId:Uh,random:Wh,runFunc:(t,...e)=>{var r=t.split("."),i=r.length-1,t=r[i];let n=window;for(let t=0;t<i;t++)if(!(n=n[r[t]]))return;n[t](...e)},entityDecode:function(t){return Zh=Zh||document.createElement("div"),t=escape(t).replace(/%26/g,"&").replace(/%23/g,"#").replace(/%3B/g,";"),Zh.innerHTML=t,unescape(Zh.textContent)},initIdGenerator:class{constructor(t,e){this.deterministic=t,this.seed=e,this.count=e?e.length:0}next(){return this.deterministic?this.count++:Date.now()}},directiveSanitizer:Qh,sanitizeCss:Kh,insertTitle:(t,e,r,i)=>{var n;i&&(n=t.node().getBBox(),t.append("text").text(i).attr("x",n.x+n.width/2).attr("y",-r).attr("class",e))}};var e1="comm",r1="rule",i1="decl",n1="@import",a1="@keyframes",s1=Math.abs,o1=String.fromCharCode;function l1(t){return t.trim()}function c1(t,e,r){return t.replace(e,r)}function h1(t,e){return t.indexOf(e)}function u1(t,e){return 0|t.charCodeAt(e)}function d1(t,e,r){return t.slice(e,r)}function p1(t){return t.length}function f1(t){return t.length}function g1(t,e){return e.push(t),t}var y1=1,m1=1,b1=0,_1=0,x1=0,v1="";function k1(t,e,r,i,n,a,s){return{value:t,root:e,parent:r,type:i,props:n,children:a,line:y1,column:m1,length:s,return:""}}function w1(){return x1=0<_1?u1(v1,--_1):0,m1--,10===x1&&(m1=1,y1--),x1}function T1(){return x1=_1<b1?u1(v1,_1++):0,m1++,10===x1&&(m1=1,y1++),x1}function C1(){return u1(v1,_1)}function E1(t,e){return d1(v1,t,e)}function S1(t){switch(t){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function A1(t){return l1(E1(_1-1,function t(e){for(;T1();)switch(x1){case e:return _1;case 34:case 39:34!==e&&39!==e&&t(x1);break;case 40:41===e&&t(e);break;case 92:T1()}return _1}(91===t?t+2:40===t?t+1:t)))}function D1(t){for(;(x1=C1())&&x1<33;)T1();return 2<S1(t)||3<S1(x1)?"":" "}function L1(t,e){for(;--e&&T1()&&!(x1<48||102<x1||57<x1&&x1<65||70<x1&&x1<97););return E1(t,_1+(e<6&&32==C1()&&32==T1()))}function M1(t,e){for(;T1()&&t+x1!==57&&(t+x1!==84||47!==C1()););return"/*"+E1(e,_1-1)+"*"+o1(47===t?t:T1())}function N1(t){for(;!S1(C1());)T1();return E1(t,_1)}function O1(t){return t=function t(e,r,i,n,a,s,o,l,c){for(var h=0,u=0,d=o,p=0,f=0,g=0,y=1,m=1,b=1,_=0,x="",v=a,k=s,w=n,T=x;m;)switch(g=_,_=T1()){case 40:if(108!=g&&58==u1(T,d-1)){-1!=h1(T+=c1(A1(_),"&","&\f"),"&\f")&&(b=-1);break}case 34:case 39:case 91:T+=A1(_);break;case 9:case 10:case 13:case 32:T+=D1(g);break;case 92:T+=L1(_1-1,7);continue;case 47:switch(C1()){case 42:case 47:g1(I1(M1(T1(),_1),r,i),c);break;default:T+="/"}break;case 123*y:l[h++]=p1(T)*b;case 125*y:case 59:case 0:switch(_){case 0:case 125:m=0;case 59+u:0<f&&p1(T)-d&&g1(32<f?F1(T+";",n,i,d-1):F1(c1(T," ","")+";",n,i,d-2),c);break;case 59:T+=";";default:if(g1(w=B1(T,r,i,h,u,a,l,x,v=[],k=[],d),s),123===_)if(0===u)t(T,r,w,w,v,s,d,l,k);else switch(p){case 100:case 109:case 115:t(e,w,w,n&&g1(B1(e,w,w,0,0,a,l,x,a,v=[],d),k),a,k,d,l,n?v:k);break;default:t(T,w,w,w,[""],k,0,l,k)}}h=u=f=0,y=b=1,x=T="",d=o;break;case 58:d=1+p1(T),f=g;default:if(y<1)if(123==_)--y;else if(125==_&&0==y++&&125==w1())continue;switch(T+=o1(_),_*y){case 38:b=0<u?1:(T+="\f",-1);break;case 44:l[h++]=(p1(T)-1)*b,b=1;break;case 64:45===C1()&&(T+=A1(T1())),p=C1(),u=d=p1(x=T+=N1(_1)),_++;break;case 45:45===g&&2==p1(T)&&(y=0)}}return s}("",null,null,null,[""],(y1=m1=1,b1=p1(v1=t),t=[]),_1=0,[0],t),v1="",t}function B1(t,e,r,i,n,a,s,o,l,c,h){for(var u,d=n-1,p=0===n?a:[""],f=f1(p),g=0,y=0;g<i;++g)for(var m,b=0,_=d1(t,d+1,d=s1(u=s[g]));b<f;++b)(m=l1(0<u?p[b]+" "+_:c1(_,/&\f/g,p[b])))&&(l[y++]=m);return k1(t,e,r,0===n?r1:o,l,c,h)}function I1(t,e,r){return k1(t,e,r,e1,o1(x1),d1(t,2,-2),0)}function F1(t,e,r,i){return k1(t,e,r,i1,d1(t,0,i),d1(t,i+1,-1),i)}function R1(t,e){for(var r="",i=f1(t),n=0;n<i;n++)r+=e(t[n],n,t,e)||"";return r}function P1(t,e,r,i){switch(t.type){case n1:case i1:return t.return=t.return||t.value;case e1:return"";case a1:return t.return=t.value+"{"+R1(t.children,i)+"}";case r1:t.value=t.props.join(",")}return p1(r=R1(t.children,i))?t.return=t.value+"{"+r+"}":""}const $1={name:"mermaid",version:"9.3.0",description:"Markdown-ish syntax for generating flowcharts, sequence diagrams, class diagrams, gantt charts and git graphs.",main:"./dist/mermaid.min.js",module:"./dist/mermaid.core.mjs",types:"./dist/mermaid.d.ts",exports:{".":{require:"./dist/mermaid.min.js",import:"./dist/mermaid.core.mjs",types:"./dist/mermaid.d.ts"},"./*":"./*"},keywords:["diagram","markdown","flowchart","sequence diagram","gantt","class diagram","git graph"],scripts:{clean:"rimraf dist","docs:code":"typedoc src/defaultConfig.ts src/config.ts src/mermaidAPI.ts && prettier --write ./src/docs/config/setup","docs:build":"rimraf ../../docs && pnpm docs:spellcheck && pnpm docs:code && ts-node-esm src/docs.mts","docs:verify":"pnpm docs:spellcheck && pnpm docs:code && ts-node-esm src/docs.mts --verify","docs:pre:vitepress":"rimraf src/vitepress && pnpm docs:code && ts-node-esm src/docs.mts --vitepress","docs:build:vitepress":"pnpm docs:pre:vitepress && vitepress build src/vitepress","docs:dev":'pnpm docs:pre:vitepress && concurrently "vitepress dev src/vitepress" "ts-node-esm src/docs.mts --watch --vitepress"',"docs:serve":"pnpm docs:build:vitepress && vitepress serve src/vitepress","docs:spellcheck":'cspell --config ../../cSpell.json "src/docs/**/*.md"',release:"pnpm build",prepublishOnly:"pnpm -w run build"},repository:{type:"git",url:"https://github.com/mermaid-js/mermaid"},author:"Knut Sveidqvist",license:"MIT",standard:{ignore:["**/parser/*.js","dist/**/*.js","cypress/**/*.js"],globals:["page"]},dependencies:{"@braintree/sanitize-url":"^6.0.0",d3:"^7.0.0","dagre-d3-es":"7.0.6",dompurify:"2.4.1",khroma:"^2.0.0","lodash-es":"^4.17.21","moment-mini":"^2.24.0","non-layered-tidy-tree-layout":"^2.0.2",stylis:"^4.1.2",uuid:"^9.0.0"},devDependencies:{"@types/d3":"^7.4.0","@types/dompurify":"^2.4.0","@types/jsdom":"^20.0.1","@types/lodash-es":"^4.17.6","@types/micromatch":"^4.0.2","@types/prettier":"^2.7.1","@types/stylis":"^4.0.2","@types/uuid":"^8.3.4","@typescript-eslint/eslint-plugin":"^5.42.1","@typescript-eslint/parser":"^5.42.1",chokidar:"^3.5.3",concurrently:"^7.5.0",coveralls:"^3.1.1",cspell:"^6.14.3",globby:"^13.1.2",jison:"^0.4.18","js-base64":"^3.7.2",jsdom:"^20.0.2",micromatch:"^4.0.5",moment:"^2.29.4","path-browserify":"^1.0.1",prettier:"^2.7.1",remark:"^14.0.2",rimraf:"^3.0.2","start-server-and-test":"^1.14.0",typedoc:"^0.23.18","typedoc-plugin-markdown":"^3.13.6",typescript:"^4.8.4","unist-util-flatmap":"^1.0.0",vitepress:"^1.0.0-alpha.28","vitepress-plugin-search":"^1.0.4-alpha.15"},files:["dist","README.md"],sideEffects:["**/*.css","**/*.scss"]},Y1=Object.freeze(Bl);let j1=Jc({},Y1),z1,U1=[],W1=Jc({},Y1);const H1=(t,e)=>{let r=Jc({},t),i={};for(const n of e)G1(n),i=Jc(i,n);return r=Jc(r,i),i.theme&&i.theme in Ll&&(t=Jc({},z1),e=Jc(t.themeVariables||{},i.themeVariables),r.theme)&&r.theme in Ll&&(r.themeVariables=Ll[r.theme].getThemeVariables(e)),W1=r,ru(W1),W1},q1=()=>Jc({},j1),V1=t=>(ru(t),Jc(W1,t),J()),J=()=>Jc({},W1),G1=e=>{var t;["secure",...null!=(t=j1.secure)?t:[]].forEach(t=>{void 0!==e[t]&&(S.debug("Denied attempt to modify a secure key "+t,e[t]),delete e[t])}),Object.keys(e).forEach(t=>{0===t.indexOf("__")&&delete e[t]}),Object.keys(e).forEach(t=>{"string"==typeof e[t]&&(e[t].includes("<")||e[t].includes(">")||e[t].includes("url(data:"))&&delete e[t],"object"==typeof e[t]&&G1(e[t])})},X1=t=>{!t.fontFamily||t.themeVariables&&t.themeVariables.fontFamily||(t.themeVariables={fontFamily:t.fontFamily}),U1.push(t),H1(j1,U1)},Z1=(t=j1)=>{U1=[],H1(t,U1)};(Sn={}).LAZY_LOAD_DEPRECATED="The configuration options lazyLoadedDiagrams and loadExternalDiagramsAtStartup are deprecated. Please use registerExternalDiagrams instead.";var Q1=Sn;function K1(t,e,r,i){e=nu(e,r,i),iu(t,e)}function J1(t,e,r,i){var n=e.node().getBBox(),a=n.width,s=n.height,s=(S.info(`SVG bounds: ${a}x`+s,n),S.info("Graph bounds: 0x0",t),t=a+2*r,a=s+2*r,S.info(`Calculated bounds: ${t}x`+a),K1(e,a,t,i),`${n.x-r} ${n.y-r} ${n.width+2*r} `+(n.height+2*r));e.attr("viewBox",s)}const tu={},eu=t=>{tu[t]||(S.warn(Q1[t]),tu[t]=!0)},ru=t=>{t&&(t.lazyLoadedDiagrams||t.loadExternalDiagramsAtStartup)&&eu("LAZY_LOAD_DEPRECATED")},iu=function(t,e){for(var r of e)t.attr(r[0],r[1])},nu=function(t,e,r){var i=new Map;return r?(i.set("width","100%"),i.set("style",`max-width: ${e}px;`)):(i.set("height",t),i.set("width",e)),i},au=t=>`g.classGroup text {
  fill: ${t.nodeBorder};
  fill: ${t.classText};
  stroke: none;
  font-family: ${t.fontFamily};
  font-size: 10px;

  .title {
    font-weight: bolder;
  }

}

.nodeLabel, .edgeLabel {
  color: ${t.classText};
}
.edgeLabel .label rect {
  fill: ${t.mainBkg};
}
.label text {
  fill: ${t.classText};
}
.edgeLabel .label span {
  background: ${t.mainBkg};
}

.classTitle {
  font-weight: bolder;
}
.node rect,
  .node circle,
  .node ellipse,
  .node polygon,
  .node path {
    fill: ${t.mainBkg};
    stroke: ${t.nodeBorder};
    stroke-width: 1px;
  }


.divider {
  stroke: ${t.nodeBorder};
  stroke: 1;
}

g.clickable {
  cursor: pointer;
}

g.classGroup rect {
  fill: ${t.mainBkg};
  stroke: ${t.nodeBorder};
}

g.classGroup line {
  stroke: ${t.nodeBorder};
  stroke-width: 1;
}

.classLabel .box {
  stroke: none;
  stroke-width: 0;
  fill: ${t.mainBkg};
  opacity: 0.5;
}

.classLabel .label {
  fill: ${t.nodeBorder};
  font-size: 10px;
}

.relation {
  stroke: ${t.lineColor};
  stroke-width: 1;
  fill: none;
}

.dashed-line{
  stroke-dasharray: 3;
}

.dotted-line{
  stroke-dasharray: 1 2;
}

#compositionStart, .composition {
  fill: ${t.lineColor} !important;
  stroke: ${t.lineColor} !important;
  stroke-width: 1;
}

#compositionEnd, .composition {
  fill: ${t.lineColor} !important;
  stroke: ${t.lineColor} !important;
  stroke-width: 1;
}

#dependencyStart, .dependency {
  fill: ${t.lineColor} !important;
  stroke: ${t.lineColor} !important;
  stroke-width: 1;
}

#dependencyStart, .dependency {
  fill: ${t.lineColor} !important;
  stroke: ${t.lineColor} !important;
  stroke-width: 1;
}

#extensionStart, .extension {
  fill: ${t.mainBkg} !important;
  stroke: ${t.lineColor} !important;
  stroke-width: 1;
}

#extensionEnd, .extension {
  fill: ${t.mainBkg} !important;
  stroke: ${t.lineColor} !important;
  stroke-width: 1;
}

#aggregationStart, .aggregation {
  fill: ${t.mainBkg} !important;
  stroke: ${t.lineColor} !important;
  stroke-width: 1;
}

#aggregationEnd, .aggregation {
  fill: ${t.mainBkg} !important;
  stroke: ${t.lineColor} !important;
  stroke-width: 1;
}

#lollipopStart, .lollipop {
  fill: ${t.mainBkg} !important;
  stroke: ${t.lineColor} !important;
  stroke-width: 1;
}

#lollipopEnd, .lollipop {
  fill: ${t.mainBkg} !important;
  stroke: ${t.lineColor} !important;
  stroke-width: 1;
}

.edgeTerminals {
  font-size: 11px;
}

.classTitleText {
  text-anchor: middle;
  font-size: 18px;
  fill: ${t.textColor};
}
`,su=t=>`
  .entityBox {
    fill: ${t.mainBkg};
    stroke: ${t.nodeBorder};
  }

  .attributeBoxOdd {
    fill: ${t.attributeBackgroundColorOdd};
    stroke: ${t.nodeBorder};
  }

  .attributeBoxEven {
    fill:  ${t.attributeBackgroundColorEven};
    stroke: ${t.nodeBorder};
  }

  .relationshipLabelBox {
    fill: ${t.tertiaryColor};
    opacity: 0.7;
    background-color: ${t.tertiaryColor};
      rect {
        opacity: 0.5;
      }
  }

    .relationshipLine {
      stroke: ${t.lineColor};
    }

  .entityTitleText {
    text-anchor: middle;
    font-size: 18px;
    fill: ${t.textColor};
  }    
`,ou=()=>"",lu=t=>`.label {
    font-family: ${t.fontFamily};
    color: ${t.nodeTextColor||t.textColor};
  }
  .cluster-label text {
    fill: ${t.titleColor};
  }
  .cluster-label span {
    color: ${t.titleColor};
  }

  .label text,span {
    fill: ${t.nodeTextColor||t.textColor};
    color: ${t.nodeTextColor||t.textColor};
  }

  .node rect,
  .node circle,
  .node ellipse,
  .node polygon,
  .node path {
    fill: ${t.mainBkg};
    stroke: ${t.nodeBorder};
    stroke-width: 1px;
  }

  .node .label {
    text-align: center;
  }
  .node.clickable {
    cursor: pointer;
  }

  .arrowheadPath {
    fill: ${t.arrowheadColor};
  }

  .edgePath .path {
    stroke: ${t.lineColor};
    stroke-width: 2.0px;
  }

  .flowchart-link {
    stroke: ${t.lineColor};
    fill: none;
  }

  .edgeLabel {
    background-color: ${t.edgeLabelBackground};
    rect {
      opacity: 0.5;
      background-color: ${t.edgeLabelBackground};
      fill: ${t.edgeLabelBackground};
    }
    text-align: center;
  }

  .cluster rect {
    fill: ${t.clusterBkg};
    stroke: ${t.clusterBorder};
    stroke-width: 1px;
  }

  .cluster text {
    fill: ${t.titleColor};
  }

  .cluster span {
    color: ${t.titleColor};
  }
  /* .cluster div {
    color: ${t.titleColor};
  } */

  div.mermaidTooltip {
    position: absolute;
    text-align: center;
    max-width: 200px;
    padding: 2px;
    font-family: ${t.fontFamily};
    font-size: 12px;
    background: ${t.tertiaryColor};
    border: 1px solid ${t.border2};
    border-radius: 2px;
    pointer-events: none;
    z-index: 100;
  }

  .flowchartTitleText {
    text-anchor: middle;
    font-size: 18px;
    fill: ${t.textColor};
  }
`,cu=t=>`
  .mermaid-main-font {
    font-family: "trebuchet ms", verdana, arial, sans-serif;
    font-family: var(--mermaid-font-family);
  }
  .exclude-range {
    fill: ${t.excludeBkgColor};
  }

  .section {
    stroke: none;
    opacity: 0.2;
  }

  .section0 {
    fill: ${t.sectionBkgColor};
  }

  .section2 {
    fill: ${t.sectionBkgColor2};
  }

  .section1,
  .section3 {
    fill: ${t.altSectionBkgColor};
    opacity: 0.2;
  }

  .sectionTitle0 {
    fill: ${t.titleColor};
  }

  .sectionTitle1 {
    fill: ${t.titleColor};
  }

  .sectionTitle2 {
    fill: ${t.titleColor};
  }

  .sectionTitle3 {
    fill: ${t.titleColor};
  }

  .sectionTitle {
    text-anchor: start;
    // font-size: ${t.ganttFontSize};
    // text-height: 14px;
    font-family: 'trebuchet ms', verdana, arial, sans-serif;
    font-family: var(--mermaid-font-family);

  }


  /* Grid and axis */

  .grid .tick {
    stroke: ${t.gridColor};
    opacity: 0.8;
    shape-rendering: crispEdges;
    text {
      font-family: ${t.fontFamily};
      fill: ${t.textColor};
    }
  }

  .grid path {
    stroke-width: 0;
  }


  /* Today line */

  .today {
    fill: none;
    stroke: ${t.todayLineColor};
    stroke-width: 2px;
  }


  /* Task styling */

  /* Default task */

  .task {
    stroke-width: 2;
  }

  .taskText {
    text-anchor: middle;
    font-family: 'trebuchet ms', verdana, arial, sans-serif;
    font-family: var(--mermaid-font-family);
  }

  // .taskText:not([font-size]) {
  //   font-size: ${t.ganttFontSize};
  // }

  .taskTextOutsideRight {
    fill: ${t.taskTextDarkColor};
    text-anchor: start;
    // font-size: ${t.ganttFontSize};
    font-family: 'trebuchet ms', verdana, arial, sans-serif;
    font-family: var(--mermaid-font-family);

  }

  .taskTextOutsideLeft {
    fill: ${t.taskTextDarkColor};
    text-anchor: end;
    // font-size: ${t.ganttFontSize};
  }

  /* Special case clickable */
  .task.clickable {
    cursor: pointer;
  }
  .taskText.clickable {
    cursor: pointer;
    fill: ${t.taskTextClickableColor} !important;
    font-weight: bold;
  }

  .taskTextOutsideLeft.clickable {
    cursor: pointer;
    fill: ${t.taskTextClickableColor} !important;
    font-weight: bold;
  }

  .taskTextOutsideRight.clickable {
    cursor: pointer;
    fill: ${t.taskTextClickableColor} !important;
    font-weight: bold;
  }

  /* Specific task settings for the sections*/

  .taskText0,
  .taskText1,
  .taskText2,
  .taskText3 {
    fill: ${t.taskTextColor};
  }

  .task0,
  .task1,
  .task2,
  .task3 {
    fill: ${t.taskBkgColor};
    stroke: ${t.taskBorderColor};
  }

  .taskTextOutside0,
  .taskTextOutside2
  {
    fill: ${t.taskTextOutsideColor};
  }

  .taskTextOutside1,
  .taskTextOutside3 {
    fill: ${t.taskTextOutsideColor};
  }


  /* Active task */

  .active0,
  .active1,
  .active2,
  .active3 {
    fill: ${t.activeTaskBkgColor};
    stroke: ${t.activeTaskBorderColor};
  }

  .activeText0,
  .activeText1,
  .activeText2,
  .activeText3 {
    fill: ${t.taskTextDarkColor} !important;
  }


  /* Completed task */

  .done0,
  .done1,
  .done2,
  .done3 {
    stroke: ${t.doneTaskBorderColor};
    fill: ${t.doneTaskBkgColor};
    stroke-width: 2;
  }

  .doneText0,
  .doneText1,
  .doneText2,
  .doneText3 {
    fill: ${t.taskTextDarkColor} !important;
  }


  /* Tasks on the critical line */

  .crit0,
  .crit1,
  .crit2,
  .crit3 {
    stroke: ${t.critBorderColor};
    fill: ${t.critBkgColor};
    stroke-width: 2;
  }

  .activeCrit0,
  .activeCrit1,
  .activeCrit2,
  .activeCrit3 {
    stroke: ${t.critBorderColor};
    fill: ${t.activeTaskBkgColor};
    stroke-width: 2;
  }

  .doneCrit0,
  .doneCrit1,
  .doneCrit2,
  .doneCrit3 {
    stroke: ${t.critBorderColor};
    fill: ${t.doneTaskBkgColor};
    stroke-width: 2;
    cursor: pointer;
    shape-rendering: crispEdges;
  }

  .milestone {
    transform: rotate(45deg) scale(0.8,0.8);
  }

  .milestoneText {
    font-style: italic;
  }
  .doneCritText0,
  .doneCritText1,
  .doneCritText2,
  .doneCritText3 {
    fill: ${t.taskTextDarkColor} !important;
  }

  .activeCritText0,
  .activeCritText1,
  .activeCritText2,
  .activeCritText3 {
    fill: ${t.taskTextDarkColor} !important;
  }

  .titleText {
    text-anchor: middle;
    font-size: 18px;
    fill: ${t.textColor}    ;
    font-family: 'trebuchet ms', verdana, arial, sans-serif;
    font-family: var(--mermaid-font-family);
  }
`,hu=()=>"",uu=t=>`
  .pieCircle{
    stroke: ${t.pieStrokeColor};
    stroke-width : ${t.pieStrokeWidth};
    opacity : ${t.pieOpacity};
  }
  .pieTitleText {
    text-anchor: middle;
    font-size: ${t.pieTitleTextSize};
    fill: ${t.pieTitleTextColor};
    font-family: ${t.fontFamily};
  }
  .slice {
    font-family: ${t.fontFamily};
    fill: ${t.pieSectionTextColor};
    font-size:${t.pieSectionTextSize};
    // fill: white;
  }
  .legend text {
    fill: ${t.pieLegendTextColor};
    font-family: ${t.fontFamily};
    font-size: ${t.pieLegendTextSize};
  }
`,du=t=>`

  marker {
    fill: ${t.relationColor};
    stroke: ${t.relationColor};
  }

  marker.cross {
    stroke: ${t.lineColor};
  }

  svg {
    font-family: ${t.fontFamily};
    font-size: ${t.fontSize};
  }

  .reqBox {
    fill: ${t.requirementBackground};
    fill-opacity: 100%;
    stroke: ${t.requirementBorderColor};
    stroke-width: ${t.requirementBorderSize};
  }
  
  .reqTitle, .reqLabel{
    fill:  ${t.requirementTextColor};
  }
  .reqLabelBox {
    fill: ${t.relationLabelBackground};
    fill-opacity: 100%;
  }

  .req-title-line {
    stroke: ${t.requirementBorderColor};
    stroke-width: ${t.requirementBorderSize};
  }
  .relationshipLine {
    stroke: ${t.relationColor};
    stroke-width: 1;
  }
  .relationshipLabel {
    fill: ${t.relationLabelColor};
  }

`,pu=t=>`.actor {
    stroke: ${t.actorBorder};
    fill: ${t.actorBkg};
  }

  text.actor > tspan {
    fill: ${t.actorTextColor};
    stroke: none;
  }

  .actor-line {
    stroke: ${t.actorLineColor};
  }

  .messageLine0 {
    stroke-width: 1.5;
    stroke-dasharray: none;
    stroke: ${t.signalColor};
  }

  .messageLine1 {
    stroke-width: 1.5;
    stroke-dasharray: 2, 2;
    stroke: ${t.signalColor};
  }

  #arrowhead path {
    fill: ${t.signalColor};
    stroke: ${t.signalColor};
  }

  .sequenceNumber {
    fill: ${t.sequenceNumberColor};
  }

  #sequencenumber {
    fill: ${t.signalColor};
  }

  #crosshead path {
    fill: ${t.signalColor};
    stroke: ${t.signalColor};
  }

  .messageText {
    fill: ${t.signalTextColor};
    stroke: none;
  }

  .labelBox {
    stroke: ${t.labelBoxBorderColor};
    fill: ${t.labelBoxBkgColor};
  }

  .labelText, .labelText > tspan {
    fill: ${t.labelTextColor};
    stroke: none;
  }

  .loopText, .loopText > tspan {
    fill: ${t.loopTextColor};
    stroke: none;
  }

  .loopLine {
    stroke-width: 2px;
    stroke-dasharray: 2, 2;
    stroke: ${t.labelBoxBorderColor};
    fill: ${t.labelBoxBorderColor};
  }

  .note {
    //stroke: #decc93;
    stroke: ${t.noteBorderColor};
    fill: ${t.noteBkgColor};
  }

  .noteText, .noteText > tspan {
    fill: ${t.noteTextColor};
    stroke: none;
  }

  .activation0 {
    fill: ${t.activationBkgColor};
    stroke: ${t.activationBorderColor};
  }

  .activation1 {
    fill: ${t.activationBkgColor};
    stroke: ${t.activationBorderColor};
  }

  .activation2 {
    fill: ${t.activationBkgColor};
    stroke: ${t.activationBorderColor};
  }

  .actorPopupMenu {
    position: absolute;
  }

  .actorPopupMenuPanel {
    position: absolute;
    fill: ${t.actorBkg};
    box-shadow: 0px 8px 16px 0px rgba(0,0,0,0.2);
    filter: drop-shadow(3px 5px 2px rgb(0 0 0 / 0.4));
}
  .actor-man line {
    stroke: ${t.actorBorder};
    fill: ${t.actorBkg};
  }
  .actor-man circle, line {
    stroke: ${t.actorBorder};
    fill: ${t.actorBkg};
    stroke-width: 2px;
  }
`,fu=t=>`
defs #statediagram-barbEnd {
    fill: ${t.transitionColor};
    stroke: ${t.transitionColor};
  }
g.stateGroup text {
  fill: ${t.nodeBorder};
  stroke: none;
  font-size: 10px;
}
g.stateGroup text {
  fill: ${t.textColor};
  stroke: none;
  font-size: 10px;

}
g.stateGroup .state-title {
  font-weight: bolder;
  fill: ${t.stateLabelColor};
}

g.stateGroup rect {
  fill: ${t.mainBkg};
  stroke: ${t.nodeBorder};
}

g.stateGroup line {
  stroke: ${t.lineColor};
  stroke-width: 1;
}

.transition {
  stroke: ${t.transitionColor};
  stroke-width: 1;
  fill: none;
}

.stateGroup .composit {
  fill: ${t.background};
  border-bottom: 1px
}

.stateGroup .alt-composit {
  fill: #e0e0e0;
  border-bottom: 1px
}

.state-note {
  stroke: ${t.noteBorderColor};
  fill: ${t.noteBkgColor};

  text {
    fill: ${t.noteTextColor};
    stroke: none;
    font-size: 10px;
  }
}

.stateLabel .box {
  stroke: none;
  stroke-width: 0;
  fill: ${t.mainBkg};
  opacity: 0.5;
}

.edgeLabel .label rect {
  fill: ${t.labelBackgroundColor};
  opacity: 0.5;
}
.edgeLabel .label text {
  fill: ${t.transitionLabelColor||t.tertiaryTextColor};
}
.label div .edgeLabel {
  color: ${t.transitionLabelColor||t.tertiaryTextColor};
}

.stateLabel text {
  fill: ${t.stateLabelColor};
  font-size: 10px;
  font-weight: bold;
}

.node circle.state-start {
  fill: ${t.specialStateColor};
  stroke: ${t.specialStateColor};
}

.node .fork-join {
  fill: ${t.specialStateColor};
  stroke: ${t.specialStateColor};
}

.node circle.state-end {
  fill: ${t.innerEndBackground};
  stroke: ${t.background};
  stroke-width: 1.5
}
.end-state-inner {
  fill: ${t.compositeBackground||t.background};
  // stroke: ${t.background};
  stroke-width: 1.5
}

.node rect {
  fill: ${t.stateBkg||t.mainBkg};
  stroke: ${t.stateBorder||t.nodeBorder};
  stroke-width: 1px;
}
.node polygon {
  fill: ${t.mainBkg};
  stroke: ${t.stateBorder||t.nodeBorder};;
  stroke-width: 1px;
}
#statediagram-barbEnd {
  fill: ${t.lineColor};
}

.statediagram-cluster rect {
  fill: ${t.compositeTitleBackground};
  stroke: ${t.stateBorder||t.nodeBorder};
  stroke-width: 1px;
}

.cluster-label, .nodeLabel {
  color: ${t.stateLabelColor};
}

.statediagram-cluster rect.outer {
  rx: 5px;
  ry: 5px;
}
.statediagram-state .divider {
  stroke: ${t.stateBorder||t.nodeBorder};
}

.statediagram-state .title-state {
  rx: 5px;
  ry: 5px;
}
.statediagram-cluster.statediagram-cluster .inner {
  fill: ${t.compositeBackground||t.background};
}
.statediagram-cluster.statediagram-cluster-alt .inner {
  fill: ${t.altBackground||"#efefef"};
}

.statediagram-cluster .inner {
  rx:0;
  ry:0;
}

.statediagram-state rect.basic {
  rx: 5px;
  ry: 5px;
}
.statediagram-state rect.divider {
  stroke-dasharray: 10,10;
  fill: ${t.altBackground||"#efefef"};
}

.note-edge {
  stroke-dasharray: 5;
}

.statediagram-note rect {
  fill: ${t.noteBkgColor};
  stroke: ${t.noteBorderColor};
  stroke-width: 1px;
  rx: 0;
  ry: 0;
}
.statediagram-note rect {
  fill: ${t.noteBkgColor};
  stroke: ${t.noteBorderColor};
  stroke-width: 1px;
  rx: 0;
  ry: 0;
}

.statediagram-note text {
  fill: ${t.noteTextColor};
}

.statediagram-note .nodeLabel {
  color: ${t.noteTextColor};
}
.statediagram .edgeLabel {
  color: red; // ${t.noteTextColor};
}

#dependencyStart, #dependencyEnd {
  fill: ${t.lineColor};
  stroke: ${t.lineColor};
  stroke-width: 1;
}

.statediagramTitleText {
  text-anchor: middle;
  font-size: 18px;
  fill: ${t.textColor};
}
`,gu=t=>`.label {
    font-family: 'trebuchet ms', verdana, arial, sans-serif;
    font-family: var(--mermaid-font-family);
    color: ${t.textColor};
  }
  .mouth {
    stroke: #666;
  }

  line {
    stroke: ${t.textColor}
  }

  .legend {
    fill: ${t.textColor};
  }

  .label text {
    fill: #333;
  }
  .label {
    color: ${t.textColor}
  }

  .face {
    ${t.faceColor?"fill: "+t.faceColor:"fill: #FFF8DC"};
    stroke: #999;
  }

  .node rect,
  .node circle,
  .node ellipse,
  .node polygon,
  .node path {
    fill: ${t.mainBkg};
    stroke: ${t.nodeBorder};
    stroke-width: 1px;
  }

  .node .label {
    text-align: center;
  }
  .node.clickable {
    cursor: pointer;
  }

  .arrowheadPath {
    fill: ${t.arrowheadColor};
  }

  .edgePath .path {
    stroke: ${t.lineColor};
    stroke-width: 1.5px;
  }

  .flowchart-link {
    stroke: ${t.lineColor};
    fill: none;
  }

  .edgeLabel {
    background-color: ${t.edgeLabelBackground};
    rect {
      opacity: 0.5;
    }
    text-align: center;
  }

  .cluster rect {
  }

  .cluster text {
    fill: ${t.titleColor};
  }

  div.mermaidTooltip {
    position: absolute;
    text-align: center;
    max-width: 200px;
    padding: 2px;
    font-family: 'trebuchet ms', verdana, arial, sans-serif;
    font-family: var(--mermaid-font-family);
    font-size: 12px;
    background: ${t.tertiaryColor};
    border: 1px solid ${t.border2};
    border-radius: 2px;
    pointer-events: none;
    z-index: 100;
  }

  .task-type-0, .section-type-0  {
    ${t.fillType0?"fill: "+t.fillType0:""};
  }
  .task-type-1, .section-type-1  {
    ${t.fillType0?"fill: "+t.fillType1:""};
  }
  .task-type-2, .section-type-2  {
    ${t.fillType0?"fill: "+t.fillType2:""};
  }
  .task-type-3, .section-type-3  {
    ${t.fillType0?"fill: "+t.fillType3:""};
  }
  .task-type-4, .section-type-4  {
    ${t.fillType0?"fill: "+t.fillType4:""};
  }
  .task-type-5, .section-type-5  {
    ${t.fillType0?"fill: "+t.fillType5:""};
  }
  .task-type-6, .section-type-6  {
    ${t.fillType0?"fill: "+t.fillType6:""};
  }
  .task-type-7, .section-type-7  {
    ${t.fillType0?"fill: "+t.fillType7:""};
  }

  .actor-0 {
    ${t.actor0?"fill: "+t.actor0:""};
  }
  .actor-1 {
    ${t.actor1?"fill: "+t.actor1:""};
  }
  .actor-2 {
    ${t.actor2?"fill: "+t.actor2:""};
  }
  .actor-3 {
    ${t.actor3?"fill: "+t.actor3:""};
  }
  .actor-4 {
    ${t.actor4?"fill: "+t.actor4:""};
  }
  .actor-5 {
    ${t.actor5?"fill: "+t.actor5:""};
  }
`,yu=t=>`.person {
    stroke: ${t.personBorder};
    fill: ${t.personBkg};
  }
`,mu={flowchart:lu,"flowchart-v2":lu,sequence:pu,gantt:cu,classDiagram:au,"classDiagram-v2":au,class:au,stateDiagram:fu,state:fu,info:hu,pie:uu,er:su,error:ou,journey:gu,requirement:du,c4:yu},bu=(t,e,r)=>{let i="";return t in mu&&mu[t]?i=mu[t](r):S.warn("No theme found for "+t),` & {
    font-family: ${r.fontFamily};
    font-size: ${r.fontSize};
    fill: ${r.textColor}
  }

  /* Classes common for multiple diagrams */

  & .error-icon {
    fill: ${r.errorBkgColor};
  }
  & .error-text {
    fill: ${r.errorTextColor};
    stroke: ${r.errorTextColor};
  }

  & .edge-thickness-normal {
    stroke-width: 2px;
  }
  & .edge-thickness-thick {
    stroke-width: 3.5px
  }
  & .edge-pattern-solid {
    stroke-dasharray: 0;
  }

  & .edge-pattern-dashed{
    stroke-dasharray: 3;
  }
  .edge-pattern-dotted {
    stroke-dasharray: 2;
  }

  & .marker {
    fill: ${r.lineColor};
    stroke: ${r.lineColor};
  }
  & .marker.cross {
    stroke: ${r.lineColor};
  }

  & svg {
    font-family: ${r.fontFamily};
    font-size: ${r.fontSize};
  }

  ${i}

  ${e}
`},_u=S,xu=R,vu=J,ku=t=>Go(t,vu()),wu=J1,Tu={},Cu=(t,e,r)=>{if(Tu[t])throw new Error(`Diagram ${t} already registered.`);Tu[t]=e,r&&Qc(t,r),r=t,t=e.styles,mu[r]=t,e.injectUtils&&e.injectUtils(_u,xu,vu,ku,wu)},Eu=t=>{if(t in Tu)return Tu[t];throw new Error(`Diagram ${t} not found.`)};En=[8,14,20,22,24,25,27,29,32,37,40],a=[8,13,14,20,22,24,25,27,29,32,37,40],ic=[1,26],fe=[6,8,14,50,55],e=[8,14,55],Sn=[1,53],cb=[1,52],y=[8,14,30,33,35,38,55],ab=[1,67],sb=[1,68],ob=[1,69],nb=[8,14,33,35,42,55],(T={trace:function(){},yy:{},symbols_:{error:2,start:3,eol:4,directive:5,GG:6,document:7,EOF:8,":":9,DIR:10,options:11,body:12,OPT:13,NL:14,line:15,statement:16,commitStatement:17,mergeStatement:18,cherryPickStatement:19,acc_title:20,acc_title_value:21,acc_descr:22,acc_descr_value:23,acc_descr_multiline_value:24,section:25,branchStatement:26,CHECKOUT:27,ref:28,BRANCH:29,ORDER:30,NUM:31,CHERRY_PICK:32,COMMIT_ID:33,STR:34,COMMIT_TAG:35,EMPTYSTR:36,MERGE:37,COMMIT_TYPE:38,commitType:39,COMMIT:40,commit_arg:41,COMMIT_MSG:42,NORMAL:43,REVERSE:44,HIGHLIGHT:45,openDirective:46,typeDirective:47,closeDirective:48,argDirective:49,open_directive:50,type_directive:51,arg_directive:52,close_directive:53,ID:54,";":55,$accept:0,$end:1},terminals_:{2:"error",6:"GG",8:"EOF",9:":",10:"DIR",13:"OPT",14:"NL",20:"acc_title",21:"acc_title_value",22:"acc_descr",23:"acc_descr_value",24:"acc_descr_multiline_value",25:"section",27:"CHECKOUT",29:"BRANCH",30:"ORDER",31:"NUM",32:"CHERRY_PICK",33:"COMMIT_ID",34:"STR",35:"COMMIT_TAG",36:"EMPTYSTR",37:"MERGE",38:"COMMIT_TYPE",40:"COMMIT",42:"COMMIT_MSG",43:"NORMAL",44:"REVERSE",45:"HIGHLIGHT",50:"open_directive",51:"type_directive",52:"arg_directive",53:"close_directive",54:"ID",55:";"},productions_:[0,[3,2],[3,2],[3,3],[3,4],[3,5],[7,0],[7,2],[11,2],[11,1],[12,0],[12,2],[15,2],[15,1],[16,1],[16,1],[16,1],[16,2],[16,2],[16,1],[16,1],[16,1],[16,2],[26,2],[26,4],[19,3],[19,5],[19,5],[19,5],[19,5],[18,2],[18,4],[18,4],[18,4],[18,6],[18,6],[18,6],[18,6],[18,6],[18,6],[18,8],[18,8],[18,8],[18,8],[18,8],[18,8],[17,2],[17,3],[17,3],[17,5],[17,5],[17,3],[17,5],[17,5],[17,5],[17,5],[17,7],[17,7],[17,7],[17,7],[17,7],[17,7],[17,3],[17,5],[17,5],[17,5],[17,5],[17,5],[17,5],[17,7],[17,7],[17,7],[17,7],[17,7],[17,7],[17,7],[17,7],[17,7],[17,7],[17,7],[17,7],[17,7],[17,7],[17,7],[17,7],[17,7],[17,7],[17,9],[17,9],[17,9],[17,9],[17,9],[17,9],[17,9],[17,9],[17,9],[17,9],[17,9],[17,9],[17,9],[17,9],[17,9],[17,9],[17,9],[17,9],[17,9],[17,9],[17,9],[17,9],[17,9],[17,9],[41,0],[41,1],[39,1],[39,1],[39,1],[5,3],[5,5],[46,1],[47,1],[49,1],[48,1],[28,1],[28,1],[4,1],[4,1],[4,1]],performAction:function(t,e,r,i,n,a,s){var o=a.length-1;switch(n){case 3:return a[o];case 4:return a[o-1];case 5:return i.setDirection(a[o-3]),a[o-1];case 7:i.setOptions(a[o-1]),this.$=a[o];break;case 8:a[o-1]+=a[o],this.$=a[o-1];break;case 10:this.$=[];break;case 11:a[o-1].push(a[o]),this.$=a[o-1];break;case 12:this.$=a[o-1];break;case 17:this.$=a[o].trim(),i.setAccTitle(this.$);break;case 18:case 19:this.$=a[o].trim(),i.setAccDescription(this.$);break;case 20:i.addSection(a[o].substr(8)),this.$=a[o].substr(8);break;case 22:i.checkout(a[o]);break;case 23:i.branch(a[o]);break;case 24:i.branch(a[o-2],a[o]);break;case 25:i.cherryPick(a[o],"",void 0);break;case 26:i.cherryPick(a[o-2],"",a[o]);break;case 27:case 29:i.cherryPick(a[o-2],"","");break;case 28:i.cherryPick(a[o],"",a[o-2]);break;case 30:i.merge(a[o],"","","");break;case 31:i.merge(a[o-2],a[o],"","");break;case 32:i.merge(a[o-2],"",a[o],"");break;case 33:i.merge(a[o-2],"","",a[o]);break;case 34:i.merge(a[o-4],a[o],"",a[o-2]);break;case 35:i.merge(a[o-4],"",a[o],a[o-2]);break;case 36:i.merge(a[o-4],"",a[o-2],a[o]);break;case 37:i.merge(a[o-4],a[o-2],a[o],"");break;case 38:i.merge(a[o-4],a[o-2],"",a[o]);break;case 39:i.merge(a[o-4],a[o],a[o-2],"");break;case 40:i.merge(a[o-6],a[o-4],a[o-2],a[o]);break;case 41:i.merge(a[o-6],a[o],a[o-4],a[o-2]);break;case 42:i.merge(a[o-6],a[o-4],a[o],a[o-2]);break;case 43:i.merge(a[o-6],a[o-2],a[o-4],a[o]);break;case 44:i.merge(a[o-6],a[o],a[o-2],a[o-4]);break;case 45:i.merge(a[o-6],a[o-2],a[o],a[o-4]);break;case 46:i.commit(a[o]);break;case 47:i.commit("","",i.commitType.NORMAL,a[o]);break;case 48:i.commit("","",a[o],"");break;case 49:i.commit("","",a[o],a[o-2]);break;case 50:i.commit("","",a[o-2],a[o]);break;case 51:i.commit("",a[o],i.commitType.NORMAL,"");break;case 52:i.commit("",a[o-2],i.commitType.NORMAL,a[o]);break;case 53:i.commit("",a[o],i.commitType.NORMAL,a[o-2]);break;case 54:i.commit("",a[o-2],a[o],"");break;case 55:i.commit("",a[o],a[o-2],"");break;case 56:i.commit("",a[o-4],a[o-2],a[o]);break;case 57:i.commit("",a[o-4],a[o],a[o-2]);break;case 58:i.commit("",a[o-2],a[o-4],a[o]);break;case 59:i.commit("",a[o],a[o-4],a[o-2]);break;case 60:i.commit("",a[o],a[o-2],a[o-4]);break;case 61:i.commit("",a[o-2],a[o],a[o-4]);break;case 62:i.commit(a[o],"",i.commitType.NORMAL,"");break;case 63:i.commit(a[o],"",i.commitType.NORMAL,a[o-2]);break;case 64:i.commit(a[o-2],"",i.commitType.NORMAL,a[o]);break;case 65:i.commit(a[o-2],"",a[o],"");break;case 66:i.commit(a[o],"",a[o-2],"");break;case 67:i.commit(a[o],a[o-2],i.commitType.NORMAL,"");break;case 68:i.commit(a[o-2],a[o],i.commitType.NORMAL,"");break;case 69:i.commit(a[o-4],"",a[o-2],a[o]);break;case 70:i.commit(a[o-4],"",a[o],a[o-2]);break;case 71:i.commit(a[o-2],"",a[o-4],a[o]);break;case 72:i.commit(a[o],"",a[o-4],a[o-2]);break;case 73:i.commit(a[o],"",a[o-2],a[o-4]);break;case 74:i.commit(a[o-2],"",a[o],a[o-4]);break;case 75:i.commit(a[o-4],a[o],a[o-2],"");break;case 76:i.commit(a[o-4],a[o-2],a[o],"");break;case 77:i.commit(a[o-2],a[o],a[o-4],"");break;case 78:i.commit(a[o],a[o-2],a[o-4],"");break;case 79:i.commit(a[o],a[o-4],a[o-2],"");break;case 80:i.commit(a[o-2],a[o-4],a[o],"");break;case 81:i.commit(a[o-4],a[o],i.commitType.NORMAL,a[o-2]);break;case 82:i.commit(a[o-4],a[o-2],i.commitType.NORMAL,a[o]);break;case 83:i.commit(a[o-2],a[o],i.commitType.NORMAL,a[o-4]);break;case 84:i.commit(a[o],a[o-2],i.commitType.NORMAL,a[o-4]);break;case 85:i.commit(a[o],a[o-4],i.commitType.NORMAL,a[o-2]);break;case 86:i.commit(a[o-2],a[o-4],i.commitType.NORMAL,a[o]);break;case 87:i.commit(a[o-6],a[o-4],a[o-2],a[o]);break;case 88:i.commit(a[o-6],a[o-4],a[o],a[o-2]);break;case 89:i.commit(a[o-6],a[o-2],a[o-4],a[o]);break;case 90:i.commit(a[o-6],a[o],a[o-4],a[o-2]);break;case 91:i.commit(a[o-6],a[o-2],a[o],a[o-4]);break;case 92:i.commit(a[o-6],a[o],a[o-2],a[o-4]);break;case 93:i.commit(a[o-4],a[o-6],a[o-2],a[o]);break;case 94:i.commit(a[o-4],a[o-6],a[o],a[o-2]);break;case 95:i.commit(a[o-2],a[o-6],a[o-4],a[o]);break;case 96:i.commit(a[o],a[o-6],a[o-4],a[o-2]);break;case 97:i.commit(a[o-2],a[o-6],a[o],a[o-4]);break;case 98:i.commit(a[o],a[o-6],a[o-2],a[o-4]);break;case 99:i.commit(a[o],a[o-4],a[o-2],a[o-6]);break;case 100:i.commit(a[o-2],a[o-4],a[o],a[o-6]);break;case 101:i.commit(a[o],a[o-2],a[o-4],a[o-6]);break;case 102:i.commit(a[o-2],a[o],a[o-4],a[o-6]);break;case 103:i.commit(a[o-4],a[o-2],a[o],a[o-6]);break;case 104:i.commit(a[o-4],a[o],a[o-2],a[o-6]);break;case 105:i.commit(a[o-2],a[o-4],a[o-6],a[o]);break;case 106:i.commit(a[o],a[o-4],a[o-6],a[o-2]);break;case 107:i.commit(a[o-2],a[o],a[o-6],a[o-4]);break;case 108:i.commit(a[o],a[o-2],a[o-6],a[o-4]);break;case 109:i.commit(a[o-4],a[o-2],a[o-6],a[o]);break;case 110:i.commit(a[o-4],a[o],a[o-6],a[o-2]);break;case 111:this.$="";break;case 112:this.$=a[o];break;case 113:this.$=i.commitType.NORMAL;break;case 114:this.$=i.commitType.REVERSE;break;case 115:this.$=i.commitType.HIGHLIGHT;break;case 118:i.parseDirective("%%{","open_directive");break;case 119:i.parseDirective(a[o],"type_directive");break;case 120:a[o]=a[o].trim().replace(/'/g,'"'),i.parseDirective(a[o],"arg_directive");break;case 121:i.parseDirective("}%%","close_directive","gitGraph")}},table:[{3:1,4:2,5:3,6:T=[1,4],8:x=[1,7],14:w=[1,5],46:8,50:Ib=[1,9],55:m=[1,6]},{1:[3]},{3:10,4:2,5:3,6:T,8:x,14:w,46:8,50:Ib,55:m},{3:11,4:2,5:3,6:T,8:x,14:w,46:8,50:Ib,55:m},{7:12,8:Ib=[2,6],9:[1,13],10:[1,14],11:15,14:t_=[1,16]},s(Su=[6,8,14,20,22,24,25,27,29,32,37,40,50,55],[2,124]),s(Su,[2,125]),s(Su,[2,126]),{47:17,51:[1,18]},{51:[2,118]},{1:[2,1]},{1:[2,2]},{8:[1,19]},{7:20,8:Ib,11:15,14:t_},{9:[1,21]},s(En,[2,10],{12:22,13:[1,23]}),s(a,[2,9]),{9:[1,25],48:24,53:ic},s([9,53],[2,119]),{1:[2,3]},{8:[1,27]},{7:28,8:Ib,11:15,14:t_},{8:[2,7],14:[1,31],15:29,16:30,17:32,18:33,19:34,20:[1,35],22:[1,36],24:[1,37],25:[1,38],26:39,27:[1,40],29:[1,44],32:[1,43],37:[1,42],40:[1,41]},s(a,[2,8]),s(fe,[2,116]),{49:45,52:[1,46]},s(fe,[2,121]),{1:[2,4]},{8:[1,47]},s(En,[2,11]),{4:48,8:x,14:w,55:m},s(En,[2,13]),s(e,[2,14]),s(e,[2,15]),s(e,[2,16]),{21:[1,49]},{23:[1,50]},s(e,[2,19]),s(e,[2,20]),s(e,[2,21]),{28:51,34:Sn,54:cb},s(e,[2,111],{41:54,33:[1,57],34:[1,59],35:[1,55],38:[1,56],42:[1,58]}),{28:60,34:Sn,54:cb},{33:[1,61],35:[1,62]},{28:63,34:Sn,54:cb},{48:64,53:ic},{53:[2,120]},{1:[2,5]},s(En,[2,12]),s(e,[2,17]),s(e,[2,18]),s(e,[2,22]),s(y,[2,122]),s(y,[2,123]),s(e,[2,46]),{34:[1,65]},{39:66,43:ab,44:sb,45:ob},{34:[1,70]},{34:[1,71]},s(e,[2,112]),s(e,[2,30],{33:[1,72],35:[1,74],38:[1,73]}),{34:[1,75]},{34:[1,76],36:[1,77]},s(e,[2,23],{30:[1,78]}),s(fe,[2,117]),s(e,[2,47],{33:[1,80],38:[1,79],42:[1,81]}),s(e,[2,48],{33:[1,83],35:[1,82],42:[1,84]}),s(nb,[2,113]),s(nb,[2,114]),s(nb,[2,115]),s(e,[2,51],{35:[1,85],38:[1,86],42:[1,87]}),s(e,[2,62],{33:[1,90],35:[1,88],38:[1,89]}),{34:[1,91]},{39:92,43:ab,44:sb,45:ob},{34:[1,93]},s(e,[2,25],{35:[1,94]}),{33:[1,95]},{33:[1,96]},{31:[1,97]},{39:98,43:ab,44:sb,45:ob},{34:[1,99]},{34:[1,100]},{34:[1,101]},{34:[1,102]},{34:[1,103]},{34:[1,104]},{39:105,43:ab,44:sb,45:ob},{34:[1,106]},{34:[1,107]},{39:108,43:ab,44:sb,45:ob},{34:[1,109]},s(e,[2,31],{35:[1,111],38:[1,110]}),s(e,[2,32],{33:[1,113],35:[1,112]}),s(e,[2,33],{33:[1,114],38:[1,115]}),{34:[1,116],36:[1,117]},{34:[1,118]},{34:[1,119]},s(e,[2,24]),s(e,[2,49],{33:[1,120],42:[1,121]}),s(e,[2,53],{38:[1,122],42:[1,123]}),s(e,[2,63],{33:[1,125],38:[1,124]}),s(e,[2,50],{33:[1,126],42:[1,127]}),s(e,[2,55],{35:[1,128],42:[1,129]}),s(e,[2,66],{33:[1,131],35:[1,130]}),s(e,[2,52],{38:[1,132],42:[1,133]}),s(e,[2,54],{35:[1,134],42:[1,135]}),s(e,[2,67],{35:[1,137],38:[1,136]}),s(e,[2,64],{33:[1,139],38:[1,138]}),s(e,[2,65],{33:[1,141],35:[1,140]}),s(e,[2,68],{35:[1,143],38:[1,142]}),{39:144,43:ab,44:sb,45:ob},{34:[1,145]},{34:[1,146]},{34:[1,147]},{34:[1,148]},{39:149,43:ab,44:sb,45:ob},s(e,[2,26]),s(e,[2,27]),s(e,[2,28]),s(e,[2,29]),{34:[1,150]},{34:[1,151]},{39:152,43:ab,44:sb,45:ob},{34:[1,153]},{39:154,43:ab,44:sb,45:ob},{34:[1,155]},{34:[1,156]},{34:[1,157]},{34:[1,158]},{34:[1,159]},{34:[1,160]},{34:[1,161]},{39:162,43:ab,44:sb,45:ob},{34:[1,163]},{34:[1,164]},{34:[1,165]},{39:166,43:ab,44:sb,45:ob},{34:[1,167]},{39:168,43:ab,44:sb,45:ob},{34:[1,169]},{34:[1,170]},{34:[1,171]},{39:172,43:ab,44:sb,45:ob},{34:[1,173]},s(e,[2,37],{35:[1,174]}),s(e,[2,38],{38:[1,175]}),s(e,[2,36],{33:[1,176]}),s(e,[2,39],{35:[1,177]}),s(e,[2,34],{38:[1,178]}),s(e,[2,35],{33:[1,179]}),s(e,[2,60],{42:[1,180]}),s(e,[2,73],{33:[1,181]}),s(e,[2,61],{42:[1,182]}),s(e,[2,84],{38:[1,183]}),s(e,[2,74],{33:[1,184]}),s(e,[2,83],{38:[1,185]}),s(e,[2,59],{42:[1,186]}),s(e,[2,72],{33:[1,187]}),s(e,[2,58],{42:[1,188]}),s(e,[2,78],{35:[1,189]}),s(e,[2,71],{33:[1,190]}),s(e,[2,77],{35:[1,191]}),s(e,[2,57],{42:[1,192]}),s(e,[2,85],{38:[1,193]}),s(e,[2,56],{42:[1,194]}),s(e,[2,79],{35:[1,195]}),s(e,[2,80],{35:[1,196]}),s(e,[2,86],{38:[1,197]}),s(e,[2,70],{33:[1,198]}),s(e,[2,81],{38:[1,199]}),s(e,[2,69],{33:[1,200]}),s(e,[2,75],{35:[1,201]}),s(e,[2,76],{35:[1,202]}),s(e,[2,82],{38:[1,203]}),{34:[1,204]},{39:205,43:ab,44:sb,45:ob},{34:[1,206]},{34:[1,207]},{39:208,43:ab,44:sb,45:ob},{34:[1,209]},{34:[1,210]},{34:[1,211]},{34:[1,212]},{39:213,43:ab,44:sb,45:ob},{34:[1,214]},{39:215,43:ab,44:sb,45:ob},{34:[1,216]},{34:[1,217]},{34:[1,218]},{34:[1,219]},{34:[1,220]},{34:[1,221]},{34:[1,222]},{39:223,43:ab,44:sb,45:ob},{34:[1,224]},{34:[1,225]},{34:[1,226]},{39:227,43:ab,44:sb,45:ob},{34:[1,228]},{39:229,43:ab,44:sb,45:ob},{34:[1,230]},{34:[1,231]},{34:[1,232]},{39:233,43:ab,44:sb,45:ob},s(e,[2,40]),s(e,[2,42]),s(e,[2,41]),s(e,[2,43]),s(e,[2,45]),s(e,[2,44]),s(e,[2,101]),s(e,[2,102]),s(e,[2,99]),s(e,[2,100]),s(e,[2,104]),s(e,[2,103]),s(e,[2,108]),s(e,[2,107]),s(e,[2,106]),s(e,[2,105]),s(e,[2,110]),s(e,[2,109]),s(e,[2,98]),s(e,[2,97]),s(e,[2,96]),s(e,[2,95]),s(e,[2,93]),s(e,[2,94]),s(e,[2,92]),s(e,[2,91]),s(e,[2,90]),s(e,[2,89]),s(e,[2,87]),s(e,[2,88])],defaultActions:{9:[2,118],10:[2,1],11:[2,2],19:[2,3],27:[2,4],46:[2,120],47:[2,5]},parseError:function(t,e){var r;if(!e.recoverable)throw(r=new Error(t)).hash=e,r;this.trace(t)},parse:function(t){var e,r=this,i=[0],n=[],a=[null],s=[],o=this.table,l="",c=0,h=0,u=1,d=s.slice.call(arguments,1),p=Object.create(this.lexer),f={yy:{}};for(e in this.yy)Object.prototype.hasOwnProperty.call(this.yy,e)&&(f.yy[e]=this.yy[e]);p.setInput(t,f.yy),f.yy.lexer=p,f.yy.parser=this,"u"<typeof p.yylloc&&(p.yylloc={});var g=p.yylloc,y=(s.push(g),p.options&&p.options.ranges);"function"==typeof f.yy.parseError?this.parseError=f.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;for(var m,b,_,x,v,k,w={};;){if(b=i[i.length-1],"u"<typeof(_=this.defaultActions[b]||((null===m||"u"<typeof m)&&(T=void 0,"number"!=typeof(T=n.pop()||p.lex()||u)&&(T instanceof Array&&(T=(n=T).pop()),T=r.symbols_[T]||T),m=T),o[b]&&o[b][m]))||!_.length||!_[0]){var T="",C=[];for(x in o[b])this.terminals_[x]&&2<x&&C.push("'"+this.terminals_[x]+"'");T=p.showPosition?"Parse error on line "+(c+1)+`:
`+p.showPosition()+`
Expecting `+C.join(", ")+", got '"+(this.terminals_[m]||m)+"'":"Parse error on line "+(c+1)+": Unexpected "+(m==u?"end of input":"'"+(this.terminals_[m]||m)+"'"),this.parseError(T,{text:p.match,token:this.terminals_[m]||m,line:p.yylineno,loc:g,expected:C})}if(_[0]instanceof Array&&1<_.length)throw new Error("Parse Error: multiple actions possible at state: "+b+", token: "+m);switch(_[0]){case 1:i.push(m),a.push(p.yytext),s.push(p.yylloc),i.push(_[1]),m=null,h=p.yyleng,l=p.yytext,c=p.yylineno,g=p.yylloc;break;case 2:if(v=this.productions_[_[1]][1],w.$=a[a.length-v],w._$={first_line:s[s.length-(v||1)].first_line,last_line:s[s.length-1].last_line,first_column:s[s.length-(v||1)].first_column,last_column:s[s.length-1].last_column},y&&(w._$.range=[s[s.length-(v||1)].range[0],s[s.length-1].range[1]]),typeof(k=this.performAction.apply(w,[l,h,c,f.yy,_[1],a,s].concat(d)))<"u")return k;v&&(i=i.slice(0,-1*v*2),a=a.slice(0,-1*v),s=s.slice(0,-1*v)),i.push(this.productions_[_[1]][0]),a.push(w.$),s.push(w._$),k=o[i[i.length-2]][i[i.length-1]],i.push(k);break;case 3:return!0}}return!0}}).lexer={EOF:1,parseError:function(t,e){if(!this.yy.parser)throw new Error(t);this.yy.parser.parseError(t,e)},setInput:function(t,e){return this.yy=e||this.yy||{},this._input=t,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var t=this._input[0];return this.yytext+=t,this.yyleng++,this.offset++,this.match+=t,this.matched+=t,t.match(/(?:\r\n?|\n).*/g)?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),t},unput:function(t){var e=t.length,r=t.split(/(?:\r\n?|\n)/g),t=(this._input=t+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-e),this.offset-=e,this.match.split(/(?:\r\n?|\n)/g)),i=(this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),r.length-1&&(this.yylineno-=r.length-1),this.yylloc.range);return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:r?(r.length===t.length?this.yylloc.first_column:0)+t[t.length-r.length].length-r[0].length:this.yylloc.first_column-e},this.options.ranges&&(this.yylloc.range=[i[0],i[0]+this.yyleng-e]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){return this.options.backtrack_lexer?(this._backtrack=!0,this):this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},less:function(t){this.unput(this.match.slice(t))},pastInput:function(){var t=this.matched.substr(0,this.matched.length-this.match.length);return(20<t.length?"...":"")+t.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var t=this.match;return t.length<20&&(t+=this._input.substr(0,20-t.length)),(t.substr(0,20)+(20<t.length?"...":"")).replace(/\n/g,"")},showPosition:function(){var t=this.pastInput(),e=new Array(t.length+1).join("-");return t+this.upcomingInput()+`
`+e+"^"},test_match:function(t,e){var r,i;if(this.options.backtrack_lexer&&(i={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges)&&(i.yylloc.range=this.yylloc.range.slice(0)),(r=t[0].match(/(?:\r\n?|\n).*/g))&&(this.yylineno+=r.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:r?r[r.length-1].length-r[r.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+t[0].length},this.yytext+=t[0],this.match+=t[0],this.matches=t,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(t[0].length),this.matched+=t[0],r=this.performAction.call(this,this.yy,this,e,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),r)return r;if(this._backtrack)for(var n in i)this[n]=i[n];return!1},next:function(){if(this.done)return this.EOF;var t,e,r,i;this._input||(this.done=!0),this._more||(this.yytext="",this.match="");for(var n=this._currentRules(),a=0;a<n.length;a++)if((r=this._input.match(this.rules[n[a]]))&&(!e||r[0].length>e[0].length)){if(e=r,i=a,this.options.backtrack_lexer){if(!1!==(t=this.test_match(r,n[a])))return t;if(this._backtrack){e=!1;continue}return!1}if(!this.options.flex)break}return e?!1!==(t=this.test_match(e,n[i]))&&t:""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){return this.next()||this.lex()},begin:function(t){this.conditionStack.push(t)},popState:function(){return 0<this.conditionStack.length-1?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return(this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]]:this.conditions.INITIAL).rules},topState:function(t){return 0<=(t=this.conditionStack.length-1-Math.abs(t||0))?this.conditionStack[t]:"INITIAL"},pushState:function(t){this.begin(t)},stateStackSize:function(){return this.conditionStack.length},options:{"case-insensitive":!0},performAction:function(t,e,r,i){switch(r){case 0:return this.begin("open_directive"),50;case 1:return this.begin("type_directive"),51;case 2:return this.popState(),this.begin("arg_directive"),9;case 3:return this.popState(),this.popState(),53;case 4:return 52;case 5:return this.begin("acc_title"),20;case 6:return this.popState(),"acc_title_value";case 7:return this.begin("acc_descr"),22;case 8:return this.popState(),"acc_descr_value";case 9:this.begin("acc_descr_multiline");break;case 10:this.popState();break;case 11:return"acc_descr_multiline_value";case 12:return 14;case 13:case 14:break;case 15:return 6;case 16:return 40;case 17:return 33;case 18:return 38;case 19:return 42;case 20:return 43;case 21:return 44;case 22:return 45;case 23:return 35;case 24:return 29;case 25:return 30;case 26:return 37;case 27:return 32;case 28:return 27;case 29:case 30:return 10;case 31:return 9;case 32:return"CARET";case 33:this.begin("options");break;case 34:this.popState();break;case 35:return 13;case 36:return 36;case 37:this.begin("string");break;case 38:this.popState();break;case 39:return 34;case 40:return 31;case 41:return 54;case 42:return 8}},rules:[/^(?:%%\{)/i,/^(?:((?:(?!\}%%)[^:.])*))/i,/^(?::)/i,/^(?:\}%%)/i,/^(?:((?:(?!\}%%).|\n)*))/i,/^(?:accTitle\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*\{\s*)/i,/^(?:[\}])/i,/^(?:[^\}]*)/i,/^(?:(\r?\n)+)/i,/^(?:#[^\n]*)/i,/^(?:%[^\n]*)/i,/^(?:gitGraph\b)/i,/^(?:commit(?=\s|$))/i,/^(?:id:)/i,/^(?:type:)/i,/^(?:msg:)/i,/^(?:NORMAL\b)/i,/^(?:REVERSE\b)/i,/^(?:HIGHLIGHT\b)/i,/^(?:tag:)/i,/^(?:branch(?=\s|$))/i,/^(?:order:)/i,/^(?:merge(?=\s|$))/i,/^(?:cherry-pick(?=\s|$))/i,/^(?:checkout(?=\s|$))/i,/^(?:LR\b)/i,/^(?:BT\b)/i,/^(?::)/i,/^(?:\^)/i,/^(?:options\r?\n)/i,/^(?:[ \r\n\t]+end\b)/i,/^(?:[\s\S]+(?=[ \r\n\t]+end))/i,/^(?:["]["])/i,/^(?:["])/i,/^(?:["])/i,/^(?:[^"]*)/i,/^(?:[0-9]+(?=\s|$))/i,/^(?:\w([-\./\w]*[-\w])?)/i,/^(?:$)/i,/^(?:\s+)/i],conditions:{acc_descr_multiline:{rules:[10,11],inclusive:!1},acc_descr:{rules:[8],inclusive:!1},acc_title:{rules:[6],inclusive:!1},close_directive:{rules:[],inclusive:!1},arg_directive:{rules:[3,4],inclusive:!1},type_directive:{rules:[2,3],inclusive:!1},open_directive:{rules:[1],inclusive:!1},options:{rules:[34,35],inclusive:!1},string:{rules:[38,39],inclusive:!1},INITIAL:{rules:[0,5,7,9,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,36,37,40,41,42,43],inclusive:!0}}};var Su=new((Au.prototype=T).Parser=Au);function s(t,e,r,i){for(r=r||{},i=t.length;i--;r[t[i]]=e);return r}function Au(){this.yy={}}const Du=Su.parser=Su,Lu=t=>null!==t.match(/^\s*gitGraph/);let Mu="",Nu="",Ou="";function Bu(){Mu="",Ou="",Nu=""}function Iu(t){Mu=ju(t).replace(/^\s+/g,"")}function Fu(){return Mu||Nu}function Ru(t){Ou=ju(t).replace(/\n\s+/g,`
`)}function Pu(){return Ou}function $u(t){Nu=ju(t)}function Yu(){return Nu}const ju=t=>Go(t,J());let zu=J().gitGraph.mainBranchName,Uu=J().gitGraph.mainBranchOrder,Wu={},Hu=null,qu={},Vu=(qu[zu]={name:zu,order:Uu},{}),Gu=(Vu[zu]=Hu,zu),Xu="LR",Zu=0;function Qu(){return Wh({length:7})}let Ku={};function Ju(t){var e;if(t=tl.sanitizeText(t,J()),void 0===Vu[t])throw(e=new Error('Trying to checkout branch which is not yet created. (Help try using "branch '+t+'")')).hash={text:"checkout "+t,token:"checkout "+t,line:"1",loc:{first_line:1,last_line:1,first_column:1,last_column:1},expected:['"branch '+t+'"']},e;Gu=t,e=Vu[Gu],Hu=Wu[e]}function t0(t,e,r){e=t.indexOf(e);-1===e?t.push(r):t.splice(e,1,r)}function e0(t){const e=t.reduce((t,e)=>t.seq>e.seq?t:e,t[0]);let r="";t.forEach(function(t){t===e?r+="\t*":r+="\t|"});var i,n=[r,e.id,e.seq];for(i in Vu)Vu[i]===e.id&&n.push(i);if(S.debug(n.join(" ")),e.parents&&2==e.parents.length){var a=Wu[e.parents[0]];t0(t,e,a),t.push(Wu[e.parents[1]])}else{if(0==e.parents.length)return;a=Wu[e.parents];t0(t,e,a)}e0(t=function(t,i){const n=Object.create(null);return t.reduce((t,e)=>{var r=i(e);return n[r]||(n[r]=!0,t.push(e)),t},[])}(t,t=>t.id))}function r0(){var t=Object.keys(Wu).map(function(t){return Wu[t]});return t.forEach(function(t){S.debug(t.id)}),t.sort((t,e)=>t.seq-e.seq),t}const i0={NORMAL:0,REVERSE:1,HIGHLIGHT:2,MERGE:3,CHERRY_PICK:4},n0={parseDirective:function(t,e,r){Jv.parseDirective(this,t,e,r)},getConfig:()=>J().gitGraph,setDirection:function(t){Xu=t},setOptions:function(t){S.debug("options str",t),t=(t=t&&t.trim())||"{}";try{Ku=JSON.parse(t)}catch(t){S.error("error while parsing gitGraph options",t.message)}},getOptions:function(){return Ku},commit:function(t,e,r,i){S.debug("Entering commit:",t,e,r,i),e=tl.sanitizeText(e,J()),t=tl.sanitizeText(t,J()),i=tl.sanitizeText(i,J());e={id:e||Zu+"-"+Qu(),message:t,seq:Zu++,type:r||i0.NORMAL,tag:i||"",parents:null==Hu?[]:[Hu.id],branch:Gu};Hu=e,Wu[e.id]=e,Vu[Gu]=e.id,S.debug("in pushCommit "+e.id)},branch:function(t,e){var r;if(t=tl.sanitizeText(t,J()),void 0!==Vu[t])throw(r=new Error('Trying to create an existing branch. (Help: Either use a new name if you want create a new branch or try using "checkout '+t+'")')).hash={text:"branch "+t,token:"branch "+t,line:"1",loc:{first_line:1,last_line:1,first_column:1,last_column:1},expected:['"checkout '+t+'"']},r;Vu[t]=null!=Hu?Hu.id:null,qu[t]={name:t,order:e?parseInt(e,10):null},Ju(t),S.debug("in createBranch")},merge:function(t,e,r,i){t=tl.sanitizeText(t,J()),e=tl.sanitizeText(e,J());var n,a=Wu[Vu[Gu]],s=Wu[Vu[t]];if(Gu===t)throw(n=new Error('Incorrect usage of "merge". Cannot merge a branch to itself')).hash={text:"merge "+t,token:"merge "+t,line:"1",loc:{first_line:1,last_line:1,first_column:1,last_column:1},expected:["branch abc"]},n;if(void 0===a||!a)throw(n=new Error('Incorrect usage of "merge". Current branch ('+Gu+")has no commits")).hash={text:"merge "+t,token:"merge "+t,line:"1",loc:{first_line:1,last_line:1,first_column:1,last_column:1},expected:["commit"]},n;if(void 0===Vu[t])throw(n=new Error('Incorrect usage of "merge". Branch to be merged ('+t+") does not exist")).hash={text:"merge "+t,token:"merge "+t,line:"1",loc:{first_line:1,last_line:1,first_column:1,last_column:1},expected:["branch "+t]},n;if(void 0===s||!s)throw(n=new Error('Incorrect usage of "merge". Branch to be merged ('+t+") has no commits")).hash={text:"merge "+t,token:"merge "+t,line:"1",loc:{first_line:1,last_line:1,first_column:1,last_column:1},expected:['"commit"']},n;if(a===s)throw(n=new Error('Incorrect usage of "merge". Both branches have same head')).hash={text:"merge "+t,token:"merge "+t,line:"1",loc:{first_line:1,last_line:1,first_column:1,last_column:1},expected:["branch abc"]},n;if(e&&void 0!==Wu[e])throw(a=new Error('Incorrect usage of "merge". Commit with id:'+e+" already exists, use different custom Id")).hash={text:"merge "+t+e+r+i,token:"merge "+t+e+r+i,line:"1",loc:{first_line:1,last_line:1,first_column:1,last_column:1},expected:["merge "+t+" "+e+"_UNIQUE "+r+" "+i]},a;s={id:e||Zu+"-"+Qu(),message:"merged branch "+t+" into "+Gu,seq:Zu++,parents:[null==Hu?null:Hu.id,Vu[t]],branch:Gu,type:i0.MERGE,customType:r,customId:!!e,tag:i||""};Hu=s,Wu[s.id]=s,Vu[Gu]=s.id,S.debug(Vu),S.debug("in mergeBranch")},cherryPick:function(t,e,r){if(S.debug("Entering cherryPick:",t,e,r),t=tl.sanitizeText(t,J()),e=tl.sanitizeText(e,J()),r=tl.sanitizeText(r,J()),!t||void 0===Wu[t])throw(i=new Error('Incorrect usage of "cherryPick". Source commit id should exist and provided')).hash={text:"cherryPick "+t+" "+e,token:"cherryPick "+t+" "+e,line:"1",loc:{first_line:1,last_line:1,first_column:1,last_column:1},expected:["cherry-pick abc"]},i;var i=Wu[t],n=i.branch;if(i.type===i0.MERGE)throw(a=new Error('Incorrect usage of "cherryPick". Source commit should not be a merge commit')).hash={text:"cherryPick "+t+" "+e,token:"cherryPick "+t+" "+e,line:"1",loc:{first_line:1,last_line:1,first_column:1,last_column:1},expected:["cherry-pick abc"]},a;if(!e||void 0===Wu[e]){if(n===Gu)throw(a=new Error('Incorrect usage of "cherryPick". Source commit is already on current branch')).hash={text:"cherryPick "+t+" "+e,token:"cherryPick "+t+" "+e,line:"1",loc:{first_line:1,last_line:1,first_column:1,last_column:1},expected:["cherry-pick abc"]},a;var a,n=Wu[Vu[Gu]];if(void 0===n||!n)throw(a=new Error('Incorrect usage of "cherry-pick". Current branch ('+Gu+")has no commits")).hash={text:"cherryPick "+t+" "+e,token:"cherryPick "+t+" "+e,line:"1",loc:{first_line:1,last_line:1,first_column:1,last_column:1},expected:["cherry-pick abc"]},a;n={id:Zu+"-"+Qu(),message:"cherry-picked "+i+" into "+Gu,seq:Zu++,parents:[null==Hu?null:Hu.id,i.id],branch:Gu,type:i0.CHERRY_PICK,tag:null!=r?r:"cherry-pick:"+i.id};Hu=n,Wu[n.id]=n,Vu[Gu]=n.id,S.debug(Vu),S.debug("in cherryPick")}},checkout:Ju,prettyPrint:function(){S.debug(Wu),e0([r0()[0]])},clear:function(){Wu={},Hu=null;var t=J().gitGraph.mainBranchName,e=J().gitGraph.mainBranchOrder;(Vu={})[t]=null,(qu={})[t]={name:t,order:e},Gu=t,Zu=0,Bu()},getBranchesAsObjArray:function(){return Object.values(qu).map((t,e)=>null!==t.order?t:{...t,order:parseFloat("0."+e,10)}).sort((t,e)=>t.order-e.order).map(({name:t})=>({name:t}))},getBranches:function(){return Vu},getCommits:function(){return Wu},getCommitsArray:r0,getCurrentBranch:function(){return Gu},getDirection:function(){return Xu},getHead:function(){return Hu},setAccTitle:Iu,getAccTitle:Fu,getAccDescription:Pu,setAccDescription:Ru,setDiagramTitle:$u,getDiagramTitle:Yu,commitType:i0};let a0={};const s0={NORMAL:0,REVERSE:1,HIGHLIGHT:2,MERGE:3,CHERRY_PICK:4},o0=8;let l0={},c0={},h0=[],u0=0;const d0=(t,s,o)=>{const l=vu().gitGraph,c=t.append("g").attr("class","commit-bullets"),h=t.append("g").attr("class","commit-labels");let u=0;Object.keys(s).sort((t,e)=>s[t].seq-s[e].seq).forEach(r=>{var t,i,e,r=s[r],n=l0[r.branch].pos,a=u+10;if(o){let t,e=void 0!==r.customType&&""!==r.customType?r.customType:r.type;switch(e){case s0.NORMAL:t="commit-normal";break;case s0.REVERSE:t="commit-reverse";break;case s0.HIGHLIGHT:t="commit-highlight";break;case s0.MERGE:t="commit-merge";break;case s0.CHERRY_PICK:t="commit-cherry-pick";break;default:t="commit-normal"}e===s0.HIGHLIGHT?((i=c.append("rect")).attr("x",a-10),i.attr("y",n-10),i.attr("height",20),i.attr("width",20),i.attr("class",`commit ${r.id} commit-highlight${l0[r.branch].index%o0} ${t}-outer`),c.append("rect").attr("x",a-6).attr("y",n-6).attr("height",12).attr("width",12).attr("class",`commit ${r.id} commit${l0[r.branch].index%o0} ${t}-inner`)):e===s0.CHERRY_PICK?(c.append("circle").attr("cx",a).attr("cy",n).attr("r",10).attr("class",`commit ${r.id} `+t),c.append("circle").attr("cx",a-3).attr("cy",n+2).attr("r",2.75).attr("fill","#fff").attr("class",`commit ${r.id} `+t),c.append("circle").attr("cx",a+3).attr("cy",n+2).attr("r",2.75).attr("fill","#fff").attr("class",`commit ${r.id} `+t),c.append("line").attr("x1",a+3).attr("y1",n+1).attr("x2",a).attr("y2",n-5).attr("stroke","#fff").attr("class",`commit ${r.id} `+t),c.append("line").attr("x1",a-3).attr("y1",n+1).attr("x2",a).attr("y2",n-5).attr("stroke","#fff").attr("class",`commit ${r.id} `+t)):((i=c.append("circle")).attr("cx",a),i.attr("cy",n),i.attr("r",r.type===s0.MERGE?9:10),i.attr("class",`commit ${r.id} commit`+l0[r.branch].index%o0),e===s0.MERGE&&((i=c.append("circle")).attr("cx",a),i.attr("cy",n),i.attr("r",6),i.attr("class",`commit ${t} ${r.id} commit`+l0[r.branch].index%o0)),e===s0.REVERSE&&c.append("path").attr("d",`M ${a-5},${n-5}L${a+5},${n+5}M${a-5},${n+5}L${a+5},`+(n-5)).attr("class",`commit ${t} ${r.id} commit`+l0[r.branch].index%o0))}c0[r.id]={x:u+10,y:n},o&&(r.type!==s0.CHERRY_PICK&&(r.customId&&r.type===s0.MERGE||r.type!==s0.MERGE)&&l.showCommitLabel&&(a=(i=h.append("g")).insert("rect").attr("class","commit-label-bkg"),t=(e=i.append("text").attr("x",u).attr("y",n+25).attr("class","commit-label").text(r.id)).node().getBBox(),a.attr("x",u+10-t.width/2-2).attr("y",n+13.5).attr("width",t.width+4).attr("height",t.height+4),e.attr("x",u+10-t.width/2),l.rotateCommitLabel)&&(a=-7.5-(t.width+10)/25*9.5,e=10+t.width/25*8.5,i.attr("transform","translate("+a+", "+e+") rotate("+-45+", "+u+", "+n+")")),r.tag)&&(t=h.insert("polygon"),i=h.append("circle"),e=(a=h.append("text").attr("y",n-16).attr("class","tag-label").text(r.tag)).node().getBBox(),a.attr("x",u+10-e.width/2),r=e.height/2,a=n-19.2,t.attr("class","tag-label-bkg").attr("points",`
          ${u-e.width/2-2},${2+a}
          ${u-e.width/2-2},${a-2}
          ${u+10-e.width/2-4},${a-r-2}
          ${u+10+e.width/2+4},${a-r-2}
          ${u+10+e.width/2+4},${a+r+2}
          ${u+10-e.width/2-4},`+(a+r+2)),i.attr("cx",u-e.width/2+2).attr("cy",a).attr("r",1.5).attr("class","tag-hole")),(u+=50)>u0&&(u0=u)})},p0=(e,r,i)=>0<Object.keys(i).filter(t=>i[t].branch===r.branch&&i[t].seq>e.seq&&i[t].seq<r.seq).length,f0=(t,e,r=0)=>{const i=t+Math.abs(t-e)/2;var n;return 5<r?i:h0.every(t=>10<=Math.abs(t-i))?(h0.push(i),i):(n=Math.abs(t-e),f0(t,e-n/5,r+1))},g0=(t,p)=>{const f=t.append("g").attr("class","commit-arrows");Object.keys(p).forEach(t=>{const d=p[t];d.parents&&0<d.parents.length&&d.parents.forEach(s=>{{var o=f,l=(s=p[s],d),c=p,h=c0[s.id],u=c0[l.id],c=p0(s,l,c);let t="",e,r=0,i=0,n=l0[l.branch].index,a;c?(t="A 10 10, 0, 0, 0,",e="A 10 10, 0, 0, 1,",r=10,i=10,n=l0[l.branch].index,c=h.y<u.y?f0(h.y,u.y):f0(u.y,h.y),a=h.y<u.y?`M ${h.x} ${h.y} L ${h.x} ${c-r} ${t} ${h.x+i} ${c} L ${u.x-r} ${c} ${e} ${u.x} ${c+i} L ${u.x} `+u.y:`M ${h.x} ${h.y} L ${h.x} ${c+r} ${e} ${h.x+i} ${c} L ${u.x-r} ${c} ${t} ${u.x} ${c-i} L ${u.x} `+u.y):(h.y<u.y&&(t="A 20 20, 0, 0, 0,",r=20,i=20,n=l0[l.branch].index,a=`M ${h.x} ${h.y} L ${h.x} ${u.y-r} ${t} ${h.x+i} ${u.y} L ${u.x} `+u.y),h.y>u.y&&(t="A 20 20, 0, 0, 0,",r=20,i=20,n=l0[s.branch].index,a=`M ${h.x} ${h.y} L ${u.x-r} ${h.y} ${t} ${u.x} ${h.y-i} L ${u.x} `+u.y),h.y===u.y&&(n=l0[s.branch].index,a=`M ${h.x} ${h.y} L ${h.x} ${u.y-r} ${t} ${h.x+i} ${u.y} L ${u.x} `+u.y)),o.append("path").attr("d",a).attr("class","arrow arrow"+n%o0)}})})},y0=(t,e)=>{const a=vu().gitGraph,s=t.append("g");e.forEach((t,e)=>{var e=e%o0,r=l0[t.name].pos,i=s.append("line"),i=(i.attr("x1",0),i.attr("y1",r),i.attr("x2",u0),i.attr("y2",r),i.attr("class","branch branch"+e),h0.push(r),t.name),t=(t=>{var e=document.createElementNS("http://www.w3.org/2000/svg","text");let r=[];for(const n of r="string"==typeof t?t.split(/\\n|\n|<br\s*\/?>/gi):Array.isArray(t)?t:[]){var i=document.createElementNS("http://www.w3.org/2000/svg","tspan");i.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve"),i.setAttribute("dy","1em"),i.setAttribute("x","0"),i.setAttribute("class","row"),i.textContent=n.trim(),e.appendChild(i)}return e})(i),i=s.insert("rect"),n=s.insert("g").attr("class","branchLabel").insert("g").attr("class","label branch-label"+e),t=(n.node().appendChild(t),t.getBBox());i.attr("class","branchLabelBkg label"+e).attr("rx",4).attr("ry",4).attr("x",-t.width-4-(!0===a.rotateCommitLabel?30:0)).attr("y",-t.height/2+8).attr("width",t.width+18).attr("height",t.height+4),n.attr("transform","translate("+(-t.width-14-(!0===a.rotateCommitLabel?30:0))+", "+(r-t.height/2-1)+")"),i.attr("transform","translate(-19, "+(r-t.height/2)+")")})},m0={draw:function(t,e,r,i){l0={},c0={},a0={},u0=0,h0=[];const n=vu(),a=n.gitGraph;S.debug("in gitgraph renderer",t+`
`,"id:",e,r),a0=i.db.getCommits();t=i.db.getBranchesAsObjArray();let s=0;t.forEach((t,e)=>{l0[t.name]={pos:s,index:e},s+=50+(a.rotateCommitLabel?40:0)});r=K(`[id="${e}"]`);d0(r,a0,!1),a.showBranches&&y0(r,t),g0(r,a0),d0(r,a0,!0),t1.insertTitle(r,"gitTitleText",a.titleTopMargin,i.db.getDiagramTitle()),wu(void 0,r,a.diagramPadding,null!=(e=a.useMaxWidth)?e:n.useMaxWidth)}},b0=e=>`
  .commit-id,
  .commit-msg,
  .branch-label {
    fill: lightgrey;
    color: lightgrey;
    font-family: 'trebuchet ms', verdana, arial, sans-serif;
    font-family: var(--mermaid-font-family);
  }
  ${[0,1,2,3,4,5,6,7].map(t=>`
        .branch-label${t} { fill: ${e["gitBranchLabel"+t]}; }
        .commit${t} { stroke: ${e["git"+t]}; fill: ${e["git"+t]}; }
        .commit-highlight${t} { stroke: ${e["gitInv"+t]}; fill: ${e["gitInv"+t]}; }
        .label${t}  { fill: ${e["git"+t]}; }
        .arrow${t} { stroke: ${e["git"+t]}; }
        `).join(`
`)}

  .branch {
    stroke-width: 1;
    stroke: ${e.lineColor};
    stroke-dasharray: 2;
  }
  .commit-label { font-size: ${e.commitLabelFontSize}; fill: ${e.commitLabelColor};}
  .commit-label-bkg { font-size: ${e.commitLabelFontSize}; fill: ${e.commitLabelBackground}; opacity: 0.5; }
  .tag-label { font-size: ${e.tagLabelFontSize}; fill: ${e.tagLabelColor};}
  .tag-label-bkg { fill: ${e.tagLabelBackground}; stroke: ${e.tagLabelBorder}; }
  .tag-hole { fill: ${e.textColor}; }

  .commit-merge {
    stroke: ${e.primaryColor};
    fill: ${e.primaryColor};
  }
  .commit-reverse {
    stroke: ${e.primaryColor};
    fill: ${e.primaryColor};
    stroke-width: 3;
  }
  .commit-highlight-outer {
  }
  .commit-highlight-inner {
    stroke: ${e.primaryColor};
    fill: ${e.primaryColor};
  }

  .arrow { stroke-width: 8; stroke-linecap: round; fill: none}
  .gitTitleText {
    text-anchor: middle;
    font-size: 18px;
    fill: ${e.textColor};
  }
  }
`;Ib=[1,33],t_=[1,34],a=[1,35],x=[1,36],w=[1,37],m=[1,72],Sn=[1,73],cb=[1,74],ic=[1,75],En=[1,76],y=[1,77],fe=[1,78],nb=[1,38],ab=[1,39],sb=[1,40],ob=[1,41],e=[1,42],T=[1,43],Su=[1,44],ib=[1,45],M=[1,46],lb=[1,47],hb=[1,48],eb=[1,49],rb=[1,50],ub=[1,51],db=[1,52],p6=[1,53],N=[1,54],O=[1,55],E=[1,56],A=[1,57],B=[1,59],_f=[1,60],L=[1,61],od=[1,62],Md=[1,63],qd=[1,64],i2=[1,65],E2=[1,66],L2=[1,67],M2=[1,68],N2=[1,69],wp=[24,52],kp=[24,44,46,47,48,49,50,51,52,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84],F2=[15,24,44,46,47,48,49,50,51,52,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84],u=[1,94],d=[1,95],_=[1,96],p=[1,97],Rp=[15,24,52],Xp=[7,8,9,10,18,22,25,26,27,28],Tp=[15,24,43,52],Fp=[15,24,43,52,86,87,89,90],gp=[15,43],ef=[44,46,47,48,49,50,51,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84],(C={trace:function(){},yy:{},symbols_:{error:2,start:3,mermaidDoc:4,direction:5,directive:6,direction_tb:7,direction_bt:8,direction_rl:9,direction_lr:10,graphConfig:11,openDirective:12,typeDirective:13,closeDirective:14,NEWLINE:15,":":16,argDirective:17,open_directive:18,type_directive:19,arg_directive:20,close_directive:21,C4_CONTEXT:22,statements:23,EOF:24,C4_CONTAINER:25,C4_COMPONENT:26,C4_DYNAMIC:27,C4_DEPLOYMENT:28,otherStatements:29,diagramStatements:30,otherStatement:31,title:32,accDescription:33,acc_title:34,acc_title_value:35,acc_descr:36,acc_descr_value:37,acc_descr_multiline_value:38,boundaryStatement:39,boundaryStartStatement:40,boundaryStopStatement:41,boundaryStart:42,LBRACE:43,ENTERPRISE_BOUNDARY:44,attributes:45,SYSTEM_BOUNDARY:46,BOUNDARY:47,CONTAINER_BOUNDARY:48,NODE:49,NODE_L:50,NODE_R:51,RBRACE:52,diagramStatement:53,PERSON:54,PERSON_EXT:55,SYSTEM:56,SYSTEM_DB:57,SYSTEM_QUEUE:58,SYSTEM_EXT:59,SYSTEM_EXT_DB:60,SYSTEM_EXT_QUEUE:61,CONTAINER:62,CONTAINER_DB:63,CONTAINER_QUEUE:64,CONTAINER_EXT:65,CONTAINER_EXT_DB:66,CONTAINER_EXT_QUEUE:67,COMPONENT:68,COMPONENT_DB:69,COMPONENT_QUEUE:70,COMPONENT_EXT:71,COMPONENT_EXT_DB:72,COMPONENT_EXT_QUEUE:73,REL:74,BIREL:75,REL_U:76,REL_D:77,REL_L:78,REL_R:79,REL_B:80,REL_INDEX:81,UPDATE_EL_STYLE:82,UPDATE_REL_STYLE:83,UPDATE_LAYOUT_CONFIG:84,attribute:85,STR:86,STR_KEY:87,STR_VALUE:88,ATTRIBUTE:89,ATTRIBUTE_EMPTY:90,$accept:0,$end:1},terminals_:{2:"error",7:"direction_tb",8:"direction_bt",9:"direction_rl",10:"direction_lr",15:"NEWLINE",16:":",18:"open_directive",19:"type_directive",20:"arg_directive",21:"close_directive",22:"C4_CONTEXT",24:"EOF",25:"C4_CONTAINER",26:"C4_COMPONENT",27:"C4_DYNAMIC",28:"C4_DEPLOYMENT",32:"title",33:"accDescription",34:"acc_title",35:"acc_title_value",36:"acc_descr",37:"acc_descr_value",38:"acc_descr_multiline_value",43:"LBRACE",44:"ENTERPRISE_BOUNDARY",46:"SYSTEM_BOUNDARY",47:"BOUNDARY",48:"CONTAINER_BOUNDARY",49:"NODE",50:"NODE_L",51:"NODE_R",52:"RBRACE",54:"PERSON",55:"PERSON_EXT",56:"SYSTEM",57:"SYSTEM_DB",58:"SYSTEM_QUEUE",59:"SYSTEM_EXT",60:"SYSTEM_EXT_DB",61:"SYSTEM_EXT_QUEUE",62:"CONTAINER",63:"CONTAINER_DB",64:"CONTAINER_QUEUE",65:"CONTAINER_EXT",66:"CONTAINER_EXT_DB",67:"CONTAINER_EXT_QUEUE",68:"COMPONENT",69:"COMPONENT_DB",70:"COMPONENT_QUEUE",71:"COMPONENT_EXT",72:"COMPONENT_EXT_DB",73:"COMPONENT_EXT_QUEUE",74:"REL",75:"BIREL",76:"REL_U",77:"REL_D",78:"REL_L",79:"REL_R",80:"REL_B",81:"REL_INDEX",82:"UPDATE_EL_STYLE",83:"UPDATE_REL_STYLE",84:"UPDATE_LAYOUT_CONFIG",86:"STR",87:"STR_KEY",88:"STR_VALUE",89:"ATTRIBUTE",90:"ATTRIBUTE_EMPTY"},productions_:[0,[3,1],[3,1],[3,2],[5,1],[5,1],[5,1],[5,1],[4,1],[6,4],[6,6],[12,1],[13,1],[17,1],[14,1],[11,4],[11,4],[11,4],[11,4],[11,4],[23,1],[23,1],[23,2],[29,1],[29,2],[29,3],[31,1],[31,1],[31,2],[31,2],[31,1],[39,3],[40,3],[40,3],[40,4],[42,2],[42,2],[42,2],[42,2],[42,2],[42,2],[42,2],[41,1],[30,1],[30,2],[30,3],[53,2],[53,2],[53,2],[53,2],[53,2],[53,2],[53,2],[53,2],[53,2],[53,2],[53,2],[53,2],[53,2],[53,2],[53,2],[53,2],[53,2],[53,2],[53,2],[53,2],[53,1],[53,2],[53,2],[53,2],[53,2],[53,2],[53,2],[53,2],[53,2],[53,2],[53,2],[53,2],[45,1],[45,2],[85,1],[85,2],[85,1],[85,1]],performAction:function(t,e,r,i,n,a,s){var o=a.length-1;switch(n){case 4:i.setDirection("TB");break;case 5:i.setDirection("BT");break;case 6:i.setDirection("RL");break;case 7:i.setDirection("LR");break;case 11:i.parseDirective("%%{","open_directive");break;case 12:break;case 13:a[o]=a[o].trim().replace(/'/g,'"'),i.parseDirective(a[o],"arg_directive");break;case 14:i.parseDirective("}%%","close_directive","c4Context");break;case 15:case 16:case 17:case 18:case 19:i.setC4Type(a[o-3]);break;case 26:i.setTitle(a[o].substring(6)),this.$=a[o].substring(6);break;case 27:i.setAccDescription(a[o].substring(15)),this.$=a[o].substring(15);break;case 28:this.$=a[o].trim(),i.setTitle(this.$);break;case 29:case 30:this.$=a[o].trim(),i.setAccDescription(this.$);break;case 35:case 36:a[o].splice(2,0,"ENTERPRISE"),i.addPersonOrSystemBoundary(...a[o]),this.$=a[o];break;case 37:i.addPersonOrSystemBoundary(...a[o]),this.$=a[o];break;case 38:a[o].splice(2,0,"CONTAINER"),i.addContainerBoundary(...a[o]),this.$=a[o];break;case 39:i.addDeploymentNode("node",...a[o]),this.$=a[o];break;case 40:i.addDeploymentNode("nodeL",...a[o]),this.$=a[o];break;case 41:i.addDeploymentNode("nodeR",...a[o]),this.$=a[o];break;case 42:i.popBoundaryParseStack();break;case 46:i.addPersonOrSystem("person",...a[o]),this.$=a[o];break;case 47:i.addPersonOrSystem("external_person",...a[o]),this.$=a[o];break;case 48:i.addPersonOrSystem("system",...a[o]),this.$=a[o];break;case 49:i.addPersonOrSystem("system_db",...a[o]),this.$=a[o];break;case 50:i.addPersonOrSystem("system_queue",...a[o]),this.$=a[o];break;case 51:i.addPersonOrSystem("external_system",...a[o]),this.$=a[o];break;case 52:i.addPersonOrSystem("external_system_db",...a[o]),this.$=a[o];break;case 53:i.addPersonOrSystem("external_system_queue",...a[o]),this.$=a[o];break;case 54:i.addContainer("container",...a[o]),this.$=a[o];break;case 55:i.addContainer("container_db",...a[o]),this.$=a[o];break;case 56:i.addContainer("container_queue",...a[o]),this.$=a[o];break;case 57:i.addContainer("external_container",...a[o]),this.$=a[o];break;case 58:i.addContainer("external_container_db",...a[o]),this.$=a[o];break;case 59:i.addContainer("external_container_queue",...a[o]),this.$=a[o];break;case 60:i.addComponent("component",...a[o]),this.$=a[o];break;case 61:i.addComponent("component_db",...a[o]),this.$=a[o];break;case 62:i.addComponent("component_queue",...a[o]),this.$=a[o];break;case 63:i.addComponent("external_component",...a[o]),this.$=a[o];break;case 64:i.addComponent("external_component_db",...a[o]),this.$=a[o];break;case 65:i.addComponent("external_component_queue",...a[o]),this.$=a[o];break;case 67:i.addRel("rel",...a[o]),this.$=a[o];break;case 68:i.addRel("birel",...a[o]),this.$=a[o];break;case 69:i.addRel("rel_u",...a[o]),this.$=a[o];break;case 70:i.addRel("rel_d",...a[o]),this.$=a[o];break;case 71:i.addRel("rel_l",...a[o]),this.$=a[o];break;case 72:i.addRel("rel_r",...a[o]),this.$=a[o];break;case 73:i.addRel("rel_b",...a[o]),this.$=a[o];break;case 74:a[o].splice(0,1),i.addRel("rel",...a[o]),this.$=a[o];break;case 75:i.updateElStyle("update_el_style",...a[o]),this.$=a[o];break;case 76:i.updateRelStyle("update_rel_style",...a[o]),this.$=a[o];break;case 77:i.updateLayoutConfig("update_layout_config",...a[o]),this.$=a[o];break;case 78:this.$=[a[o]];break;case 79:a[o].unshift(a[o-1]),this.$=a[o];break;case 80:case 82:this.$=a[o].trim();break;case 81:var l={};l[a[o-1].trim()]=a[o].trim(),this.$=l;break;case 83:this.$=""}},table:[{3:1,4:2,5:3,6:4,7:C=[1,6],8:D=[1,7],9:o=[1,8],10:w6=[1,9],11:5,12:10,18:Gb=[1,16],22:e_=[1,11],25:Xb=[1,12],26:i_=[1,13],27:b=[1,14],28:f6=[1,15]},{1:[3]},{1:[2,1]},{1:[2,2]},{3:17,4:2,5:3,6:4,7:C,8:D,9:o,10:w6,11:5,12:10,18:Gb,22:e_,25:Xb,26:i_,27:b,28:f6},{1:[2,8]},{1:[2,4]},{1:[2,5]},{1:[2,6]},{1:[2,7]},{13:18,19:[1,19]},{15:[1,20]},{15:[1,21]},{15:[1,22]},{15:[1,23]},{15:[1,24]},{19:[2,11]},{1:[2,3]},{14:25,16:[1,26],21:D=[1,27]},l([16,21],[2,12]),{23:28,29:29,30:30,31:31,32:Ib,33:t_,34:a,36:x,38:w,39:58,40:70,42:71,44:m,46:Sn,47:cb,48:ic,49:En,50:y,51:fe,53:32,54:nb,55:ab,56:sb,57:ob,58:e,59:T,60:Su,61:ib,62:M,63:lb,64:hb,65:eb,66:rb,67:ub,68:db,69:p6,70:N,71:O,72:E,73:A,74:B,75:_f,76:L,77:od,78:Md,79:qd,80:i2,81:E2,82:L2,83:M2,84:N2},{23:79,29:29,30:30,31:31,32:Ib,33:t_,34:a,36:x,38:w,39:58,40:70,42:71,44:m,46:Sn,47:cb,48:ic,49:En,50:y,51:fe,53:32,54:nb,55:ab,56:sb,57:ob,58:e,59:T,60:Su,61:ib,62:M,63:lb,64:hb,65:eb,66:rb,67:ub,68:db,69:p6,70:N,71:O,72:E,73:A,74:B,75:_f,76:L,77:od,78:Md,79:qd,80:i2,81:E2,82:L2,83:M2,84:N2},{23:80,29:29,30:30,31:31,32:Ib,33:t_,34:a,36:x,38:w,39:58,40:70,42:71,44:m,46:Sn,47:cb,48:ic,49:En,50:y,51:fe,53:32,54:nb,55:ab,56:sb,57:ob,58:e,59:T,60:Su,61:ib,62:M,63:lb,64:hb,65:eb,66:rb,67:ub,68:db,69:p6,70:N,71:O,72:E,73:A,74:B,75:_f,76:L,77:od,78:Md,79:qd,80:i2,81:E2,82:L2,83:M2,84:N2},{23:81,29:29,30:30,31:31,32:Ib,33:t_,34:a,36:x,38:w,39:58,40:70,42:71,44:m,46:Sn,47:cb,48:ic,49:En,50:y,51:fe,53:32,54:nb,55:ab,56:sb,57:ob,58:e,59:T,60:Su,61:ib,62:M,63:lb,64:hb,65:eb,66:rb,67:ub,68:db,69:p6,70:N,71:O,72:E,73:A,74:B,75:_f,76:L,77:od,78:Md,79:qd,80:i2,81:E2,82:L2,83:M2,84:N2},{23:82,29:29,30:30,31:31,32:Ib,33:t_,34:a,36:x,38:w,39:58,40:70,42:71,44:m,46:Sn,47:cb,48:ic,49:En,50:y,51:fe,53:32,54:nb,55:ab,56:sb,57:ob,58:e,59:T,60:Su,61:ib,62:M,63:lb,64:hb,65:eb,66:rb,67:ub,68:db,69:p6,70:N,71:O,72:E,73:A,74:B,75:_f,76:L,77:od,78:Md,79:qd,80:i2,81:E2,82:L2,83:M2,84:N2},{15:[1,83]},{17:84,20:[1,85]},{15:[2,14]},{24:[1,86]},l(wp,[2,20],{53:32,39:58,40:70,42:71,30:87,44:m,46:Sn,47:cb,48:ic,49:En,50:y,51:fe,54:nb,55:ab,56:sb,57:ob,58:e,59:T,60:Su,61:ib,62:M,63:lb,64:hb,65:eb,66:rb,67:ub,68:db,69:p6,70:N,71:O,72:E,73:A,74:B,75:_f,76:L,77:od,78:Md,79:qd,80:i2,81:E2,82:L2,83:M2,84:N2}),l(wp,[2,21]),l(kp,[2,23],{15:[1,88]}),l(wp,[2,43],{15:[1,89]}),l(F2,[2,26]),l(F2,[2,27]),{35:[1,90]},{37:[1,91]},l(F2,[2,30]),{45:92,85:93,86:u,87:d,89:_,90:p},{45:98,85:93,86:u,87:d,89:_,90:p},{45:99,85:93,86:u,87:d,89:_,90:p},{45:100,85:93,86:u,87:d,89:_,90:p},{45:101,85:93,86:u,87:d,89:_,90:p},{45:102,85:93,86:u,87:d,89:_,90:p},{45:103,85:93,86:u,87:d,89:_,90:p},{45:104,85:93,86:u,87:d,89:_,90:p},{45:105,85:93,86:u,87:d,89:_,90:p},{45:106,85:93,86:u,87:d,89:_,90:p},{45:107,85:93,86:u,87:d,89:_,90:p},{45:108,85:93,86:u,87:d,89:_,90:p},{45:109,85:93,86:u,87:d,89:_,90:p},{45:110,85:93,86:u,87:d,89:_,90:p},{45:111,85:93,86:u,87:d,89:_,90:p},{45:112,85:93,86:u,87:d,89:_,90:p},{45:113,85:93,86:u,87:d,89:_,90:p},{45:114,85:93,86:u,87:d,89:_,90:p},{45:115,85:93,86:u,87:d,89:_,90:p},{45:116,85:93,86:u,87:d,89:_,90:p},l(Rp,[2,66]),{45:117,85:93,86:u,87:d,89:_,90:p},{45:118,85:93,86:u,87:d,89:_,90:p},{45:119,85:93,86:u,87:d,89:_,90:p},{45:120,85:93,86:u,87:d,89:_,90:p},{45:121,85:93,86:u,87:d,89:_,90:p},{45:122,85:93,86:u,87:d,89:_,90:p},{45:123,85:93,86:u,87:d,89:_,90:p},{45:124,85:93,86:u,87:d,89:_,90:p},{45:125,85:93,86:u,87:d,89:_,90:p},{45:126,85:93,86:u,87:d,89:_,90:p},{45:127,85:93,86:u,87:d,89:_,90:p},{30:128,39:58,40:70,42:71,44:m,46:Sn,47:cb,48:ic,49:En,50:y,51:fe,53:32,54:nb,55:ab,56:sb,57:ob,58:e,59:T,60:Su,61:ib,62:M,63:lb,64:hb,65:eb,66:rb,67:ub,68:db,69:p6,70:N,71:O,72:E,73:A,74:B,75:_f,76:L,77:od,78:Md,79:qd,80:i2,81:E2,82:L2,83:M2,84:N2},{15:[1,130],43:[1,129]},{45:131,85:93,86:u,87:d,89:_,90:p},{45:132,85:93,86:u,87:d,89:_,90:p},{45:133,85:93,86:u,87:d,89:_,90:p},{45:134,85:93,86:u,87:d,89:_,90:p},{45:135,85:93,86:u,87:d,89:_,90:p},{45:136,85:93,86:u,87:d,89:_,90:p},{45:137,85:93,86:u,87:d,89:_,90:p},{24:[1,138]},{24:[1,139]},{24:[1,140]},{24:[1,141]},l(Xp,[2,9]),{14:142,21:D},{21:[2,13]},{1:[2,15]},l(wp,[2,22]),l(kp,[2,24],{31:31,29:143,32:Ib,33:t_,34:a,36:x,38:w}),l(wp,[2,44],{29:29,30:30,31:31,53:32,39:58,40:70,42:71,23:144,32:Ib,33:t_,34:a,36:x,38:w,44:m,46:Sn,47:cb,48:ic,49:En,50:y,51:fe,54:nb,55:ab,56:sb,57:ob,58:e,59:T,60:Su,61:ib,62:M,63:lb,64:hb,65:eb,66:rb,67:ub,68:db,69:p6,70:N,71:O,72:E,73:A,74:B,75:_f,76:L,77:od,78:Md,79:qd,80:i2,81:E2,82:L2,83:M2,84:N2}),l(F2,[2,28]),l(F2,[2,29]),l(Rp,[2,46]),l(Tp,[2,78],{85:93,45:145,86:u,87:d,89:_,90:p}),l(Fp,[2,80]),{88:[1,146]},l(Fp,[2,82]),l(Fp,[2,83]),l(Rp,[2,47]),l(Rp,[2,48]),l(Rp,[2,49]),l(Rp,[2,50]),l(Rp,[2,51]),l(Rp,[2,52]),l(Rp,[2,53]),l(Rp,[2,54]),l(Rp,[2,55]),l(Rp,[2,56]),l(Rp,[2,57]),l(Rp,[2,58]),l(Rp,[2,59]),l(Rp,[2,60]),l(Rp,[2,61]),l(Rp,[2,62]),l(Rp,[2,63]),l(Rp,[2,64]),l(Rp,[2,65]),l(Rp,[2,67]),l(Rp,[2,68]),l(Rp,[2,69]),l(Rp,[2,70]),l(Rp,[2,71]),l(Rp,[2,72]),l(Rp,[2,73]),l(Rp,[2,74]),l(Rp,[2,75]),l(Rp,[2,76]),l(Rp,[2,77]),{41:147,52:[1,148]},{15:[1,149]},{43:[1,150]},l(gp,[2,35]),l(gp,[2,36]),l(gp,[2,37]),l(gp,[2,38]),l(gp,[2,39]),l(gp,[2,40]),l(gp,[2,41]),{1:[2,16]},{1:[2,17]},{1:[2,18]},{1:[2,19]},{15:[1,151]},l(kp,[2,25]),l(wp,[2,45]),l(Tp,[2,79]),l(Fp,[2,81]),l(Rp,[2,31]),l(Rp,[2,42]),l(ef,[2,32]),l(ef,[2,33],{15:[1,152]}),l(Xp,[2,10]),l(ef,[2,34])],defaultActions:{2:[2,1],3:[2,2],5:[2,8],6:[2,4],7:[2,5],8:[2,6],9:[2,7],16:[2,11],17:[2,3],27:[2,14],85:[2,13],86:[2,15],138:[2,16],139:[2,17],140:[2,18],141:[2,19]},parseError:function(t,e){var r;if(!e.recoverable)throw(r=new Error(t)).hash=e,r;this.trace(t)},parse:function(t){var e,r=this,i=[0],n=[],a=[null],s=[],o=this.table,l="",c=0,h=0,u=1,d=s.slice.call(arguments,1),p=Object.create(this.lexer),f={yy:{}};for(e in this.yy)Object.prototype.hasOwnProperty.call(this.yy,e)&&(f.yy[e]=this.yy[e]);p.setInput(t,f.yy),f.yy.lexer=p,f.yy.parser=this,"u"<typeof p.yylloc&&(p.yylloc={});var g=p.yylloc,y=(s.push(g),p.options&&p.options.ranges);"function"==typeof f.yy.parseError?this.parseError=f.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;for(var m,b,_,x,v,k,w={};;){if(b=i[i.length-1],"u"<typeof(_=this.defaultActions[b]||((null===m||"u"<typeof m)&&(T=void 0,"number"!=typeof(T=n.pop()||p.lex()||u)&&(T instanceof Array&&(T=(n=T).pop()),T=r.symbols_[T]||T),m=T),o[b]&&o[b][m]))||!_.length||!_[0]){var T="",C=[];for(x in o[b])this.terminals_[x]&&2<x&&C.push("'"+this.terminals_[x]+"'");T=p.showPosition?"Parse error on line "+(c+1)+`:
`+p.showPosition()+`
Expecting `+C.join(", ")+", got '"+(this.terminals_[m]||m)+"'":"Parse error on line "+(c+1)+": Unexpected "+(m==u?"end of input":"'"+(this.terminals_[m]||m)+"'"),this.parseError(T,{text:p.match,token:this.terminals_[m]||m,line:p.yylineno,loc:g,expected:C})}if(_[0]instanceof Array&&1<_.length)throw new Error("Parse Error: multiple actions possible at state: "+b+", token: "+m);switch(_[0]){case 1:i.push(m),a.push(p.yytext),s.push(p.yylloc),i.push(_[1]),m=null,h=p.yyleng,l=p.yytext,c=p.yylineno,g=p.yylloc;break;case 2:if(v=this.productions_[_[1]][1],w.$=a[a.length-v],w._$={first_line:s[s.length-(v||1)].first_line,last_line:s[s.length-1].last_line,first_column:s[s.length-(v||1)].first_column,last_column:s[s.length-1].last_column},y&&(w._$.range=[s[s.length-(v||1)].range[0],s[s.length-1].range[1]]),typeof(k=this.performAction.apply(w,[l,h,c,f.yy,_[1],a,s].concat(d)))<"u")return k;v&&(i=i.slice(0,-1*v*2),a=a.slice(0,-1*v),s=s.slice(0,-1*v)),i.push(this.productions_[_[1]][0]),a.push(w.$),s.push(w._$),k=o[i[i.length-2]][i[i.length-1]],i.push(k);break;case 3:return!0}}return!0}}).lexer={EOF:1,parseError:function(t,e){if(!this.yy.parser)throw new Error(t);this.yy.parser.parseError(t,e)},setInput:function(t,e){return this.yy=e||this.yy||{},this._input=t,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var t=this._input[0];return this.yytext+=t,this.yyleng++,this.offset++,this.match+=t,this.matched+=t,t.match(/(?:\r\n?|\n).*/g)?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),t},unput:function(t){var e=t.length,r=t.split(/(?:\r\n?|\n)/g),t=(this._input=t+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-e),this.offset-=e,this.match.split(/(?:\r\n?|\n)/g)),i=(this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),r.length-1&&(this.yylineno-=r.length-1),this.yylloc.range);return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:r?(r.length===t.length?this.yylloc.first_column:0)+t[t.length-r.length].length-r[0].length:this.yylloc.first_column-e},this.options.ranges&&(this.yylloc.range=[i[0],i[0]+this.yyleng-e]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){return this.options.backtrack_lexer?(this._backtrack=!0,this):this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},less:function(t){this.unput(this.match.slice(t))},pastInput:function(){var t=this.matched.substr(0,this.matched.length-this.match.length);return(20<t.length?"...":"")+t.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var t=this.match;return t.length<20&&(t+=this._input.substr(0,20-t.length)),(t.substr(0,20)+(20<t.length?"...":"")).replace(/\n/g,"")},showPosition:function(){var t=this.pastInput(),e=new Array(t.length+1).join("-");return t+this.upcomingInput()+`
`+e+"^"},test_match:function(t,e){var r,i;if(this.options.backtrack_lexer&&(i={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges)&&(i.yylloc.range=this.yylloc.range.slice(0)),(r=t[0].match(/(?:\r\n?|\n).*/g))&&(this.yylineno+=r.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:r?r[r.length-1].length-r[r.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+t[0].length},this.yytext+=t[0],this.match+=t[0],this.matches=t,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(t[0].length),this.matched+=t[0],r=this.performAction.call(this,this.yy,this,e,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),r)return r;if(this._backtrack)for(var n in i)this[n]=i[n];return!1},next:function(){if(this.done)return this.EOF;var t,e,r,i;this._input||(this.done=!0),this._more||(this.yytext="",this.match="");for(var n=this._currentRules(),a=0;a<n.length;a++)if((r=this._input.match(this.rules[n[a]]))&&(!e||r[0].length>e[0].length)){if(e=r,i=a,this.options.backtrack_lexer){if(!1!==(t=this.test_match(r,n[a])))return t;if(this._backtrack){e=!1;continue}return!1}if(!this.options.flex)break}return e?!1!==(t=this.test_match(e,n[i]))&&t:""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){return this.next()||this.lex()},begin:function(t){this.conditionStack.push(t)},popState:function(){return 0<this.conditionStack.length-1?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return(this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]]:this.conditions.INITIAL).rules},topState:function(t){return 0<=(t=this.conditionStack.length-1-Math.abs(t||0))?this.conditionStack[t]:"INITIAL"},pushState:function(t){this.begin(t)},stateStackSize:function(){return this.conditionStack.length},options:{},performAction:function(t,e,r,i){switch(r){case 0:return this.begin("open_directive"),18;case 1:return 7;case 2:return 8;case 3:return 9;case 4:return 10;case 5:return this.begin("type_directive"),19;case 6:return this.popState(),this.begin("arg_directive"),16;case 7:return this.popState(),this.popState(),21;case 8:return 20;case 9:return 32;case 10:return 33;case 11:return this.begin("acc_title"),34;case 12:return this.popState(),"acc_title_value";case 13:return this.begin("acc_descr"),36;case 14:return this.popState(),"acc_descr_value";case 15:this.begin("acc_descr_multiline");break;case 16:this.popState();break;case 17:return"acc_descr_multiline_value";case 18:break;case 19:c;break;case 20:return 15;case 21:break;case 22:return 22;case 23:return 25;case 24:return 26;case 25:return 27;case 26:return 28;case 27:return this.begin("person_ext"),55;case 28:return this.begin("person"),54;case 29:return this.begin("system_ext_queue"),61;case 30:return this.begin("system_ext_db"),60;case 31:return this.begin("system_ext"),59;case 32:return this.begin("system_queue"),58;case 33:return this.begin("system_db"),57;case 34:return this.begin("system"),56;case 35:return this.begin("boundary"),47;case 36:return this.begin("enterprise_boundary"),44;case 37:return this.begin("system_boundary"),46;case 38:return this.begin("container_ext_queue"),67;case 39:return this.begin("container_ext_db"),66;case 40:return this.begin("container_ext"),65;case 41:return this.begin("container_queue"),64;case 42:return this.begin("container_db"),63;case 43:return this.begin("container"),62;case 44:return this.begin("container_boundary"),48;case 45:return this.begin("component_ext_queue"),73;case 46:return this.begin("component_ext_db"),72;case 47:return this.begin("component_ext"),71;case 48:return this.begin("component_queue"),70;case 49:return this.begin("component_db"),69;case 50:return this.begin("component"),68;case 51:case 52:return this.begin("node"),49;case 53:return this.begin("node_l"),50;case 54:return this.begin("node_r"),51;case 55:return this.begin("rel"),74;case 56:return this.begin("birel"),75;case 57:case 58:return this.begin("rel_u"),76;case 59:case 60:return this.begin("rel_d"),77;case 61:case 62:return this.begin("rel_l"),78;case 63:case 64:return this.begin("rel_r"),79;case 65:return this.begin("rel_b"),80;case 66:return this.begin("rel_index"),81;case 67:return this.begin("update_el_style"),82;case 68:return this.begin("update_rel_style"),83;case 69:return this.begin("update_layout_config"),84;case 70:return"EOF_IN_STRUCT";case 71:return this.begin("attribute"),"ATTRIBUTE_EMPTY";case 72:this.begin("attribute");break;case 73:this.popState(),this.popState();break;case 74:return 90;case 75:break;case 76:return 90;case 77:this.begin("string");break;case 78:this.popState();break;case 79:return"STR";case 80:this.begin("string_kv");break;case 81:return this.begin("string_kv_key"),"STR_KEY";case 82:this.popState(),this.begin("string_kv_value");break;case 83:return"STR_VALUE";case 84:this.popState(),this.popState();break;case 85:return"STR";case 86:return"LBRACE";case 87:return"RBRACE";case 88:return"SPACE";case 89:return"EOL";case 90:return 24}},rules:[/^(?:%%\{)/,/^(?:.*direction\s+TB[^\n]*)/,/^(?:.*direction\s+BT[^\n]*)/,/^(?:.*direction\s+RL[^\n]*)/,/^(?:.*direction\s+LR[^\n]*)/,/^(?:((?:(?!\}%%)[^:.])*))/,/^(?::)/,/^(?:\}%%)/,/^(?:((?:(?!\}%%).|\n)*))/,/^(?:title\s[^#\n;]+)/,/^(?:accDescription\s[^#\n;]+)/,/^(?:accTitle\s*:\s*)/,/^(?:(?!\n||)*[^\n]*)/,/^(?:accDescr\s*:\s*)/,/^(?:(?!\n||)*[^\n]*)/,/^(?:accDescr\s*\{\s*)/,/^(?:[\}])/,/^(?:[^\}]*)/,/^(?:%%(?!\{)*[^\n]*(\r?\n?)+)/,/^(?:%%[^\n]*(\r?\n)*)/,/^(?:\s*(\r?\n)+)/,/^(?:\s+)/,/^(?:C4Context\b)/,/^(?:C4Container\b)/,/^(?:C4Component\b)/,/^(?:C4Dynamic\b)/,/^(?:C4Deployment\b)/,/^(?:Person_Ext\b)/,/^(?:Person\b)/,/^(?:SystemQueue_Ext\b)/,/^(?:SystemDb_Ext\b)/,/^(?:System_Ext\b)/,/^(?:SystemQueue\b)/,/^(?:SystemDb\b)/,/^(?:System\b)/,/^(?:Boundary\b)/,/^(?:Enterprise_Boundary\b)/,/^(?:System_Boundary\b)/,/^(?:ContainerQueue_Ext\b)/,/^(?:ContainerDb_Ext\b)/,/^(?:Container_Ext\b)/,/^(?:ContainerQueue\b)/,/^(?:ContainerDb\b)/,/^(?:Container\b)/,/^(?:Container_Boundary\b)/,/^(?:ComponentQueue_Ext\b)/,/^(?:ComponentDb_Ext\b)/,/^(?:Component_Ext\b)/,/^(?:ComponentQueue\b)/,/^(?:ComponentDb\b)/,/^(?:Component\b)/,/^(?:Deployment_Node\b)/,/^(?:Node\b)/,/^(?:Node_L\b)/,/^(?:Node_R\b)/,/^(?:Rel\b)/,/^(?:BiRel\b)/,/^(?:Rel_Up\b)/,/^(?:Rel_U\b)/,/^(?:Rel_Down\b)/,/^(?:Rel_D\b)/,/^(?:Rel_Left\b)/,/^(?:Rel_L\b)/,/^(?:Rel_Right\b)/,/^(?:Rel_R\b)/,/^(?:Rel_Back\b)/,/^(?:RelIndex\b)/,/^(?:UpdateElementStyle\b)/,/^(?:UpdateRelStyle\b)/,/^(?:UpdateLayoutConfig\b)/,/^(?:$)/,/^(?:[(][ ]*[,])/,/^(?:[(])/,/^(?:[)])/,/^(?:,,)/,/^(?:,)/,/^(?:[ ]*["]["])/,/^(?:[ ]*["])/,/^(?:["])/,/^(?:[^"]*)/,/^(?:[ ]*[\$])/,/^(?:[^=]*)/,/^(?:[=][ ]*["])/,/^(?:[^"]+)/,/^(?:["])/,/^(?:[^,]+)/,/^(?:\{)/,/^(?:\})/,/^(?:[\s]+)/,/^(?:[\n\r]+)/,/^(?:$)/],conditions:{acc_descr_multiline:{rules:[16,17],inclusive:!1},acc_descr:{rules:[14],inclusive:!1},acc_title:{rules:[12],inclusive:!1},close_directive:{rules:[],inclusive:!1},arg_directive:{rules:[7,8],inclusive:!1},type_directive:{rules:[6,7],inclusive:!1},open_directive:{rules:[5],inclusive:!1},string_kv_value:{rules:[83,84],inclusive:!1},string_kv_key:{rules:[82],inclusive:!1},string_kv:{rules:[81],inclusive:!1},string:{rules:[78,79],inclusive:!1},attribute:{rules:[73,74,75,76,77,80,85],inclusive:!1},update_layout_config:{rules:[70,71,72,73],inclusive:!1},update_rel_style:{rules:[70,71,72,73],inclusive:!1},update_el_style:{rules:[70,71,72,73],inclusive:!1},rel_b:{rules:[70,71,72,73],inclusive:!1},rel_r:{rules:[70,71,72,73],inclusive:!1},rel_l:{rules:[70,71,72,73],inclusive:!1},rel_d:{rules:[70,71,72,73],inclusive:!1},rel_u:{rules:[70,71,72,73],inclusive:!1},rel_bi:{rules:[],inclusive:!1},rel:{rules:[70,71,72,73],inclusive:!1},node_r:{rules:[70,71,72,73],inclusive:!1},node_l:{rules:[70,71,72,73],inclusive:!1},node:{rules:[70,71,72,73],inclusive:!1},index:{rules:[],inclusive:!1},rel_index:{rules:[70,71,72,73],inclusive:!1},component_ext_queue:{rules:[],inclusive:!1},component_ext_db:{rules:[70,71,72,73],inclusive:!1},component_ext:{rules:[70,71,72,73],inclusive:!1},component_queue:{rules:[70,71,72,73],inclusive:!1},component_db:{rules:[70,71,72,73],inclusive:!1},component:{rules:[70,71,72,73],inclusive:!1},container_boundary:{rules:[70,71,72,73],inclusive:!1},container_ext_queue:{rules:[],inclusive:!1},container_ext_db:{rules:[70,71,72,73],inclusive:!1},container_ext:{rules:[70,71,72,73],inclusive:!1},container_queue:{rules:[70,71,72,73],inclusive:!1},container_db:{rules:[70,71,72,73],inclusive:!1},container:{rules:[70,71,72,73],inclusive:!1},birel:{rules:[70,71,72,73],inclusive:!1},system_boundary:{rules:[70,71,72,73],inclusive:!1},enterprise_boundary:{rules:[70,71,72,73],inclusive:!1},boundary:{rules:[70,71,72,73],inclusive:!1},system_ext_queue:{rules:[70,71,72,73],inclusive:!1},system_ext_db:{rules:[70,71,72,73],inclusive:!1},system_ext:{rules:[70,71,72,73],inclusive:!1},system_queue:{rules:[70,71,72,73],inclusive:!1},system_db:{rules:[70,71,72,73],inclusive:!1},system:{rules:[70,71,72,73],inclusive:!1},person_ext:{rules:[70,71,72,73],inclusive:!1},person:{rules:[70,71,72,73],inclusive:!1},INITIAL:{rules:[0,1,2,3,4,9,10,11,13,15,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,86,87,88,89,90],inclusive:!0}}};var _0,o=new((x0.prototype=C).Parser=x0);function l(t,e,r,i){for(r=r||{},i=t.length;i--;r[t[i]]=e);return r}function x0(){this.yy={}}const v0=o.parser=o,k0=t=>null!==t.match(/^\s*C4Context|C4Container|C4Component|C4Dynamic|C4Deployment/);let w0=[],T0=[""],C0="global",E0="",S0=[{alias:"global",label:{text:"global"},type:{text:"global"},tags:null,link:null,parentBoundary:""}],A0=[],D0="",L0=!1,M0=4,N0=2;function O0(e){return null==e?w0:w0.filter(t=>t.parentBoundary===e)}function B0(){return L0}function I0(t,e){var r=t.append("rect");if(r.attr("x",e.x),r.attr("y",e.y),r.attr("fill",e.fill),r.attr("stroke",e.stroke),r.attr("width",e.width),r.attr("height",e.height),r.attr("rx",e.rx),r.attr("ry",e.ry),"undefined"!==e.attrs&&null!==e.attrs)for(var i in e.attrs)r.attr(i,e.attrs[i]);return"undefined"!==e.class&&r.attr("class",e.class),r}function F0(t,e,r,i,n,a){(t=t.append("image")).attr("width",e),t.attr("height",r),t.attr("x",i),t.attr("y",n),e=a.startsWith("data:image/png;base64")?a:Y(a),t.attr("xlink:href",e)}function R0(){return{x:0,y:0,fill:"#EDF2AE",stroke:"#666",width:100,anchor:"start",height:100,rx:0,ry:0}}const P0={addPersonOrSystem:function(e,r,i,n,a,s,o){if(null!==r&&null!==i){let t={};var l=w0.find(t=>t.alias===r);l&&r===l.alias?t=l:(t.alias=r,w0.push(t)),t.label=null==i?{text:""}:{text:i},null==n?t.descr={text:""}:"object"==typeof n?([l,i]=Object.entries(n)[0],t[l]={text:i}):t.descr={text:n},"object"==typeof a?([l,i]=Object.entries(a)[0],t[l]=i):t.sprite=a,"object"==typeof s?([n,l]=Object.entries(s)[0],t[n]=l):t.tags=s,"object"==typeof o?([i,a]=Object.entries(o)[0],t[i]=a):t.link=o,t.typeC4Shape={text:e},t.parentBoundary=C0,t.wrap=L0}},addPersonOrSystemBoundary:function(e,r,i,n,a){if(null!==e&&null!==r){let t={};var s=S0.find(t=>t.alias===e);s&&e===s.alias?t=s:(t.alias=e,S0.push(t)),t.label=null==r?{text:""}:{text:r},null==i?t.type={text:"system"}:"object"==typeof i?([s,r]=Object.entries(i)[0],t[s]={text:r}):t.type={text:i},"object"==typeof n?([s,r]=Object.entries(n)[0],t[s]=r):t.tags=n,"object"==typeof a?([i,s]=Object.entries(a)[0],t[i]=s):t.link=a,t.parentBoundary=C0,t.wrap=L0,E0=C0,C0=e,T0.push(E0)}},addContainer:function(e,r,i,n,a,s,o,l){if(null!==r&&null!==i){let t={};var c=w0.find(t=>t.alias===r);c&&r===c.alias?t=c:(t.alias=r,w0.push(t)),t.label=null==i?{text:""}:{text:i},null==n?t.techn={text:""}:"object"==typeof n?([c,i]=Object.entries(n)[0],t[c]={text:i}):t.techn={text:n},null==a?t.descr={text:""}:"object"==typeof a?([c,i]=Object.entries(a)[0],t[c]={text:i}):t.descr={text:a},"object"==typeof s?([n,c]=Object.entries(s)[0],t[n]=c):t.sprite=s,"object"==typeof o?([i,a]=Object.entries(o)[0],t[i]=a):t.tags=o,"object"==typeof l?([n,c]=Object.entries(l)[0],t[n]=c):t.link=l,t.wrap=L0,t.typeC4Shape={text:e},t.parentBoundary=C0}},addContainerBoundary:function(e,r,i,n,a){if(null!==e&&null!==r){let t={};var s=S0.find(t=>t.alias===e);s&&e===s.alias?t=s:(t.alias=e,S0.push(t)),t.label=null==r?{text:""}:{text:r},null==i?t.type={text:"container"}:"object"==typeof i?([s,r]=Object.entries(i)[0],t[s]={text:r}):t.type={text:i},"object"==typeof n?([s,r]=Object.entries(n)[0],t[s]=r):t.tags=n,"object"==typeof a?([i,s]=Object.entries(a)[0],t[i]=s):t.link=a,t.parentBoundary=C0,t.wrap=L0,E0=C0,C0=e,T0.push(E0)}},addComponent:function(e,r,i,n,a,s,o,l){if(null!==r&&null!==i){let t={};var c=w0.find(t=>t.alias===r);c&&r===c.alias?t=c:(t.alias=r,w0.push(t)),t.label=null==i?{text:""}:{text:i},null==n?t.techn={text:""}:"object"==typeof n?([c,i]=Object.entries(n)[0],t[c]={text:i}):t.techn={text:n},null==a?t.descr={text:""}:"object"==typeof a?([c,i]=Object.entries(a)[0],t[c]={text:i}):t.descr={text:a},"object"==typeof s?([n,c]=Object.entries(s)[0],t[n]=c):t.sprite=s,"object"==typeof o?([i,a]=Object.entries(o)[0],t[i]=a):t.tags=o,"object"==typeof l?([n,c]=Object.entries(l)[0],t[n]=c):t.link=l,t.wrap=L0,t.typeC4Shape={text:e},t.parentBoundary=C0}},addDeploymentNode:function(e,r,i,n,a,t,s,o){if(null!==r&&null!==i){let t={};var l=S0.find(t=>t.alias===r);l&&r===l.alias?t=l:(t.alias=r,S0.push(t)),t.label=null==i?{text:""}:{text:i},null==n?t.type={text:"node"}:"object"==typeof n?([l,i]=Object.entries(n)[0],t[l]={text:i}):t.type={text:n},null==a?t.descr={text:""}:"object"==typeof a?([l,i]=Object.entries(a)[0],t[l]={text:i}):t.descr={text:a},"object"==typeof s?([n,l]=Object.entries(s)[0],t[n]=l):t.tags=s,"object"==typeof o?([i,a]=Object.entries(o)[0],t[i]=a):t.link=o,t.nodeType=e,t.parentBoundary=C0,t.wrap=L0,E0=C0,C0=r,T0.push(E0)}},popBoundaryParseStack:function(){C0=E0,T0.pop(),E0=T0.pop(),T0.push(E0)},addRel:function(e,r,i,n,a,s,o,l,c){if(null!=e&&null!=r&&null!=i&&null!=n){let t={};var h=A0.find(t=>t.from===r&&t.to===i);h?t=h:A0.push(t),t.type=e,t.from=r,t.to=i,t.label={text:n},null==a?t.techn={text:""}:"object"==typeof a?([h,e]=Object.entries(a)[0],t[h]={text:e}):t.techn={text:a},null==s?t.descr={text:""}:"object"==typeof s?([n,h]=Object.entries(s)[0],t[n]={text:h}):t.descr={text:s},"object"==typeof o?([e,a]=Object.entries(o)[0],t[e]=a):t.sprite=o,"object"==typeof l?([n,h]=Object.entries(l)[0],t[n]=h):t.tags=l,"object"==typeof c?([s,e]=Object.entries(c)[0],t[s]=e):t.link=c,t.wrap=L0}},updateElStyle:function(t,e,r,i,n,a,s,o,l,c,h){let u=w0.find(t=>t.alias===e);var d,p;void 0===u&&void 0===(u=S0.find(t=>t.alias===e))||(null!=r&&("object"==typeof r?([p,d]=Object.entries(r)[0],u[p]=d):u.bgColor=r),null!=i&&("object"==typeof i?([p,d]=Object.entries(i)[0],u[p]=d):u.fontColor=i),null!=n&&("object"==typeof n?([r,p]=Object.entries(n)[0],u[r]=p):u.borderColor=n),null!=a&&("object"==typeof a?([d,i]=Object.entries(a)[0],u[d]=i):u.shadowing=a),null!=s&&("object"==typeof s?([r,p]=Object.entries(s)[0],u[r]=p):u.shape=s),null!=o&&("object"==typeof o?([n,d]=Object.entries(o)[0],u[n]=d):u.sprite=o),null!=l&&("object"==typeof l?([i,a]=Object.entries(l)[0],u[i]=a):u.techn=l),null!=c&&("object"==typeof c?([r,p]=Object.entries(c)[0],u[r]=p):u.legendText=c),null!=h&&("object"==typeof h?([s,n]=Object.entries(h)[0],u[s]=n):u.legendSprite=h))},updateRelStyle:function(t,e,r,i,n,a,s){var o,l,c=A0.find(t=>t.from===e&&t.to===r);void 0!==c&&(null!=i&&("object"==typeof i?([o,l]=Object.entries(i)[0],c[o]=l):c.textColor=i),null!=n&&("object"==typeof n?([o,l]=Object.entries(n)[0],c[o]=l):c.lineColor=n),null!=a&&("object"==typeof a?([i,o]=Object.entries(a)[0],c[i]=parseInt(o)):c.offsetX=parseInt(a)),null!=s)&&("object"==typeof s?([l,n]=Object.entries(s)[0],c[l]=parseInt(n)):c.offsetY=parseInt(s))},updateLayoutConfig:function(t,e,r){let i=M0,n=N0;var a;i="object"==typeof e?(a=Object.values(e)[0],parseInt(a)):parseInt(e),n="object"==typeof r?(a=Object.values(r)[0],parseInt(a)):parseInt(r),1<=i&&(M0=i),1<=n&&(N0=n)},autoWrap:B0,setWrap:function(t){L0=t},getC4ShapeArray:O0,getC4Shape:function(e){return w0.find(t=>t.alias===e)},getC4ShapeKeys:function(t){return Object.keys(O0(t))},getBoundarys:function(e){return null==e?S0:S0.filter(t=>t.parentBoundary===e)},getCurrentBoundaryParse:function(){return C0},getParentBoundaryParse:function(){return E0},getRels:function(){return A0},getTitle:function(){return D0},getC4Type:function(){return _0},getC4ShapeInRow:function(){return M0},getC4BoundaryInRow:function(){return N0},setAccTitle:Iu,getAccTitle:Fu,getAccDescription:Pu,setAccDescription:Ru,parseDirective:function(t,e,r){Jv.parseDirective(this,t,e,r)},getConfig:()=>J().c4,clear:function(){w0=[],S0=[{alias:"global",label:{text:"global"},type:{text:"global"},tags:null,link:null,parentBoundary:""}],E0="",C0="global",T0=[""],A0=[],T0=[""],D0="",L0=!1,M0=4,N0=2},LINETYPE:{SOLID:0,DOTTED:1,NOTE:2,SOLID_CROSS:3,DOTTED_CROSS:4,SOLID_OPEN:5,DOTTED_OPEN:6,LOOP_START:10,LOOP_END:11,ALT_START:12,ALT_ELSE:13,ALT_END:14,OPT_START:15,OPT_END:16,ACTIVE_START:17,ACTIVE_END:18,PAR_START:19,PAR_AND:20,PAR_END:21,RECT_START:22,RECT_END:23,SOLID_POINT:24,DOTTED_POINT:25},ARROWTYPE:{FILLED:0,OPEN:1},PLACEMENT:{LEFTOF:0,RIGHTOF:1,OVER:2},setTitle:function(t){D0=Go(t,J())},setC4Type:function(t){_0=Go(t,J())}},$0=function(t){return"fo"===t.textPlacement?U0:"old"===t.textPlacement?j0:z0},Y0={drawRect:I0,drawBoundary:function(t,e,r){t=t.append("g");let i=e.bgColor||"none",n=e.borderColor||"#444444",a=e.fontColor||"black",s={"stroke-width":1,"stroke-dasharray":"7.0,7.0"};e.nodeType&&(s={"stroke-width":1});var o={x:e.x,y:e.y,fill:i,stroke:n,width:e.width,height:e.height,rx:2.5,ry:2.5,attrs:s};I0(t,o);let l=r.boundaryFont();l.fontWeight="bold",l.fontSize=l.fontSize+2,l.fontColor=a,$0(r)(e.label.text,t,e.x,e.y+e.label.Y,e.width,e.height,{fill:"#444444"},l),e.type&&""!==e.type.text&&((l=r.boundaryFont()).fontColor=a,$0(r)(e.type.text,t,e.x,e.y+e.type.Y,e.width,e.height,{fill:"#444444"},l)),e.descr&&""!==e.descr.text&&((l=r.boundaryFont()).fontSize=l.fontSize-2,l.fontColor=a,$0(r)(e.descr.text,t,e.x,e.y+e.descr.Y,e.width,e.height,{fill:"#444444"},l))},drawC4Shape:function(t,e,r){let i=e.bgColor||r[e.typeC4Shape.text+"_bg_color"],n=e.borderColor||r[e.typeC4Shape.text+"_border_color"],a=e.fontColor||"#FFFFFF",s="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAIAAADYYG7QAAACD0lEQVR4Xu2YoU4EMRCGT+4j8Ai8AhaH4QHgAUjQuFMECUgMIUgwJAgMhgQsAYUiJCiQIBBY+EITsjfTdme6V24v4c8vyGbb+ZjOtN0bNcvjQXmkH83WvYBWto6PLm6v7p7uH1/w2fXD+PBycX1Pv2l3IdDm/vn7x+dXQiAubRzoURa7gRZWd0iGRIiJbOnhnfYBQZNJjNbuyY2eJG8fkDE3bbG4ep6MHUAsgYxmE3nVs6VsBWJSGccsOlFPmLIViMzLOB7pCVO2AtHJMohH7Fh6zqitQK7m0rJvAVYgGcEpe//PLdDz65sM4pF9N7ICcXDKIB5Nv6j7tD0NoSdM2QrU9Gg0ewE1LqBhHR3BBdvj2vapnidjHxD/q6vd7Pvhr31AwcY8eXMTXAKECZZJFXuEq27aLgQK5uLMohCenGGuGewOxSjBvYBqeG6B+Nqiblggdjnc+ZXDy+FNFpFzw76O3UBAROuXh6FoiAcf5g9eTvUgzy0nWg6I8cXHRUpg5bOVBCo+KDpFajOf23GgPme7RSQ+lacIENUgJ6gg1k6HjgOlqnLqip4tEuhv0hNEMXUD0clyXE3p6pZA0S2nnvTlXwLJEZWlb7cTQH1+USgTN4VhAenm/wea1OCAOmqo6fE1WCb9WSKBah+rbUWPWAmE2Rvk0ApiB45eOyNAzU8xcTvj8KvkKEoOaIYeHNA3ZuygAvFMUO0AAAAASUVORK5CYII=";switch(e.typeC4Shape.text){case"person":s="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAIAAADYYG7QAAACD0lEQVR4Xu2YoU4EMRCGT+4j8Ai8AhaH4QHgAUjQuFMECUgMIUgwJAgMhgQsAYUiJCiQIBBY+EITsjfTdme6V24v4c8vyGbb+ZjOtN0bNcvjQXmkH83WvYBWto6PLm6v7p7uH1/w2fXD+PBycX1Pv2l3IdDm/vn7x+dXQiAubRzoURa7gRZWd0iGRIiJbOnhnfYBQZNJjNbuyY2eJG8fkDE3bbG4ep6MHUAsgYxmE3nVs6VsBWJSGccsOlFPmLIViMzLOB7pCVO2AtHJMohH7Fh6zqitQK7m0rJvAVYgGcEpe//PLdDz65sM4pF9N7ICcXDKIB5Nv6j7tD0NoSdM2QrU9Gg0ewE1LqBhHR3BBdvj2vapnidjHxD/q6vd7Pvhr31AwcY8eXMTXAKECZZJFXuEq27aLgQK5uLMohCenGGuGewOxSjBvYBqeG6B+Nqiblggdjnc+ZXDy+FNFpFzw76O3UBAROuXh6FoiAcf5g9eTvUgzy0nWg6I8cXHRUpg5bOVBCo+KDpFajOf23GgPme7RSQ+lacIENUgJ6gg1k6HjgOlqnLqip4tEuhv0hNEMXUD0clyXE3p6pZA0S2nnvTlXwLJEZWlb7cTQH1+USgTN4VhAenm/wea1OCAOmqo6fE1WCb9WSKBah+rbUWPWAmE2Rvk0ApiB45eOyNAzU8xcTvj8KvkKEoOaIYeHNA3ZuygAvFMUO0AAAAASUVORK5CYII=";break;case"external_person":s="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAIAAADYYG7QAAAB6ElEQVR4Xu2YLY+EMBCG9+dWr0aj0Wg0Go1Go0+j8Xdv2uTCvv1gpt0ebHKPuhDaeW4605Z9mJvx4AdXUyTUdd08z+u6flmWZRnHsWkafk9DptAwDPu+f0eAYtu2PEaGWuj5fCIZrBAC2eLBAnRCsEkkxmeaJp7iDJ2QMDdHsLg8SxKFEJaAo8lAXnmuOFIhTMpxxKATebo4UiFknuNo4OniSIXQyRxEA3YsnjGCVEjVXD7yLUAqxBGUyPv/Y4W2beMgGuS7kVQIBycH0fD+oi5pezQETxdHKmQKGk1eQEYldK+jw5GxPfZ9z7Mk0Qnhf1W1m3w//EUn5BDmSZsbR44QQLBEqrBHqOrmSKaQAxdnLArCrxZcM7A7ZKs4ioRq8LFC+NpC3WCBJsvpVw5edm9iEXFuyNfxXAgSwfrFQ1c0iNda8AdejvUgnktOtJQQxmcfFzGglc5WVCj7oDgFqU18boeFSs52CUh8LE8BIVQDT1ABrB0HtgSEYlX5doJnCwv9TXocKCaKbnwhdDKPq4lf3SwU3HLq4V/+WYhHVMa/3b4IlfyikAduCkcBc7mQ3/z/Qq/cTuikhkzB12Ae/mcJC9U+Vo8Ej1gWAtgbeGgFsAMHr50BIWOLCbezvhpBFUdY6EJuJ/QDW0XoMX60zZ0AAAAASUVORK5CYII="}var o=t.append("g"),l=(o.attr("class","person-man"),R0());switch(e.typeC4Shape.text){case"person":case"external_person":case"system":case"external_system":case"container":case"external_container":case"component":case"external_component":l.x=e.x,l.y=e.y,l.fill=i,l.width=e.width,l.height=e.height,l.style="stroke:"+n+";stroke-width:0.5;",l.rx=2.5,l.ry=2.5,I0(o,l);break;case"system_db":case"external_system_db":case"container_db":case"external_container_db":case"component_db":case"external_component_db":o.append("path").attr("fill",i).attr("stroke-width","0.5").attr("stroke",n).attr("d","Mstartx,startyc0,-10 half,-10 half,-10c0,0 half,0 half,10l0,heightc0,10 -half,10 -half,10c0,0 -half,0 -half,-10l0,-height".replaceAll("startx",e.x).replaceAll("starty",e.y).replaceAll("half",e.width/2).replaceAll("height",e.height)),o.append("path").attr("fill","none").attr("stroke-width","0.5").attr("stroke",n).attr("d","Mstartx,startyc0,10 half,10 half,10c0,0 half,0 half,-10".replaceAll("startx",e.x).replaceAll("starty",e.y).replaceAll("half",e.width/2));break;case"system_queue":case"external_system_queue":case"container_queue":case"external_container_queue":case"component_queue":case"external_component_queue":o.append("path").attr("fill",i).attr("stroke-width","0.5").attr("stroke",n).attr("d","Mstartx,startylwidth,0c5,0 5,half 5,halfc0,0 0,half -5,halfl-width,0c-5,0 -5,-half -5,-halfc0,0 0,-half 5,-half".replaceAll("startx",e.x).replaceAll("starty",e.y).replaceAll("width",e.width).replaceAll("half",e.height/2)),o.append("path").attr("fill","none").attr("stroke-width","0.5").attr("stroke",n).attr("d","Mstartx,startyc-5,0 -5,half -5,halfc0,half 5,half 5,half".replaceAll("startx",e.x+e.width).replaceAll("starty",e.y).replaceAll("half",e.height/2))}t=e.typeC4Shape.text;t={fontFamily:r[t+"FontFamily"],fontSize:r[t+"FontSize"],fontWeight:r[t+"FontWeight"]};switch(o.append("text").attr("fill",a).attr("font-family",t.fontFamily).attr("font-size",t.fontSize-2).attr("font-style","italic").attr("lengthAdjust","spacing").attr("textLength",e.typeC4Shape.width).attr("x",e.x+e.width/2-e.typeC4Shape.width/2).attr("y",e.y+e.typeC4Shape.Y).text("<<"+e.typeC4Shape.text+">>"),e.typeC4Shape.text){case"person":case"external_person":F0(o,48,48,e.x+e.width/2-24,e.y+e.image.Y,s)}let c=r[e.typeC4Shape.text+"Font"]();return c.fontWeight="bold",c.fontSize=c.fontSize+2,c.fontColor=a,$0(r)(e.label.text,o,e.x,e.y+e.label.Y,e.width,e.height,{fill:a},c),(c=r[e.typeC4Shape.text+"Font"]()).fontColor=a,e.thchn&&""!==e.thchn.text?$0(r)(e.thchn.text,o,e.x,e.y+e.thchn.Y,e.width,e.height,{fill:a,"font-style":"italic"},c):e.type&&""!==e.type.text&&$0(r)(e.type.text,o,e.x,e.y+e.type.Y,e.width,e.height,{fill:a,"font-style":"italic"},c),e.descr&&""!==e.descr.text&&((c=r.personFont()).fontColor=a,$0(r)(e.descr.text,o,e.x,e.y+e.descr.Y,e.width,e.height,{fill:a},c)),e.height},drawRels:(t,e,r)=>{var i,n=t.append("g");let a=0;for(i of e){var s,o=i.textColor||"#444444",l=i.lineColor||"#444444",c=i.offsetX?parseInt(i.offsetX):0,h=i.offsetY?parseInt(i.offsetY):0,l=(0===a?((s=n.append("line")).attr("x1",i.startPoint.x),s.attr("y1",i.startPoint.y),s.attr("x2",i.endPoint.x),s.attr("y2",i.endPoint.y),s.attr("stroke-width","1"),s.attr("stroke",l),s.style("fill","none"),"rel_b"!==i.type&&s.attr("marker-end","url(#arrowhead)"),"birel"!==i.type&&"rel_b"!==i.type||s.attr("marker-start","url(#arrowend)"),a=-1):((s=n.append("path")).attr("fill","none").attr("stroke-width","1").attr("stroke",l).attr("d","Mstartx,starty Qcontrolx,controly stopx,stopy ".replaceAll("startx",i.startPoint.x).replaceAll("starty",i.startPoint.y).replaceAll("controlx",i.startPoint.x+(i.endPoint.x-i.startPoint.x)/2-(i.endPoint.x-i.startPoint.x)/4).replaceAll("controly",i.startPoint.y+(i.endPoint.y-i.startPoint.y)/2).replaceAll("stopx",i.endPoint.x).replaceAll("stopy",i.endPoint.y)),"rel_b"!==i.type&&s.attr("marker-end","url(#arrowhead)"),"birel"!==i.type&&"rel_b"!==i.type||s.attr("marker-start","url(#arrowend)")),r.messageFont());$0(r)(i.label.text,n,Math.min(i.startPoint.x,i.endPoint.x)+Math.abs(i.endPoint.x-i.startPoint.x)/2+c,Math.min(i.startPoint.y,i.endPoint.y)+Math.abs(i.endPoint.y-i.startPoint.y)/2+h,i.label.width,i.label.height,{fill:o},l),i.techn&&""!==i.techn.text&&(l=r.messageFont(),$0(r)("["+i.techn.text+"]",n,Math.min(i.startPoint.x,i.endPoint.x)+Math.abs(i.endPoint.x-i.startPoint.x)/2+c,Math.min(i.startPoint.y,i.endPoint.y)+Math.abs(i.endPoint.y-i.startPoint.y)/2+r.messageFontSize+5+h,Math.max(i.label.width,i.techn.width),i.techn.height,{fill:o,"font-style":"italic"},l))}},drawImage:F0,insertArrowHead:function(t){t.append("defs").append("marker").attr("id","arrowhead").attr("refX",9).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",12).attr("markerHeight",12).attr("orient","auto").append("path").attr("d","M 0 0 L 10 5 L 0 10 z")},insertArrowEnd:function(t){t.append("defs").append("marker").attr("id","arrowend").attr("refX",1).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",12).attr("markerHeight",12).attr("orient","auto").append("path").attr("d","M 10 0 L 0 5 L 10 10 z")},insertArrowFilledHead:function(t){t.append("defs").append("marker").attr("id","filled-head").attr("refX",18).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L14,7 L9,1 Z")},insertDynamicNumber:function(t){t.append("defs").append("marker").attr("id","sequencenumber").attr("refX",15).attr("refY",15).attr("markerWidth",60).attr("markerHeight",40).attr("orient","auto").append("circle").attr("cx",15).attr("cy",15).attr("r",6)},insertArrowCrossHead:function(t){t=t.append("defs").append("marker").attr("id","crosshead").attr("markerWidth",15).attr("markerHeight",8).attr("orient","auto").attr("refX",16).attr("refY",4);t.append("path").attr("fill","black").attr("stroke","#000000").style("stroke-dasharray","0, 0").attr("stroke-width","1px").attr("d","M 9,2 V 6 L16,4 Z"),t.append("path").attr("fill","none").attr("stroke","#000000").style("stroke-dasharray","0, 0").attr("stroke-width","1px").attr("d","M 0,1 L 6,7 M 6,1 L 0,7")},insertDatabaseIcon:function(t){t.append("defs").append("symbol").attr("id","database").attr("fill-rule","evenodd").attr("clip-rule","evenodd").append("path").attr("transform","scale(.5)").attr("d","M12.258.001l.256.004.255.005.253.008.251.01.249.012.247.015.246.016.242.019.241.02.239.023.236.024.233.027.231.028.229.031.225.032.223.034.22.036.217.038.214.04.211.041.208.043.205.045.201.046.198.048.194.05.191.051.187.053.183.054.18.056.175.057.172.059.168.06.163.061.16.063.155.064.15.066.074.033.073.033.071.034.07.034.069.035.068.035.067.035.066.035.064.036.064.036.062.036.06.036.06.037.058.037.058.037.055.038.055.038.053.038.052.038.051.039.05.039.048.039.047.039.045.04.044.04.043.04.041.04.04.041.039.041.037.041.036.041.034.041.033.042.032.042.03.042.029.042.027.042.026.043.024.043.023.043.021.043.02.043.018.044.017.043.015.044.013.044.012.044.011.045.009.044.007.045.006.045.004.045.002.045.001.045v17l-.001.045-.002.045-.004.045-.006.045-.007.045-.009.044-.011.045-.012.044-.013.044-.015.044-.017.043-.018.044-.02.043-.021.043-.023.043-.024.043-.026.043-.027.042-.029.042-.03.042-.032.042-.033.042-.034.041-.036.041-.037.041-.039.041-.04.041-.041.04-.043.04-.044.04-.045.04-.047.039-.048.039-.05.039-.051.039-.052.038-.053.038-.055.038-.055.038-.058.037-.058.037-.06.037-.06.036-.062.036-.064.036-.064.036-.066.035-.067.035-.068.035-.069.035-.07.034-.071.034-.073.033-.074.033-.15.066-.155.064-.16.063-.163.061-.168.06-.172.059-.175.057-.18.056-.183.054-.187.053-.191.051-.194.05-.198.048-.201.046-.205.045-.208.043-.211.041-.214.04-.217.038-.22.036-.223.034-.225.032-.229.031-.231.028-.233.027-.236.024-.239.023-.241.02-.242.019-.246.016-.247.015-.249.012-.251.01-.253.008-.255.005-.256.004-.258.001-.258-.001-.256-.004-.255-.005-.253-.008-.251-.01-.249-.012-.247-.015-.245-.016-.243-.019-.241-.02-.238-.023-.236-.024-.234-.027-.231-.028-.228-.031-.226-.032-.223-.034-.22-.036-.217-.038-.214-.04-.211-.041-.208-.043-.204-.045-.201-.046-.198-.048-.195-.05-.19-.051-.187-.053-.184-.054-.179-.056-.176-.057-.172-.059-.167-.06-.164-.061-.159-.063-.155-.064-.151-.066-.074-.033-.072-.033-.072-.034-.07-.034-.069-.035-.068-.035-.067-.035-.066-.035-.064-.036-.063-.036-.062-.036-.061-.036-.06-.037-.058-.037-.057-.037-.056-.038-.055-.038-.053-.038-.052-.038-.051-.039-.049-.039-.049-.039-.046-.039-.046-.04-.044-.04-.043-.04-.041-.04-.04-.041-.039-.041-.037-.041-.036-.041-.034-.041-.033-.042-.032-.042-.03-.042-.029-.042-.027-.042-.026-.043-.024-.043-.023-.043-.021-.043-.02-.043-.018-.044-.017-.043-.015-.044-.013-.044-.012-.044-.011-.045-.009-.044-.007-.045-.006-.045-.004-.045-.002-.045-.001-.045v-17l.001-.045.002-.045.004-.045.006-.045.007-.045.009-.044.011-.045.012-.044.013-.044.015-.044.017-.043.018-.044.02-.043.021-.043.023-.043.024-.043.026-.043.027-.042.029-.042.03-.042.032-.042.033-.042.034-.041.036-.041.037-.041.039-.041.04-.041.041-.04.043-.04.044-.04.046-.04.046-.039.049-.039.049-.039.051-.039.052-.038.053-.038.055-.038.056-.038.057-.037.058-.037.06-.037.061-.036.062-.036.063-.036.064-.036.066-.035.067-.035.068-.035.069-.035.07-.034.072-.034.072-.033.074-.033.151-.066.155-.064.159-.063.164-.061.167-.06.172-.059.176-.057.179-.056.184-.054.187-.053.19-.051.195-.05.198-.048.201-.046.204-.045.208-.043.211-.041.214-.04.217-.038.22-.036.223-.034.226-.032.228-.031.231-.028.234-.027.236-.024.238-.023.241-.02.243-.019.245-.016.247-.015.249-.012.251-.01.253-.008.255-.005.256-.004.258-.001.258.001zm-9.258 20.499v.01l.001.021.003.021.004.022.005.021.006.022.007.022.009.023.01.022.011.023.012.023.013.023.015.023.016.024.017.023.018.024.019.024.021.024.022.025.023.024.024.025.052.049.056.05.061.051.066.051.07.051.075.051.079.052.084.052.088.052.092.052.097.052.102.051.105.052.11.052.114.051.119.051.123.051.127.05.131.05.135.05.139.048.144.049.147.047.152.047.155.047.16.045.163.045.167.043.171.043.176.041.178.041.183.039.187.039.19.037.194.035.197.035.202.033.204.031.209.03.212.029.216.027.219.025.222.024.226.021.23.02.233.018.236.016.24.015.243.012.246.01.249.008.253.005.256.004.259.001.26-.001.257-.004.254-.005.25-.008.247-.011.244-.012.241-.014.237-.016.233-.018.231-.021.226-.021.224-.024.22-.026.216-.027.212-.028.21-.031.205-.031.202-.034.198-.034.194-.036.191-.037.187-.039.183-.04.179-.04.175-.042.172-.043.168-.044.163-.045.16-.046.155-.046.152-.047.148-.048.143-.049.139-.049.136-.05.131-.05.126-.05.123-.051.118-.052.114-.051.11-.052.106-.052.101-.052.096-.052.092-.052.088-.053.083-.051.079-.052.074-.052.07-.051.065-.051.06-.051.056-.05.051-.05.023-.024.023-.025.021-.024.02-.024.019-.024.018-.024.017-.024.015-.023.014-.024.013-.023.012-.023.01-.023.01-.022.008-.022.006-.022.006-.022.004-.022.004-.021.001-.021.001-.021v-4.127l-.077.055-.08.053-.083.054-.085.053-.087.052-.09.052-.093.051-.095.05-.097.05-.1.049-.102.049-.105.048-.106.047-.109.047-.111.046-.114.045-.115.045-.118.044-.12.043-.122.042-.124.042-.126.041-.128.04-.13.04-.132.038-.134.038-.135.037-.138.037-.139.035-.142.035-.143.034-.144.033-.147.032-.148.031-.15.03-.151.03-.153.029-.154.027-.156.027-.158.026-.159.025-.161.024-.162.023-.163.022-.165.021-.166.02-.167.019-.169.018-.169.017-.171.016-.173.015-.173.014-.175.013-.175.012-.177.011-.178.01-.179.008-.179.008-.181.006-.182.005-.182.004-.184.003-.184.002h-.37l-.184-.002-.184-.003-.182-.004-.182-.005-.181-.006-.179-.008-.179-.008-.178-.01-.176-.011-.176-.012-.175-.013-.173-.014-.172-.015-.171-.016-.17-.017-.169-.018-.167-.019-.166-.02-.165-.021-.163-.022-.162-.023-.161-.024-.159-.025-.157-.026-.156-.027-.155-.027-.153-.029-.151-.03-.15-.03-.148-.031-.146-.032-.145-.033-.143-.034-.141-.035-.14-.035-.137-.037-.136-.037-.134-.038-.132-.038-.13-.04-.128-.04-.126-.041-.124-.042-.122-.042-.12-.044-.117-.043-.116-.045-.113-.045-.112-.046-.109-.047-.106-.047-.105-.048-.102-.049-.1-.049-.097-.05-.095-.05-.093-.052-.09-.051-.087-.052-.085-.053-.083-.054-.08-.054-.077-.054v4.127zm0-5.654v.011l.001.021.003.021.004.021.005.022.006.022.007.022.009.022.01.022.011.023.012.023.013.023.015.024.016.023.017.024.018.024.019.024.021.024.022.024.023.025.024.024.052.05.056.05.061.05.066.051.07.051.075.052.079.051.084.052.088.052.092.052.097.052.102.052.105.052.11.051.114.051.119.052.123.05.127.051.131.05.135.049.139.049.144.048.147.048.152.047.155.046.16.045.163.045.167.044.171.042.176.042.178.04.183.04.187.038.19.037.194.036.197.034.202.033.204.032.209.03.212.028.216.027.219.025.222.024.226.022.23.02.233.018.236.016.24.014.243.012.246.01.249.008.253.006.256.003.259.001.26-.001.257-.003.254-.006.25-.008.247-.01.244-.012.241-.015.237-.016.233-.018.231-.02.226-.022.224-.024.22-.025.216-.027.212-.029.21-.03.205-.032.202-.033.198-.035.194-.036.191-.037.187-.039.183-.039.179-.041.175-.042.172-.043.168-.044.163-.045.16-.045.155-.047.152-.047.148-.048.143-.048.139-.05.136-.049.131-.05.126-.051.123-.051.118-.051.114-.052.11-.052.106-.052.101-.052.096-.052.092-.052.088-.052.083-.052.079-.052.074-.051.07-.052.065-.051.06-.05.056-.051.051-.049.023-.025.023-.024.021-.025.02-.024.019-.024.018-.024.017-.024.015-.023.014-.023.013-.024.012-.022.01-.023.01-.023.008-.022.006-.022.006-.022.004-.021.004-.022.001-.021.001-.021v-4.139l-.077.054-.08.054-.083.054-.085.052-.087.053-.09.051-.093.051-.095.051-.097.05-.1.049-.102.049-.105.048-.106.047-.109.047-.111.046-.114.045-.115.044-.118.044-.12.044-.122.042-.124.042-.126.041-.128.04-.13.039-.132.039-.134.038-.135.037-.138.036-.139.036-.142.035-.143.033-.144.033-.147.033-.148.031-.15.03-.151.03-.153.028-.154.028-.156.027-.158.026-.159.025-.161.024-.162.023-.163.022-.165.021-.166.02-.167.019-.169.018-.169.017-.171.016-.173.015-.173.014-.175.013-.175.012-.177.011-.178.009-.179.009-.179.007-.181.007-.182.005-.182.004-.184.003-.184.002h-.37l-.184-.002-.184-.003-.182-.004-.182-.005-.181-.007-.179-.007-.179-.009-.178-.009-.176-.011-.176-.012-.175-.013-.173-.014-.172-.015-.171-.016-.17-.017-.169-.018-.167-.019-.166-.02-.165-.021-.163-.022-.162-.023-.161-.024-.159-.025-.157-.026-.156-.027-.155-.028-.153-.028-.151-.03-.15-.03-.148-.031-.146-.033-.145-.033-.143-.033-.141-.035-.14-.036-.137-.036-.136-.037-.134-.038-.132-.039-.13-.039-.128-.04-.126-.041-.124-.042-.122-.043-.12-.043-.117-.044-.116-.044-.113-.046-.112-.046-.109-.046-.106-.047-.105-.048-.102-.049-.1-.049-.097-.05-.095-.051-.093-.051-.09-.051-.087-.053-.085-.052-.083-.054-.08-.054-.077-.054v4.139zm0-5.666v.011l.001.02.003.022.004.021.005.022.006.021.007.022.009.023.01.022.011.023.012.023.013.023.015.023.016.024.017.024.018.023.019.024.021.025.022.024.023.024.024.025.052.05.056.05.061.05.066.051.07.051.075.052.079.051.084.052.088.052.092.052.097.052.102.052.105.051.11.052.114.051.119.051.123.051.127.05.131.05.135.05.139.049.144.048.147.048.152.047.155.046.16.045.163.045.167.043.171.043.176.042.178.04.183.04.187.038.19.037.194.036.197.034.202.033.204.032.209.03.212.028.216.027.219.025.222.024.226.021.23.02.233.018.236.017.24.014.243.012.246.01.249.008.253.006.256.003.259.001.26-.001.257-.003.254-.006.25-.008.247-.01.244-.013.241-.014.237-.016.233-.018.231-.02.226-.022.224-.024.22-.025.216-.027.212-.029.21-.03.205-.032.202-.033.198-.035.194-.036.191-.037.187-.039.183-.039.179-.041.175-.042.172-.043.168-.044.163-.045.16-.045.155-.047.152-.047.148-.048.143-.049.139-.049.136-.049.131-.051.126-.05.123-.051.118-.052.114-.051.11-.052.106-.052.101-.052.096-.052.092-.052.088-.052.083-.052.079-.052.074-.052.07-.051.065-.051.06-.051.056-.05.051-.049.023-.025.023-.025.021-.024.02-.024.019-.024.018-.024.017-.024.015-.023.014-.024.013-.023.012-.023.01-.022.01-.023.008-.022.006-.022.006-.022.004-.022.004-.021.001-.021.001-.021v-4.153l-.077.054-.08.054-.083.053-.085.053-.087.053-.09.051-.093.051-.095.051-.097.05-.1.049-.102.048-.105.048-.106.048-.109.046-.111.046-.114.046-.115.044-.118.044-.12.043-.122.043-.124.042-.126.041-.128.04-.13.039-.132.039-.134.038-.135.037-.138.036-.139.036-.142.034-.143.034-.144.033-.147.032-.148.032-.15.03-.151.03-.153.028-.154.028-.156.027-.158.026-.159.024-.161.024-.162.023-.163.023-.165.021-.166.02-.167.019-.169.018-.169.017-.171.016-.173.015-.173.014-.175.013-.175.012-.177.01-.178.01-.179.009-.179.007-.181.006-.182.006-.182.004-.184.003-.184.001-.185.001-.185-.001-.184-.001-.184-.003-.182-.004-.182-.006-.181-.006-.179-.007-.179-.009-.178-.01-.176-.01-.176-.012-.175-.013-.173-.014-.172-.015-.171-.016-.17-.017-.169-.018-.167-.019-.166-.02-.165-.021-.163-.023-.162-.023-.161-.024-.159-.024-.157-.026-.156-.027-.155-.028-.153-.028-.151-.03-.15-.03-.148-.032-.146-.032-.145-.033-.143-.034-.141-.034-.14-.036-.137-.036-.136-.037-.134-.038-.132-.039-.13-.039-.128-.041-.126-.041-.124-.041-.122-.043-.12-.043-.117-.044-.116-.044-.113-.046-.112-.046-.109-.046-.106-.048-.105-.048-.102-.048-.1-.05-.097-.049-.095-.051-.093-.051-.09-.052-.087-.052-.085-.053-.083-.053-.08-.054-.077-.054v4.153zm8.74-8.179l-.257.004-.254.005-.25.008-.247.011-.244.012-.241.014-.237.016-.233.018-.231.021-.226.022-.224.023-.22.026-.216.027-.212.028-.21.031-.205.032-.202.033-.198.034-.194.036-.191.038-.187.038-.183.04-.179.041-.175.042-.172.043-.168.043-.163.045-.16.046-.155.046-.152.048-.148.048-.143.048-.139.049-.136.05-.131.05-.126.051-.123.051-.118.051-.114.052-.11.052-.106.052-.101.052-.096.052-.092.052-.088.052-.083.052-.079.052-.074.051-.07.052-.065.051-.06.05-.056.05-.051.05-.023.025-.023.024-.021.024-.02.025-.019.024-.018.024-.017.023-.015.024-.014.023-.013.023-.012.023-.01.023-.01.022-.008.022-.006.023-.006.021-.004.022-.004.021-.001.021-.001.021.001.021.001.021.004.021.004.022.006.021.006.023.008.022.01.022.01.023.012.023.013.023.014.023.015.024.017.023.018.024.019.024.02.025.021.024.023.024.023.025.051.05.056.05.06.05.065.051.07.052.074.051.079.052.083.052.088.052.092.052.096.052.101.052.106.052.11.052.114.052.118.051.123.051.126.051.131.05.136.05.139.049.143.048.148.048.152.048.155.046.16.046.163.045.168.043.172.043.175.042.179.041.183.04.187.038.191.038.194.036.198.034.202.033.205.032.21.031.212.028.216.027.22.026.224.023.226.022.231.021.233.018.237.016.241.014.244.012.247.011.25.008.254.005.257.004.26.001.26-.001.257-.004.254-.005.25-.008.247-.011.244-.012.241-.014.237-.016.233-.018.231-.021.226-.022.224-.023.22-.026.216-.027.212-.028.21-.031.205-.032.202-.033.198-.034.194-.036.191-.038.187-.038.183-.04.179-.041.175-.042.172-.043.168-.043.163-.045.16-.046.155-.046.152-.048.148-.048.143-.048.139-.049.136-.05.131-.05.126-.051.123-.051.118-.051.114-.052.11-.052.106-.052.101-.052.096-.052.092-.052.088-.052.083-.052.079-.052.074-.051.07-.052.065-.051.06-.05.056-.05.051-.05.023-.025.023-.024.021-.024.02-.025.019-.024.018-.024.017-.023.015-.024.014-.023.013-.023.012-.023.01-.023.01-.022.008-.022.006-.023.006-.021.004-.022.004-.021.001-.021.001-.021-.001-.021-.001-.021-.004-.021-.004-.022-.006-.021-.006-.023-.008-.022-.01-.022-.01-.023-.012-.023-.013-.023-.014-.023-.015-.024-.017-.023-.018-.024-.019-.024-.02-.025-.021-.024-.023-.024-.023-.025-.051-.05-.056-.05-.06-.05-.065-.051-.07-.052-.074-.051-.079-.052-.083-.052-.088-.052-.092-.052-.096-.052-.101-.052-.106-.052-.11-.052-.114-.052-.118-.051-.123-.051-.126-.051-.131-.05-.136-.05-.139-.049-.143-.048-.148-.048-.152-.048-.155-.046-.16-.046-.163-.045-.168-.043-.172-.043-.175-.042-.179-.041-.183-.04-.187-.038-.191-.038-.194-.036-.198-.034-.202-.033-.205-.032-.21-.031-.212-.028-.216-.027-.22-.026-.224-.023-.226-.022-.231-.021-.233-.018-.237-.016-.241-.014-.244-.012-.247-.011-.25-.008-.254-.005-.257-.004-.26-.001-.26.001z")},insertComputerIcon:function(t){t.append("defs").append("symbol").attr("id","computer").attr("width","24").attr("height","24").append("path").attr("transform","scale(.5)").attr("d","M2 2v13h20v-13h-20zm18 11h-16v-9h16v9zm-10.228 6l.466-1h3.524l.467 1h-4.457zm14.228 3h-24l2-6h2.104l-1.33 4h18.45l-1.297-4h2.073l2 6zm-5-10h-14v-7h14v7z")},insertClockIcon:function(t){t.append("defs").append("symbol").attr("id","clock").attr("width","24").attr("height","24").append("path").attr("transform","scale(.5)").attr("d","M12 2c5.514 0 10 4.486 10 10s-4.486 10-10 10-10-4.486-10-10 4.486-10 10-10zm0-2c-6.627 0-12 5.373-12 12s5.373 12 12 12 12-5.373 12-12-5.373-12-12-12zm5.848 12.459c.202.038.202.333.001.372-1.907.361-6.045 1.111-6.547 1.111-.719 0-1.301-.582-1.301-1.301 0-.512.77-5.447 1.125-7.445.034-.192.312-.181.343.014l.985 6.238 5.394 1.011z")},getNoteRect:R0,sanitizeUrl:Y};function j0(t,e,r,i,n,a,s){W0(e.append("text").attr("x",r+n/2).attr("y",i+a/2+5).style("text-anchor","middle").text(t),s)}function z0(t,e,r,i,n,a,s,o){var{fontSize:l,fontFamily:c,fontWeight:h}=o,u=t.split(tl.lineBreakRegex);for(let t=0;t<u.length;t++){var d=t*l-l*(u.length-1)/2,p=e.append("text").attr("x",r+n/2).attr("y",i).style("text-anchor","middle").attr("dominant-baseline","middle").style("font-size",l).style("font-weight",h).style("font-family",c);p.append("tspan").attr("dy",d).text(u[t]).attr("alignment-baseline","mathematical"),W0(p,s)}}function U0(t,e,r,i,n,a,s,o){e=e.append("switch"),a=e.append("foreignObject").attr("x",r).attr("y",i).attr("width",n).attr("height",a).append("xhtml:div").style("display","table").style("height","100%").style("width","100%");a.append("div").style("display","table-cell").style("text-align","center").style("vertical-align","middle").text(t),z0(t,e,r,i,n,0,s,o),W0(a,s)}function W0(t,e){for(const r in e)e.hasOwnProperty(r)&&t.attr(r,e[r])}let H0=0,q0=0,V0=4,G0=2,X0=(o.yy=P0,{});class Z0{constructor(t){this.name="",this.data={},this.data.startx=void 0,this.data.stopx=void 0,this.data.starty=void 0,this.data.stopy=void 0,this.data.widthLimit=void 0,this.nextData={},this.nextData.startx=void 0,this.nextData.stopx=void 0,this.nextData.starty=void 0,this.nextData.stopy=void 0,this.nextData.cnt=0,Q0(t.db.getConfig())}setData(t,e,r,i){this.nextData.startx=this.data.startx=t,this.nextData.stopx=this.data.stopx=e,this.nextData.starty=this.data.starty=r,this.nextData.stopy=this.data.stopy=i}updateVal(t,e,r,i){void 0===t[e]?t[e]=r:t[e]=i(r,t[e])}insert(t){this.nextData.cnt=this.nextData.cnt+1;let e=this.nextData.startx===this.nextData.stopx?this.nextData.stopx+t.margin:this.nextData.stopx+2*t.margin,r=e+t.width,i=this.nextData.starty+2*t.margin,n=i+t.height;(e>=this.data.widthLimit||r>=this.data.widthLimit||this.nextData.cnt>V0)&&(e=this.nextData.startx+t.margin+X0.nextLinePaddingX,i=this.nextData.stopy+2*t.margin,this.nextData.stopx=r=e+t.width,this.nextData.starty=this.nextData.stopy,this.nextData.stopy=n=i+t.height,this.nextData.cnt=1),t.x=e,t.y=i,this.updateVal(this.data,"startx",e,Math.min),this.updateVal(this.data,"starty",i,Math.min),this.updateVal(this.data,"stopx",r,Math.max),this.updateVal(this.data,"stopy",n,Math.max),this.updateVal(this.nextData,"startx",e,Math.min),this.updateVal(this.nextData,"starty",i,Math.min),this.updateVal(this.nextData,"stopx",r,Math.max),this.updateVal(this.nextData,"stopy",n,Math.max)}init(t){this.name="",this.data={startx:void 0,stopx:void 0,starty:void 0,stopy:void 0,widthLimit:void 0},this.nextData={startx:void 0,stopx:void 0,starty:void 0,stopy:void 0,cnt:0},Q0(t.db.getConfig())}bumpLastMargin(t){this.data.stopx+=t,this.data.stopy+=t}}const Q0=function(t){Jc(X0,t),t.fontFamily&&(X0.personFontFamily=X0.systemFontFamily=X0.messageFontFamily=t.fontFamily),t.fontSize&&(X0.personFontSize=X0.systemFontSize=X0.messageFontSize=t.fontSize),t.fontWeight&&(X0.personFontWeight=X0.systemFontWeight=X0.messageFontWeight=t.fontWeight)},K0=(t,e)=>({fontFamily:t[e+"FontFamily"],fontSize:t[e+"FontSize"],fontWeight:t[e+"FontWeight"]}),J0=t=>({fontFamily:t.boundaryFontFamily,fontSize:t.boundaryFontSize,fontWeight:t.boundaryFontWeight});function td(t,e,r,i,n){if(!e[t].width)if(r)e[t].text=Hh(e[t].text,n,i),e[t].textLines=e[t].text.split(tl.lineBreakRegex).length,e[t].width=n,e[t].height=Vh(e[t].text,i);else{var a,r=e[t].text.split(tl.lineBreakRegex);e[t].textLines=r.length;e[t].height=0,e[t].width=0;for(const s of r)e[t].width=Math.max(Gh(s,i),e[t].width),a=Vh(s,i),e[t].height=e[t].height+a}}function ed(t,e,r){e.x=r.data.startx,e.y=r.data.starty,e.width=r.data.stopx-r.data.startx,e.height=r.data.stopy-r.data.starty,e.label.y=X0.c4ShapeMargin-35;var r=e.wrap&&X0.wrap,i=J0(X0),n=(i.fontSize=i.fontSize+2,i.fontWeight="bold",Gh(e.label.text,i));td("label",e,r,i,n),Y0.drawBoundary(t,e,X0)}function rd(r,i,n,t){let a=0;for(const h of t){a=0;var s=n[h],o=K0(X0,s.typeC4Shape.text);switch(o.fontSize=o.fontSize-2,s.typeC4Shape.width=Gh("<<"+s.typeC4Shape.text+">>",o),s.typeC4Shape.height=o.fontSize+2,s.typeC4Shape.Y=X0.c4ShapePadding,a=s.typeC4Shape.Y+s.typeC4Shape.height-4,s.image={width:0,height:0,Y:0},s.typeC4Shape.text){case"person":case"external_person":s.image.width=48,s.image.height=48,s.image.Y=a,a=s.image.Y+s.image.height}s.sprite&&(s.image.width=48,s.image.height=48,s.image.Y=a,a=s.image.Y+s.image.height);var o=s.wrap&&X0.wrap,l=X0.width-2*X0.c4ShapePadding,c=K0(X0,s.typeC4Shape.text);c.fontSize=c.fontSize+2,c.fontWeight="bold",td("label",s,o,c,l),s.label.Y=a+8,a=s.label.Y+s.label.height,s.type&&""!==s.type.text?(s.type.text="["+s.type.text+"]",td("type",s,o,K0(X0,s.typeC4Shape.text),l),s.type.Y=a+5,a=s.type.Y+s.type.height):s.techn&&""!==s.techn.text&&(s.techn.text="["+s.techn.text+"]",td("techn",s,o,K0(X0,s.techn.text),l),s.techn.Y=a+5,a=s.techn.Y+s.techn.height);let t=a,e=s.label.width;s.descr&&""!==s.descr.text&&(td("descr",s,o,K0(X0,s.typeC4Shape.text),l),s.descr.Y=a+20,a=s.descr.Y+s.descr.height,e=Math.max(s.label.width,s.descr.width),t=a-5*s.descr.textLines),e+=X0.c4ShapePadding,s.width=Math.max(s.width||X0.width,e,X0.width),s.height=Math.max(s.height||X0.height,t,X0.height),s.margin=s.margin||X0.c4ShapeMargin,r.insert(s),Y0.drawC4Shape(i,s,X0)}r.bumpLastMargin(X0.c4ShapeMargin)}class id{constructor(t,e){this.x=t,this.y=e}}let nd=function(t,e){let r=t.x,i=t.y,n=e.x,a=e.y,s=r+t.width/2,o=i+t.height/2,l=Math.abs(r-n),c=Math.abs(i-a),h=c/l,u=t.height/t.width,d=null;return i==a&&r<n?d=new id(r+t.width,o):i==a&&n<r?d=new id(r,o):r==n&&i<a?d=new id(s,i+t.height):r==n&&a<i&&(d=new id(s,i)),n<r&&i<a?d=h<=u?new id(r,o+h*t.width/2):new id(s-l/c*t.height/2,i+t.height):r<n&&i<a?d=h<=u?new id(r+t.width,o+h*t.width/2):new id(s+l/c*t.height/2,i+t.height):r<n&&a<i?d=h<=u?new id(r+t.width,o-h*t.width/2):new id(s+t.height/2*l/c,i):n<r&&a<i&&(d=h<=u?new id(r,o-t.width/2*h):new id(s-t.height/2*l/c,i)),d};function ad(t,e,r,i){let n=0;for(var a of e){n+=1;var s=a.wrap&&X0.wrap,o={fontFamily:(o=X0).messageFontFamily,fontSize:o.messageFontSize,fontWeight:o.messageFontWeight};"C4Dynamic"===i.db.getC4Type()&&(a.label.text=n+": "+a.label.text);let t=Gh(a.label.text,o);td("label",a,s,o,t),a.techn&&""!==a.techn.text&&(t=Gh(a.techn.text,o),td("techn",a,s,o,t)),a.descr&&""!==a.descr.text&&(t=Gh(a.descr.text,o),td("descr",a,s,o,t));s=r(a.from),o=r(a.to),o=(s=s,c=l=void 0,(l={x:0,y:0}).x=(o=o).x+o.width/2,l.y=o.y+o.height/2,c=nd(s,l),l.x=s.x+s.width/2,l.y=s.y+s.height/2,s=nd(o,l),{startPoint:c,endPoint:s});a.startPoint=o.startPoint,a.endPoint=o.endPoint}var l,c;Y0.drawRels(t,e,X0)}const sd={drawPersonOrSystemArray:rd,drawBoundary:ed,setConf:Q0,draw:function(t,e,r,i){X0=J().c4;var n=J().securityLevel;let a;"sandbox"===n&&(a=K("#i"+e));var s=K("sandbox"===n?a.nodes()[0].contentDocument.body:"body"),o=i.db,o=(i.db.setWrap(X0.wrap),V0=o.getC4ShapeInRow(),G0=o.getC4BoundaryInRow(),S.debug("C:"+JSON.stringify(X0,null,2)),"sandbox"===n?s.select(`[id="${e}"]`):K(`[id="${e}"]`)),n=(Y0.insertComputerIcon(o),Y0.insertDatabaseIcon(o),Y0.insertClockIcon(o),new Z0(i)),s=(n.setData(X0.diagramMarginX,X0.diagramMarginX,X0.diagramMarginY,X0.diagramMarginY),n.data.widthLimit=screen.availWidth,H0=X0.diagramMarginX,q0=X0.diagramMarginY,i.db.getTitle()),e=(function e(r,i,n,t,a){var s,o,l=new Z0(a);l.data.widthLimit=n.data.widthLimit/Math.min(G0,t.length);for([s,o]of t.entries()){let t=0;o.image={width:0,height:0,Y:0},o.sprite&&(o.image.width=48,o.image.height=48,o.image.Y=t,t=o.image.Y+o.image.height);var c=o.wrap&&X0.wrap,h=J0(X0),c=(h.fontSize=h.fontSize+2,h.fontWeight="bold",td("label",o,c,h,l.data.widthLimit),o.label.Y=t+8,t=o.label.Y+o.label.height,o.type&&""!==o.type.text&&(o.type.text="["+o.type.text+"]",h=J0(X0),td("type",o,c,h,l.data.widthLimit),o.type.Y=t+5,t=o.type.Y+o.type.height),o.descr&&""!==o.descr.text&&((h=J0(X0)).fontSize=h.fontSize-2,td("descr",o,c,h,l.data.widthLimit),o.descr.Y=t+20,t=o.descr.Y+o.descr.height),h=0==s||s%G0==0?(c=n.data.startx+X0.diagramMarginX,n.data.stopy+X0.diagramMarginY+t):(c=l.data.stopx!==l.data.startx?l.data.stopx+X0.diagramMarginX:l.data.startx,l.data.starty),l.setData(c,c,h,h),l.name=o.alias,a.db.getC4ShapeArray(o.alias));0<(h=a.db.getC4ShapeKeys(o.alias)).length&&rd(l,r,c,h),i=o.alias,0<(c=a.db.getBoundarys(i)).length&&e(r,0,l,c,a),"global"!==o.alias&&ed(r,o,l),n.data.stopy=Math.max(l.data.stopy+X0.c4ShapeMargin,n.data.stopy),n.data.stopx=Math.max(l.data.stopx+X0.c4ShapeMargin,n.data.stopx),H0=Math.max(H0,n.data.stopx),q0=Math.max(q0,n.data.stopy)}}(o,0,n,i.db.getBoundarys(""),i),Y0.insertArrowHead(o),Y0.insertArrowEnd(o),Y0.insertArrowCrossHead(o),Y0.insertArrowFilledHead(o),ad(o,i.db.getRels(),i.db.getC4Shape,i),n.data.stopx=H0,n.data.stopy=q0,n.data),i=e.stopy-e.starty+2*X0.diagramMarginY,n=e.stopx-e.startx+2*X0.diagramMarginX,s=(s&&o.append("text").text(s).attr("x",(e.stopx-e.startx)/2-4*X0.diagramMarginX).attr("y",e.starty+X0.diagramMarginY),K1(o,i,n,X0.useMaxWidth),s?60:0);o.attr("viewBox",e.startx-X0.diagramMarginX+" -"+(X0.diagramMarginY+s)+" "+n+" "+(i+s)),S.debug("models:",e)}};w6=[1,20],Gb=[1,32],e_=[1,33],Xb=[1,34],i_=[1,36],b=[1,39],f6=[1,37],D=[1,38],Ib=[1,44],t_=[1,45],a=[1,40],x=[1,41],w=[1,42],m=[1,43],Sn=[1,48],cb=[1,49],ic=[1,50],En=[1,51],y=[16,25],fe=[1,65],nb=[1,66],ab=[1,67],sb=[1,68],ob=[1,69],e=[1,70],T=[1,71],Su=[1,80],ib=[16,25,32,45,46,54,60,61,62,63,64,65,66,71,73],M=[16,25,30,32,45,46,50,54,60,61,62,63,64,65,66,71,73,88,89,90,91],lb=[5,8,9,10,11,16,19,23,25],hb=[54,88,89,90,91],eb=[54,65,66,88,89,90,91],rb=[54,60,61,62,63,64,88,89,90,91],ub=[16,25,32],db=[1,107],(p6={trace:function(){},yy:{},symbols_:{error:2,start:3,mermaidDoc:4,statments:5,direction:6,directive:7,direction_tb:8,direction_bt:9,direction_rl:10,direction_lr:11,graphConfig:12,openDirective:13,typeDirective:14,closeDirective:15,NEWLINE:16,":":17,argDirective:18,open_directive:19,type_directive:20,arg_directive:21,close_directive:22,CLASS_DIAGRAM:23,statements:24,EOF:25,statement:26,className:27,alphaNumToken:28,classLiteralName:29,GENERICTYPE:30,relationStatement:31,LABEL:32,classStatement:33,methodStatement:34,annotationStatement:35,clickStatement:36,cssClassStatement:37,noteStatement:38,acc_title:39,acc_title_value:40,acc_descr:41,acc_descr_value:42,acc_descr_multiline_value:43,CLASS:44,STYLE_SEPARATOR:45,STRUCT_START:46,members:47,STRUCT_STOP:48,ANNOTATION_START:49,ANNOTATION_END:50,MEMBER:51,SEPARATOR:52,relation:53,STR:54,NOTE_FOR:55,noteText:56,NOTE:57,relationType:58,lineType:59,AGGREGATION:60,EXTENSION:61,COMPOSITION:62,DEPENDENCY:63,LOLLIPOP:64,LINE:65,DOTTED_LINE:66,CALLBACK:67,LINK:68,LINK_TARGET:69,CLICK:70,CALLBACK_NAME:71,CALLBACK_ARGS:72,HREF:73,CSSCLASS:74,commentToken:75,textToken:76,graphCodeTokens:77,textNoTagsToken:78,TAGSTART:79,TAGEND:80,"==":81,"--":82,PCT:83,DEFAULT:84,SPACE:85,MINUS:86,keywords:87,UNICODE_TEXT:88,NUM:89,ALPHA:90,BQUOTE_STR:91,$accept:0,$end:1},terminals_:{2:"error",5:"statments",8:"direction_tb",9:"direction_bt",10:"direction_rl",11:"direction_lr",16:"NEWLINE",17:":",19:"open_directive",20:"type_directive",21:"arg_directive",22:"close_directive",23:"CLASS_DIAGRAM",25:"EOF",30:"GENERICTYPE",32:"LABEL",39:"acc_title",40:"acc_title_value",41:"acc_descr",42:"acc_descr_value",43:"acc_descr_multiline_value",44:"CLASS",45:"STYLE_SEPARATOR",46:"STRUCT_START",48:"STRUCT_STOP",49:"ANNOTATION_START",50:"ANNOTATION_END",51:"MEMBER",52:"SEPARATOR",54:"STR",55:"NOTE_FOR",57:"NOTE",60:"AGGREGATION",61:"EXTENSION",62:"COMPOSITION",63:"DEPENDENCY",64:"LOLLIPOP",65:"LINE",66:"DOTTED_LINE",67:"CALLBACK",68:"LINK",69:"LINK_TARGET",70:"CLICK",71:"CALLBACK_NAME",72:"CALLBACK_ARGS",73:"HREF",74:"CSSCLASS",77:"graphCodeTokens",79:"TAGSTART",80:"TAGEND",81:"==",82:"--",83:"PCT",84:"DEFAULT",85:"SPACE",86:"MINUS",87:"keywords",88:"UNICODE_TEXT",89:"NUM",90:"ALPHA",91:"BQUOTE_STR"},productions_:[0,[3,1],[3,1],[3,1],[3,2],[6,1],[6,1],[6,1],[6,1],[4,1],[7,4],[7,6],[13,1],[14,1],[18,1],[15,1],[12,4],[24,1],[24,2],[24,3],[27,1],[27,1],[27,2],[27,2],[27,2],[26,1],[26,2],[26,1],[26,1],[26,1],[26,1],[26,1],[26,1],[26,1],[26,1],[26,2],[26,2],[26,1],[33,2],[33,4],[33,5],[33,7],[35,4],[47,1],[47,2],[34,1],[34,2],[34,1],[34,1],[31,3],[31,4],[31,4],[31,5],[38,3],[38,2],[53,3],[53,2],[53,2],[53,1],[58,1],[58,1],[58,1],[58,1],[58,1],[59,1],[59,1],[36,3],[36,4],[36,3],[36,4],[36,4],[36,5],[36,3],[36,4],[36,4],[36,5],[36,3],[36,4],[36,4],[36,5],[37,3],[75,1],[75,1],[76,1],[76,1],[76,1],[76,1],[76,1],[76,1],[76,1],[78,1],[78,1],[78,1],[78,1],[28,1],[28,1],[28,1],[29,1],[56,1]],performAction:function(t,e,r,i,n,a,s){var o=a.length-1;switch(n){case 5:i.setDirection("TB");break;case 6:i.setDirection("BT");break;case 7:i.setDirection("RL");break;case 8:i.setDirection("LR");break;case 12:i.parseDirective("%%{","open_directive");break;case 13:i.parseDirective(a[o],"type_directive");break;case 14:a[o]=a[o].trim().replace(/'/g,'"'),i.parseDirective(a[o],"arg_directive");break;case 15:i.parseDirective("}%%","close_directive","class");break;case 20:case 21:this.$=a[o];break;case 22:this.$=a[o-1]+a[o];break;case 23:case 24:this.$=a[o-1]+"~"+a[o];break;case 25:i.addRelation(a[o]);break;case 26:a[o-1].title=i.cleanupLabel(a[o]),i.addRelation(a[o-1]);break;case 35:this.$=a[o].trim(),i.setAccTitle(this.$);break;case 36:case 37:this.$=a[o].trim(),i.setAccDescription(this.$);break;case 38:i.addClass(a[o]);break;case 39:i.addClass(a[o-2]),i.setCssClass(a[o-2],a[o]);break;case 40:i.addClass(a[o-3]),i.addMembers(a[o-3],a[o-1]);break;case 41:i.addClass(a[o-5]),i.setCssClass(a[o-5],a[o-3]),i.addMembers(a[o-5],a[o-1]);break;case 42:i.addAnnotation(a[o],a[o-2]);break;case 43:this.$=[a[o]];break;case 44:a[o].push(a[o-1]),this.$=a[o];break;case 45:break;case 46:i.addMember(a[o-1],i.cleanupLabel(a[o]));break;case 47:case 48:break;case 49:this.$={id1:a[o-2],id2:a[o],relation:a[o-1],relationTitle1:"none",relationTitle2:"none"};break;case 50:this.$={id1:a[o-3],id2:a[o],relation:a[o-1],relationTitle1:a[o-2],relationTitle2:"none"};break;case 51:this.$={id1:a[o-3],id2:a[o],relation:a[o-2],relationTitle1:"none",relationTitle2:a[o-1]};break;case 52:this.$={id1:a[o-4],id2:a[o],relation:a[o-2],relationTitle1:a[o-3],relationTitle2:a[o-1]};break;case 53:i.addNote(a[o],a[o-1]);break;case 54:i.addNote(a[o]);break;case 55:this.$={type1:a[o-2],type2:a[o],lineType:a[o-1]};break;case 56:this.$={type1:"none",type2:a[o],lineType:a[o-1]};break;case 57:this.$={type1:a[o-1],type2:"none",lineType:a[o]};break;case 58:this.$={type1:"none",type2:"none",lineType:a[o]};break;case 59:this.$=i.relationType.AGGREGATION;break;case 60:this.$=i.relationType.EXTENSION;break;case 61:this.$=i.relationType.COMPOSITION;break;case 62:this.$=i.relationType.DEPENDENCY;break;case 63:this.$=i.relationType.LOLLIPOP;break;case 64:this.$=i.lineType.LINE;break;case 65:this.$=i.lineType.DOTTED_LINE;break;case 66:case 72:this.$=a[o-2],i.setClickEvent(a[o-1],a[o]);break;case 67:case 73:this.$=a[o-3],i.setClickEvent(a[o-2],a[o-1]),i.setTooltip(a[o-2],a[o]);break;case 68:case 76:this.$=a[o-2],i.setLink(a[o-1],a[o]);break;case 69:this.$=a[o-3],i.setLink(a[o-2],a[o-1],a[o]);break;case 70:case 78:this.$=a[o-3],i.setLink(a[o-2],a[o-1]),i.setTooltip(a[o-2],a[o]);break;case 71:case 79:this.$=a[o-4],i.setLink(a[o-3],a[o-2],a[o]),i.setTooltip(a[o-3],a[o-1]);break;case 74:this.$=a[o-3],i.setClickEvent(a[o-2],a[o-1],a[o]);break;case 75:this.$=a[o-4],i.setClickEvent(a[o-3],a[o-2],a[o-1]),i.setTooltip(a[o-3],a[o]);break;case 77:this.$=a[o-3],i.setLink(a[o-2],a[o-1],a[o]);break;case 80:i.setCssClass(a[o-1],a[o])}},table:[{3:1,4:2,5:p6=[1,3],6:4,7:5,8:N=[1,7],9:O=[1,8],10:E=[1,9],11:A=[1,10],12:6,13:11,19:B=[1,13],23:_f=[1,12]},{1:[3]},{1:[2,1]},{1:[2,2]},{1:[2,3]},{3:14,4:2,5:p6,6:4,7:5,8:N,9:O,10:E,11:A,12:6,13:11,19:B,23:_f},{1:[2,9]},h(L=[1,16,25],[2,5]),h(L,[2,6]),h(L,[2,7]),h(L,[2,8]),{14:15,20:[1,16]},{16:[1,17]},{20:[2,12]},{1:[2,4]},{15:18,17:[1,19],22:w6},h([17,22],[2,13]),{6:31,7:30,8:N,9:O,10:E,11:A,13:11,19:B,24:21,26:22,27:35,28:46,29:47,31:23,33:24,34:25,35:26,36:27,37:28,38:29,39:Gb,41:e_,43:Xb,44:i_,49:b,51:f6,52:D,55:Ib,57:t_,67:a,68:x,70:w,74:m,88:Sn,89:cb,90:ic,91:En},{16:[1,52]},{18:53,21:[1,54]},{16:[2,15]},{25:[1,55]},{16:[1,56],25:[2,17]},h(y,[2,25],{32:[1,57]}),h(y,[2,27]),h(y,[2,28]),h(y,[2,29]),h(y,[2,30]),h(y,[2,31]),h(y,[2,32]),h(y,[2,33]),h(y,[2,34]),{40:[1,58]},{42:[1,59]},h(y,[2,37]),h(y,[2,45],{53:60,58:63,59:64,32:[1,62],54:[1,61],60:fe,61:nb,62:ab,63:sb,64:ob,65:e,66:T}),{27:72,28:46,29:47,88:Sn,89:cb,90:ic,91:En},h(y,[2,47]),h(y,[2,48]),{28:73,88:Sn,89:cb,90:ic},{27:74,28:46,29:47,88:Sn,89:cb,90:ic,91:En},{27:75,28:46,29:47,88:Sn,89:cb,90:ic,91:En},{27:76,28:46,29:47,88:Sn,89:cb,90:ic,91:En},{54:[1,77]},{27:78,28:46,29:47,88:Sn,89:cb,90:ic,91:En},{54:Su,56:79},h(ib,[2,20],{28:46,29:47,27:81,30:[1,82],88:Sn,89:cb,90:ic,91:En}),h(ib,[2,21],{30:[1,83]}),h(M,[2,94]),h(M,[2,95]),h(M,[2,96]),h([16,25,30,32,45,46,54,60,61,62,63,64,65,66,71,73],[2,97]),h(lb,[2,10]),{15:84,22:w6},{22:[2,14]},{1:[2,16]},{6:31,7:30,8:N,9:O,10:E,11:A,13:11,19:B,24:85,25:[2,18],26:22,27:35,28:46,29:47,31:23,33:24,34:25,35:26,36:27,37:28,38:29,39:Gb,41:e_,43:Xb,44:i_,49:b,51:f6,52:D,55:Ib,57:t_,67:a,68:x,70:w,74:m,88:Sn,89:cb,90:ic,91:En},h(y,[2,26]),h(y,[2,35]),h(y,[2,36]),{27:86,28:46,29:47,54:[1,87],88:Sn,89:cb,90:ic,91:En},{53:88,58:63,59:64,60:fe,61:nb,62:ab,63:sb,64:ob,65:e,66:T},h(y,[2,46]),{59:89,65:e,66:T},h(hb,[2,58],{58:90,60:fe,61:nb,62:ab,63:sb,64:ob}),h(eb,[2,59]),h(eb,[2,60]),h(eb,[2,61]),h(eb,[2,62]),h(eb,[2,63]),h(rb,[2,64]),h(rb,[2,65]),h(y,[2,38],{45:[1,91],46:[1,92]}),{50:[1,93]},{54:[1,94]},{54:[1,95]},{71:[1,96],73:[1,97]},{28:98,88:Sn,89:cb,90:ic},{54:Su,56:99},h(y,[2,54]),h(y,[2,98]),h(ib,[2,22]),h(ib,[2,23]),h(ib,[2,24]),{16:[1,100]},{25:[2,19]},h(ub,[2,49]),{27:101,28:46,29:47,88:Sn,89:cb,90:ic,91:En},{27:102,28:46,29:47,54:[1,103],88:Sn,89:cb,90:ic,91:En},h(hb,[2,57],{58:104,60:fe,61:nb,62:ab,63:sb,64:ob}),h(hb,[2,56]),{28:105,88:Sn,89:cb,90:ic},{47:106,51:db},{27:108,28:46,29:47,88:Sn,89:cb,90:ic,91:En},h(y,[2,66],{54:[1,109]}),h(y,[2,68],{54:[1,111],69:[1,110]}),h(y,[2,72],{54:[1,112],72:[1,113]}),h(y,[2,76],{54:[1,115],69:[1,114]}),h(y,[2,80]),h(y,[2,53]),h(lb,[2,11]),h(ub,[2,51]),h(ub,[2,50]),{27:116,28:46,29:47,88:Sn,89:cb,90:ic,91:En},h(hb,[2,55]),h(y,[2,39],{46:[1,117]}),{48:[1,118]},{47:119,48:[2,43],51:db},h(y,[2,42]),h(y,[2,67]),h(y,[2,69]),h(y,[2,70],{69:[1,120]}),h(y,[2,73]),h(y,[2,74],{54:[1,121]}),h(y,[2,77]),h(y,[2,78],{69:[1,122]}),h(ub,[2,52]),{47:123,51:db},h(y,[2,40]),{48:[2,44]},h(y,[2,71]),h(y,[2,75]),h(y,[2,79]),{48:[1,124]},h(y,[2,41])],defaultActions:{2:[2,1],3:[2,2],4:[2,3],6:[2,9],13:[2,12],14:[2,4],20:[2,15],54:[2,14],55:[2,16],85:[2,19],119:[2,44]},parseError:function(t,e){var r;if(!e.recoverable)throw(r=new Error(t)).hash=e,r;this.trace(t)},parse:function(t){var e,r=this,i=[0],n=[],a=[null],s=[],o=this.table,l="",c=0,h=0,u=1,d=s.slice.call(arguments,1),p=Object.create(this.lexer),f={yy:{}};for(e in this.yy)Object.prototype.hasOwnProperty.call(this.yy,e)&&(f.yy[e]=this.yy[e]);p.setInput(t,f.yy),f.yy.lexer=p,f.yy.parser=this,"u"<typeof p.yylloc&&(p.yylloc={});var g=p.yylloc,y=(s.push(g),p.options&&p.options.ranges);"function"==typeof f.yy.parseError?this.parseError=f.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;for(var m,b,_,x,v,k,w={};;){if(b=i[i.length-1],"u"<typeof(_=this.defaultActions[b]||((null===m||"u"<typeof m)&&(T=void 0,"number"!=typeof(T=n.pop()||p.lex()||u)&&(T instanceof Array&&(T=(n=T).pop()),T=r.symbols_[T]||T),m=T),o[b]&&o[b][m]))||!_.length||!_[0]){var T="",C=[];for(x in o[b])this.terminals_[x]&&2<x&&C.push("'"+this.terminals_[x]+"'");T=p.showPosition?"Parse error on line "+(c+1)+`:
`+p.showPosition()+`
Expecting `+C.join(", ")+", got '"+(this.terminals_[m]||m)+"'":"Parse error on line "+(c+1)+": Unexpected "+(m==u?"end of input":"'"+(this.terminals_[m]||m)+"'"),this.parseError(T,{text:p.match,token:this.terminals_[m]||m,line:p.yylineno,loc:g,expected:C})}if(_[0]instanceof Array&&1<_.length)throw new Error("Parse Error: multiple actions possible at state: "+b+", token: "+m);switch(_[0]){case 1:i.push(m),a.push(p.yytext),s.push(p.yylloc),i.push(_[1]),m=null,h=p.yyleng,l=p.yytext,c=p.yylineno,g=p.yylloc;break;case 2:if(v=this.productions_[_[1]][1],w.$=a[a.length-v],w._$={first_line:s[s.length-(v||1)].first_line,last_line:s[s.length-1].last_line,first_column:s[s.length-(v||1)].first_column,last_column:s[s.length-1].last_column},y&&(w._$.range=[s[s.length-(v||1)].range[0],s[s.length-1].range[1]]),typeof(k=this.performAction.apply(w,[l,h,c,f.yy,_[1],a,s].concat(d)))<"u")return k;v&&(i=i.slice(0,-1*v*2),a=a.slice(0,-1*v),s=s.slice(0,-1*v)),i.push(this.productions_[_[1]][0]),a.push(w.$),s.push(w._$),k=o[i[i.length-2]][i[i.length-1]],i.push(k);break;case 3:return!0}}return!0}}).lexer={EOF:1,parseError:function(t,e){if(!this.yy.parser)throw new Error(t);this.yy.parser.parseError(t,e)},setInput:function(t,e){return this.yy=e||this.yy||{},this._input=t,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var t=this._input[0];return this.yytext+=t,this.yyleng++,this.offset++,this.match+=t,this.matched+=t,t.match(/(?:\r\n?|\n).*/g)?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),t},unput:function(t){var e=t.length,r=t.split(/(?:\r\n?|\n)/g),t=(this._input=t+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-e),this.offset-=e,this.match.split(/(?:\r\n?|\n)/g)),i=(this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),r.length-1&&(this.yylineno-=r.length-1),this.yylloc.range);return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:r?(r.length===t.length?this.yylloc.first_column:0)+t[t.length-r.length].length-r[0].length:this.yylloc.first_column-e},this.options.ranges&&(this.yylloc.range=[i[0],i[0]+this.yyleng-e]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){return this.options.backtrack_lexer?(this._backtrack=!0,this):this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},less:function(t){this.unput(this.match.slice(t))},pastInput:function(){var t=this.matched.substr(0,this.matched.length-this.match.length);return(20<t.length?"...":"")+t.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var t=this.match;return t.length<20&&(t+=this._input.substr(0,20-t.length)),(t.substr(0,20)+(20<t.length?"...":"")).replace(/\n/g,"")},showPosition:function(){var t=this.pastInput(),e=new Array(t.length+1).join("-");return t+this.upcomingInput()+`
`+e+"^"},test_match:function(t,e){var r,i;if(this.options.backtrack_lexer&&(i={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges)&&(i.yylloc.range=this.yylloc.range.slice(0)),(r=t[0].match(/(?:\r\n?|\n).*/g))&&(this.yylineno+=r.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:r?r[r.length-1].length-r[r.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+t[0].length},this.yytext+=t[0],this.match+=t[0],this.matches=t,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(t[0].length),this.matched+=t[0],r=this.performAction.call(this,this.yy,this,e,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),r)return r;if(this._backtrack)for(var n in i)this[n]=i[n];return!1},next:function(){if(this.done)return this.EOF;var t,e,r,i;this._input||(this.done=!0),this._more||(this.yytext="",this.match="");for(var n=this._currentRules(),a=0;a<n.length;a++)if((r=this._input.match(this.rules[n[a]]))&&(!e||r[0].length>e[0].length)){if(e=r,i=a,this.options.backtrack_lexer){if(!1!==(t=this.test_match(r,n[a])))return t;if(this._backtrack){e=!1;continue}return!1}if(!this.options.flex)break}return e?!1!==(t=this.test_match(e,n[i]))&&t:""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){return this.next()||this.lex()},begin:function(t){this.conditionStack.push(t)},popState:function(){return 0<this.conditionStack.length-1?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return(this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]]:this.conditions.INITIAL).rules},topState:function(t){return 0<=(t=this.conditionStack.length-1-Math.abs(t||0))?this.conditionStack[t]:"INITIAL"},pushState:function(t){this.begin(t)},stateStackSize:function(){return this.conditionStack.length},options:{},performAction:function(t,e,r,i){switch(r){case 0:return this.begin("open_directive"),19;case 1:return 8;case 2:return 9;case 3:return 10;case 4:return 11;case 5:return this.begin("type_directive"),20;case 6:return this.popState(),this.begin("arg_directive"),17;case 7:return this.popState(),this.popState(),22;case 8:return 21;case 9:case 10:break;case 11:return this.begin("acc_title"),39;case 12:return this.popState(),"acc_title_value";case 13:return this.begin("acc_descr"),41;case 14:return this.popState(),"acc_descr_value";case 15:this.begin("acc_descr_multiline");break;case 16:this.popState();break;case 17:return"acc_descr_multiline_value";case 18:return 16;case 19:break;case 20:case 21:return 23;case 22:return this.begin("struct"),46;case 23:return"EDGE_STATE";case 24:return"EOF_IN_STRUCT";case 25:return"OPEN_IN_STRUCT";case 26:return this.popState(),48;case 27:break;case 28:return"MEMBER";case 29:return 44;case 30:return 74;case 31:return 67;case 32:return 68;case 33:return 70;case 34:return 55;case 35:return 57;case 36:return 49;case 37:return 50;case 38:this.begin("generic");break;case 39:this.popState();break;case 40:return"GENERICTYPE";case 41:this.begin("string");break;case 42:this.popState();break;case 43:return"STR";case 44:this.begin("bqstring");break;case 45:this.popState();break;case 46:return"BQUOTE_STR";case 47:this.begin("href");break;case 48:this.popState();break;case 49:return 73;case 50:this.begin("callback_name");break;case 51:this.popState();break;case 52:this.popState(),this.begin("callback_args");break;case 53:return 71;case 54:this.popState();break;case 55:return 72;case 56:case 57:case 58:case 59:return 69;case 60:case 61:return 61;case 62:case 63:return 63;case 64:return 62;case 65:return 60;case 66:return 64;case 67:return 65;case 68:return 66;case 69:return 32;case 70:return 45;case 71:return 86;case 72:return"DOT";case 73:return"PLUS";case 74:return 83;case 75:case 76:return"EQUALS";case 77:return 90;case 78:return"PUNCTUATION";case 79:return 89;case 80:return 88;case 81:return 85;case 82:return 25}},rules:[/^(?:%%\{)/,/^(?:.*direction\s+TB[^\n]*)/,/^(?:.*direction\s+BT[^\n]*)/,/^(?:.*direction\s+RL[^\n]*)/,/^(?:.*direction\s+LR[^\n]*)/,/^(?:((?:(?!\}%%)[^:.])*))/,/^(?::)/,/^(?:\}%%)/,/^(?:((?:(?!\}%%).|\n)*))/,/^(?:%%(?!\{)*[^\n]*(\r?\n?)+)/,/^(?:%%[^\n]*(\r?\n)*)/,/^(?:accTitle\s*:\s*)/,/^(?:(?!\n||)*[^\n]*)/,/^(?:accDescr\s*:\s*)/,/^(?:(?!\n||)*[^\n]*)/,/^(?:accDescr\s*\{\s*)/,/^(?:[\}])/,/^(?:[^\}]*)/,/^(?:\s*(\r?\n)+)/,/^(?:\s+)/,/^(?:classDiagram-v2\b)/,/^(?:classDiagram\b)/,/^(?:[{])/,/^(?:\[\*\])/,/^(?:$)/,/^(?:[{])/,/^(?:[}])/,/^(?:[\n])/,/^(?:[^{}\n]*)/,/^(?:class\b)/,/^(?:cssClass\b)/,/^(?:callback\b)/,/^(?:link\b)/,/^(?:click\b)/,/^(?:note for\b)/,/^(?:note\b)/,/^(?:<<)/,/^(?:>>)/,/^(?:[~])/,/^(?:[~])/,/^(?:[^~]*)/,/^(?:["])/,/^(?:["])/,/^(?:[^"]*)/,/^(?:[`])/,/^(?:[`])/,/^(?:[^`]+)/,/^(?:href[\s]+["])/,/^(?:["])/,/^(?:[^"]*)/,/^(?:call[\s]+)/,/^(?:\([\s]*\))/,/^(?:\()/,/^(?:[^(]*)/,/^(?:\))/,/^(?:[^)]*)/,/^(?:_self\b)/,/^(?:_blank\b)/,/^(?:_parent\b)/,/^(?:_top\b)/,/^(?:\s*<\|)/,/^(?:\s*\|>)/,/^(?:\s*>)/,/^(?:\s*<)/,/^(?:\s*\*)/,/^(?:\s*o\b)/,/^(?:\s*\(\))/,/^(?:--)/,/^(?:\.\.)/,/^(?::{1}[^:\n;]+)/,/^(?::{3})/,/^(?:-)/,/^(?:\.)/,/^(?:\+)/,/^(?:%)/,/^(?:=)/,/^(?:=)/,/^(?:\w+)/,/^(?:[!"#$%&'*+,-.`?\\/])/,/^(?:[0-9]+)/,/^(?:[\u00AA\u00B5\u00BA\u00C0-\u00D6\u00D8-\u00F6]|[\u00F8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377]|[\u037A-\u037D\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5]|[\u03F7-\u0481\u048A-\u0527\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA]|[\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE]|[\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA]|[\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u08A0]|[\u08A2-\u08AC\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0977]|[\u0979-\u097F\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2]|[\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u0A05-\u0A0A]|[\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39]|[\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8]|[\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0B05-\u0B0C]|[\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C]|[\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99]|[\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0]|[\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C33\u0C35-\u0C39\u0C3D]|[\u0C58\u0C59\u0C60\u0C61\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3]|[\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10]|[\u0D12-\u0D3A\u0D3D\u0D4E\u0D60\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1]|[\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81]|[\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3]|[\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6]|[\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A]|[\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081]|[\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D]|[\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0]|[\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310]|[\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F4\u1401-\u166C]|[\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u1700-\u170C\u170E-\u1711]|[\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7]|[\u17DC\u1820-\u1877\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191C]|[\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19C1-\u19C7\u1A00-\u1A16]|[\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF]|[\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1CE9-\u1CEC]|[\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D]|[\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D]|[\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3]|[\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F]|[\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128]|[\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184]|[\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3]|[\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6]|[\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE]|[\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C]|[\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D]|[\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FCC]|[\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B]|[\uA640-\uA66E\uA67F-\uA697\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788]|[\uA78B-\uA78E\uA790-\uA793\uA7A0-\uA7AA\uA7F8-\uA801\uA803-\uA805]|[\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB]|[\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uAA00-\uAA28]|[\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA80-\uAAAF\uAAB1\uAAB5]|[\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4]|[\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E]|[\uABC0-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D]|[\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36]|[\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D]|[\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC]|[\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF]|[\uFFD2-\uFFD7\uFFDA-\uFFDC])/,/^(?:\s)/,/^(?:$)/],conditions:{acc_descr_multiline:{rules:[16,17],inclusive:!1},acc_descr:{rules:[14],inclusive:!1},acc_title:{rules:[12],inclusive:!1},arg_directive:{rules:[7,8],inclusive:!1},type_directive:{rules:[6,7],inclusive:!1},open_directive:{rules:[5],inclusive:!1},callback_args:{rules:[54,55],inclusive:!1},callback_name:{rules:[51,52,53],inclusive:!1},href:{rules:[48,49],inclusive:!1},struct:{rules:[23,24,25,26,27,28],inclusive:!1},generic:{rules:[39,40],inclusive:!1},bqstring:{rules:[45,46],inclusive:!1},string:{rules:[42,43],inclusive:!1},INITIAL:{rules:[0,1,2,3,4,9,10,11,13,15,18,19,20,21,22,23,29,30,31,32,33,34,35,36,37,38,41,44,47,50,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82],inclusive:!0}}};var od=new((ld.prototype=p6).Parser=ld);function h(t,e,r,i){for(r=r||{},i=t.length;i--;r[t[i]]=e);return r}function ld(){this.yy={}}const cd=od.parser=od,hd=(t,e)=>{return"dagre-wrapper"!==(null==(e=null==e?void 0:e.class)?void 0:e.defaultRenderer)&&null!==t.match(/^\s*classDiagram/)},ud=(t,e)=>{return null!==t.match(/^\s*classDiagram/)&&"dagre-wrapper"===(null==(e=null==e?void 0:e.class)?void 0:e.defaultRenderer)||null!==t.match(/^\s*classDiagram-v2/)},dd="classid-";let pd=[],fd={},gd=[],yd=0,md=[];function bd(t){let e="",r=t;return 0<t.indexOf("~")&&(t=t.split("~"),r=t[0],e=tl.sanitizeText(t[1],J())),{className:r,type:e}}function _d(t){t=bd(t),void 0===fd[t.className]&&(fd[t.className]={id:t.className,type:t.type,cssClasses:[],methods:[],members:[],annotations:[],domId:dd+t.className+"-"+yd},yd++)}function xd(t,e){t=bd(t).className,t=fd[t],"string"==typeof e&&((e=e.trim()).startsWith("<<")&&e.endsWith(">>")?t.annotations.push(wd(e.substring(2,e.length-2))):0<e.indexOf(")")?t.methods.push(wd(e)):e&&t.members.push(wd(e)))}function vd(t,r){t.split(",").forEach(function(t){let e=t;t[0].match(/\d/)&&(e=dd+e),void 0!==fd[e]&&fd[e].cssClasses.push(r)})}function kd(t){let r=K(".mermaidTooltip");null===(r._groups||r)[0][0]&&(r=K("body").append("div").attr("class","mermaidTooltip").style("opacity",0)),K(t).select("svg").selectAll("g.node").on("mouseover",function(){var t,e=K(this);null!==e.attr("title")&&(t=this.getBoundingClientRect(),r.transition().duration(200).style("opacity",".9"),r.text(e.attr("title")).style("left",window.scrollX+t.left+(t.right-t.left)/2+"px").style("top",window.scrollY+t.top-14+document.body.scrollTop+"px"),r.html(r.html().replace(/&lt;br\/&gt;/g,"<br/>")),e.classed("hover",!0))}).on("mouseout",function(){r.transition().duration(500).style("opacity",0),K(this).classed("hover",!1)})}const wd=t=>tl.sanitizeText(t,J()),Td=function(t){for(const e of Object.keys(fd))if(fd[e].id===t)return fd[e].domId};md.push(kd);let Cd="TB";const Ed={parseDirective:function(t,e,r){Jv.parseDirective(this,t,e,r)},setAccTitle:Iu,getAccTitle:Fu,getAccDescription:Pu,setAccDescription:Ru,getConfig:()=>J().class,addClass:_d,bindFunctions:function(e){md.forEach(function(t){t(e)})},clear:function(){pd=[],fd={},gd=[],(md=[]).push(kd),Bu()},getClass:function(t){return fd[t]},getClasses:function(){return fd},getNotes:function(){return gd},addAnnotation:function(t,e){t=bd(t).className;fd[t].annotations.push(e)},addNote:function(t,e){e={id:"note"+gd.length,class:e,text:t};gd.push(e)},getRelations:function(){return pd},addRelation:function(t){S.debug("Adding relation: "+JSON.stringify(t)),_d(t.id1),_d(t.id2),t.id1=bd(t.id1).className,t.id2=bd(t.id2).className,t.relationTitle1=tl.sanitizeText(t.relationTitle1.trim(),J()),t.relationTitle2=tl.sanitizeText(t.relationTitle2.trim(),J()),pd.push(t)},getDirection:()=>Cd,setDirection:t=>{Cd=t},addMember:xd,addMembers:function(e,t){Array.isArray(t)&&(t.reverse(),t.forEach(t=>xd(e,t)))},cleanupLabel:function(t){return":"===t.substring(0,1)?tl.sanitizeText(t.substr(1).trim(),J()):wd(t.trim())},lineType:{LINE:0,DOTTED_LINE:1},relationType:{AGGREGATION:0,EXTENSION:1,COMPOSITION:2,DEPENDENCY:3,LOLLIPOP:4},setClickEvent:function(t,o,l){t.split(",").forEach(function(r){{var i=r,n=o,a=l,s=J();let t=i,e=Td(t);if("loose"===s.securityLevel&&void 0!==n&&void 0!==fd[t]){let r=[];if("string"==typeof a){r=a.split(/,(?=(?:(?:[^"]*"){2})*[^"]*$)/);for(let e=0;e<r.length;e++){let t=r[e].trim();'"'===t.charAt(0)&&'"'===t.charAt(t.length-1)&&(t=t.substr(1,t.length-2)),r[e]=t}}0===r.length&&r.push(e),md.push(function(){var t=document.querySelector(`[id="${e}"]`);null!==t&&t.addEventListener("click",function(){t1.runFunc(n,...r)},!1)})}}fd[r].haveCallback=!0}),vd(t,"clickable")},setCssClass:vd,setLink:function(t,r,i){const n=J();t.split(",").forEach(function(t){let e=t;t[0].match(/\d/)&&(e=dd+e),void 0!==fd[e]&&(fd[e].link=t1.formatUrl(r,n),"sandbox"===n.securityLevel?fd[e].linkTarget="_top":fd[e].linkTarget="string"==typeof i?wd(i):"_blank")}),vd(t,"clickable")},getTooltip:function(t){return fd[t].tooltip},setTooltip:function(t,e){const r=J();t.split(",").forEach(function(t){void 0!==e&&(fd[t].tooltip=tl.sanitizeText(e,r))})},lookUpDomId:Td,setDiagramTitle:$u,getDiagramTitle:Yu};function Sd(t){return null!=t&&"object"==typeof t}function Ad(t){return"symbol"==typeof t||Sd(t)&&"[object Symbol]"==lh(t)}function Dd(t,e){for(var r=-1,i=null==t?0:t.length,n=Array(i);++r<i;)n[r]=e(t[r],r,t);return n}const Ld=Array.isArray;var Md=r?r.prototype:void 0,Nd=Md?Md.toString:void 0;function Od(t){var e;return"string"==typeof t?t:Ld(t)?Dd(t,Od)+"":Ad(t)?Nd?Nd.call(t):"":"0"==(e=t+"")&&1/t==-1/0?"-0":e}var Bd=/\s/;var Id=/^\s+/;function Fd(t){return t&&t.slice(0,function(t){for(var e=t.length;e--&&Bd.test(t.charAt(e)););return e}(t)+1).replace(Id,"")}var Rd=NaN,Pd=/^[-+]0x[0-9a-f]+$/i,$d=/^0b[01]+$/i,Yd=/^0o[0-7]+$/i,jd=parseInt;var zd=1/0,Ud=17976931348623157e292;function Wd(t){return t?(t=function(t){if("number"==typeof t)return t;if(Ad(t))return Rd;if("string"!=typeof(t=ch(t)?ch(e="function"==typeof t.valueOf?t.valueOf():t)?e+"":e:t))return 0===t?t:+t;t=Fd(t);var e=$d.test(t);return e||Yd.test(t)?jd(t.slice(2),e?2:8):Pd.test(t)?Rd:+t}(t))===zd||t===-zd?(t<0?-1:1)*Ud:t==t?t:0:0===t?t:0}function Hd(t){return t}var qd=kh(th,"WeakMap"),Vd=Object.create;function Gd(){}const Xd=function(t){if(!ch(t))return{};if(Vd)return Vd(t);Gd.prototype=t;t=new Gd;return Gd.prototype=void 0,t};function Zd(t,e){var r=-1,i=t.length;for(e=e||Array(i);++r<i;)e[r]=t[r];return e}var Qd=Date.now;function Kd(t){return function(){return t}}const Jd=function(){try{var t=kh(Object,"defineProperty");return t({},"",{}),t}catch{}}();var t2,e2,r2,i2=Jd?function(t,e){return Jd(t,"toString",{configurable:!0,enumerable:!1,value:Kd(e),writable:!0})}:Hd;t2=i2,r2=e2=0;const n2=function(){var t=Qd(),e=16-(t-r2);if(r2=t,0<e){if(800<=++e2)return arguments[0]}else e2=0;return t2.apply(void 0,arguments)};function a2(t,e){for(var r=-1,i=null==t?0:t.length;++r<i&&!1!==e(t[r],r,t););return t}function s2(t,e,r,i){for(var n=t.length,a=r+(i?1:-1);i?a--:++a<n;)if(e(t[a],a,t))return a;return-1}function o2(t){return t!=t}function l2(t,e){return!!(null==t?0:t.length)&&-1<function(t,e,r){if(e!=e)return s2(t,o2,r);for(var i=t,n=e,a=r-1,s=i.length;++a<s;)if(i[a]===n)return a;return-1}(t,e,0)}var c2=9007199254740991,h2=/^(?:0|[1-9]\d*)$/;function u2(t,e){var r=typeof t;return!!(e=null==e?c2:e)&&("number"==r||"symbol"!=r&&h2.test(t))&&-1<t&&t%1==0&&t<e}function d2(t,e,r){"__proto__"==e&&Jd?Jd(t,e,{configurable:!0,enumerable:!0,value:r,writable:!0}):t[e]=r}var p2=Object.prototype.hasOwnProperty;function f2(t,e,r){var i=t[e];p2.call(t,e)&&Sh(i,r)&&(void 0!==r||e in t)||d2(t,e,r)}function g2(t,e,r,i){var n=!r;r=r||{};for(var a=-1,s=e.length;++a<s;){var o=e[a],l=i?i(r[o],t[o],o,r,t):void 0;(n?d2:f2)(r,o,l=void 0===l?t[o]:l)}return r}var y2=Math.max;function m2(l,c,h){return c=y2(void 0===c?l.length-1:c,0),function(){for(var t=arguments,e=-1,r=y2(t.length-c,0),i=Array(r);++e<r;)i[e]=t[c+e];for(var e=-1,n=Array(c+1);++e<c;)n[e]=t[e];n[c]=h(i);var a=l,s=this,o=n;switch(o.length){case 0:return a.call(s);case 1:return a.call(s,o[0]);case 2:return a.call(s,o[0],o[1]);case 3:return a.call(s,o[0],o[1],o[2])}return a.apply(s,o)}}function b2(t,e){return n2(m2(t,e,Hd),t+"")}var _2=9007199254740991;function x2(t){return"number"==typeof t&&-1<t&&t%1==0&&t<=_2}function v2(t){return null!=t&&x2(t.length)&&!fh(t)}function k2(t,e,r){var i;return!!ch(r)&&!!("number"==(i=typeof e)?v2(r)&&u2(e,r.length):"string"==i&&e in r)&&Sh(r[e],t)}var w2=Object.prototype;function T2(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||w2)}function C2(t){return Sd(t)&&"[object Arguments]"==lh(t)}var E2=Object.prototype,S2=E2.hasOwnProperty,A2=E2.propertyIsEnumerable;const D2=C2(function(){return arguments}())?C2:function(t){return Sd(t)&&S2.call(t,"callee")&&!A2.call(t,"callee")};var L2="object"==typeof uk&&uk&&!uk.nodeType&&uk,M2=L2&&"object"==typeof hk&&hk&&!hk.nodeType&&hk,N2=M2&&M2.exports===L2?th.Buffer:void 0;const O2=(N2?N2.isBuffer:void 0)||function(){return!1};var B2={};function I2(e){return function(t){return e(t)}}B2["[object Float32Array]"]=B2["[object Float64Array]"]=B2["[object Int8Array]"]=B2["[object Int16Array]"]=B2["[object Int32Array]"]=B2["[object Uint8Array]"]=B2["[object Uint8ClampedArray]"]=B2["[object Uint16Array]"]=B2["[object Uint32Array]"]=!0,B2["[object Arguments]"]=B2["[object Array]"]=B2["[object ArrayBuffer]"]=B2["[object Boolean]"]=B2["[object DataView]"]=B2["[object Date]"]=B2["[object Error]"]=B2["[object Function]"]=B2["[object Map]"]=B2["[object Number]"]=B2["[object Object]"]=B2["[object RegExp]"]=B2["[object Set]"]=B2["[object String]"]=B2["[object WeakMap]"]=!1;var F2="object"==typeof uk&&uk&&!uk.nodeType&&uk,R2=F2&&"object"==typeof hk&&hk&&!hk.nodeType&&hk,P2=R2&&R2.exports===F2&&t.process,u=function(){try{return R2&&R2.require&&R2.require("util").types||P2&&P2.binding&&P2.binding("util")}catch{}}(),d=u&&u.isTypedArray;const $2=d?I2(d):function(t){return Sd(t)&&x2(t.length)&&!!B2[lh(t)]};var Y2=Object.prototype.hasOwnProperty;function j2(t,e){var r,i=Ld(t),n=!i&&D2(t),a=!i&&!n&&O2(t),s=!i&&!n&&!a&&$2(t),o=i||n||a||s,l=o?function(t,e){for(var r=-1,i=Array(t);++r<t;)i[r]=e(r);return i}(t.length,String):[],c=l.length;for(r in t)!e&&!Y2.call(t,r)||o&&("length"==r||a&&("offset"==r||"parent"==r)||s&&("buffer"==r||"byteLength"==r||"byteOffset"==r)||u2(r,c))||l.push(r);return l}function z2(e,r){return function(t){return e(r(t))}}const U2=z2(Object.keys,Object);var W2=Object.prototype.hasOwnProperty;function H2(t){if(!T2(t))return U2(t);var e,r=[];for(e in Object(t))W2.call(t,e)&&"constructor"!=e&&r.push(e);return r}function q2(t){return(v2(t)?j2:H2)(t)}var V2=Object.prototype.hasOwnProperty;function G2(t){if(ch(t)){var e,r=T2(t),i=[];for(e in t)("constructor"!=e||!r&&V2.call(t,e))&&i.push(e);return i}var n=t,a=[];if(null!=n)for(var s in Object(n))a.push(s);return a}function X2(t){return v2(t)?j2(t,!0):G2(t)}var Z2=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Q2=/^\w*$/;function K2(t,e){var r;if(!Ld(t))return"number"==(r=typeof t)||"symbol"==r||"boolean"==r||null==t||Ad(t)||Q2.test(t)||!Z2.test(t)||null!=e&&t in Object(e)}var J2,tp=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,ep=/\\(\\)?/g;J2=(_=Bh(_=function(t){var n=[];return 46===t.charCodeAt(0)&&n.push(""),t.replace(tp,function(t,e,r,i){n.push(r?i.replace(ep,"$1"):e||t)}),n},function(t){return 500===J2.size&&J2.clear(),t})).cache;const rp=_;function ip(t){return null==t?"":Od(t)}function np(t,e){return Ld(t)?t:K2(t,e)?[t]:rp(ip(t))}var ap=1/0;function sp(t){var e;return"string"==typeof t||Ad(t)?t:"0"==(e=t+"")&&1/t==-ap?"-0":e}function op(t,e){for(var r=0,i=(e=np(e,t)).length;null!=t&&r<i;)t=t[sp(e[r++])];return r&&r==i?t:void 0}function lp(t,e){for(var r=-1,i=e.length,n=t.length;++r<i;)t[n+r]=e[r];return t}var cp=r?r.isConcatSpreadable:void 0;function hp(t){return Ld(t)||D2(t)||!!(cp&&t&&t[cp])}function up(t,e,r,i,n){var a=-1,s=t.length;for(r=r||hp,n=n||[];++a<s;){var o=t[a];0<e&&r(o)?1<e?up(o,e-1,r,i,n):lp(n,o):i||(n[n.length]=o)}return n}function dp(t){return(null==t?0:t.length)?up(t,1):[]}const pp=z2(Object.getPrototypeOf,Object);var fp="[object Object]",p=Function.prototype,gp=Object.prototype,yp=p.toString,mp=gp.hasOwnProperty,bp=yp.call(Object);function _p(t){if(Sd(t)&&lh(t)==fp)return null===(t=pp(t))||"function"==typeof(t=mp.call(t,"constructor")&&t.constructor)&&t instanceof t&&yp.call(t)==bp}function xp(t,e,r,i){var n=-1,a=null==t?0:t.length;for(i&&a&&(r=t[++n]);++n<a;)r=e(r,t[n],n,t);return r}function vp(t){t=this.__data__=new Lh(t);this.size=t.size}vp.prototype.clear=function(){this.__data__=new Lh,this.size=0},vp.prototype.delete=function(t){var e=this.__data__,t=e.delete(t);return this.size=e.size,t},vp.prototype.get=function(t){return this.__data__.get(t)},vp.prototype.has=function(t){return this.__data__.has(t)},vp.prototype.set=function(t,e){var r=this.__data__;if(r instanceof Lh){var i=r.__data__;if(!Mh||i.length<199)return i.push([t,e]),this.size=++r.size,this;r=this.__data__=new Oh(i)}return r.set(t,e),this.size=r.size,this};var kp="object"==typeof uk&&uk&&!uk.nodeType&&uk,wp=kp&&"object"==typeof hk&&hk&&!hk.nodeType&&hk,Tp=wp&&wp.exports===kp?th.Buffer:void 0,Cp=Tp?Tp.allocUnsafe:void 0;function Ep(t,e){return e?t.slice():(e=t.length,e=Cp?Cp(e):new t.constructor(e),t.copy(e),e)}function Sp(t,e){for(var r=-1,i=null==t?0:t.length,n=0,a=[];++r<i;){var s=t[r];e(s,r,t)&&(a[n++]=s)}return a}function Ap(){return[]}var Dp=Object.prototype.propertyIsEnumerable,Lp=Object.getOwnPropertySymbols;const Mp=Lp?function(e){return null==e?[]:(e=Object(e),Sp(Lp(e),function(t){return Dp.call(e,t)}))}:Ap;const Np=Object.getOwnPropertySymbols?function(t){for(var e=[];t;)lp(e,Mp(t)),t=pp(t);return e}:Ap;function Op(t,e,r){e=e(t);return Ld(t)?e:lp(e,r(t))}function Bp(t){return Op(t,q2,Mp)}function Ip(t){return Op(t,X2,Np)}var Fp=kh(th,"DataView"),Rp=kh(th,"Promise");const Pp=kh(th,"Set");var $p="[object Map]",Yp="[object Promise]",jp="[object Set]",zp="[object WeakMap]",Up="[object DataView]",Wp=bh(Fp),Hp=bh(Mh),qp=bh(Rp),Vp=bh(Pp),Gp=bh(qd),Xp=lh;const Zp=Xp=Fp&&Xp(new Fp(new ArrayBuffer(1)))!=Up||Mh&&Xp(new Mh)!=$p||Rp&&Xp(Rp.resolve())!=Yp||Pp&&Xp(new Pp)!=jp||qd&&Xp(new qd)!=zp?function(t){var e=lh(t),t="[object Object]"==e?t.constructor:void 0,t=t?bh(t):"";if(t)switch(t){case Wp:return Up;case Hp:return $p;case qp:return Yp;case Vp:return jp;case Gp:return zp}return e}:Xp;var Qp=Object.prototype.hasOwnProperty;const Kp=th.Uint8Array;function Jp(t){var e=new t.constructor(t.byteLength);return new Kp(e).set(new Kp(t)),e}var tf=/\w*$/;var ef=r?r.prototype:void 0,rf=ef?ef.valueOf:void 0;function nf(t,e){e=e?Jp(t.buffer):t.buffer;return new t.constructor(e,t.byteOffset,t.length)}function af(t,e,r){var i,n,a,s=t.constructor;switch(e){case"[object ArrayBuffer]":return Jp(t);case"[object Boolean]":case"[object Date]":return new s(+t);case"[object DataView]":return n=t,a=(a=r)?Jp(n.buffer):n.buffer,new n.constructor(a,n.byteOffset,n.byteLength);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return nf(t,r);case"[object Map]":return new s;case"[object Number]":case"[object String]":return new s(t);case"[object RegExp]":return(n=new(a=t).constructor(a.source,tf.exec(a))).lastIndex=a.lastIndex,n;case"[object Set]":return new s;case"[object Symbol]":return i=t,rf?Object(rf.call(i)):{}}}function sf(t){return"function"!=typeof t.constructor||T2(t)?{}:Xd(pp(t))}C=u&&u.isMap;const of=C?I2(C):function(t){return Sd(t)&&"[object Map]"==Zp(t)};o=u&&u.isSet;const lf=o?I2(o):function(t){return Sd(t)&&"[object Set]"==Zp(t)};var cf="[object Arguments]",hf="[object Function]",uf="[object Object]",df={};function pf(r,i,n,t,e,a){var s,o=1&i,l=2&i,c=4&i;if(void 0===(s=n?e?n(r,t,e,a):n(r):s)){if(!ch(r))return r;var h,u,d,t=Ld(r);if(t){if(p=(f=r).length,d=new f.constructor(p),p&&"string"==typeof f[0]&&Qp.call(f,"index")&&(d.index=f.index,d.input=f.input),s=d,!o)return Zd(r,s)}else{var p=Zp(r),f=p==hf||"[object GeneratorFunction]"==p;if(O2(r))return Ep(r,o);if(p==uf||p==cf||f&&!e){if(s=l||f?{}:sf(r),!o)return l?(u=d=r,u=(h=s)&&g2(u,X2(u),h),g2(d,Np(d),u)):(u=h=r,g=(g=s)&&g2(u,q2(u),g),g2(h,Mp(h),g))}else{if(!df[p])return e?r:{};s=af(r,p,o)}}var g=(a=a||new vp).get(r);if(g)return g;a.set(r,s),lf(r)?r.forEach(function(t){s.add(pf(t,i,n,t,r,a))}):of(r)&&r.forEach(function(t,e){s.set(e,pf(t,i,n,e,r,a))});var y=t?void 0:(c?l?Ip:Bp:l?X2:q2)(r);a2(y||r,function(t,e){y&&(t=r[e=t]),f2(s,e,pf(t,i,n,e,r,a))})}return s}df[cf]=df["[object Array]"]=df["[object ArrayBuffer]"]=df["[object DataView]"]=df["[object Boolean]"]=df["[object Date]"]=df["[object Float32Array]"]=df["[object Float64Array]"]=df["[object Int8Array]"]=df["[object Int16Array]"]=df["[object Int32Array]"]=df["[object Map]"]=df["[object Number]"]=df[uf]=df["[object RegExp]"]=df["[object Set]"]=df["[object String]"]=df["[object Symbol]"]=df["[object Uint8Array]"]=df["[object Uint8ClampedArray]"]=df["[object Uint16Array]"]=df["[object Uint32Array]"]=!0,df["[object Error]"]=df[hf]=df["[object WeakMap]"]=!1;function ff(t){var e=-1,r=null==t?0:t.length;for(this.__data__=new Oh;++e<r;)this.add(t[e])}function gf(t,e){return t.has(e)}ff.prototype.add=ff.prototype.push=function(t){return this.__data__.set(t,"__lodash_hash_undefined__"),this},ff.prototype.has=function(t){return this.__data__.has(t)};function yf(t,e,r,i,n,a){var s=1&r,o=t.length,l=e.length;if(o!=l&&!(s&&o<l))return!1;var l=a.get(t),c=a.get(e);if(l&&c)return l==e&&c==t;var h=-1,u=!0,d=2&r?new ff:void 0;for(a.set(t,e),a.set(e,t);++h<o;){var p,f=t[h],g=e[h];if(void 0!==(p=i?s?i(g,f,h,e,t,a):i(f,g,h,t,e,a):p)){if(p)continue;u=!1;break}if(d){if(!function(t,e){for(var r=-1,i=null==t?0:t.length;++r<i;)if(e(t[r],r,t))return 1}(e,function(t,e){return!gf(d,e)&&(f===t||n(f,t,r,i,a))&&d.push(e)})){u=!1;break}}else if(f!==g&&!n(f,g,r,i,a)){u=!1;break}}return a.delete(t),a.delete(e),u}function mf(t){var r=-1,i=Array(t.size);return t.forEach(function(t,e){i[++r]=[e,t]}),i}function bf(t){var e=-1,r=Array(t.size);return t.forEach(function(t){r[++e]=t}),r}var _f=r?r.prototype:void 0,xf=_f?_f.valueOf:void 0;var vf=Object.prototype.hasOwnProperty;var kf="[object Arguments]",wf="[object Array]",Tf="[object Object]",Cf=Object.prototype.hasOwnProperty;function Ef(t,e,r,i,n,a){var s=Ld(t),o=Ld(e),l=s?wf:Zp(t),o=o?wf:Zp(e),c=(l=l==kf?Tf:l)==Tf,h=(o=o==kf?Tf:o)==Tf,o=l==o;if(o&&O2(t)){if(!O2(e))return!1;c=!(s=!0)}if(o&&!c){a=a||new vp;if(s||$2(t))return yf(t,e,r,i,n,a);else{var u=t;var d=e;s=l;var p=r;var f=i;var g=n;var y=a;switch(s){case"[object DataView]":if(u.byteLength!=d.byteLength||u.byteOffset!=d.byteOffset)return!1;u=u.buffer,d=d.buffer;case"[object ArrayBuffer]":return!(u.byteLength!=d.byteLength||!g(new Kp(u),new Kp(d)));case"[object Boolean]":case"[object Date]":case"[object Number]":return Sh(+u,+d);case"[object Error]":return u.name==d.name&&u.message==d.message;case"[object RegExp]":case"[object String]":return u==d+"";case"[object Map]":var m=mf;case"[object Set]":m=m||bf;if(u.size!=d.size&&!(1&p))return!1;var b=y.get(u);if(b)return b==d;p|=2,y.set(u,d);b=yf(m(u),m(d),p,f,g,y);return y.delete(u),b;case"[object Symbol]":if(xf)return xf.call(u)==xf.call(d)}return!1;return}}if(!(1&r)){l=c&&Cf.call(t,"__wrapped__"),s=h&&Cf.call(e,"__wrapped__");if(l||s)return n(l?t.value():t,s?e.value():e,r,i,a=a||new vp)}return o&&function(t,e,r,i,n,a){var s=1&r,o=Bp(t),l=o.length;if(l!=Bp(e).length&&!s)return!1;for(var c=l;c--;){var h=o[c];if(!(s?h in e:vf.call(e,h)))return!1}var u=a.get(t),d=a.get(e);if(u&&d)return u==e&&d==t;var p=!0;a.set(t,e),a.set(e,t);for(var f=s;++c<l;){var g,y=t[h=o[c]],m=e[h];if(!(void 0===(g=i?s?i(m,y,h,e,t,a):i(y,m,h,t,e,a):g)?y===m||n(y,m,r,i,a):g)){p=!1;break}f=f||"constructor"==h}return p&&!f&&(u=t.constructor)!=(d=e.constructor)&&"constructor"in t&&"constructor"in e&&!("function"==typeof u&&u instanceof u&&"function"==typeof d&&d instanceof d)&&(p=!1),a.delete(t),a.delete(e),p}(t,e,r,i,n,a=a||new vp)}function Sf(t,e,r,i,n){return t===e||(null==t||null==e||!Sd(t)&&!Sd(e)?t!=t&&e!=e:Ef(t,e,r,i,Sf,n))}function Af(t){return t==t&&!ch(t)}function Df(e,r){return function(t){return null!=t&&t[e]===r&&(void 0!==r||e in Object(t))}}function Lf(e){var r=function(t){for(var e=q2(t),r=e.length;r--;){var i=e[r],n=t[i];e[r]=[i,n,Af(n)]}return e}(e);return 1==r.length&&r[0][2]?Df(r[0][0],r[0][1]):function(t){return t===e||function(t,e,r,i){var n=r.length,a=n,s=!i;if(null==t)return!a;for(t=Object(t);n--;){var o=r[n];if(s&&o[2]?o[1]!==t[o[0]]:!(o[0]in t))return!1}for(;++n<a;){var l=(o=r[n])[0],c=t[l],h=o[1];if(s&&o[2]){if(void 0===c&&!(l in t))return!1}else{var u,d=new vp;if(!(void 0===(u=i?i(c,h,l,t,e,d):u)?Sf(h,c,3,i,d):u))return!1}}return!0}(t,e,r)}}function Mf(t,e){return null!=t&&e in Object(t)}function Nf(t,e,r){for(var i=-1,n=(e=np(e,t)).length,a=!1;++i<n;){var s=sp(e[i]);if(!(a=null!=t&&r(t,s)))break;t=t[s]}return a||++i!=n?a:!!(n=null==t?0:t.length)&&x2(n)&&u2(s,n)&&(Ld(t)||D2(t))}function Of(t,e){return null!=t&&Nf(t,e,Mf)}var Bf,If,Ff,Rf=1,Pf=2;function $f(n,a){return K2(n)&&Af(a)?Df(sp(n),a):function(t){i=n;var e,r,i=void 0===(e=null==(e=t)?void 0:op(e,i))?r:e;return void 0===i&&i===a?Of(t,n):Sf(a,i,Rf|Pf)}}function Yf(t){return K2(t)?(r=sp(t),function(t){return null==t?void 0:t[r]}):(e=t,function(t){return op(t,e)});var e,r}function jf(t){return"function"==typeof t?t:null==t?Hd:"object"==typeof t?Ld(t)?$f(t[0],t[1]):Lf(t):Yf(t)}const zf=function(t,e,r){for(var i=-1,n=Object(t),a=r(t),s=a.length;s--;){var o=a[Bf?s:++i];if(!1===e(n[o],o,n))break}return t};function Uf(t,e){return t&&zf(t,e,q2)}If=Uf;const Wf=function(t,e){if(null!=t){if(!v2(t))return If(t,e);for(var r=t.length,i=Ff?r:-1,n=Object(t);(Ff?i--:++i<r)&&!1!==e(n[i],i,n););}return t};const Hf=function(){return th.Date.now()};var qf=Object.prototype,Vf=qf.hasOwnProperty;const Gf=b2(function(t,e){t=Object(t);var r=-1,i=e.length,n=2<i?e[2]:void 0;for(n&&k2(e[0],e[1],n)&&(i=1);++r<i;)for(var a=e[r],s=X2(a),o=-1,l=s.length;++o<l;){var c=s[o],h=t[c];(void 0===h||Sh(h,qf[c])&&!Vf.call(t,c))&&(t[c]=a[c])}return t});function Xf(t,e,r){(void 0===r||Sh(t[e],r))&&(void 0!==r||e in t)||d2(t,e,r)}function Zf(t){return Sd(t)&&v2(t)}function Qf(t,e){if(("constructor"!==e||"function"!=typeof t[e])&&"__proto__"!=e)return t[e]}function Kf(t,e,r,i,n,a,s){var o,l,c,h=Qf(t,r),u=Qf(e,r),d=s.get(u);d||((e=void 0===(d=a?a(h,u,r+"",t,e,s):void 0))&&(l=!(o=Ld(u))&&O2(u),c=!o&&!l&&$2(u),d=u,o||l||c?d=Ld(h)?h:Zf(h)?Zd(h):l?Ep(u,!(e=!1)):c?nf(u,!(e=!1)):[]:_p(u)||D2(u)?(d=h,D2(h)?d=g2(h,X2(h)):ch(h)&&!fh(h)||(d=sf(u))):e=!1),e&&(s.set(u,d),n(d,u,i,a,s),s.delete(u))),Xf(t,r,d)}function Jf(i,n,a,s,o){i!==n&&zf(n,function(t,e){var r;o=o||new vp,ch(t)?Kf(i,n,e,a,Jf,s,o):(r=s?s(Qf(i,e),t,e+"",i,n,o):void 0,Xf(i,e,r=void 0===r?t:r))},X2)}function tg(t,e,r){for(var i=-1,n=null==t?0:t.length;++i<n;)if(r(e,t[i]))return!0;return!1}function eg(t){var e=null==t?0:t.length;return e?t[e-1]:void 0}function rg(t){return"function"==typeof t?t:Hd}function g(t,e){(Ld(t)?a2:Wf)(t,rg(e))}function ig(t,i){var n=[];return Wf(t,function(t,e,r){i(t,e,r)&&n.push(t)}),n}function ng(t,e){return(Ld(t)?Sp:ig)(t,jf(e))}var ag,sg=Math.max;ag=function(t,e,r){var i,n=null==t?0:t.length;return n?((i=null!=r&&(i=(r=Wd(r=r))%1,r==r)?i?r-i:r:0)<0&&(i=sg(n+i,0)),s2(t,jf(e),i)):-1};const og=function(t,e,r){var i,n=Object(t),e=(v2(t)||(i=jf(e),t=q2(t),e=function(t){return i(n[t],t,n)}),ag(t,e,r));return-1<e?n[i?t[e]:e]:void 0};function lg(t,i){var n=-1,a=v2(t)?Array(t.length):[];return Wf(t,function(t,e,r){a[++n]=i(t,e,r)}),a}function cg(t,e){return(Ld(t)?Dd:lg)(t,jf(e))}function hg(t,e){return e<t}var ug=Object.prototype.hasOwnProperty;function dg(t,e){return null!=t&&ug.call(t,e)}function pg(t,e){return null!=t&&Nf(t,e,dg)}function fg(t){return null==t?[]:Dd(q2(e=t),function(t){return e[t]});var e}var gg,yg=Object.prototype.hasOwnProperty;function mg(t){if(null!=t){if(v2(t)&&(Ld(t)||"string"==typeof t||"function"==typeof t.splice||O2(t)||$2(t)||D2(t)))return!t.length;var e,r=Zp(t);if("[object Map]"==r||"[object Set]"==r)return!t.size;if(T2(t))return!H2(t).length;for(e in t)if(yg.call(t,e))return!1}return!0}function bg(t){return void 0===t}function _g(t,e){return t<e}function xg(t,i){var n={};return i=jf(i),Uf(t,function(t,e,r){d2(n,e,i(t,e,r))}),n}function vg(t,e,r){for(var i=-1,n=t.length;++i<n;){var a,s,o=t[i],l=e(o);null!=l&&(void 0===a?l==l&&!Ad(l):r(l,a))&&(a=l,s=o)}return s}function kg(t){return t&&t.length?vg(t,Hd,hg):void 0}gg=function(t,e,r){Jf(t,e,r)};const wg=b2(function(t,e){var r=-1,i=e.length,n=1<i?e[i-1]:void 0,a=2<i?e[2]:void 0,n=3<gg.length&&"function"==typeof n?(i--,n):void 0;for(a&&k2(e[0],e[1],a)&&(n=i<3?void 0:n,i=1),t=Object(t);++r<i;){var s=e[r];s&&gg(t,s,r,n)}return t});function Tg(t){return t&&t.length?vg(t,Hd,_g):void 0}function Cg(t,e){return t&&t.length?vg(t,jf(e),_g):void 0}function Eg(t,e,r){for(var i=-1,n=e.length,a={};++i<n;){var s=e[i],o=op(t,s);r(o,s)&&function(t,e,r,i){if(ch(t))for(var n=-1,a=(e=np(e,t)).length,s=a-1,o=t;null!=o&&++n<a;){var l,c=sp(e[n]),h=r;if("__proto__"===c||"constructor"===c||"prototype"===c)return;f2(o,c,h=n!=s&&(l=o[c],void 0===(h=i?i(l,c,o):void 0))?ch(l)?l:u2(e[n+1])?[]:{}:h),o=o[c]}}(a,np(s,t),o)}return a}function Sg(t,e,r){for(var i=-1,n=t.criteria,a=e.criteria,s=n.length,o=r.length;++i<s;){var l=function(t,e){if(t!==e){var r=void 0!==t,i=null===t,n=t==t,a=Ad(t),s=void 0!==e,o=null===e,l=e==e,c=Ad(e);if(!o&&!c&&!a&&e<t||a&&s&&l&&!o&&!c||i&&s&&l||!r&&l||!n)return 1;if(!i&&!a&&!c&&t<e||c&&r&&n&&!i&&!a||o&&r&&n||!s&&n||!l)return-1}return 0}(n[i],a[i]);if(l)return o<=i?l:l*("desc"==r[i]?-1:1)}return t.index-e.index}L=function(t,e){return null==t?{}:Eg(r=t,e,function(t,e){return Of(r,e)});var r};const Ag=n2(m2(L,void 0,dp),L+"");var Dg,Lg=Math.ceil,Mg=Math.max;const Ng=function(t,e,r){r&&"number"!=typeof r&&k2(t,e,r)&&(e=r=void 0),t=Wd(t),void 0===e?(e=t,t=0):e=Wd(e),r=void 0===r?t<e?1:-1:Wd(r);for(var i=t,n=r,a=Dg,s=-1,o=Mg(Lg((e-i)/(n||1)),0),l=Array(o);o--;)l[a?o:++s]=i,i+=n;return l};function Og(t,i,n,a,e){return e(t,function(t,e,r){n=a?(a=!1,t):i(n,t,e,r)}),n}function Bg(t,e,r){var i=Ld(t)?xp:Og,n=arguments.length<3;return i(t,jf(e),r,n,Wf)}const Ig=b2(function(t,e){if(null==t)return[];var r=e.length,r=(1<r&&k2(t,e[0],e[1])?e=[]:2<r&&k2(e[0],e[1],e[2])&&(e=[e[0]]),t),i=up(e,1),n=[],a=(i=i.length?Dd(i,function(e){return Ld(e)?function(t){return op(t,1===e.length?e[0]:e)}:e}):[Hd],-1),s=(i=Dd(i,I2(jf)),lg(r,function(e,t,r){return{criteria:Dd(i,function(t){return t(e)}),index:++a,value:e}})),r=function(t,e){return Sg(t,e,n)},o=s.length;for(s.sort(r);o--;)s[o]=s[o].value;return s});const Fg=Pp&&1/bf(new Pp([,-0]))[1]==1/0?function(t){return new Pp(t)}:function(){};const Rg=b2(function(t){var e=up(t,1,Zf,!0),r=void 0,i=void 0,n=-1,a=l2,s=e.length,o=!0,l=[],c=l;if(i)o=!1,a=tg;else if(200<=s){t=r?null:Fg(e);if(t)return bf(t);o=!1,a=gf,c=new ff}else c=r?[]:l;t:for(;++n<s;){var h=e[n],u=r?r(h):h,h=i||0!==h?h:0;if(o&&u==u){for(var d=c.length;d--;)if(c[d]===u)continue t;r&&c.push(u),l.push(h)}else a(c,u,i)||(c!==l&&c.push(u),l.push(h))}return l});var Pg=0;function $g(t){var e=++Pg;return ip(t)+e}var Yg="\0";class jg{constructor(t={}){this._isDirected=!pg(t,"directed")||t.directed,this._isMultigraph=!!pg(t,"multigraph")&&t.multigraph,this._isCompound=!!pg(t,"compound")&&t.compound,this._label=void 0,this._defaultNodeLabelFn=Kd(void 0),this._defaultEdgeLabelFn=Kd(void 0),this._nodes={},this._isCompound&&(this._parent={},this._children={},this._children[Yg]={}),this._in={},this._preds={},this._out={},this._sucs={},this._edgeObjs={},this._edgeLabels={}}isDirected(){return this._isDirected}isMultigraph(){return this._isMultigraph}isCompound(){return this._isCompound}setGraph(t){return this._label=t,this}graph(){return this._label}setDefaultNodeLabel(t){return fh(t)||(t=Kd(t)),this._defaultNodeLabelFn=t,this}nodeCount(){return this._nodeCount}nodes(){return q2(this._nodes)}sources(){var e=this;return ng(this.nodes(),function(t){return mg(e._in[t])})}sinks(){var e=this;return ng(this.nodes(),function(t){return mg(e._out[t])})}setNodes(t,e){var r=arguments,i=this;return g(t,function(t){1<r.length?i.setNode(t,e):i.setNode(t)}),this}setNode(t,e){return pg(this._nodes,t)?1<arguments.length&&(this._nodes[t]=e):(this._nodes[t]=1<arguments.length?e:this._defaultNodeLabelFn(t),this._isCompound&&(this._parent[t]=Yg,this._children[t]={},this._children[Yg][t]=!0),this._in[t]={},this._preds[t]={},this._out[t]={},this._sucs[t]={},++this._nodeCount),this}node(t){return this._nodes[t]}hasNode(t){return pg(this._nodes,t)}removeNode(t){var e,r=this;return pg(this._nodes,t)&&(e=function(t){r.removeEdge(r._edgeObjs[t])},delete this._nodes[t],this._isCompound&&(this._removeFromParentsChildList(t),delete this._parent[t],g(this.children(t),function(t){r.setParent(t)}),delete this._children[t]),g(q2(this._in[t]),e),delete this._in[t],delete this._preds[t],g(q2(this._out[t]),e),delete this._out[t],delete this._sucs[t],--this._nodeCount),this}setParent(t,e){if(!this._isCompound)throw new Error("Cannot set parent in a non-compound graph");if(bg(e))e=Yg;else{for(var r=e+="";!bg(r);r=this.parent(r))if(r===t)throw new Error("Setting "+e+" as parent of "+t+" would create a cycle");this.setNode(e)}return this.setNode(t),this._removeFromParentsChildList(t),this._parent[t]=e,this._children[e][t]=!0,this}_removeFromParentsChildList(t){delete this._children[this._parent[t]][t]}parent(t){if(this._isCompound){t=this._parent[t];if(t!==Yg)return t}}children(t){var e;return bg(t)&&(t=Yg),this._isCompound?(e=this._children[t])?q2(e):void 0:t===Yg?this.nodes():this.hasNode(t)?[]:void 0}predecessors(t){t=this._preds[t];if(t)return q2(t)}successors(t){t=this._sucs[t];if(t)return q2(t)}neighbors(t){var e=this.predecessors(t);if(e)return Rg(e,this.successors(t))}isLeaf(t){t=this.isDirected()?this.successors(t):this.neighbors(t);return 0===t.length}filterNodes(r){var i=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound}),n=(i.setGraph(this.graph()),this),a=(g(this._nodes,function(t,e){r(e)&&i.setNode(e,t)}),g(this._edgeObjs,function(t){i.hasNode(t.v)&&i.hasNode(t.w)&&i.setEdge(t,n.edge(t))}),{});return this._isCompound&&g(i.nodes(),function(t){i.setParent(t,function t(e){var r=n.parent(e);return void 0===r||i.hasNode(r)?a[e]=r:r in a?a[r]:t(r)}(t))}),i}setDefaultEdgeLabel(t){return fh(t)||(t=Kd(t)),this._defaultEdgeLabelFn=t,this}edgeCount(){return this._edgeCount}edges(){return fg(this._edgeObjs)}setPath(t,r){var i=this,n=arguments;return Bg(t,function(t,e){return 1<n.length?i.setEdge(t,e,r):i.setEdge(t,e),e}),this}setEdge(){var t,e,r=!1,i=arguments[0],i=("object"==typeof i&&null!==i&&"v"in i?(n=i.v,a=i.w,t=i.name,2===arguments.length&&(e=arguments[1],r=!0)):(n=i,a=arguments[1],t=arguments[3],2<arguments.length&&(e=arguments[2],r=!0)),bg(t)||(t=""+t),Wg(this._isDirected,n=""+n,a=""+a,t));if(pg(this._edgeLabels,i))r&&(this._edgeLabels[i]=e);else{if(!bg(t)&&!this._isMultigraph)throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(n),this.setNode(a),this._edgeLabels[i]=r?e:this._defaultEdgeLabelFn(n,a,t);var r=function(t,e,r,i){e=""+e,r=""+r;!t&&r<e&&(t=e,e=r,r=t);t={v:e,w:r};return i&&(t.name=i),t}(this._isDirected,n,a,t),n=r.v,a=r.w;Object.freeze(r),this._edgeObjs[i]=r,zg(this._preds[a],n),zg(this._sucs[n],a),this._in[a][i]=r,this._out[n][i]=r,this._edgeCount++}return this}edge(t,e,r){t=1===arguments.length?Hg(this._isDirected,t):Wg(this._isDirected,t,e,r);return this._edgeLabels[t]}hasEdge(t,e,r){t=1===arguments.length?Hg(this._isDirected,t):Wg(this._isDirected,t,e,r);return pg(this._edgeLabels,t)}removeEdge(t,e,r){var r=1===arguments.length?Hg(this._isDirected,arguments[0]):Wg(this._isDirected,t,e,r),i=this._edgeObjs[r];return i&&(t=i.v,e=i.w,delete this._edgeLabels[r],delete this._edgeObjs[r],Ug(this._preds[e],t),Ug(this._sucs[t],e),delete this._in[e][r],delete this._out[t][r],this._edgeCount--),this}inEdges(t,e){var t=this._in[t];if(t)return t=fg(t),e?ng(t,function(t){return t.v===e}):t}outEdges(t,e){var t=this._out[t];if(t)return t=fg(t),e?ng(t,function(t){return t.w===e}):t}nodeEdges(t,e){var r=this.inEdges(t,e);if(r)return r.concat(this.outEdges(t,e))}}function zg(t,e){t[e]?t[e]++:t[e]=1}function Ug(t,e){--t[e]||delete t[e]}function Wg(t,e,r,i){e=""+e,r=""+r;return!t&&r<e&&(t=e,e=r,r=t),e+""+r+""+(bg(i)?"\0":i)}function Hg(t,e){return Wg(t,e.v,e.w,e.name)}jg.prototype._nodeCount=0,jg.prototype._edgeCount=0;class qg{constructor(){var t={};t._next=t._prev=t,this._sentinel=t}dequeue(){var t=this._sentinel,e=t._prev;if(e!==t)return Vg(e),e}enqueue(t){var e=this._sentinel;t._prev&&t._next&&Vg(t),t._next=e._next,e._next._prev=t,(e._next=t)._prev=e}toString(){for(var t=[],e=this._sentinel,r=e._prev;r!==e;)t.push(JSON.stringify(r,Gg)),r=r._prev;return"["+t.join(", ")+"]"}}function Vg(t){t._prev._next=t._next,t._next._prev=t._prev,delete t._next,delete t._prev}function Gg(t,e){if("_next"!==t&&"_prev"!==t)return e}var Xg=Kd(1);function Zg(e,t){var r,i,n,a,s,o,l;return e.nodeCount()<=1?[]:(r=e,i=t||Xg,n=new jg,s=a=0,g(r.nodes(),function(t){n.setNode(t,{v:t,in:0,out:0})}),g(r.edges(),function(t){var e=n.edge(t.v,t.w)||0,r=i(t);n.setEdge(t.v,t.w,e+r),s=Math.max(s,n.node(t.v).out+=r),a=Math.max(a,n.node(t.w).in+=r)}),o=Ng(s+a+3).map(function(){return new qg}),l=a+1,g(n.nodes(),function(t){Kg(o,l,n.node(t))}),dp(cg(function(t,e,r){for(var i,n=[],a=e[e.length-1],s=e[0];t.nodeCount();){for(;i=s.dequeue();)Qg(t,e,r,i);for(;i=a.dequeue();)Qg(t,e,r,i);if(t.nodeCount())for(var o=e.length-2;0<o;--o)if(i=e[o].dequeue()){n=n.concat(Qg(t,e,r,i,!0));break}}return n}((t={graph:n,buckets:o,zeroIdx:l}).graph,t.buckets,t.zeroIdx),function(t){return e.outEdges(t.v,t.w)})))}function Qg(i,n,a,t,s){var o=s?[]:void 0;return g(i.inEdges(t.v),function(t){var e=i.edge(t),r=i.node(t.v);s&&o.push({v:t.v,w:t.w}),r.out-=e,Kg(n,a,r)}),g(i.outEdges(t.v),function(t){var e=i.edge(t),t=t.w,t=i.node(t);t.in-=e,Kg(n,a,t)}),i.removeNode(t.v),o}function Kg(t,e,r){(r.out?r.in?t[r.out-r.in+e]:t[t.length-1]:t[0]).enqueue(r)}function Jg(r){var i,n,a,s,e,t="greedy"===r.graph().acyclicer?Zg(r,(e=r,function(t){return e.edge(t).weight})):(n=[],a={},s={},g((i=r).nodes(),function e(t){pg(s,t)||(s[t]=!0,a[t]=!0,g(i.outEdges(t),function(t){pg(a,t.w)?n.push(t):e(t.w)}),delete a[t])}),n);g(t,function(t){var e=r.edge(t);r.removeEdge(t),e.forwardName=t.name,e.reversed=!0,r.setEdge(t.w,t.v,e,$g("rev"))})}function ty(t,e,r,i){for(var n;n=$g(i),t.hasNode(n););return r.dummy=e,t.setNode(n,r),n}function ey(e){var r=new jg({multigraph:e.isMultigraph()}).setGraph(e.graph());return g(e.nodes(),function(t){e.children(t).length||r.setNode(t,e.node(t))}),g(e.edges(),function(t){r.setEdge(t,e.edge(t))}),r}function ry(t,e){var r,i=t.x,n=t.y,a=e.x-i,e=e.y-n,s=t.width/2,t=t.height/2;if(a||e)return t=Math.abs(e)*s>Math.abs(a)*t?(r=(t=e<0?-t:t)*a/e,t):(r=s=a<0?-s:s)*e/a,{x:i+r,y:n+t};throw new Error("Not possible to find intersection inside of the rectangle")}function iy(i){var n=cg(Ng(ay(i)+1),function(){return[]});return g(i.nodes(),function(t){var e=i.node(t),r=e.rank;bg(r)||(n[r][e.order]=t)}),n}function ny(t,e,r,i){var n={width:0,height:0};return 4<=arguments.length&&(n.rank=r,n.order=i),ty(t,"border",n,e)}function ay(e){return kg(cg(e.nodes(),function(t){t=e.node(t).rank;if(!bg(t))return t}))}function sy(t,e){var r=Hf();try{return e()}finally{console.log(t+" time: "+(Hf()-r)+"ms")}}function oy(t,e){return e()}function ly(s){g(s.children(),function t(e){var r=s.children(e),i=s.node(e);if(r.length&&g(r,t),pg(i,"minRank")){i.borderLeft=[],i.borderRight=[];for(var n=i.minRank,a=i.maxRank+1;n<a;++n)cy(s,"borderLeft","_bl",e,i,n),cy(s,"borderRight","_br",e,i,n)}})}function cy(t,e,r,i,n,a){var s=n[e][a-1],r=ty(t,"border",{width:0,height:0,rank:a,borderType:e},r);n[e][a]=r,t.setParent(r,i),s&&t.setEdge(s,r,{weight:1})}function hy(t){var e,r,i=t.graph().rankdir.toLowerCase();"bt"!==i&&"rl"!==i||(g((r=t).nodes(),function(t){py(r.node(t))}),g(r.edges(),function(t){t=r.edge(t);g(t.points,py),pg(t,"y")&&py(t)})),"lr"!==i&&"rl"!==i||(g((e=t).nodes(),function(t){fy(e.node(t))}),g(e.edges(),function(t){t=e.edge(t);g(t.points,fy),pg(t,"x")&&fy(t)}),uy(t))}function uy(e){g(e.nodes(),function(t){dy(e.node(t))}),g(e.edges(),function(t){dy(e.edge(t))})}function dy(t){var e=t.width;t.width=t.height,t.height=e}function py(t){t.y=-t.y}function fy(t){var e=t.x;t.x=t.y,t.y=e}function gy(e){var n,a,r,i=ty(e,"root",{},"_root"),s=(a={},g((n=e).children(),function(t){!function e(t,r){var i=n.children(t);i&&i.length&&g(i,function(t){e(t,r+1)}),a[t]=r}(t,1)}),a),o=kg(fg(s))-1,l=2*o+1,c=(e.graph().nestingRoot=i,g(e.edges(),function(t){e.edge(t).minlen*=l}),Bg((r=e).edges(),function(t,e){return t+r.edge(e).weight},0)+1);g(e.children(),function(t){!function n(a,s,o,l,c,h,u){var t=a.children(u);if(!t.length)return void(u!==s&&a.setEdge(s,u,{weight:0,minlen:o}));var d=ny(a,"_bt"),p=ny(a,"_bb"),e=a.node(u);a.setParent(d,u),e.borderTop=d,a.setParent(p,u),e.borderBottom=p,g(t,function(t){n(a,s,o,l,c,h,t);var e=a.node(t),r=e.borderTop||t,t=e.borderBottom||t,e=e.borderTop?l:2*l,i=r!==t?1:c-h[u]+1;a.setEdge(d,r,{weight:e,minlen:i,nestingEdge:!0}),a.setEdge(t,p,{weight:e,minlen:i,nestingEdge:!0})}),a.parent(u)||a.setEdge(s,d,{weight:0,minlen:c+h[u]})}(e,i,l,c,o,s,t)}),e.graph().nodeRankFactor=l}function yy(n,r,a){var s=function(t){for(var e;t.hasNode(e=$g("_root")););return e}(n),o=new jg({compound:!0}).setGraph({root:s}).setDefaultNodeLabel(function(t){return n.node(t)});return g(n.nodes(),function(i){var t=n.node(i),e=n.parent(i);(t.rank===r||t.minRank<=r&&r<=t.maxRank)&&(o.setNode(i),o.setParent(i,e||s),g(n[a](i),function(t){var e=t.v===i?t.w:t.v,r=o.edge(e,i),r=bg(r)?0:r.weight;o.setEdge(e,i,{weight:n.edge(t).weight+r})}),pg(t,"minRank"))&&o.setNode(i,{borderLeft:t.borderLeft[r],borderRight:t.borderRight[r]})}),o}function my(t,e){for(var r=0,i=1;i<e.length;++i)r+=function(e,t,r){for(var i=function(t,e){for(var r=t||[],i=e||[],n=f2,a=-1,s=r.length,o=i.length,l={};++a<s;){var c=a<o?i[a]:void 0;n(l,r[a],c)}return l}(r,cg(r,function(t,e){return e})),t=dp(cg(t,function(t){return Ig(cg(e.outEdges(t),function(t){return{pos:i[t.w],weight:e.edge(t).weight}}),"pos")})),n=1;n<r.length;)n<<=1;var a=2*n-1,s=(--n,cg(new Array(a),function(){return 0})),o=0;return g(t.forEach(function(t){var e=t.pos+n;s[e]+=t.weight;for(var r=0;0<e;)e%2&&(r+=s[e+1]),s[e=e-1>>1]+=t.weight;o+=t.weight*r})),o}(t,e[i-1],e[i]);return r}function by(i){var n={},t=ng(i.nodes(),function(t){return!i.children(t).length}),e=kg(cg(t,function(t){return i.node(t).rank})),a=cg(Ng(e+1),function(){return[]});return g(Ig(t,function(t){return i.node(t).rank}),function t(e){var r;pg(n,e)||(n[e]=!0,r=i.node(e),a[r.rank].push(e),g(i.successors(e),t))}),a}function _y(t,e){var i={};g(t,function(t,e){e=i[t.v]={indegree:0,in:[],out:[],vs:[t.v],i:e};bg(t.barycenter)||(e.barycenter=t.barycenter,e.weight=t.weight)}),g(e.edges(),function(t){var e=i[t.v],r=i[t.w];bg(e)||bg(r)||(r.indegree++,e.out.push(i[t.w]))});var r=ng(i,function(t){return!t.indegree}),n=[];function a(n){return function(t){var e,r,i;t.merged||(bg(t.barycenter)||bg(n.barycenter)||t.barycenter>=n.barycenter)&&(t=t,i=r=0,(e=n).weight&&(r+=e.barycenter*e.weight,i+=e.weight),t.weight&&(r+=t.barycenter*t.weight,i+=t.weight),e.vs=t.vs.concat(e.vs),e.barycenter=r/i,e.weight=i,e.i=Math.min(t.i,e.i),t.merged=!0)}}for(;r.length;){var s=r.pop();n.push(s),g(s.in.reverse(),a(s)),g(s.out,function(e){return function(t){t.in.push(e),0==--t.indegree&&r.push(t)}}(s))}return cg(ng(n,function(t){return!t.merged}),function(t){return Ag(t,["vs","i","barycenter","weight"])})}function xy(t,e){r=function(t){return pg(t,"barycenter")},i={lhs:[],rhs:[]},g(t,function(t){(r(t)?i.lhs:i.rhs).push(t)});var r,i,n,t=i,a=t.lhs,s=Ig(t.rhs,function(t){return-t.i}),o=[],l=0,c=0,h=0,t=(a.sort((n=!!e,function(t,e){return t.barycenter<e.barycenter?-1:t.barycenter>e.barycenter?1:n?e.i-t.i:t.i-e.i})),h=vy(o,s,h),g(a,function(t){h+=t.vs.length,o.push(t.vs),l+=t.barycenter*t.weight,c+=t.weight,h=vy(o,s,h)}),{vs:dp(o)});return c&&(t.barycenter=l/c,t.weight=c),t}function vy(t,e,r){for(var i;e.length&&(i=eg(e)).i<=r;)e.pop(),t.push(i.vs),r++;return r}function ky(r,t,i,n){var a,e,s,o=r.children(t),t=r.node(t),l=t?t.borderLeft:void 0,c=t?t.borderRight:void 0,h={},t=(l&&(o=ng(o,function(t){return t!==l&&t!==c})),a=r,cg(o,function(t){var e=a.inEdges(t);return e.length?{v:t,barycenter:(e=Bg(e,function(t,e){var r=a.edge(e),e=a.node(e.v);return{sum:t.sum+r.weight*e.order,weight:t.weight+r.weight}},{sum:0,weight:0})).sum/e.weight,weight:e.weight}:{v:t}})),o=(g(t,function(t){var e;r.children(t.v).length&&(e=ky(r,t.v,i,n),pg(h[t.v]=e,"barycenter"))&&(e=e,bg((t=t).barycenter)?(t.barycenter=e.barycenter,t.weight=e.weight):(t.barycenter=(t.barycenter*t.weight+e.barycenter*e.weight)/(t.weight+e.weight),t.weight+=e.weight))}),_y(t,i)),t=(e=h,g(o,function(t){t.vs=dp(t.vs.map(function(t){return e[t]?e[t].vs:t}))}),xy(o,n));return l&&(t.vs=dp([l,t.vs,c]),r.predecessors(l).length)&&(o=r.node(r.predecessors(l)[0]),s=r.node(r.predecessors(c)[0]),pg(t,"barycenter")||(t.barycenter=0,t.weight=0),t.barycenter=(t.barycenter*t.weight+o.order+s.order)/(t.weight+2),t.weight+=2),t}function wy(t){var e=ay(t),r=Ty(t,Ng(1,e+1),"inEdges"),i=Ty(t,Ng(e-1,-1,-1),"outEdges");Cy(t,by(t));for(var n,a=Number.POSITIVE_INFINITY,s=0,o=0;o<4;++s,++o){(function(t,e){var i=new jg;g(t,function(r){var n,a,s,o,t=r.graph().root,t=ky(r,t,i,e);g(t.vs,function(t,e){r.node(t).order=e}),n=r,a=i,t=t.vs,o={},g(t,function(t){for(var e,r,i=n.parent(t);i;){if((e=n.parent(i))?(r=o[e],o[e]=i):(r=s,s=i),r&&r!==i)return void a.setEdge(r,i);i=e}})})})(s%2?r:i,2<=s%4);var l,c=my(t,l=iy(t));c<a&&(o=0,n=pf(l,5),a=c)}Cy(t,n)}function Ty(e,t,r){return cg(t,function(t){return yy(e,t,r)})}function Cy(r,t){g(t,function(t){g(t,function(t,e){r.node(t).order=e})})}function Ey(c){n={},a=0,g((i=c).children(),function t(e){var r=a;g(i.children(e),t),n[e]={low:r,lim:a++}});var i,n,a,h=n;g(c.graph().dummyChains,function(t){for(var e,r=c.node(t).edgeObj,i=function(t,e,r,i){var n,a,s=[],o=[],l=Math.min(e[r].low,e[i].low),c=Math.max(e[r].lim,e[i].lim);n=r;for(;n=t.parent(n),s.push(n),n&&(e[n].low>l||c>e[n].lim););for(a=n,n=i;(n=t.parent(n))!==a;)o.push(n);return{path:s.concat(o.reverse()),lca:a}}(c,h,r.v,r.w),n=i.path,a=i.lca,s=0,o=n[s],l=!0;t!==r.w;){if(e=c.node(t),l){for(;(o=n[s])!==a&&c.node(o).maxRank<e.rank;)s++;o===a&&(l=!1)}if(!l){for(;s<n.length-1&&c.node(o=n[s+1]).minRank<=e.rank;)s++;o=n[s]}c.setParent(t,o),t=c.successors(t)[0]}})}function Sy(c,t){var h={};return Bg(t,function(t,i){var a=0,s=0,o=t.length,l=eg(i);return g(i,function(t,e){var r=function(e,t){if(e.node(t).dummy)return og(e.predecessors(t),function(t){return e.node(t).dummy})}(c,t),n=r?c.node(r).order:o;!r&&t!==l||(g(i.slice(s,e+1),function(i){g(c.predecessors(i),function(t){var e=c.node(t),r=e.order;!(r<a||n<r)||e.dummy&&c.node(i).dummy||Dy(h,t,i)})}),s=e+1,a=n)}),i}),h}function Ay(o,t){var s={};function l(e,t,r,i,n){var a;g(Ng(t,r),function(t){a=e[t],o.node(a).dummy&&g(o.predecessors(a),function(t){var e=o.node(t);e.dummy&&(e.order<i||e.order>n)&&Dy(s,t,a)})})}return Bg(t,function(r,i){var n,a=-1,s=0;return g(i,function(t,e){"border"===o.node(t).dummy&&(t=o.predecessors(t)).length&&(n=o.node(t[0]).order,l(i,s,e,a,n),s=e,a=n),l(i,s,i.length,n,r.length)}),i}),s}function Dy(t,e,r){r<e&&(i=e,e=r,r=i);var i=t[e];i||(t[e]=i={}),i[r]=!0}function Ly(t,e,h,u){var d={},p={},f={};return g(e,function(t){g(t,function(t,e){f[p[d[t]=t]=t]=e})}),g(e,function(t){var c=-1;g(t,function(t){var e,r,i,n=u(t);if(n.length)for(var a=((n=Ig(n,function(t){return f[t]})).length-1)/2,s=Math.floor(a),o=Math.ceil(a);s<=o;++s){var l=n[s];p[t]===t&&c<f[l]&&(i=void 0,(r=l)<(e=t)&&(i=e,e=r,r=i),!pg(h[e],r))&&(p[l]=t,p[t]=d[t]=d[l],c=f[l])}})}),{root:d,align:p}}function My(i,t,e,r,n){var a,s,o,l,c,h,u={},d=(a=i,t=t,s=e,o=n,l=new jg,c=a.graph(),h=function(s,o,l){return function(t,e,r){var i,n=t.node(e),a=t.node(r),e=0;if(e+=n.width/2,pg(n,"labelpos"))switch(n.labelpos.toLowerCase()){case"l":i=-n.width/2;break;case"r":i=n.width/2}if(i&&(e+=l?i:-i),i=0,e=(e=(e+=(n.dummy?o:s)/2)+(a.dummy?o:s)/2)+a.width/2,pg(a,"labelpos"))switch(a.labelpos.toLowerCase()){case"l":i=a.width/2;break;case"r":i=-a.width/2}return i&&(e+=l?i:-i),i=0,e}}(c.nodesep,c.edgesep,o),g(t,function(t){var n;g(t,function(t){var e,r,i=s[t];l.setNode(i),n&&(e=s[n],r=l.edge(e,i),l.setEdge(e,i,Math.max(h(a,t,n),r||0))),n=t})}),l),p=n?"borderLeft":"borderRight";function f(t,e){for(var r=d.nodes(),i=r.pop(),n={};i;)n[i]?t(i):(n[i]=!0,r.push(i),r=r.concat(e(i))),i=r.pop()}return f(function(t){u[t]=d.inEdges(t).reduce(function(t,e){return Math.max(t,u[e.v]+d.edge(e))},0)},d.predecessors.bind(d)),f(function(t){var e=d.outEdges(t).reduce(function(t,e){return Math.min(t,u[e.w]-d.edge(e))},Number.POSITIVE_INFINITY),r=i.node(t);e!==Number.POSITIVE_INFINITY&&r.borderType!==p&&(u[t]=Math.max(u[t],e))},d.successors.bind(d)),g(r,function(t){u[t]=u[e[t]]}),u}function Ny(n,t){return Cg(fg(t),function(t){var e,r=Number.NEGATIVE_INFINITY,i=Number.POSITIVE_INFINITY;return e=function(t,e){e=n.node(e).width/2;r=Math.max(t+e,r),i=Math.min(t-e,i)},null!=(t=t)&&zf(t,rg(e),X2),r-i})}function Oy(i){var n,r,a,s,o,l,c,t=iy(i),h=wg(Sy(i,t),Ay(i,t)),u={},e=(g(["u","d"],function(r){n="u"===r?t:fg(t).reverse(),g(["l","r"],function(t){"r"===t&&(n=cg(n,function(t){return fg(t).reverse()}));var e=("u"===r?i.predecessors:i.successors).bind(i),e=Ly(0,n,h,e),e=My(i,n,e.root,e.align,"r"===t);"r"===t&&(e=xg(e,function(t){return-t})),u[r+t]=e})}),Ny(i,u));return s=u,e=fg(o=e),l=Tg(e),c=kg(e),g(["u","d"],function(a){g(["l","r"],function(t){var e,r,i=a+t,n=s[i];n!==o&&(e=fg(n),r="l"===t?l-Tg(e):c-kg(e))&&(s[i]=xg(n,function(t){return t+r}))})}),r=u,a=i.graph().align,xg(r.ul,function(t,e){return a?r[a.toLowerCase()][e]:((e=Ig(cg(r,e)))[1]+e[2])/2})}function By(r){var i,t,n,a;r=ey(r),t=iy(i=r),n=i.graph().ranksep,a=0,g(t,function(t){var e=kg(cg(t,function(t){return i.node(t).height}));g(t,function(t){i.node(t).y=a+e/2}),a+=e+n}),g(Oy(r),function(t,e){r.node(e).x=t})}function Iy(a,t){var r=t&&t.debugTiming?sy:oy;r("layout",function(){var e=r("  buildLayoutGraph",function(){return r=a,i=new jg({multigraph:!0,compound:!0}),t=Hy(r.graph()),i.setGraph(wg({},Ry,Wy(t,Fy),Ag(t,Py))),g(r.nodes(),function(t){var e=Hy(r.node(t));i.setNode(t,Gf(Wy(e,$y),Yy)),i.setParent(t,r.parent(t))}),g(r.edges(),function(t){var e=Hy(r.edge(t));i.setEdge(t,wg({},zy,Wy(e,jy),Ag(e,Uy)))}),i;var r,i,t});r("  runLayout",function(){var c,t;c=e,(t=r)("    makeSpaceForEdgeLabels",function(){var e,r;(r=(e=c).graph()).ranksep/=2,g(e.edges(),function(t){t=e.edge(t);t.minlen*=2,"c"!==t.labelpos.toLowerCase()&&("TB"===r.rankdir||"BT"===r.rankdir?t.width+=t.labeloffset:t.height+=t.labeloffset)})}),t("    removeSelfEdges",function(){var r;g((r=c).edges(),function(t){var e;t.v===t.w&&((e=r.node(t.v)).selfEdges||(e.selfEdges=[]),e.selfEdges.push({e:t,label:r.edge(t)}),r.removeEdge(t))})}),t("    acyclic",function(){Jg(c)}),t("    nestingGraph.run",function(){gy(c)}),t("    rank",function(){var t=ey(c);switch(t.graph().ranker){case"network-simplex":am(t);break;case"tight-tree":!function(t){qy(t),Gy(t)}(t);break;case"longest-path":nm(t);break;default:am(t)}}),t("    injectEdgeLabelProxies",function(){var r;g((r=c).edges(),function(t){var e=r.edge(t);e.width&&e.height&&(e=r.node(t.v),e={rank:(r.node(t.w).rank-e.rank)/2+e.rank,e:t},ty(r,"edge-proxy",e,"_ep"))})}),t("    removeEmptyRanks",function(){var r,i,n,a,s;i=Tg(cg((r=c).nodes(),function(t){return r.node(t).rank})),n=[],g(r.nodes(),function(t){var e=r.node(t).rank-i;n[e]||(n[e]=[]),n[e].push(t)}),a=0,s=r.graph().nodeRankFactor,g(n,function(t,e){bg(t)&&e%s!=0?--a:a&&g(t,function(t){r.node(t).rank+=a})})}),t("    nestingGraph.cleanup",function(){var e,t;t=(e=c).graph(),e.removeNode(t.nestingRoot),delete t.nestingRoot,g(e.edges(),function(t){e.edge(t).nestingEdge&&e.removeEdge(t)})}),t("    normalizeRanks",function(){var e,r;r=Tg(cg((e=c).nodes(),function(t){return e.node(t).rank})),g(e.nodes(),function(t){t=e.node(t);pg(t,"rank")&&(t.rank-=r)})}),t("    assignRankMinMax",function(){var e,r;r=0,g((e=c).nodes(),function(t){t=e.node(t);t.borderTop&&(t.minRank=e.node(t.borderTop).rank,t.maxRank=e.node(t.borderBottom).rank,r=kg(r,t.maxRank))}),e.graph().maxRank=r}),t("    removeEdgeLabelProxies",function(){var r;g((r=c).nodes(),function(t){var e=r.node(t);"edge-proxy"===e.dummy&&(r.edge(e.e).labelRank=e.rank,r.removeNode(t))})}),t("    normalize.run",function(){var d;(d=c).graph().dummyChains=[],g(d.edges(),function(t){var e,r,i,n=d,a=t,s=a.v,o=n.node(s).rank,t=a.w,l=n.node(t).rank,c=a.name,h=n.edge(a),u=h.labelRank;if(l!==o+1){for(n.removeEdge(a),i=0,++o;o<l;++i,++o)h.points=[],e=ty(n,"edge",r={width:0,height:0,edgeLabel:h,edgeObj:a,rank:o},"_d"),o===u&&(r.width=h.width,r.height=h.height,r.dummy="edge-label",r.labelpos=h.labelpos),n.setEdge(s,e,{weight:h.weight},c),0===i&&n.graph().dummyChains.push(e),s=e;n.setEdge(s,t,{weight:h.weight},c)}})}),t("    parentDummyChains",function(){Ey(c)}),t("    addBorderSegments",function(){ly(c)}),t("    order",function(){wy(c)}),t("    insertSelfEdges",function(){var n;g(iy(n=c),function(t){var i=0;g(t,function(t,e){var r=n.node(t);r.order=e+i,g(r.selfEdges,function(t){ty(n,"selfedge",{width:t.label.width,height:t.label.height,rank:r.rank,order:e+ ++i,e:t.e,label:t.label},"_se")}),delete r.selfEdges})})}),t("    adjustCoordinateSystem",function(){var t,e;"lr"!==(e=(t=c).graph().rankdir.toLowerCase())&&"rl"!==e||uy(t)}),t("    position",function(){By(c)}),t("    positionSelfEdges",function(){var s;g((s=c).nodes(),function(t){var e,r,i,n,a=s.node(t);"selfedge"===a.dummy&&(e=(n=s.node(a.e.v)).x+n.width/2,r=n.y,i=a.x-e,n=n.height/2,s.setEdge(a.e,a.label),s.removeNode(t),a.label.points=[{x:e+2*i/3,y:r-n},{x:e+5*i/6,y:r-n},{x:e+i,y:r},{x:e+5*i/6,y:r+n},{x:e+2*i/3,y:r+n}],a.label.x=a.x,a.label.y=a.y)})}),t("    removeBorderNodes",function(){var a;g((a=c).nodes(),function(t){var e,r,i,n;a.children(t).length&&(t=a.node(t),e=a.node(t.borderTop),r=a.node(t.borderBottom),i=a.node(eg(t.borderLeft)),n=a.node(eg(t.borderRight)),t.width=Math.abs(n.x-i.x),t.height=Math.abs(r.y-e.y),t.x=i.x+t.width/2,t.y=e.y+t.height/2)}),g(a.nodes(),function(t){"border"===a.node(t).dummy&&a.removeNode(t)})}),t("    normalize.undo",function(){var n;g((n=c).graph().dummyChains,function(t){var e,r=n.node(t),i=r.edgeLabel;for(n.setEdge(r.edgeObj,i);r.dummy;)e=n.successors(t)[0],n.removeNode(t),i.points.push({x:r.x,y:r.y}),"edge-label"===r.dummy&&(i.x=r.x,i.y=r.y,i.width=r.width,i.height=r.height),r=n.node(t=e)})}),t("    fixupEdgeLabelCoords",function(){var r;g((r=c).edges(),function(t){var e=r.edge(t);if(pg(e,"x"))switch("l"!==e.labelpos&&"r"!==e.labelpos||(e.width-=e.labeloffset),e.labelpos){case"l":e.x-=e.width/2+e.labeloffset;break;case"r":e.x+=e.width/2+e.labeloffset}})}),t("    undoCoordinateSystem",function(){hy(c)}),t("    translateGraph",function(){function e(t){var e=t.x,r=t.y,i=t.width,t=t.height;n=Math.min(n,e-i/2),a=Math.max(a,e+i/2),s=Math.min(s,r-t/2),o=Math.max(o,r+t/2)}var r,n,a,s,o,t,i,l;r=c,n=Number.POSITIVE_INFINITY,a=0,s=Number.POSITIVE_INFINITY,o=0,t=r.graph(),i=t.marginx||0,l=t.marginy||0,g(r.nodes(),function(t){e(r.node(t))}),g(r.edges(),function(t){t=r.edge(t);pg(t,"x")&&e(t)}),n-=i,s-=l,g(r.nodes(),function(t){t=r.node(t);t.x-=n,t.y-=s}),g(r.edges(),function(t){t=r.edge(t);g(t.points,function(t){t.x-=n,t.y-=s}),pg(t,"x")&&(t.x-=n),pg(t,"y")&&(t.y-=s)}),t.width=a-n+i,t.height=o-s+l}),t("    assignNodeIntersects",function(){var a;g((a=c).edges(),function(t){var e,r=a.edge(t),i=a.node(t.v),t=a.node(t.w),n=r.points?(e=r.points[0],r.points[r.points.length-1]):(r.points=[],e=t,i);r.points.unshift(ry(i,e)),r.points.push(ry(t,n))})}),t("    reversePoints",function(){var e;g((e=c).edges(),function(t){t=e.edge(t);t.reversed&&t.points.reverse()})}),t("    acyclic.undo",function(){var i;g((i=c).edges(),function(t){var e,r=i.edge(t);r.reversed&&(i.removeEdge(t),e=r.forwardName,delete r.reversed,delete r.forwardName,i.setEdge(t.w,t.v,r,e))})})}),r("  updateInputGraph",function(){var i,n;n=e,g((i=a).nodes(),function(t){var e=i.node(t),r=n.node(t);e&&(e.x=r.x,e.y=r.y,n.children(t).length)&&(e.width=r.width,e.height=r.height)}),g(i.edges(),function(t){var e=i.edge(t),t=n.edge(t);e.points=t.points,pg(t,"x")&&(e.x=t.x,e.y=t.y)}),i.graph().width=n.graph().width,i.graph().height=n.graph().height})})}var Fy=["nodesep","edgesep","ranksep","marginx","marginy"],Ry={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},Py=["acyclicer","ranker","rankdir","align"],$y=["width","height"],Yy={width:0,height:0},jy=["minlen","weight","width","height","labeloffset"],zy={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},Uy=["labelpos"];function Wy(t,e){return xg(Ag(t,e),Number)}function Hy(t){var r={};return g(t,function(t,e){r[e.toLowerCase()]=t}),r}function qy(i){var n={};g(i.sources(),function e(t){var r=i.node(t);if(pg(n,t))return r.rank;n[t]=!0;t=Tg(cg(i.outEdges(t),function(t){return e(t.w)-i.edge(t).minlen}));return t!==Number.POSITIVE_INFINITY&&null!=t||(t=0),r.rank=t})}function Vy(t,e){return t.node(e.w).rank-t.node(e.v).rank-t.edge(e).minlen}function Gy(t){var e,r=new jg({directed:!1}),i=t.nodes()[0],n=t.nodeCount();for(r.setNode(i,{});function(n,a){return g(n.nodes(),function r(i){g(a.nodeEdges(i),function(t){var e=t.v,e=i===e?t.w:e;n.hasNode(e)||Vy(a,t)||(n.setNode(e,{}),n.setEdge(i,e,{}),r(e))})}),n.nodeCount()}(r,t)<n;)e=function(e,r){return Cg(r.edges(),function(t){if(e.hasNode(t.v)!==e.hasNode(t.w))return Vy(r,t)})}(r,t),e=r.hasNode(e.v)?Vy(t,e):-Vy(t,e),function(t,e,r){g(t.nodes(),function(t){e.node(t).rank+=r})}(r,t,e);return r}function Xy(e,t,r){Ld(t)||(t=[t]);var i=(e.isDirected()?e.successors:e.neighbors).bind(e),n=[],a={};return g(t,function(t){if(!e.hasNode(t))throw new Error("Graph does not have node: "+t);!function e(r,t,i,n,a,s){pg(n,t)||(n[t]=!0,i||s.push(t),g(a(t),function(t){e(r,t,i,n,a,s)}),i&&s.push(t))}(e,t,"post"===r,a,i,n)}),n}function Zy(t){i=t,n=(new jg).setGraph(i.graph()),g(i.nodes(),function(t){n.setNode(t,i.node(t))}),g(i.edges(),function(t){var e=n.edge(t.v,t.w)||{weight:0,minlen:1},r=i.edge(t);n.setEdge(t.v,t.w,{weight:e.weight+r.weight,minlen:Math.max(e.minlen,r.minlen)})}),qy(t=n);var i,n,e,r=Gy(t);for(Jy(r),Qy(r,t);e=tm(r);)rm(r,t,e,em(r,t,e))}function Qy(n,a){t=(e=n).nodes();var t,e=Xy(e,t,"post");g(e=e.slice(0,e.length-1),function(t){var e,r,i;r=a,t=t,i=(e=n).node(t).parent,e.edge(t,i).cutvalue=Ky(e,r,t)})}function Ky(i,n,a){var s=i.node(a).parent,o=!0,t=n.edge(a,s),l=0;return t||(o=!1,t=n.edge(s,a)),l=t.weight,g(n.nodeEdges(a),function(t){var e=t.v===a,r=e?t.w:t.v;r!==s&&(e=e===o,t=n.edge(t).weight,l+=e?t:-t,i.hasEdge(a,r))&&(t=i.edge(a,r).cutvalue,l+=e?-t:t)}),l}function Jy(t,e){arguments.length<2&&(e=t.nodes()[0]),function e(r,i,n,a,t){var s=n,o=r.node(a);return i[a]=!0,g(r.neighbors(a),function(t){pg(i,t)||(n=e(r,i,n,t,a))}),o.low=s,o.lim=n++,t?o.parent=t:delete o.parent,n}(t,{},1,e)}function tm(e){return og(e.edges(),function(t){return e.edge(t).cutvalue<0})}function em(e,r,t){var i=t.v,n=t.w,t=(r.hasEdge(i,n)||(i=t.w,n=t.v),e.node(i)),i=e.node(n),a=t,s=!1;return t.lim>i.lim&&(a=i,s=!0),Cg(ng(r.edges(),function(t){return s===im(0,e.node(t.v),a)&&s!==im(0,e.node(t.w),a)}),function(t){return Vy(r,t)})}function rm(t,e,r,i){var n,a,s=r.v,r=r.w;t.removeEdge(s,r),t.setEdge(i.v,i.w,{}),Jy(t),Qy(t,e),n=t,a=e,s=og(n.nodes(),function(t){return!a.node(t).parent}),g(s=(s=function(t,e){return Xy(t,e,"pre")}(n,s)).slice(1),function(t){var e=n.node(t).parent,r=a.edge(t,e),i=!1;r||(r=a.edge(e,t),i=!0),a.node(t).rank=a.node(e).rank+(i?r.minlen:-r.minlen)})}function im(t,e,r){return r.low<=e.lim&&e.lim<=r.lim}new Error,Zy.initLowLimValues=Jy,Zy.initCutValues=Qy,Zy.calcCutValue=Ky,Zy.leaveEdge=tm,Zy.enterEdge=em,Zy.exchangeEdges=rm;var nm=qy;function am(t){Zy(t)}let sm=0;function om(t,e,r,i){e=lm(e),t=t.append("tspan").attr("x",i.padding).text(e.displayText),""!==e.cssStyle&&t.attr("style",e.cssStyle),r||t.attr("dy",i.textHeight)}const lm=function(t){var l=t.match(/^([#+~-])?(\w+)(~\w+~|\[])?\s+(\w+) *([$*])?$/),c=t.match(/^([#+|~-])?(\w+) *\( *(.*)\) *([$*])? *(\w*[[\]|~]*\s*\w*~?)$/);if(l&&!c){let t="",e="";try{var r=l[1]?l[1].trim():"",i=l[2]?l[2].trim():"",n=l[3]?Jo(l[3].trim()):"",a=l[4]?l[4].trim():"",s=l[5]?l[5].trim():"";e=r+i+n+" "+a,t=cm(s)}catch{e=l}return{displayText:e,cssStyle:t}}if(c){l=c;let t="",e="";try{var o=l[1]?l[1].trim():"",h=l[2]?l[2].trim():"",u=l[3]?Jo(l[3].trim()):"",d=l[4]?l[4].trim():"",p=l[5]?" : "+Jo(l[5]).trim():"";e=o+h+"("+u+")"+p,t=cm(d)}catch{e=l}return{displayText:e,cssStyle:t}}{c=t;let i="",n="",a="",s=c.indexOf("("),o=c.indexOf(")");if(1<s&&s<o&&o<=c.length){let t="",e="",r=c.substring(0,1);e=(r.match(/\w/)?c.substring(0,s):(r.match(/[#+~-]/)&&(t=r),c.substring(1,s))).trim();l=c.substring(s+1,o);c.substring(o+1,1),n=cm(c.substring(o+1,o+2)),i=t+e+"("+Jo(l.trim())+")",o<c.length&&""!==(a=c.substring(o+2).trim())&&(a=" : "+Jo(a),i+=a)}else i=Jo(c);return{displayText:i,cssStyle:n}}},cm=function(t){switch(t){case"*":return"font-style:italic;";case"$":return"text-decoration:underline;";default:return""}},hm={drawClass:function(t,e,r,i){S.debug("Rendering class ",e,r);var n=e.id,a={id:n,label:e.id,width:0,height:0},t=t.append("g").attr("id",i.db.lookUpDomId(n)).attr("class","classGroup");let s,o=(s=(e.link?t.append("svg:a").attr("xlink:href",e.link).attr("target",e.linkTarget):t).append("text").attr("y",r.textHeight+r.padding).attr("x",0),!0),l=(e.annotations.forEach(function(t){t=s.append("tspan").text("«"+t+"»");o||t.attr("dy",r.textHeight),o=!1}),e.id);void 0!==e.type&&""!==e.type&&(l+="<"+e.type+">");i=s.append("tspan").text(l).attr("class","title");o||i.attr("dy",r.textHeight);const c=s.node().getBBox().height,h=t.append("line").attr("x1",0).attr("y1",r.padding+c+r.dividerMargin/2).attr("y2",r.padding+c+r.dividerMargin/2),u=t.append("text").attr("x",r.padding).attr("y",c+r.dividerMargin+r.textHeight).attr("fill","white").attr("class","classText"),d=(o=!0,e.members.forEach(function(t){om(u,t,o,r),o=!1}),u.node().getBBox()),p=t.append("line").attr("x1",0).attr("y1",r.padding+c+r.dividerMargin+d.height).attr("y2",r.padding+c+r.dividerMargin+d.height),f=t.append("text").attr("x",r.padding).attr("y",c+2*r.dividerMargin+d.height+r.textHeight).attr("fill","white").attr("class","classText");o=!0,e.methods.forEach(function(t){om(f,t,o,r),o=!1});n=t.node().getBBox(),i=" ";0<e.cssClasses.length&&(i+=e.cssClasses.join(" "));const g=t.insert("rect",":first-child").attr("x",0).attr("y",0).attr("width",n.width+2*r.padding).attr("height",n.height+r.padding+.5*r.dividerMargin).attr("class",i).node().getBBox().width;return s.node().childNodes.forEach(function(t){t.setAttribute("x",(g-t.getBBox().width)/2)}),e.tooltip&&s.insert("title").text(e.tooltip),h.attr("x2",g),p.attr("x2",g),a.width=g,a.height=n.height+r.padding+.5*r.dividerMargin,a},drawEdge:function(t,e,r,i,n){function a(t){switch(t){case n.db.relationType.AGGREGATION:return"aggregation";case n.db.relationType.EXTENSION:return"extension";case n.db.relationType.COMPOSITION:return"composition";case n.db.relationType.DEPENDENCY:return"dependency";case n.db.relationType.LOLLIPOP:return"lollipop"}}e.points=e.points.filter(t=>!Number.isNaN(t.y));var s=e.points,o=As().x(function(t){return t.x}).y(function(t){return t.y}).curve(Bs),o=t.append("path").attr("d",o(s)).attr("id","edge"+sm).attr("class","relation");let l="";i.arrowMarkerAbsolute&&(l=(l=(l=window.location.protocol+"//"+window.location.host+window.location.pathname+window.location.search).replace(/\(/g,"\\(")).replace(/\)/g,"\\)")),1==r.relation.lineType&&o.attr("class","relation dashed-line"),10==r.relation.lineType&&o.attr("class","relation dotted-line"),"none"!==r.relation.type1&&o.attr("marker-start","url("+l+"#"+a(r.relation.type1)+"Start)"),"none"!==r.relation.type2&&o.attr("marker-end","url("+l+"#"+a(r.relation.type2)+"End)");var c,s=e.points.length,o=t1.calcLabelPosition(e.points),h=o.x,o=o.y;let u,d,p,f;s%2!=0&&1<s&&(c=t1.calcCardinalityPosition("none"!==r.relation.type1,e.points,e.points[0]),e=t1.calcCardinalityPosition("none"!==r.relation.type2,e.points,e.points[s-1]),S.debug("cardinality_1_point "+JSON.stringify(c)),S.debug("cardinality_2_point "+JSON.stringify(e)),u=c.x,d=c.y,p=e.x,f=e.y),void 0!==r.title&&(c=(s=t.append("g").attr("class","classLabel")).append("text").attr("class","label").attr("x",h).attr("y",o).attr("fill","red").attr("text-anchor","middle").text(r.title),e=(window.label=c).node().getBBox(),s.insert("rect",":first-child").attr("class","box").attr("x",e.x-i.padding/2).attr("y",e.y-i.padding/2).attr("width",e.width+i.padding).attr("height",e.height+i.padding)),S.info("Rendering relation "+JSON.stringify(r)),void 0!==r.relationTitle1&&"none"!==r.relationTitle1&&t.append("g").attr("class","cardinality").append("text").attr("class","type1").attr("x",u).attr("y",d).attr("fill","black").attr("font-size","6").text(r.relationTitle1),void 0!==r.relationTitle2&&"none"!==r.relationTitle2&&t.append("g").attr("class","cardinality").append("text").attr("class","type2").attr("x",p).attr("y",f).attr("fill","black").attr("font-size","6").text(r.relationTitle2),sm++},drawNote:function(t,e,r,i){S.debug("Rendering note ",e,r);var n=e.id,a={id:n,text:e.text,width:0,height:0},t=t.append("g").attr("id",n).attr("class","classGroup");let s=t.append("text").attr("y",r.textHeight+r.padding).attr("x",0);n=JSON.parse(`"${e.text}"`).split(`
`);n.forEach(function(t){S.debug("Adding line: "+t),s.append("tspan").text(t).attr("class","title").attr("dy",r.textHeight)});const o=t.node().getBBox(),l=t.insert("rect",":first-child").attr("x",0).attr("y",0).attr("width",o.width+2*r.padding).attr("height",o.height+n.length*r.textHeight+r.padding+.5*r.dividerMargin).node().getBBox().width;return s.node().childNodes.forEach(function(t){t.setAttribute("x",(l-t.getBBox().width)/2)}),a.width=l,a.height=o.height+n.length*r.textHeight+r.padding+.5*r.dividerMargin,a},parseMember:lm};let um={};function dm(e){var t=Object.entries(um).find(t=>t[1].label===e);if(t)return t[0]}const pm={draw:function(t,e,r,i){const n=J().class;um={},S.info("Rendering diagram "+t);var t=J().securityLevel;let a;"sandbox"===t&&(a=K("#i"+e));const s=K("sandbox"===t?a.nodes()[0].contentDocument.body:"body"),o=s.select(`[id='${e}']`),l=((t=o).append("defs").append("marker").attr("id","extensionStart").attr("class","extension").attr("refX",0).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 1,7 L18,13 V 1 Z"),t.append("defs").append("marker").attr("id","extensionEnd").attr("refX",19).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 1,1 V 13 L18,7 Z"),t.append("defs").append("marker").attr("id","compositionStart").attr("class","extension").attr("refX",0).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z"),t.append("defs").append("marker").attr("id","compositionEnd").attr("refX",19).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z"),t.append("defs").append("marker").attr("id","aggregationStart").attr("class","extension").attr("refX",0).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z"),t.append("defs").append("marker").attr("id","aggregationEnd").attr("refX",19).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z"),t.append("defs").append("marker").attr("id","dependencyStart").attr("class","extension").attr("refX",0).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 5,7 L9,13 L1,7 L9,1 Z"),t.append("defs").append("marker").attr("id","dependencyEnd").attr("refX",19).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L14,7 L9,1 Z"),new jg({multigraph:!0})),c=(l.setGraph({isMultiGraph:!0}),l.setDefaultEdgeLabel(function(){return{}}),i.db.getClasses()),h=Object.keys(c);for(const p of h){var u=c[p],u=hm.drawClass(o,u,n,i);um[u.id]=u,l.setNode(u.id,u),S.info("Org height: "+u.height)}i.db.getRelations().forEach(function(t){S.info("tjoho"+dm(t.id1)+dm(t.id2)+JSON.stringify(t)),l.setEdge(dm(t.id1),dm(t.id2),{relation:t},t.title||"DEFAULT")}),i.db.getNotes().forEach(function(t){S.debug("Adding note: "+JSON.stringify(t));var e=hm.drawNote(o,t,n,i);um[e.id]=e,l.setNode(e.id,e),t.class&&t.class in c&&l.setEdge(t.id,dm(t.class),{relation:{id1:t.id,id2:t.class,relation:{type1:"none",type2:"none",lineType:10}}},"DEFAULT")}),Iy(l),l.nodes().forEach(function(t){void 0!==t&&void 0!==l.node(t)&&(S.debug("Node "+t+": "+JSON.stringify(l.node(t))),s.select("#"+(i.db.lookUpDomId(t)||t)).attr("transform","translate("+(l.node(t).x-l.node(t).width/2)+","+(l.node(t).y-l.node(t).height/2)+" )"))}),l.edges().forEach(function(t){void 0!==t&&void 0!==l.edge(t)&&(S.debug("Edge "+t.v+" -> "+t.w+": "+JSON.stringify(l.edge(t))),hm.drawEdge(o,l.edge(t),l.edge(t).relation,n,i))});var e=o.node().getBBox(),t=e.width+40,d=e.height+40,e=(K1(o,d,t,n.useMaxWidth),`${e.x-20} ${e.y-20} ${t} `+d);S.debug("viewBox "+e),o.attr("viewBox",e)}};function fm(t){var i,n,e={options:{directed:t.isDirected(),multigraph:t.isMultigraph(),compound:t.isCompound()},nodes:cg((n=t).nodes(),function(t){var e=n.node(t),r=n.parent(t),t={v:t};return bg(e)||(t.value=e),bg(r)||(t.parent=r),t}),edges:cg((i=t).edges(),function(t){var e=i.edge(t),r={v:t.v,w:t.w};return bg(t.name)||(r.name=t.name),bg(e)||(r.value=e),r})};return bg(t.graph())||(e.value=pf(t.graph(),4)),e}const gm={extension:(t,e,r)=>{S.trace("Making markers for ",r),t.append("defs").append("marker").attr("id",e+"-extensionStart").attr("class","marker extension "+e).attr("refX",0).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 1,7 L18,13 V 1 Z"),t.append("defs").append("marker").attr("id",e+"-extensionEnd").attr("class","marker extension "+e).attr("refX",19).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 1,1 V 13 L18,7 Z")},composition:(t,e)=>{t.append("defs").append("marker").attr("id",e+"-compositionStart").attr("class","marker composition "+e).attr("refX",0).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z"),t.append("defs").append("marker").attr("id",e+"-compositionEnd").attr("class","marker composition "+e).attr("refX",19).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z")},aggregation:(t,e)=>{t.append("defs").append("marker").attr("id",e+"-aggregationStart").attr("class","marker aggregation "+e).attr("refX",0).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z"),t.append("defs").append("marker").attr("id",e+"-aggregationEnd").attr("class","marker aggregation "+e).attr("refX",19).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z")},dependency:(t,e)=>{t.append("defs").append("marker").attr("id",e+"-dependencyStart").attr("class","marker dependency "+e).attr("refX",0).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 5,7 L9,13 L1,7 L9,1 Z"),t.append("defs").append("marker").attr("id",e+"-dependencyEnd").attr("class","marker dependency "+e).attr("refX",19).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L14,7 L9,1 Z")},lollipop:(t,e)=>{t.append("defs").append("marker").attr("id",e+"-lollipopStart").attr("class","marker lollipop "+e).attr("refX",0).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("circle").attr("stroke","black").attr("fill","white").attr("cx",6).attr("cy",7).attr("r",6)},point:(t,e)=>{t.append("marker").attr("id",e+"-pointEnd").attr("class","marker "+e).attr("viewBox","0 0 10 10").attr("refX",10).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",12).attr("markerHeight",12).attr("orient","auto").append("path").attr("d","M 0 0 L 10 5 L 0 10 z").attr("class","arrowMarkerPath").style("stroke-width",1).style("stroke-dasharray","1,0"),t.append("marker").attr("id",e+"-pointStart").attr("class","marker "+e).attr("viewBox","0 0 10 10").attr("refX",0).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",12).attr("markerHeight",12).attr("orient","auto").append("path").attr("d","M 0 5 L 10 10 L 10 0 z").attr("class","arrowMarkerPath").style("stroke-width",1).style("stroke-dasharray","1,0")},circle:(t,e)=>{t.append("marker").attr("id",e+"-circleEnd").attr("class","marker "+e).attr("viewBox","0 0 10 10").attr("refX",11).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",11).attr("markerHeight",11).attr("orient","auto").append("circle").attr("cx","5").attr("cy","5").attr("r","5").attr("class","arrowMarkerPath").style("stroke-width",1).style("stroke-dasharray","1,0"),t.append("marker").attr("id",e+"-circleStart").attr("class","marker "+e).attr("viewBox","0 0 10 10").attr("refX",-1).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",11).attr("markerHeight",11).attr("orient","auto").append("circle").attr("cx","5").attr("cy","5").attr("r","5").attr("class","arrowMarkerPath").style("stroke-width",1).style("stroke-dasharray","1,0")},cross:(t,e)=>{t.append("marker").attr("id",e+"-crossEnd").attr("class","marker cross "+e).attr("viewBox","0 0 11 11").attr("refX",12).attr("refY",5.2).attr("markerUnits","userSpaceOnUse").attr("markerWidth",11).attr("markerHeight",11).attr("orient","auto").append("path").attr("d","M 1,1 l 9,9 M 10,1 l -9,9").attr("class","arrowMarkerPath").style("stroke-width",2).style("stroke-dasharray","1,0"),t.append("marker").attr("id",e+"-crossStart").attr("class","marker cross "+e).attr("viewBox","0 0 11 11").attr("refX",-1).attr("refY",5.2).attr("markerUnits","userSpaceOnUse").attr("markerWidth",11).attr("markerHeight",11).attr("orient","auto").append("path").attr("d","M 1,1 l 9,9 M 10,1 l -9,9").attr("class","arrowMarkerPath").style("stroke-width",2).style("stroke-dasharray","1,0")},barb:(t,e)=>{t.append("defs").append("marker").attr("id",e+"-barbEnd").attr("refX",19).attr("refY",7).attr("markerWidth",20).attr("markerHeight",14).attr("markerUnits","strokeWidth").attr("orient","auto").append("path").attr("d","M 19,7 L9,13 L14,7 L9,1 Z")}},ym=(e,t,r,i)=>{t.forEach(t=>{gm[t](e,r,i)})};const mm=(t,e,r,i)=>{let n=t||"";var a,s,o;if("object"==typeof n&&(n=n[0]),Ko(J().flowchart.htmlLabels))return n=n.replace(/\\n|\n/g,"<br />"),S.info("vertexText"+n),t={isNode:i,label:zv(n).replace(/fa[blrs]?:fa-[\w-]+/g,t=>`<i class='${t.replace(":"," ")}'></i>`),labelStyle:e.replace("fill:","color:")},i=t,t=K(document.createElementNS("http://www.w3.org/2000/svg","foreignObject")),a=t.append("xhtml:div"),s=i.label,o=i.isNode?"nodeLabel":"edgeLabel",a.html('<span class="'+o+'" '+(i.labelStyle?'style="'+i.labelStyle+'"':"")+">"+s+"</span>"),o=a,(s=i.labelStyle)&&o.attr("style",s),a.style("display","inline-block"),a.style("white-space","nowrap"),a.attr("xmlns","http://www.w3.org/1999/xhtml"),t.node();{var l=document.createElementNS("http://www.w3.org/2000/svg","text");l.setAttribute("style",e.replace("color:","fill:"));let t=[];for(const h of t="string"==typeof n?n.split(/\\n|\n|<br\s*\/?>/gi):Array.isArray(n)?n:[]){var c=document.createElementNS("http://www.w3.org/2000/svg","tspan");c.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve"),c.setAttribute("dy","1em"),c.setAttribute("x","0"),r?c.setAttribute("class","title-row"):c.setAttribute("class","row"),c.textContent=h.trim(),l.appendChild(c)}return l}},bm=(t,e,r,i)=>{let n;n=r||"node default";r=t.insert("g").attr("class",n).attr("id",e.domId||e.id),t=r.insert("g").attr("class","label").attr("style",e.labelStyle);let a;a=void 0===e.labelText?"":"string"==typeof e.labelText?e.labelText:e.labelText[0];var i=t.node().appendChild(mm(Go(zv(a),J()),e.labelStyle,!1,i));let s=i.getBBox();Ko(J().flowchart.htmlLabels)&&(o=i.children[0],i=K(i),s=o.getBoundingClientRect(),i.attr("width",s.width),i.attr("height",s.height));var o=e.padding/2;return t.attr("transform","translate("+-s.width/2+", "+-s.height/2+")"),{shapeSvg:r,bbox:s,halfPadding:o,label:t}},_m=(t,e)=>{e=e.node().getBBox();t.width=e.width,t.height=e.height};function xm(t,e,r,i){return t.insert("polygon",":first-child").attr("points",i.map(function(t){return t.x+","+t.y}).join(" ")).attr("class","label-container").attr("transform","translate("+-e/2+","+r/2+")")}let vm={},km={},wm={};const Tm=()=>{km={},wm={},vm={}},Cm=(t,e)=>(S.trace("In isDecendant",e," ",t," = ",km[e].includes(t)),!!km[e].includes(t)),Em=(n,a,s,o)=>{S.warn("Copying children of ",n,"root",o,"data",a.node(n),o);var t=a.children(n)||[];n!==o&&t.push(n),S.warn("Copying (nodes) clusterId",n,"nodes",t),t.forEach(t=>{var e;0<a.children(t).length?Em(t,a,s,o):(e=a.node(t),S.info("cp ",t," to ",o," with parent ",n),s.setNode(t,e),o!==a.parent(t)&&(S.warn("Setting parent",t,a.parent(t)),s.setParent(t,a.parent(t))),n!==o&&t!==n?(S.debug("Setting parent",t,n),s.setParent(t,n)):(S.info("In copy ",n,"root",o,"data",a.node(n),o),S.debug("Not Setting parent for node=",t,"cluster!==rootId",n!==o,"node!==clusterId",t!==n)),e=a.edges(t),S.debug("Copying Edges",e),e.forEach(t=>{S.info("Edge",t);var e,r,i=a.edge(t.v,t.w,t.name);S.info("Edge data",i,o);try{e=t,r=o,S.info("Decendants of ",r," is ",km[r]),S.info("Edge is ",e),e.v!==r&&e.w!==r&&(km[r]?km[r].includes(e.v)||Cm(e.v,r)||Cm(e.w,r)||km[r].includes(e.w):(S.debug("Tilt, ",r,",not in decendants"),!1))?(S.info("Copying as ",t.v,t.w,i,t.name),s.setEdge(t.v,t.w,i,t.name),S.info("newGraph edges ",s.edges(),s.edge(s.edges()[0]))):S.info("Skipping copy of edge ",t.v,"--\x3e",t.w," rootId: ",o," clusterId:",n)}catch(t){S.error(t)}})),S.debug("Removing node",t),a.removeNode(t)})},Sm=(t,e)=>{var r=e.children(t);let i=[...r];for(const n of r)wm[n]=t,i=[...i,...Sm(n,e)];return i},Am=(t,e)=>{S.trace("Searching",t);var r=e.children(t);if(S.trace("Searching children of id ",t,r),r.length<1)return S.trace("This is a valid node",t),t;for(const n of r){var i=Am(n,e);if(i)return S.trace("Found replacement for",t," => ",i),i}},Dm=t=>vm[t]&&vm[t].externalConnections&&vm[t]?vm[t].id:t,Lm=(o,t)=>{!o||10<t?S.debug("Opting out, no graph "):(S.debug("Opting in, graph "),o.nodes().forEach(function(t){0<o.children(t).length&&(S.warn("Cluster identified",t," Replacement id in edges: ",Am(t,o)),km[t]=Sm(t,o),vm[t]={id:Am(t,o),clusterData:o.node(t)})}),o.nodes().forEach(function(e){var t=o.children(e),r=o.edges();0<t.length?(S.debug("Cluster identified",e,km),r.forEach(t=>{t.v!==e&&t.w!==e&&Cm(t.v,e)^Cm(t.w,e)&&(S.warn("Edge: ",t," leaves cluster ",e),S.warn("Decendants of XXX ",e,": ",km[e]),vm[e].externalConnections=!0)})):S.debug("Not a cluster ",e,km)}),o.edges().forEach(function(t){var e,r,i,n=o.edge(t);S.warn("Edge "+t.v+" -> "+t.w+": "+JSON.stringify(t)),S.warn("Edge "+t.v+" -> "+t.w+": "+JSON.stringify(o.edge(t)));let a=t.v,s=t.w;S.warn("Fix XXX",vm,"ids:",t.v,t.w,"Translating: ",vm[t.v]," --- ",vm[t.w]),vm[t.v]&&vm[t.w]&&vm[t.v]===vm[t.w]?(S.warn("Fixing and trixing link to self - removing XXX",t.v,t.w,t.name),S.warn("Fixing and trixing - removing XXX",t.v,t.w,t.name),a=Dm(t.v),s=Dm(t.w),o.removeEdge(t.v,t.w,t.name),e=t.w+"---"+t.v,o.setNode(e,{domId:e,id:e,labelStyle:"",labelText:n.label,padding:0,shape:"labelRect",style:""}),r=JSON.parse(JSON.stringify(n)),i=JSON.parse(JSON.stringify(n)),r.label="",r.arrowTypeEnd="none",i.label="",r.fromCluster=t.v,i.toCluster=t.v,o.setEdge(a,e,r,t.name+"-cyclic-special"),o.setEdge(e,s,i,t.name+"-cyclic-special")):(vm[t.v]||vm[t.w])&&(S.warn("Fixing and trixing - removing XXX",t.v,t.w,t.name),a=Dm(t.v),s=Dm(t.w),o.removeEdge(t.v,t.w,t.name),a!==t.v&&(n.fromCluster=t.v),s!==t.w&&(n.toCluster=t.w),S.warn("Fix Replacing with XXX",a,s,t.name),o.setEdge(a,s,n,t.name))}),S.warn("Adjusted Graph",fm(o)),Mm(o,0),S.trace(vm))},Mm=(r,i)=>{if(S.warn("extractor - ",i,fm(r),r.children("D")),10<i)S.error("Bailing out");else{let t=r.nodes(),e=!1;for(const o of t){var n=r.children(o);e=e||0<n.length}if(e){S.debug("Nodes = ",t,i);for(const l of t)if(S.debug("Extracting node",l,vm,vm[l]&&!vm[l].externalConnections,!r.parent(l),r.node(l),r.children("D")," Depth ",i),vm[l])if(!vm[l].externalConnections&&r.children(l)&&0<r.children(l).length){S.warn("Cluster without external connections, without a parent and with children",l,i);let t="TB"===r.graph().rankdir?"LR":"TB";vm[l]&&vm[l].clusterData&&vm[l].clusterData.dir&&(t=vm[l].clusterData.dir,S.warn("Fixing dir",vm[l].clusterData.dir,t));var a=new jg({multigraph:!0,compound:!0}).setGraph({rankdir:t,nodesep:50,ranksep:50,marginx:8,marginy:8}).setDefaultEdgeLabel(function(){return{}});S.warn("Old graph before copy",fm(r)),Em(l,r,a,l),r.setNode(l,{clusterNode:!0,id:l,clusterData:vm[l].clusterData,labelText:vm[l].labelText,graph:a}),S.warn("New graph after copy node: (",l,")",fm(a)),S.debug("Old graph after copy",fm(r))}else S.warn("Cluster ** ",l," **not meeting the criteria !externalConnections:",!vm[l].externalConnections," no parent: ",!r.parent(l)," children ",r.children(l)&&0<r.children(l).length,r.children("D"),i),S.debug(vm);else S.debug("Not a cluster",l,i);t=r.nodes(),S.warn("New list of nodes",t);for(const c of t){var s=r.node(c);S.warn(" Now next level",c,s),s.clusterNode&&Mm(s.graph,i+1)}}else S.debug("Done, no node has children",r.nodes())}},Nm=(e,t)=>{if(0===t.length)return[];let r=Object.assign(t);return t.forEach(t=>{t=e.children(t),t=Nm(e,t);r=[...r,...t]}),r};function Om(t,e,r,i){var n=t.x,t=t.y,a=n-i.x,s=t-i.y,o=Math.sqrt(e*e*s*s+r*r*a*a),a=Math.abs(e*r*a/o),e=(i.x<n&&(a=-a),Math.abs(e*r*s/o));return{x:n+a,y:t+(e=i.y<t?-e:e)}}const Bm=(t,e)=>{var r,i=t.x,n=t.y,a=e.x-i,e=e.y-n,s=t.width/2,t=t.height/2,t=Math.abs(e)*s>Math.abs(a)*t?(e<0&&(t=-t),r=0==e?0:t*a/e,t):(r=s=a<0?-s:s,0==a?0:s*e/a);return{x:i+r,y:n+t}},Im={node:function(t,e){return t.intersect(e)},circle:function(t,e,r){return Om(t,e,e,r)},ellipse:Om,polygon:function(t,e,i){var r=t.x,n=t.y,a=[],s=Number.POSITIVE_INFINITY,o=Number.POSITIVE_INFINITY;"function"==typeof e.forEach?e.forEach(function(t){s=Math.min(s,t.x),o=Math.min(o,t.y)}):(s=Math.min(s,e.x),o=Math.min(o,e.y));for(var l=r-t.width/2-s,c=n-t.height/2-o,h=0;h<e.length;h++){var u=e[h],d=e[h<e.length-1?h+1:0],u=function(t,e,r,i){var n,a,s,o,l=e.y-t.y,c=t.x-e.x,h=e.x*t.y-t.x*e.y,u=l*r.x+c*r.y+h,d=l*i.x+c*i.y+h;if(!(0!=u&&0!=d&&0<u*d||(n=i.y-r.y,a=r.x-i.x,s=i.x*r.y-r.x*i.y,u=n*t.x+a*t.y+s,d=n*e.x+a*e.y+s,0!==u&&0!==d&&0<u*d)||0===(o=l*a-n*c)))return r=Math.abs(o/2),{x:(i=c*s-a*h)<0?(i-r)/o:(i+r)/o,y:(i=n*h-l*s)<0?(i-r)/o:(i+r)/o}}(t,i,{x:l+u.x,y:c+u.y},{x:l+d.x,y:c+d.y});u&&a.push(u)}return a.length?(1<a.length&&a.sort(function(t,e){var r=t.x-i.x,t=t.y-i.y,r=Math.sqrt(r*r+t*t),t=e.x-i.x,e=e.y-i.y,t=Math.sqrt(t*t+e*e);return r<t?-1:r===t?0:1}),a[0]):t},rect:Bm};function Fm(t,e,r,i){const n=[],a=t=>{n.push(t,0)},s=t=>{n.push(0,t)};(e.includes("t")?(S.debug("add top border"),a):s)(r),(e.includes("r")?(S.debug("add right border"),a):s)(i),(e.includes("b")?(S.debug("add bottom border"),a):s)(r),(e.includes("l")?(S.debug("add left border"),a):s)(i),t.attr("stroke-dasharray",n.join(" "))}const Rm=(t,e,r)=>{t=t.insert("g").attr("class","node default").attr("id",e.domId||e.id);let i=70,n=10;"LR"===r&&(i=10,n=70);r=t.append("rect").attr("x",-1*i/2).attr("y",-1*n/2).attr("width",i).attr("height",n).attr("class","fork-join");return _m(e,r),e.height=e.height+e.padding/2,e.width=e.width+e.padding/2,e.intersect=function(t){return Im.rect(e,t)},t},Pm={question:(t,e)=>{const{shapeSvg:r,bbox:i}=bm(t,e,void 0,!0),n=i.width+e.padding,a=i.height+e.padding,s=n+a,o=[{x:s/2,y:0},{x:s,y:-s/2},{x:s/2,y:-s},{x:0,y:-s/2}];S.info("Question main (Circle)");t=xm(r,s,s,o);return t.attr("style",e.style),_m(e,t),e.intersect=function(t){return S.warn("Intersect called"),Im.polygon(e,o,t)},r},rect:(t,e)=>{var{shapeSvg:t,bbox:r,halfPadding:i}=bm(t,e,"node "+e.classes,!0),n=(S.trace("Classes = ",e.classes),t.insert("rect",":first-child")),a=r.width+e.padding,s=r.height+e.padding;return n.attr("class","basic label-container").attr("style",e.style).attr("rx",e.rx).attr("ry",e.ry).attr("x",-r.width/2-i).attr("y",-r.height/2-i).attr("width",a).attr("height",s),e.props&&(r=new Set(Object.keys(e.props)),e.props.borders&&(Fm(n,e.props.borders,a,s),r.delete("borders")),r.forEach(t=>{S.warn("Unknown node property "+t)})),_m(e,n),e.intersect=function(t){return Im.rect(e,t)},t},labelRect:(t,e)=>{var r,t=bm(t,e,"label",!0)["shapeSvg"],i=(S.trace("Classes = ",e.classes),t.insert("rect",":first-child"));return i.attr("width",0).attr("height",0),t.attr("class","label edgeLabel"),e.props&&(r=new Set(Object.keys(e.props)),e.props.borders&&(Fm(i,e.props.borders,0,0),r.delete("borders")),r.forEach(t=>{S.warn("Unknown node property "+t)})),_m(e,i),e.intersect=function(t){return Im.rect(e,t)},t},rectWithTitle:(t,e)=>{let r;r=e.classes?"node "+e.classes:"node default";var t=t.insert("g").attr("class",r).attr("id",e.domId||e.id),i=t.insert("rect",":first-child"),n=t.insert("line"),a=t.insert("g").attr("class","label"),s=e.labelText.flat?e.labelText.flat():e.labelText;let o="";o="object"==typeof s?s[0]:s,S.info("Label text abc79",o,s,"object"==typeof s);var l=a.node().appendChild(mm(o,e.labelStyle,!0,!0));let c={width:0,height:0};Ko(J().flowchart.htmlLabels)&&(u=l.children[0],d=K(l),c=u.getBoundingClientRect(),d.attr("width",c.width),d.attr("height",c.height)),S.info("Text 2",s);var h,u=s.slice(1,s.length),d=l.getBBox(),s=a.node().appendChild(mm(u.join?u.join("<br/>"):u,e.labelStyle,!0,!0)),u=(Ko(J().flowchart.htmlLabels)&&(u=s.children[0],h=K(s),c=u.getBoundingClientRect(),h.attr("width",c.width),h.attr("height",c.height)),e.padding/2);return K(s).attr("transform","translate( "+(c.width>d.width?0:(d.width-c.width)/2)+", "+(d.height+u+5)+")"),K(l).attr("transform","translate( "+(c.width<d.width?0:-(d.width-c.width)/2)+", 0)"),c=a.node().getBBox(),a.attr("transform","translate("+-c.width/2+", "+(-c.height/2-u+3)+")"),i.attr("class","outer title-state").attr("x",-c.width/2-u).attr("y",-c.height/2-u).attr("width",c.width+e.padding).attr("height",c.height+e.padding),n.attr("class","divider").attr("x1",-c.width/2-u).attr("x2",c.width/2+u).attr("y1",-c.height/2-u+d.height+u).attr("y2",-c.height/2-u+d.height+u),_m(e,i),e.intersect=function(t){return Im.rect(e,t)},t},choice:(t,e)=>{var t=t.insert("g").attr("class","node default").attr("id",e.domId||e.id),r=[{x:0,y:14},{x:14,y:0},{x:0,y:-14},{x:-14,y:0}];return t.insert("polygon",":first-child").attr("points",r.map(function(t){return t.x+","+t.y}).join(" ")).attr("class","state-start").attr("r",7).attr("width",28).attr("height",28),e.width=28,e.height=28,e.intersect=function(t){return Im.circle(e,14,t)},t},circle:(t,e)=>{const{shapeSvg:r,bbox:i,halfPadding:n}=bm(t,e,void 0,!0),a=r.insert("circle",":first-child");return a.attr("style",e.style).attr("rx",e.rx).attr("ry",e.ry).attr("r",i.width/2+n).attr("width",i.width+e.padding).attr("height",i.height+e.padding),S.info("Circle main"),_m(e,a),e.intersect=function(t){return S.info("Circle intersect",e,i.width/2+n,t),Im.circle(e,i.width/2+n,t)},r},doublecircle:(t,e)=>{const{shapeSvg:r,bbox:i,halfPadding:n}=bm(t,e,void 0,!0),a=r.insert("g",":first-child"),s=a.insert("circle"),o=a.insert("circle");return s.attr("style",e.style).attr("rx",e.rx).attr("ry",e.ry).attr("r",i.width/2+n+5).attr("width",i.width+e.padding+10).attr("height",i.height+e.padding+10),o.attr("style",e.style).attr("rx",e.rx).attr("ry",e.ry).attr("r",i.width/2+n).attr("width",i.width+e.padding).attr("height",i.height+e.padding),S.info("DoubleCircle main"),_m(e,s),e.intersect=function(t){return S.info("DoubleCircle intersect",e,i.width/2+n+5,t),Im.circle(e,i.width/2+n+5,t)},r},stadium:(t,e)=>{var{shapeSvg:t,bbox:r}=bm(t,e,void 0,!0),i=r.height+e.padding,r=r.width+i/4+e.padding,r=t.insert("rect",":first-child").attr("style",e.style).attr("rx",i/2).attr("ry",i/2).attr("x",-r/2).attr("y",-i/2).attr("width",r).attr("height",i);return _m(e,r),e.intersect=function(t){return Im.rect(e,t)},t},hexagon:(t,e)=>{const{shapeSvg:r,bbox:i}=bm(t,e,void 0,!0),n=i.height+e.padding,a=n/4,s=i.width+2*a+e.padding,o=[{x:a,y:0},{x:s-a,y:0},{x:s,y:-n/2},{x:s-a,y:-n},{x:a,y:-n},{x:0,y:-n/2}],l=xm(r,s,n,o);return l.attr("style",e.style),_m(e,l),e.intersect=function(t){return Im.polygon(e,o,t)},r},rect_left_inv_arrow:(t,e)=>{const{shapeSvg:r,bbox:i}=bm(t,e,void 0,!0),n=i.width+e.padding,a=i.height+e.padding,s=[{x:-a/2,y:0},{x:n,y:0},{x:n,y:-a},{x:-a/2,y:-a},{x:0,y:-a/2}];return xm(r,n,a,s).attr("style",e.style),e.width=n+a,e.height=a,e.intersect=function(t){return Im.polygon(e,s,t)},r},lean_right:(t,e)=>{const{shapeSvg:r,bbox:i}=bm(t,e,void 0,!0),n=i.width+e.padding,a=i.height+e.padding,s=[{x:-2*a/6,y:0},{x:n-a/6,y:0},{x:n+2*a/6,y:-a},{x:a/6,y:-a}],o=xm(r,n,a,s);return o.attr("style",e.style),_m(e,o),e.intersect=function(t){return Im.polygon(e,s,t)},r},lean_left:(t,e)=>{const{shapeSvg:r,bbox:i}=bm(t,e,void 0,!0),n=i.width+e.padding,a=i.height+e.padding,s=[{x:2*a/6,y:0},{x:n+a/6,y:0},{x:n-2*a/6,y:-a},{x:-a/6,y:-a}],o=xm(r,n,a,s);return o.attr("style",e.style),_m(e,o),e.intersect=function(t){return Im.polygon(e,s,t)},r},trapezoid:(t,e)=>{const{shapeSvg:r,bbox:i}=bm(t,e,void 0,!0),n=i.width+e.padding,a=i.height+e.padding,s=[{x:-2*a/6,y:0},{x:n+2*a/6,y:0},{x:n-a/6,y:-a},{x:a/6,y:-a}],o=xm(r,n,a,s);return o.attr("style",e.style),_m(e,o),e.intersect=function(t){return Im.polygon(e,s,t)},r},inv_trapezoid:(t,e)=>{const{shapeSvg:r,bbox:i}=bm(t,e,void 0,!0),n=i.width+e.padding,a=i.height+e.padding,s=[{x:a/6,y:0},{x:n-a/6,y:0},{x:n+2*a/6,y:-a},{x:-2*a/6,y:-a}],o=xm(r,n,a,s);return o.attr("style",e.style),_m(e,o),e.intersect=function(t){return Im.polygon(e,s,t)},r},rect_right_inv_arrow:(t,e)=>{const{shapeSvg:r,bbox:i}=bm(t,e,void 0,!0),n=i.width+e.padding,a=i.height+e.padding,s=[{x:0,y:0},{x:n+a/2,y:0},{x:n,y:-a/2},{x:n+a/2,y:-a},{x:0,y:-a}],o=xm(r,n,a,s);return o.attr("style",e.style),_m(e,o),e.intersect=function(t){return Im.polygon(e,s,t)},r},cylinder:(t,n)=>{const{shapeSvg:e,bbox:r}=bm(t,n,void 0,!0),i=r.width+n.padding,a=i/2,s=a/(2.5+i/50),o=r.height+s+n.padding,l="M 0,"+s+" a "+a+","+s+" 0,0,0 "+i+" 0 a "+a+","+s+" 0,0,0 "+-i+" 0 l 0,"+o+" a "+a+","+s+" 0,0,0 "+i+" 0 l 0,"+-o,c=e.attr("label-offset-y",s).insert("path",":first-child").attr("style",n.style).attr("d",l).attr("transform","translate("+-i/2+","+-(o/2+s)+")");return _m(n,c),n.intersect=function(e){var r=Im.rect(n,e),i=r.x-n.x;if(0!=a&&(Math.abs(i)<n.width/2||Math.abs(i)==n.width/2&&Math.abs(r.y-n.y)>n.height/2-s)){let t=s*s*(1-i*i/(a*a));0!=t&&(t=Math.sqrt(t)),t=s-t,0<e.y-n.y&&(t=-t),r.y+=t}return r},e},start:(t,e)=>{var t=t.insert("g").attr("class","node default").attr("id",e.domId||e.id),r=t.insert("circle",":first-child");return r.attr("class","state-start").attr("r",7).attr("width",14).attr("height",14),_m(e,r),e.intersect=function(t){return Im.circle(e,7,t)},t},end:(t,e)=>{var t=t.insert("g").attr("class","node default").attr("id",e.domId||e.id),r=t.insert("circle",":first-child"),i=t.insert("circle",":first-child");return i.attr("class","state-start").attr("r",7).attr("width",14).attr("height",14),r.attr("class","state-end").attr("r",5).attr("width",10).attr("height",10),_m(e,i),e.intersect=function(t){return Im.circle(e,7,t)},t},note:(t,e)=>{var{shapeSvg:t,bbox:r,halfPadding:i}=bm(t,e,"node "+e.classes,!0),n=(S.info("Classes = ",e.classes),t.insert("rect",":first-child"));return n.attr("rx",e.rx).attr("ry",e.ry).attr("x",-r.width/2-i).attr("y",-r.height/2-i).attr("width",r.width+e.padding).attr("height",r.height+e.padding),_m(e,n),e.intersect=function(t){return Im.rect(e,t)},t},subroutine:(t,e)=>{const{shapeSvg:r,bbox:i}=bm(t,e,void 0,!0),n=i.width+e.padding,a=i.height+e.padding,s=[{x:0,y:0},{x:n,y:0},{x:n,y:-a},{x:0,y:-a},{x:0,y:0},{x:-8,y:0},{x:n+8,y:0},{x:n+8,y:-a},{x:-8,y:-a},{x:-8,y:0}],o=xm(r,n,a,s);return o.attr("style",e.style),_m(e,o),e.intersect=function(t){return Im.polygon(e,s,t)},r},fork:Rm,join:Rm,class_box:(t,a)=>{const e=a.padding/2;let r;r=a.classes?"node "+a.classes:"node default";var t=t.insert("g").attr("class",r).attr("id",a.domId||a.id),i=t.insert("rect",":first-child"),n=t.insert("line"),s=t.insert("line");let o=0,l=4;const c=t.insert("g").attr("class","label");let h=0;var u=a.classData.annotations&&a.classData.annotations[0],d=a.classData.annotations[0]?"«"+a.classData.annotations[0]+"»":"",d=c.node().appendChild(mm(d,a.labelStyle,!0,!0));let p=d.getBBox(),f=(Ko(J().flowchart.htmlLabels)&&(y=d.children[0],g=K(d),p=y.getBoundingClientRect(),g.attr("width",p.width),g.attr("height",p.height)),a.classData.annotations[0]&&(l+=p.height+4,o+=p.width),a.classData.id);void 0!==a.classData.type&&""!==a.classData.type&&(J().flowchart.htmlLabels?f+="&lt;"+a.classData.type+"&gt;":f+="<"+a.classData.type+">");var g,y=c.node().appendChild(mm(f,a.labelStyle,!0,!0));K(y).attr("class","classTitle");let m=y.getBBox();Ko(J().flowchart.htmlLabels)&&(g=y.children[0],x=K(y),m=g.getBoundingClientRect(),x.attr("width",m.width),x.attr("height",m.height)),l+=m.height+4,m.width>o&&(o=m.width);const b=[],_=(a.classData.members.forEach(t=>{t=lm(t);let e=t.displayText;J().flowchart.htmlLabels&&(e=e.replace(/</g,"&lt;").replace(/>/g,"&gt;"));var r,i,t=c.node().appendChild(mm(e,t.cssStyle||a.labelStyle,!0,!0));let n=t.getBBox();Ko(J().flowchart.htmlLabels)&&(r=t.children[0],i=K(t),n=r.getBoundingClientRect(),i.attr("width",n.width),i.attr("height",n.height)),n.width>o&&(o=n.width),l+=n.height+4,b.push(t)}),l+=8,[]);a.classData.methods.forEach(t=>{t=lm(t);let e=t.displayText;J().flowchart.htmlLabels&&(e=e.replace(/</g,"&lt;").replace(/>/g,"&gt;"));var r,i,t=c.node().appendChild(mm(e,t.cssStyle||a.labelStyle,!0,!0));let n=t.getBBox();Ko(J().flowchart.htmlLabels)&&(r=t.children[0],i=K(t),n=r.getBoundingClientRect(),i.attr("width",n.width),i.attr("height",n.height)),n.width>o&&(o=n.width),l+=n.height+4,_.push(t)}),l+=8,u&&(g=(o-p.width)/2,K(d).attr("transform","translate( "+(-1*o/2+g)+", "+-1*l/2+")"),h=p.height+4);var x=(o-m.width)/2;return K(y).attr("transform","translate( "+(-1*o/2+x)+", "+(-1*l/2+h)+")"),h+=m.height+4,n.attr("class","divider").attr("x1",-o/2-e).attr("x2",o/2+e).attr("y1",-l/2-e+8+h).attr("y2",-l/2-e+8+h),h+=8,b.forEach(t=>{K(t).attr("transform","translate( "+-o/2+", "+(-1*l/2+h+4)+")"),h+=m.height+4}),h+=8,s.attr("class","divider").attr("x1",-o/2-e).attr("x2",o/2+e).attr("y1",-l/2-e+8+h).attr("y2",-l/2-e+8+h),h+=8,_.forEach(t=>{K(t).attr("transform","translate( "+-o/2+", "+(-1*l/2+h)+")"),h+=m.height+4}),i.attr("class","outer title-state").attr("x",-o/2-e).attr("y",-l/2-e).attr("width",o+a.padding).attr("height",l+a.padding),_m(a,i),a.intersect=function(t){return Im.rect(a,t)},t}};let $m={};const Ym=()=>{$m={}},jm=t=>{var e=$m[t.id],r=(S.trace("Transforming node",t.diff,t,"translate("+(t.x-t.width/2-5)+", "+t.width/2+")"),t.diff||0);return t.clusterNode?e.attr("transform","translate("+(t.x+r-t.width/2)+", "+(t.y-t.height/2-8)+")"):e.attr("transform","translate("+t.x+", "+t.y+")"),r},zm={rect:(t,e)=>{S.trace("Creating subgraph rect for ",e.id,e);var t=t.insert("g").attr("class","cluster"+(e.class?" "+e.class:"")).attr("id",e.id),r=t.insert("rect",":first-child"),i=t.insert("g").attr("class","cluster-label"),n=i.node().appendChild(mm(e.labelText,e.labelStyle,void 0,!0));let a=n.getBBox();Ko(J().flowchart.htmlLabels)&&(s=n.children[0],n=K(n),a=s.getBoundingClientRect(),n.attr("width",a.width),n.attr("height",a.height));var s=0*e.padding,n=s/2,o=e.width<=a.width+s?a.width+s:e.width,n=(e.width<=a.width+s?e.diff=(a.width-e.width)/2-e.padding/2:e.diff=-e.padding/2,S.trace("Data ",e,JSON.stringify(e)),r.attr("style",e.style).attr("rx",e.rx).attr("ry",e.ry).attr("x",e.x-o/2).attr("y",e.y-e.height/2-n).attr("width",o).attr("height",e.height+s),i.attr("transform","translate("+(e.x-a.width/2)+", "+(e.y-e.height/2)+")"),r.node().getBBox());return e.width=n.width,e.height=n.height,e.intersect=function(t){return Bm(e,t)},t},roundedWithTitle:(t,e)=>{var t=t.insert("g").attr("class",e.classes).attr("id",e.id),r=t.insert("rect",":first-child"),i=t.insert("g").attr("class","cluster-label"),n=t.append("rect"),a=i.node().appendChild(mm(e.labelText,e.labelStyle,void 0,!0));let s=a.getBBox();Ko(J().flowchart.htmlLabels)&&(o=a.children[0],l=K(a),s=o.getBoundingClientRect(),l.attr("width",s.width),l.attr("height",s.height)),s=a.getBBox();var o=0*e.padding,l=o/2,a=e.width<=s.width+e.padding?s.width+e.padding:e.width,n=(e.width<=s.width+e.padding?e.diff=(s.width+0*e.padding-e.width)/2:e.diff=-e.padding/2,r.attr("class","outer").attr("x",e.x-a/2-l).attr("y",e.y-e.height/2-l).attr("width",a+o).attr("height",e.height+o),n.attr("class","inner").attr("x",e.x-a/2-l).attr("y",e.y-e.height/2-l+s.height-1).attr("width",a+o).attr("height",e.height+o-s.height-3),i.attr("transform","translate("+(e.x-s.width/2)+", "+(e.y-e.height/2-e.padding/3+(Ko(J().flowchart.htmlLabels)?5:3))+")"),r.node().getBBox());return e.height=n.height,e.intersect=function(t){return Bm(e,t)},t},noteGroup:(t,e)=>{var t=t.insert("g").attr("class","note-cluster").attr("id",e.id),r=t.insert("rect",":first-child"),i=0*e.padding,n=i/2,n=(r.attr("rx",e.rx).attr("ry",e.ry).attr("x",e.x-e.width/2-n).attr("y",e.y-e.height/2-n).attr("width",e.width+i).attr("height",e.height+i).attr("fill","none"),r.node().getBBox());return e.width=n.width,e.height=n.height,e.intersect=function(t){return Bm(e,t)},t},divider:(t,e)=>{var t=t.insert("g").attr("class",e.classes).attr("id",e.id),r=t.insert("rect",":first-child"),i=0*e.padding,n=i/2,n=(r.attr("class","divider").attr("x",e.x-e.width/2-n).attr("y",e.y-e.height/2).attr("width",e.width+i).attr("height",e.height+i),r.node().getBBox());return e.width=n.width,e.height=n.height,e.diff=-e.padding/2,e.intersect=function(t){return Bm(e,t)},t}};let Um={};const Wm=()=>{Um={}};let Hm={},qm={};const Vm=()=>{Hm={},qm={}};function Gm(t,e){J().flowchart.htmlLabels&&t&&(t.style.width=9*e.length+"px",t.style.height="12px")}const Xm=(t,s)=>{S.warn("abc88 cutPathAtIntersect",t,s);let o=[],l=t[0],c=!1;return t.forEach(t=>{if(S.info("abc88 checking point",t,s),r=t,i=(e=s).x,n=e.y,i=Math.abs(r.x-i),r=Math.abs(r.y-n),n=e.width/2,e=e.height/2,n<=i||e<=r||c)S.warn("abc88 outside",t,l),l=t,c||o.push(t);else{const a=((i,n,a)=>{S.warn(`intersection calc abc89:
  outsidePoint: ${JSON.stringify(n)}
  insidePoint : ${JSON.stringify(a)}
  node        : x:${i.x} y:${i.y} w:${i.width} h:`+i.height);var s=i.x,t=i.y,e=Math.abs(s-a.x),o=i.width/2;let l=a.x<n.x?o-e:o+e;var e=i.height/2,i=Math.abs(n.y-a.y),c=Math.abs(n.x-a.x);if(Math.abs(t-n.y)*o>Math.abs(s-n.x)*e)return t=a.y<n.y?n.y-e-t:t-e-n.y,l=c*t/i,e={x:a.x<n.x?a.x+l:a.x-c+l,y:a.y<n.y?a.y+i-t:a.y-i+t},0===l&&(e.x=n.x,e.y=n.y),0===c&&(e.x=n.x),0===i&&(e.y=n.y),S.warn(`abc89 topp/bott calc, Q ${i}, q ${t}, R ${c}, r `+l,e),e;{let t=i*(l=a.x<n.x?n.x-o-s:s-o-n.x)/c,e=a.x<n.x?a.x+c-l:a.x-c+l,r=a.y<n.y?a.y+t:a.y-t;return S.warn(`sides calc abc89, Q ${i}, q ${t}, R ${c}, r `+l,{_x:e,_y:r}),0===l&&(e=n.x,r=n.y),0===c&&(e=n.x),0===i&&(r=n.y),{x:e,y:r}}})(s,l,t);S.warn("abc88 inside",t,l,a),S.warn("abc88 intersection",a);let e=!1;o.forEach(t=>{e=e||t.x===a.x&&t.y===a.y}),o.some(t=>t.x===a.x&&t.y===a.y)?S.warn("abc88 no intersect",a,o):o.push(a),c=!0}var e,r,i,n}),S.warn("abc88 returning points",o),o},Zm=(t,l,o,r)=>{S.info("Graph in recursive render: XXX",fm(l),r);const s=l.graph().rankdir;S.trace("Dir in recursive render - dir:",s);var e,t=t.insert("g").attr("class","root");l.nodes()?S.info("Recursive render XXX",l.nodes()):S.info("No nodes found for",l),0<l.edges().length&&S.trace("Recursive edges",l.edge(l.edges()[0]));const n=t.insert("g").attr("class","clusters"),c=t.insert("g").attr("class","edgePaths"),h=t.insert("g").attr("class","edgeLabels"),u=t.insert("g").attr("class","nodes");l.nodes().forEach(function(t){var e,i=l.node(t);if(void 0!==r&&(e=JSON.parse(JSON.stringify(r.clusterData)),S.info("Setting data for cluster XXX (",t,") ",e,r),l.setNode(r.id,e),l.parent(t)||(S.trace("Setting parent",t,r.id),l.setParent(t,r.id,e))),S.info("(Insert) Node XXX"+t+": "+JSON.stringify(l.node(t))),i&&i.clusterNode)S.info("Cluster identified",t,i.width,l.node(t)),a=(e=Zm(u,i.graph,o,l.node(t))).elem,_m(i,a),i.diff=e.diff||0,S.info("Node bounds (abc123)",t,i,i.width,i.x,i.y),e=a,n=i,$m[n.id]=e,S.warn("Recursive render complete ",a,i);else if(0<l.children(t).length)S.info("Cluster - the non recursive path XXX",t,i.id,i,l),S.info(Am(i.id,l)),vm[i.id]={id:Am(i.id,l),node:i};else{S.info("Node - the non recursive path",t,i.id,i);{var n=u,a=l.node(t),i=s;let e,r;if(a.link){let t;"sandbox"===J().securityLevel?t="_top":a.linkTarget&&(t=a.linkTarget||"_blank"),e=n.insert("svg:a").attr("xlink:href",a.link).attr("target",t),r=Pm[a.shape](e,a,i)}else r=Pm[a.shape](n,a,i),e=r;a.tooltip&&r.attr("title",a.tooltip),a.class&&r.attr("class","node default "+a.class),$m[a.id]=e,a.haveCallback&&$m[a.id].attr("class",$m[a.id].attr("class")+" clickable")}}}),l.edges().forEach(function(r){var i=l.edge(r.v,r.w,r.name);S.info("Edge "+r.v+" -> "+r.w+": "+JSON.stringify(r)),S.info("Edge "+r.v+" -> "+r.w+": ",r," ",JSON.stringify(l.edge(r))),S.info("Fix",vm,"ids:",r.v,r.w,"Translateing: ",vm[r.v],vm[r.w]);{r=h;var n,a=mm(i.label,i.labelStyle),s=r.insert("g").attr("class","edgeLabel"),o=s.insert("g").attr("class","label");o.node().appendChild(a);let t=a.getBBox();Ko(J().flowchart.htmlLabels)&&(n=a.children[0],a=K(a),t=n.getBoundingClientRect(),a.attr("width",t.width),a.attr("height",t.height)),o.attr("transform","translate("+-t.width/2+", "+-t.height/2+")"),Hm[i.id]=s,i.width=t.width,i.height=t.height;let e;i.startLabelLeft&&(n=mm(i.startLabelLeft,i.labelStyle),o=(a=r.insert("g").attr("class","edgeTerminals")).insert("g").attr("class","inner"),e=o.node().appendChild(n),s=n.getBBox(),o.attr("transform","translate("+-s.width/2+", "+-s.height/2+")"),qm[i.id]||(qm[i.id]={}),qm[i.id].startLeft=a,Gm(e,i.startLabelLeft)),i.startLabelRight&&(n=mm(i.startLabelRight,i.labelStyle),s=(o=r.insert("g").attr("class","edgeTerminals")).insert("g").attr("class","inner"),e=o.node().appendChild(n),s.node().appendChild(n),a=n.getBBox(),s.attr("transform","translate("+-a.width/2+", "+-a.height/2+")"),qm[i.id]||(qm[i.id]={}),qm[i.id].startRight=o,Gm(e,i.startLabelRight)),i.endLabelLeft&&(n=mm(i.endLabelLeft,i.labelStyle),a=(s=r.insert("g").attr("class","edgeTerminals")).insert("g").attr("class","inner"),e=a.node().appendChild(n),o=n.getBBox(),a.attr("transform","translate("+-o.width/2+", "+-o.height/2+")"),s.node().appendChild(n),qm[i.id]||(qm[i.id]={}),qm[i.id].endLeft=s,Gm(e,i.endLabelLeft)),i.endLabelRight&&(a=mm(i.endLabelRight,i.labelStyle),n=(o=r.insert("g").attr("class","edgeTerminals")).insert("g").attr("class","inner"),e=n.node().appendChild(a),s=a.getBBox(),n.attr("transform","translate("+-s.width/2+", "+-s.height/2+")"),o.node().appendChild(a),qm[i.id]||(qm[i.id]={}),qm[i.id].endRight=o,Gm(e,i.endLabelRight))}}),l.edges().forEach(function(t){S.info("Edge "+t.v+" -> "+t.w+": "+JSON.stringify(t))}),S.info("#############################################"),S.info("###                Layout                 ###"),S.info("#############################################"),S.info(l),Iy(l),S.info("Graph after layout:",fm(l));let i=0;return e=l,Nm(e,e.children()).forEach(function(t){var e,r,i=l.node(t);S.info("Position "+t+": "+JSON.stringify(l.node(t))),S.info("Position "+t+": ("+i.x,","+i.y,") width: ",i.width," height: ",i.height),(!i||!i.clusterNode)&&0<l.children(t).length?(t=n,e=i,S.trace("Inserting cluster"),r=e.shape||"rect",Um[e.id]=zm[r](t,e),vm[i.id].node=i):jm(i)}),l.edges().forEach(function(r){var i=l.edge(r),r=(S.info("Edge "+r.v+" -> "+r.w+": "+JSON.stringify(i),i),function(t,e,r,i,n,a){let s=r.points,o=!1;var l=a.node(e.v),a=a.node(e.w),e=(S.info("abc88 InsertEdge: ",r),a.intersect&&l.intersect&&((s=s.slice(1,r.points.length-1)).unshift(l.intersect(s[0])),S.info("Last point",s[s.length-1],a,a.intersect(s[s.length-1])),s.push(a.intersect(s[s.length-1]))),r.toCluster&&(S.info("to cluster abc88",i[r.toCluster]),s=Xm(r.points,i[r.toCluster].node),o=!0),r.fromCluster&&(S.info("from cluster abc88",i[r.fromCluster]),s=Xm(s.reverse(),i[r.fromCluster].node).reverse(),o=!0),s.filter(t=>!Number.isNaN(t.y)));let c;c=("graph"===n||"flowchart"===n)&&r.curve||Bs;l=As().x(function(t){return t.x}).y(function(t){return t.y}).curve(c);let h;switch(r.thickness){case"normal":h="edge-thickness-normal";break;case"thick":h="edge-thickness-thick";break;default:h=""}switch(r.pattern){case"solid":h+=" edge-pattern-solid";break;case"dotted":h+=" edge-pattern-dotted";break;case"dashed":h+=" edge-pattern-dashed"}var u=t.append("path").attr("d",l(e)).attr("id",r.id).attr("class"," "+h+(r.classes?" "+r.classes:"")).attr("style",r.style);let d="";switch((J().flowchart.arrowMarkerAbsolute||J().state.arrowMarkerAbsolute)&&(d=(d=(d=window.location.protocol+"//"+window.location.host+window.location.pathname+window.location.search).replace(/\(/g,"\\(")).replace(/\)/g,"\\)")),S.info("arrowTypeStart",r.arrowTypeStart),S.info("arrowTypeEnd",r.arrowTypeEnd),r.arrowTypeStart){case"arrow_cross":u.attr("marker-start","url("+d+"#"+n+"-crossStart)");break;case"arrow_point":u.attr("marker-start","url("+d+"#"+n+"-pointStart)");break;case"arrow_barb":u.attr("marker-start","url("+d+"#"+n+"-barbStart)");break;case"arrow_circle":u.attr("marker-start","url("+d+"#"+n+"-circleStart)");break;case"aggregation":u.attr("marker-start","url("+d+"#"+n+"-aggregationStart)");break;case"extension":u.attr("marker-start","url("+d+"#"+n+"-extensionStart)");break;case"composition":u.attr("marker-start","url("+d+"#"+n+"-compositionStart)");break;case"dependency":u.attr("marker-start","url("+d+"#"+n+"-dependencyStart)");break;case"lollipop":u.attr("marker-start","url("+d+"#"+n+"-lollipopStart)")}switch(r.arrowTypeEnd){case"arrow_cross":u.attr("marker-end","url("+d+"#"+n+"-crossEnd)");break;case"arrow_point":u.attr("marker-end","url("+d+"#"+n+"-pointEnd)");break;case"arrow_barb":u.attr("marker-end","url("+d+"#"+n+"-barbEnd)");break;case"arrow_circle":u.attr("marker-end","url("+d+"#"+n+"-circleEnd)");break;case"aggregation":u.attr("marker-end","url("+d+"#"+n+"-aggregationEnd)");break;case"extension":u.attr("marker-end","url("+d+"#"+n+"-extensionEnd)");break;case"composition":u.attr("marker-end","url("+d+"#"+n+"-compositionEnd)");break;case"dependency":u.attr("marker-end","url("+d+"#"+n+"-dependencyEnd)");break;case"lollipop":u.attr("marker-end","url("+d+"#"+n+"-lollipopEnd)")}a={};return o&&(a.updatedPath=s),a.originalPath=r.points,a}(c,r,i,vm,o,l)),n=(S.info("Moving label abc78 ",i.id,i.label,Hm[i.id]),r.updatedPath||r.originalPath);if(i.label){var a=Hm[i.id];let t=i.x,e=i.y;n&&(s=t1.calcLabelPosition(n),S.info("Moving label "+i.label+" from (",t,",",e,") to (",s.x,",",s.y,") abc78"),r.updatedPath)&&(t=s.x,e=s.y),a.attr("transform","translate("+t+", "+e+")")}if(i.startLabelLeft){r=qm[i.id].startLeft;let t=i.x,e=i.y;n&&(s=t1.calcTerminalLabelPosition(i.arrowTypeStart?10:0,"start_left",n),t=s.x,e=s.y),r.attr("transform","translate("+t+", "+e+")")}if(i.startLabelRight){a=qm[i.id].startRight;let t=i.x,e=i.y;n&&(s=t1.calcTerminalLabelPosition(i.arrowTypeStart?10:0,"start_right",n),t=s.x,e=s.y),a.attr("transform","translate("+t+", "+e+")")}if(i.endLabelLeft){r=qm[i.id].endLeft;let t=i.x,e=i.y;n&&(s=t1.calcTerminalLabelPosition(i.arrowTypeEnd?10:0,"end_left",n),t=s.x,e=s.y),r.attr("transform","translate("+t+", "+e+")")}if(i.endLabelRight){var s,a=qm[i.id].endRight;let t=i.x,e=i.y;n&&(s=t1.calcTerminalLabelPosition(i.arrowTypeEnd?10:0,"end_right",n),t=s.x,e=s.y),a.attr("transform","translate("+t+", "+e+")")}}),l.nodes().forEach(function(t){var e=l.node(t);S.info(t,e.type,e.diff),"group"===e.type&&(i=e.diff)}),{elem:t,diff:i}},Qm=(t,e,r,i,n)=>{ym(t,r,i,n),Ym(),Vm(),Wm(),Tm(),S.warn("Graph at first:",fm(e)),Lm(e),S.warn("Graph after:",fm(e)),Zm(t,e,i)},Km=t=>tl.sanitizeText(t,J());let Jm={dividerMargin:10,padding:5,textHeight:10};function t3(t){let e;switch(t){case 0:e="aggregation";break;case 1:e="extension";break;case 2:e="composition";break;case 3:e="dependency";break;case 4:e="lollipop";break;default:e="none"}return e}const e3={setConf:function(e){Object.keys(e).forEach(function(t){Jm[t]=e[t]})},draw:function(t,e,r,i){S.info("Drawing class - ",e);var a,s,o,l,c,h,n,u=J().flowchart,d=J().securityLevel,p=(S.info("config:",u),u.nodeSpacing||50),f=u.rankSpacing||50,p=new jg({multigraph:!0,compound:!0}).setGraph({rankdir:i.db.getDirection(),nodesep:p,ranksep:f,marginx:8,marginy:8}).setDefaultEdgeLabel(function(){return{}}),f=i.db.getClasses(),g=i.db.getRelations(),y=i.db.getNotes();S.info(g),l=f,c=p,h=i,n=Object.keys(l),S.info("keys:",n),S.info(l),n.forEach(function(t){t=l[t];let e="";0<t.cssClasses.length&&(e=e+" "+t.cssClasses.join(" "));var r={labelStyle:""};let i=void 0!==t.text?t.text:t.id,n="";t.type,n="class_box",c.setNode(t.id,{labelStyle:r.labelStyle,shape:n,labelText:Km(i),classData:t,rx:0,ry:0,class:e,style:r.style,id:t.id,domId:t.domId,tooltip:h.db.getTooltip(t.id)||"",haveCallback:t.haveCallback,link:t.link,width:"group"===t.type?500:void 0,type:t.type,padding:J().flowchart.padding}),S.info("setNode",{labelStyle:r.labelStyle,shape:n,labelText:i,rx:0,ry:0,class:e,style:r.style,id:t.id,width:"group"===t.type?500:void 0,type:t.type,padding:J().flowchart.padding})});{var m=g,b=p;const w=J().flowchart;let a=0;m.forEach(function(t){a++;var e,r={classes:"relation"};r.pattern=1==t.relation.lineType?"dashed":"solid",r.id="id"+a,"arrow_open"===t.type?r.arrowhead="none":r.arrowhead="normal",S.info(r,t),r.startLabelRight="none"===t.relationTitle1?"":t.relationTitle1,r.endLabelLeft="none"===t.relationTitle2?"":t.relationTitle2,r.arrowTypeStart=t3(t.relation.type1),r.arrowTypeEnd=t3(t.relation.type2);let i="",n="";void 0!==t.style?(e=jh(t.style),i=e.style,n=e.labelStyle):i="fill:none",r.style=i,r.labelStyle=n,void 0!==t.interpolate?r.curve=$h(t.interpolate,Cs):void 0!==m.defaultInterpolate?r.curve=$h(m.defaultInterpolate,Cs):r.curve=$h(w.curve,Cs),t.text=t.title,void 0===t.text?void 0!==t.style&&(r.arrowheadStyle="fill: #333"):(r.arrowheadStyle="fill: #333",r.labelpos="c",J().flowchart.htmlLabels?(r.labelType="html",r.label='<span class="edgeLabel">'+t.text+"</span>"):(r.labelType="text",r.label=t.text.replace(tl.lineBreakRegex,`
`),void 0===t.style&&(r.style=r.style||"stroke: #333; stroke-width: 1.5px;fill:none"),r.labelStyle=r.labelStyle.replace("color:","fill:"))),b.setEdge(t.id1,t.id2,r,a)})}n=y,a=p,s=g.length+1,o=f,S.info(n),n.forEach(function(t,e){const r="",i="";var n=t.text;a.setNode(t.id,{labelStyle:r,shape:"note",labelText:Km(n),noteData:t,rx:0,ry:0,class:"",style:i,id:t.id,domId:t.id,tooltip:"",type:"note",padding:J().flowchart.padding}),S.info("setNode",{labelStyle:r,shape:"note",labelText:n,rx:0,ry:0,style:i,id:t.id,type:"note",padding:J().flowchart.padding}),t.class&&t.class in o&&((n={classes:"relation",pattern:"dotted"}).id="edgeNote"+(e=s+e),n.arrowhead="none",S.info(`Note edge: ${JSON.stringify(n)}, `+JSON.stringify(t)),n.startLabelRight="",n.endLabelLeft="",n.arrowTypeStart="none",n.arrowTypeEnd="none",n.style="fill:none",n.labelStyle="",n.curve=$h(Jm.curve,Cs),a.setEdge(t.id,t.class,n,e))});let _;"sandbox"===d&&(_=K("#i"+e));y=K("sandbox"===d?_.nodes()[0].contentDocument.body:"body"),g=y.select(`[id="${e}"]`),f=y.select("#"+e+" g");if(Qm(f,p,["aggregation","extension","composition","dependency","lollipop"],"classDiagram",e),t1.insertTitle(g,"classTitleText",u.titleTopMargin,i.db.getDiagramTitle()),J1(p,g,u.diagramPadding,u.useMaxWidth),!u.htmlLabels){var x="sandbox"===d?_.nodes()[0].contentDocument:document;for(const T of x.querySelectorAll('[id="'+e+'"] .edgeLabel .label')){var v=T.getBBox(),k=x.createElementNS("http://www.w3.org/2000/svg","rect");k.setAttribute("rx",0),k.setAttribute("ry",0),k.setAttribute("width",v.width),k.setAttribute("height",v.height),T.insertBefore(k,T.firstChild)}}}};M=[1,17],w6=[1,18],N=[1,19],O=[1,20],E=[1,21],A=[1,22],B=[1,25],Gb=[1,30],e_=[1,31],Xb=[1,32],i_=[1,33],b=[6,9,11,15,20,23,25,27,29,30,31,42,43,44,45,49],f6=[1,45],D=[30,31,46,47],Ib=[4,6,9,11,23,25,27,29,30,31,49],t_=[42,43,44,45],a=[22,37],x=[1,64],(w={trace:function(){},yy:{},symbols_:{error:2,start:3,ER_DIAGRAM:4,document:5,EOF:6,directive:7,line:8,SPACE:9,statement:10,NEWLINE:11,openDirective:12,typeDirective:13,closeDirective:14,":":15,argDirective:16,entityName:17,relSpec:18,role:19,BLOCK_START:20,attributes:21,BLOCK_STOP:22,title:23,title_value:24,acc_title:25,acc_title_value:26,acc_descr:27,acc_descr_value:28,acc_descr_multiline_value:29,ALPHANUM:30,ENTITY_NAME:31,attribute:32,attributeType:33,attributeName:34,attributeKeyType:35,attributeComment:36,ATTRIBUTE_WORD:37,ATTRIBUTE_KEY:38,COMMENT:39,cardinality:40,relType:41,ZERO_OR_ONE:42,ZERO_OR_MORE:43,ONE_OR_MORE:44,ONLY_ONE:45,NON_IDENTIFYING:46,IDENTIFYING:47,WORD:48,open_directive:49,type_directive:50,arg_directive:51,close_directive:52,$accept:0,$end:1},terminals_:{2:"error",4:"ER_DIAGRAM",6:"EOF",9:"SPACE",11:"NEWLINE",15:":",20:"BLOCK_START",22:"BLOCK_STOP",23:"title",24:"title_value",25:"acc_title",26:"acc_title_value",27:"acc_descr",28:"acc_descr_value",29:"acc_descr_multiline_value",30:"ALPHANUM",31:"ENTITY_NAME",37:"ATTRIBUTE_WORD",38:"ATTRIBUTE_KEY",39:"COMMENT",42:"ZERO_OR_ONE",43:"ZERO_OR_MORE",44:"ONE_OR_MORE",45:"ONLY_ONE",46:"NON_IDENTIFYING",47:"IDENTIFYING",48:"WORD",49:"open_directive",50:"type_directive",51:"arg_directive",52:"close_directive"},productions_:[0,[3,3],[3,2],[5,0],[5,2],[8,2],[8,1],[8,1],[8,1],[7,4],[7,6],[10,1],[10,5],[10,4],[10,3],[10,1],[10,2],[10,2],[10,2],[10,1],[17,1],[17,1],[21,1],[21,2],[32,2],[32,3],[32,3],[32,4],[33,1],[34,1],[35,1],[36,1],[18,3],[40,1],[40,1],[40,1],[40,1],[41,1],[41,1],[19,1],[19,1],[19,1],[12,1],[13,1],[16,1],[14,1]],performAction:function(t,e,r,i,n,a,s){var o=a.length-1;switch(n){case 1:break;case 3:this.$=[];break;case 4:a[o-1].push(a[o]),this.$=a[o-1];break;case 5:case 6:this.$=a[o];break;case 7:case 8:this.$=[];break;case 12:i.addEntity(a[o-4]),i.addEntity(a[o-2]),i.addRelationship(a[o-4],a[o],a[o-2],a[o-3]);break;case 13:i.addEntity(a[o-3]),i.addAttributes(a[o-3],a[o-1]);break;case 14:i.addEntity(a[o-2]);break;case 15:i.addEntity(a[o]);break;case 16:case 17:this.$=a[o].trim(),i.setAccTitle(this.$);break;case 18:case 19:this.$=a[o].trim(),i.setAccDescription(this.$);break;case 20:case 41:this.$=a[o];break;case 21:case 39:case 40:this.$=a[o].replace(/"/g,"");break;case 22:this.$=[a[o]];break;case 23:a[o].push(a[o-1]),this.$=a[o];break;case 24:this.$={attributeType:a[o-1],attributeName:a[o]};break;case 25:this.$={attributeType:a[o-2],attributeName:a[o-1],attributeKeyType:a[o]};break;case 26:this.$={attributeType:a[o-2],attributeName:a[o-1],attributeComment:a[o]};break;case 27:this.$={attributeType:a[o-3],attributeName:a[o-2],attributeKeyType:a[o-1],attributeComment:a[o]};break;case 28:case 29:case 30:this.$=a[o];break;case 31:this.$=a[o].replace(/"/g,"");break;case 32:this.$={cardA:a[o],relType:a[o-1],cardB:a[o-2]};break;case 33:this.$=i.Cardinality.ZERO_OR_ONE;break;case 34:this.$=i.Cardinality.ZERO_OR_MORE;break;case 35:this.$=i.Cardinality.ONE_OR_MORE;break;case 36:this.$=i.Cardinality.ONLY_ONE;break;case 37:this.$=i.Identification.NON_IDENTIFYING;break;case 38:this.$=i.Identification.IDENTIFYING;break;case 42:i.parseDirective("%%{","open_directive");break;case 43:i.parseDirective(a[o],"type_directive");break;case 44:a[o]=a[o].trim().replace(/'/g,'"'),i.parseDirective(a[o],"arg_directive");break;case 45:i.parseDirective("}%%","close_directive","er")}},table:[{3:1,4:w=[1,2],7:3,12:4,49:m=[1,5]},{1:[3]},r3(e=[6,9,11,23,25,27,29,30,31,49],[2,3],{5:6}),{3:7,4:w,7:3,12:4,49:m},{13:8,50:[1,9]},{50:[2,42]},{6:[1,10],7:15,8:11,9:[1,12],10:13,11:[1,14],12:4,17:16,23:M,25:w6,27:N,29:O,30:E,31:A,49:m},{1:[2,2]},{14:23,15:[1,24],52:B},r3([15,52],[2,43]),r3(e,[2,8],{1:[2,1]}),r3(e,[2,4]),{7:15,10:26,12:4,17:16,23:M,25:w6,27:N,29:O,30:E,31:A,49:m},r3(e,[2,6]),r3(e,[2,7]),r3(e,[2,11]),r3(e,[2,15],{18:27,40:29,20:[1,28],42:Gb,43:e_,44:Xb,45:i_}),{24:[1,34]},{26:[1,35]},{28:[1,36]},r3(e,[2,19]),r3(b,[2,20]),r3(b,[2,21]),{11:[1,37]},{16:38,51:[1,39]},{11:[2,45]},r3(e,[2,5]),{17:40,30:E,31:A},{21:41,22:[1,42],32:43,33:44,37:f6},{41:46,46:[1,47],47:[1,48]},r3(D,[2,33]),r3(D,[2,34]),r3(D,[2,35]),r3(D,[2,36]),r3(e,[2,16]),r3(e,[2,17]),r3(e,[2,18]),r3(Ib,[2,9]),{14:49,52:B},{52:[2,44]},{15:[1,50]},{22:[1,51]},r3(e,[2,14]),{21:52,22:[2,22],32:43,33:44,37:f6},{34:53,37:[1,54]},{37:[2,28]},{40:55,42:Gb,43:e_,44:Xb,45:i_},r3(t_,[2,37]),r3(t_,[2,38]),{11:[1,56]},{19:57,30:[1,60],31:[1,59],48:[1,58]},r3(e,[2,13]),{22:[2,23]},r3(a,[2,24],{35:61,36:62,38:[1,63],39:x}),r3([22,37,38,39],[2,29]),r3([30,31],[2,32]),r3(Ib,[2,10]),r3(e,[2,12]),r3(e,[2,39]),r3(e,[2,40]),r3(e,[2,41]),r3(a,[2,25],{36:65,39:x}),r3(a,[2,26]),r3([22,37,39],[2,30]),r3(a,[2,31]),r3(a,[2,27])],defaultActions:{5:[2,42],7:[2,2],25:[2,45],39:[2,44],45:[2,28],52:[2,23]},parseError:function(t,e){var r;if(!e.recoverable)throw(r=new Error(t)).hash=e,r;this.trace(t)},parse:function(t){var e,r=this,i=[0],n=[],a=[null],s=[],o=this.table,l="",c=0,h=0,u=1,d=s.slice.call(arguments,1),p=Object.create(this.lexer),f={yy:{}};for(e in this.yy)Object.prototype.hasOwnProperty.call(this.yy,e)&&(f.yy[e]=this.yy[e]);p.setInput(t,f.yy),f.yy.lexer=p,f.yy.parser=this,"u"<typeof p.yylloc&&(p.yylloc={});var g=p.yylloc,y=(s.push(g),p.options&&p.options.ranges);"function"==typeof f.yy.parseError?this.parseError=f.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;for(var m,b,_,x,v,k,w={};;){if(b=i[i.length-1],"u"<typeof(_=this.defaultActions[b]||((null===m||"u"<typeof m)&&(T=void 0,"number"!=typeof(T=n.pop()||p.lex()||u)&&(T instanceof Array&&(T=(n=T).pop()),T=r.symbols_[T]||T),m=T),o[b]&&o[b][m]))||!_.length||!_[0]){var T="",C=[];for(x in o[b])this.terminals_[x]&&2<x&&C.push("'"+this.terminals_[x]+"'");T=p.showPosition?"Parse error on line "+(c+1)+`:
`+p.showPosition()+`
Expecting `+C.join(", ")+", got '"+(this.terminals_[m]||m)+"'":"Parse error on line "+(c+1)+": Unexpected "+(m==u?"end of input":"'"+(this.terminals_[m]||m)+"'"),this.parseError(T,{text:p.match,token:this.terminals_[m]||m,line:p.yylineno,loc:g,expected:C})}if(_[0]instanceof Array&&1<_.length)throw new Error("Parse Error: multiple actions possible at state: "+b+", token: "+m);switch(_[0]){case 1:i.push(m),a.push(p.yytext),s.push(p.yylloc),i.push(_[1]),m=null,h=p.yyleng,l=p.yytext,c=p.yylineno,g=p.yylloc;break;case 2:if(v=this.productions_[_[1]][1],w.$=a[a.length-v],w._$={first_line:s[s.length-(v||1)].first_line,last_line:s[s.length-1].last_line,first_column:s[s.length-(v||1)].first_column,last_column:s[s.length-1].last_column},y&&(w._$.range=[s[s.length-(v||1)].range[0],s[s.length-1].range[1]]),typeof(k=this.performAction.apply(w,[l,h,c,f.yy,_[1],a,s].concat(d)))<"u")return k;v&&(i=i.slice(0,-1*v*2),a=a.slice(0,-1*v),s=s.slice(0,-1*v)),i.push(this.productions_[_[1]][0]),a.push(w.$),s.push(w._$),k=o[i[i.length-2]][i[i.length-1]],i.push(k);break;case 3:return!0}}return!0}}).lexer={EOF:1,parseError:function(t,e){if(!this.yy.parser)throw new Error(t);this.yy.parser.parseError(t,e)},setInput:function(t,e){return this.yy=e||this.yy||{},this._input=t,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var t=this._input[0];return this.yytext+=t,this.yyleng++,this.offset++,this.match+=t,this.matched+=t,t.match(/(?:\r\n?|\n).*/g)?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),t},unput:function(t){var e=t.length,r=t.split(/(?:\r\n?|\n)/g),t=(this._input=t+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-e),this.offset-=e,this.match.split(/(?:\r\n?|\n)/g)),i=(this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),r.length-1&&(this.yylineno-=r.length-1),this.yylloc.range);return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:r?(r.length===t.length?this.yylloc.first_column:0)+t[t.length-r.length].length-r[0].length:this.yylloc.first_column-e},this.options.ranges&&(this.yylloc.range=[i[0],i[0]+this.yyleng-e]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){return this.options.backtrack_lexer?(this._backtrack=!0,this):this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},less:function(t){this.unput(this.match.slice(t))},pastInput:function(){var t=this.matched.substr(0,this.matched.length-this.match.length);return(20<t.length?"...":"")+t.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var t=this.match;return t.length<20&&(t+=this._input.substr(0,20-t.length)),(t.substr(0,20)+(20<t.length?"...":"")).replace(/\n/g,"")},showPosition:function(){var t=this.pastInput(),e=new Array(t.length+1).join("-");return t+this.upcomingInput()+`
`+e+"^"},test_match:function(t,e){var r,i;if(this.options.backtrack_lexer&&(i={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges)&&(i.yylloc.range=this.yylloc.range.slice(0)),(r=t[0].match(/(?:\r\n?|\n).*/g))&&(this.yylineno+=r.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:r?r[r.length-1].length-r[r.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+t[0].length},this.yytext+=t[0],this.match+=t[0],this.matches=t,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(t[0].length),this.matched+=t[0],r=this.performAction.call(this,this.yy,this,e,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),r)return r;if(this._backtrack)for(var n in i)this[n]=i[n];return!1},next:function(){if(this.done)return this.EOF;var t,e,r,i;this._input||(this.done=!0),this._more||(this.yytext="",this.match="");for(var n=this._currentRules(),a=0;a<n.length;a++)if((r=this._input.match(this.rules[n[a]]))&&(!e||r[0].length>e[0].length)){if(e=r,i=a,this.options.backtrack_lexer){if(!1!==(t=this.test_match(r,n[a])))return t;if(this._backtrack){e=!1;continue}return!1}if(!this.options.flex)break}return e?!1!==(t=this.test_match(e,n[i]))&&t:""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){return this.next()||this.lex()},begin:function(t){this.conditionStack.push(t)},popState:function(){return 0<this.conditionStack.length-1?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return(this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]]:this.conditions.INITIAL).rules},topState:function(t){return 0<=(t=this.conditionStack.length-1-Math.abs(t||0))?this.conditionStack[t]:"INITIAL"},pushState:function(t){this.begin(t)},stateStackSize:function(){return this.conditionStack.length},options:{"case-insensitive":!0},performAction:function(t,e,r,i){switch(r){case 0:return this.begin("acc_title"),25;case 1:return this.popState(),"acc_title_value";case 2:return this.begin("acc_descr"),27;case 3:return this.popState(),"acc_descr_value";case 4:this.begin("acc_descr_multiline");break;case 5:this.popState();break;case 6:return"acc_descr_multiline_value";case 7:return this.begin("open_directive"),49;case 8:return this.begin("type_directive"),50;case 9:return this.popState(),this.begin("arg_directive"),15;case 10:return this.popState(),this.popState(),52;case 11:return 51;case 12:case 13:break;case 14:return 11;case 15:break;case 16:return 9;case 17:return 31;case 18:return 48;case 19:return 4;case 20:return this.begin("block"),20;case 21:break;case 22:return 38;case 23:case 24:return 37;case 25:return 39;case 26:break;case 27:return this.popState(),22;case 28:return e.yytext[0];case 29:return 42;case 30:case 31:case 32:return 44;case 33:case 34:return 42;case 35:case 36:case 37:case 38:case 39:return 43;case 40:return 44;case 41:return 43;case 42:return 44;case 43:case 44:case 45:case 46:return 45;case 47:return 42;case 48:return 43;case 49:return 44;case 50:return 46;case 51:case 52:return 47;case 53:case 54:case 55:return 46;case 56:return 30;case 57:return e.yytext[0];case 58:return 6}},rules:[/^(?:accTitle\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*\{\s*)/i,/^(?:[\}])/i,/^(?:[^\}]*)/i,/^(?:%%\{)/i,/^(?:((?:(?!\}%%)[^:.])*))/i,/^(?::)/i,/^(?:\}%%)/i,/^(?:((?:(?!\}%%).|\n)*))/i,/^(?:%(?!\{)[^\n]*)/i,/^(?:[^\}]%%[^\n]*)/i,/^(?:[\n]+)/i,/^(?:\s+)/i,/^(?:[\s]+)/i,/^(?:"[^"%\r\n\v\b\\]+")/i,/^(?:"[^"]*")/i,/^(?:erDiagram\b)/i,/^(?:\{)/i,/^(?:\s+)/i,/^(?:\b((?:PK)|(?:FK))\b)/i,/^(?:(.*?)[~](.*?)*[~])/i,/^(?:[A-Za-z][A-Za-z0-9\-_\[\]]*)/i,/^(?:"[^"]*")/i,/^(?:[\n]+)/i,/^(?:\})/i,/^(?:.)/i,/^(?:one or zero\b)/i,/^(?:one or more\b)/i,/^(?:one or many\b)/i,/^(?:1\+)/i,/^(?:\|o\b)/i,/^(?:zero or one\b)/i,/^(?:zero or more\b)/i,/^(?:zero or many\b)/i,/^(?:0\+)/i,/^(?:\}o\b)/i,/^(?:many\(0\))/i,/^(?:many\(1\))/i,/^(?:many\b)/i,/^(?:\}\|)/i,/^(?:one\b)/i,/^(?:only one\b)/i,/^(?:1\b)/i,/^(?:\|\|)/i,/^(?:o\|)/i,/^(?:o\{)/i,/^(?:\|\{)/i,/^(?:\.\.)/i,/^(?:--)/i,/^(?:to\b)/i,/^(?:optionally to\b)/i,/^(?:\.-)/i,/^(?:-\.)/i,/^(?:[A-Za-z][A-Za-z0-9\-_]*)/i,/^(?:.)/i,/^(?:$)/i],conditions:{acc_descr_multiline:{rules:[5,6],inclusive:!1},acc_descr:{rules:[3],inclusive:!1},acc_title:{rules:[1],inclusive:!1},open_directive:{rules:[8],inclusive:!1},type_directive:{rules:[9,10],inclusive:!1},arg_directive:{rules:[10,11],inclusive:!1},block:{rules:[21,22,23,24,25,26,27,28],inclusive:!1},INITIAL:{rules:[0,2,4,7,12,13,14,15,16,17,18,19,20,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58],inclusive:!0}}};T=new((i3.prototype=w).Parser=i3);function r3(t,e,r,i){for(r=r||{},i=t.length;i--;r[t[i]]=e);return r}function i3(){this.yy={}}const n3=T.parser=T,a3=t=>null!==t.match(/^\s*erDiagram/);let s3={},o3=[];function l3(t){return void 0===s3[t]&&(s3[t]={attributes:[]},S.info("Added new entity :",t)),s3[t]}const c3={Cardinality:{ZERO_OR_ONE:"ZERO_OR_ONE",ZERO_OR_MORE:"ZERO_OR_MORE",ONE_OR_MORE:"ONE_OR_MORE",ONLY_ONE:"ONLY_ONE"},Identification:{NON_IDENTIFYING:"NON_IDENTIFYING",IDENTIFYING:"IDENTIFYING"},parseDirective:function(t,e,r){Jv.parseDirective(this,t,e,r)},getConfig:()=>J().er,addEntity:l3,addAttributes:function(t,e){let r=l3(t),i;for(i=e.length-1;0<=i;i--)r.attributes.push(e[i]),S.debug("Added attribute ",e[i].attributeName)},getEntities:()=>s3,addRelationship:function(t,e,r,i){t={entityA:t,roleA:e,entityB:r,relSpec:i};o3.push(t),S.debug("Added new relationship :",t)},getRelationships:()=>o3,clear:function(){s3={},o3=[],Bu()},setAccTitle:Iu,getAccTitle:Fu,setAccDescription:Ru,getAccDescription:Pu,setDiagramTitle:$u,getDiagramTitle:Yu},h3={ONLY_ONE_START:"ONLY_ONE_START",ONLY_ONE_END:"ONLY_ONE_END",ZERO_OR_ONE_START:"ZERO_OR_ONE_START",ZERO_OR_ONE_END:"ZERO_OR_ONE_END",ONE_OR_MORE_START:"ONE_OR_MORE_START",ONE_OR_MORE_END:"ONE_OR_MORE_END",ZERO_OR_MORE_START:"ZERO_OR_MORE_START",ZERO_OR_MORE_END:"ZERO_OR_MORE_END"},u3={ERMarkers:h3,insertMarkers:function(t,e){let r;t.append("defs").append("marker").attr("id",h3.ONLY_ONE_START).attr("refX",0).attr("refY",9).attr("markerWidth",18).attr("markerHeight",18).attr("orient","auto").append("path").attr("stroke",e.stroke).attr("fill","none").attr("d","M9,0 L9,18 M15,0 L15,18"),t.append("defs").append("marker").attr("id",h3.ONLY_ONE_END).attr("refX",18).attr("refY",9).attr("markerWidth",18).attr("markerHeight",18).attr("orient","auto").append("path").attr("stroke",e.stroke).attr("fill","none").attr("d","M3,0 L3,18 M9,0 L9,18"),(r=t.append("defs").append("marker").attr("id",h3.ZERO_OR_ONE_START).attr("refX",0).attr("refY",9).attr("markerWidth",30).attr("markerHeight",18).attr("orient","auto")).append("circle").attr("stroke",e.stroke).attr("fill","white").attr("cx",21).attr("cy",9).attr("r",6),r.append("path").attr("stroke",e.stroke).attr("fill","none").attr("d","M9,0 L9,18"),(r=t.append("defs").append("marker").attr("id",h3.ZERO_OR_ONE_END).attr("refX",30).attr("refY",9).attr("markerWidth",30).attr("markerHeight",18).attr("orient","auto")).append("circle").attr("stroke",e.stroke).attr("fill","white").attr("cx",9).attr("cy",9).attr("r",6),r.append("path").attr("stroke",e.stroke).attr("fill","none").attr("d","M21,0 L21,18"),t.append("defs").append("marker").attr("id",h3.ONE_OR_MORE_START).attr("refX",18).attr("refY",18).attr("markerWidth",45).attr("markerHeight",36).attr("orient","auto").append("path").attr("stroke",e.stroke).attr("fill","none").attr("d","M0,18 Q 18,0 36,18 Q 18,36 0,18 M42,9 L42,27"),t.append("defs").append("marker").attr("id",h3.ONE_OR_MORE_END).attr("refX",27).attr("refY",18).attr("markerWidth",45).attr("markerHeight",36).attr("orient","auto").append("path").attr("stroke",e.stroke).attr("fill","none").attr("d","M3,9 L3,27 M9,18 Q27,0 45,18 Q27,36 9,18"),(r=t.append("defs").append("marker").attr("id",h3.ZERO_OR_MORE_START).attr("refX",18).attr("refY",18).attr("markerWidth",57).attr("markerHeight",36).attr("orient","auto")).append("circle").attr("stroke",e.stroke).attr("fill","white").attr("cx",48).attr("cy",18).attr("r",6),r.append("path").attr("stroke",e.stroke).attr("fill","none").attr("d","M0,18 Q18,0 36,18 Q18,36 0,18"),(r=t.append("defs").append("marker").attr("id",h3.ZERO_OR_MORE_END).attr("refX",39).attr("refY",18).attr("markerWidth",57).attr("markerHeight",36).attr("orient","auto")).append("circle").attr("stroke",e.stroke).attr("fill","white").attr("cx",9).attr("cy",18).attr("r",6),r.append("path").attr("stroke",e.stroke).attr("fill","none").attr("d","M21,18 Q39,0 57,18 Q39,36 21,18")}};let d3;const p3=new Uint8Array(16);function f3(){if(d3||(d3=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)))return d3(p3);throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported")}const g3=[];for(let t=0;t<256;++t)g3.push((t+256).toString(16).slice(1));const y3={randomUUID:typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};function m3(t,e,r){if(y3.randomUUID&&!e&&!t)return y3.randomUUID();var i,n=(t=t||{}).random||(t.rng||f3)();if(n[6]=15&n[6]|64,n[8]=63&n[8]|128,e){r=r||0;for(let t=0;t<16;++t)e[r+t]=n[t];return e}return t=n,i=0,(g3[t[i+0]]+g3[t[i+1]]+g3[t[i+2]]+g3[t[i+3]]+"-"+g3[t[i+4]]+g3[t[i+5]]+"-"+g3[t[i+6]]+g3[t[i+7]]+"-"+g3[t[i+8]]+g3[t[i+9]]+"-"+g3[t[i+10]]+g3[t[i+11]]+g3[t[i+12]]+g3[t[i+13]]+g3[t[i+14]]+g3[t[i+15]]).toLowerCase()}const b3=/[^\dA-Za-z](\W)*/g;let _3={},x3=new Map;function v3(a,s,o){var t=Object.keys(s);let l;return t.forEach(function(t){var e=function(t="",e){t=t.replace(b3,"");return""+C3(e)+C3(t)+m3()}(t,"entity"),r=(x3.set(t,e),a.append("g").attr("id",e)),i=(l=void 0===l?e:l,"text-"+e),n=r.append("text").classed("er entityLabel",!0).attr("id",i).attr("x",0).attr("y",0).style("dominant-baseline","middle").style("text-anchor","middle").style("font-family",J().fontFamily).style("font-size",_3.fontSize+"px").text(t),{width:n,height:t}=k3(r,n,s[t].attributes),r=r.insert("rect","#"+i).classed("er entityBox",!0).attr("x",0).attr("y",0).attr("width",n).attr("height",t).node().getBBox();o.setNode(e,{width:r.width,height:r.height,shape:"rect",id:e})}),l}const k3=(s,o,t)=>{const l=_3.entityPadding/3,c=_3.entityPadding/3,h=.85*_3.fontSize,e=o.node().getBBox(),u=[];let d=!1,p=!1,f=0,g=0,y=0,m=0,b=e.height+2*l,_=1,r=(t.forEach(t=>{void 0!==t.attributeKeyType&&(d=!0),void 0!==t.attributeComment&&(p=!0)}),t.forEach(t=>{var e=o.node().id+"-attr-"+_;let r=0;var i=Jo(t.attributeType),i=s.append("text").classed("er entityLabel",!0).attr("id",e+"-type").attr("x",0).attr("y",0).style("dominant-baseline","middle").style("text-anchor","left").style("font-family",J().fontFamily).style("font-size",h+"px").text(i),n=s.append("text").classed("er entityLabel",!0).attr("id",e+"-name").attr("x",0).attr("y",0).style("dominant-baseline","middle").style("text-anchor","left").style("font-family",J().fontFamily).style("font-size",h+"px").text(t.attributeName),a={},i=(a.tn=i,a.nn=n,i.node().getBBox()),n=n.node().getBBox();f=Math.max(f,i.width),g=Math.max(g,n.width),r=Math.max(i.height,n.height),d&&(i=s.append("text").classed("er entityLabel",!0).attr("id",e+"-key").attr("x",0).attr("y",0).style("dominant-baseline","middle").style("text-anchor","left").style("font-family",J().fontFamily).style("font-size",h+"px").text(t.attributeKeyType||""),n=(a.kn=i).node().getBBox(),y=Math.max(y,n.width),r=Math.max(r,n.height)),p&&(i=s.append("text").classed("er entityLabel",!0).attr("id",e+"-comment").attr("x",0).attr("y",0).style("dominant-baseline","middle").style("text-anchor","left").style("font-family",J().fontFamily).style("font-size",h+"px").text(t.attributeComment||""),n=(a.cn=i).node().getBBox(),m=Math.max(m,n.width),r=Math.max(r,n.height)),a.height=r,u.push(a),b+=r+2*l,_+=1}),4);d&&(r+=2),p&&(r+=2);var i=f+g+y+m,x={width:Math.max(_3.minEntityWidth,Math.max(e.width+2*_3.entityPadding,i+c*r)),height:0<t.length?b:Math.max(_3.minEntityHeight,e.height+2*_3.entityPadding)};if(0<t.length){const v=Math.max(0,(x.width-i-c*r)/(r/2));o.attr("transform","translate("+x.width/2+","+(l+e.height/2)+")");let n=e.height+2*l,a="attributeBoxOdd";u.forEach(t=>{var e=n+l+t.height/2,r=(t.tn.attr("transform","translate("+c+","+e+")"),s.insert("rect","#"+t.tn.node().id).classed("er "+a,!0).attr("x",0).attr("y",n).attr("width",f+2*c+v).attr("height",t.height+2*l)),r=parseFloat(r.attr("x"))+parseFloat(r.attr("width")),r=(t.nn.attr("transform","translate("+(r+c)+","+e+")"),s.insert("rect","#"+t.nn.node().id).classed("er "+a,!0).attr("x",r).attr("y",n).attr("width",g+2*c+v).attr("height",t.height+2*l));let i=parseFloat(r.attr("x"))+parseFloat(r.attr("width"));d&&(t.kn.attr("transform","translate("+(i+c)+","+e+")"),r=s.insert("rect","#"+t.kn.node().id).classed("er "+a,!0).attr("x",i).attr("y",n).attr("width",y+2*c+v).attr("height",t.height+2*l),i=parseFloat(r.attr("x"))+parseFloat(r.attr("width"))),p&&(t.cn.attr("transform","translate("+(i+c)+","+e+")"),s.insert("rect","#"+t.cn.node().id).classed("er "+a,"true").attr("x",i).attr("y",n).attr("width",m+2*c+v).attr("height",t.height+2*l)),n+=t.height+2*l,a="attributeBoxOdd"===a?"attributeBoxEven":"attributeBoxOdd"})}else x.height=Math.max(_3.minEntityHeight,b),o.attr("transform","translate("+x.width/2+","+x.height/2+")");return x},w3=function(t){return(t.entityA+t.roleA+t.entityB).replace(/\s/g,"")};let T3=0;function C3(t=""){return 0<t.length?t+"-":""}const E3={setConf:function(t){for(const e of Object.keys(t))_3[e]=t[e]},draw:function(t,e,r,l){_3=J().er,S.info("Drawing ER diagram");var i,n,a,s=J().securityLevel;let o;"sandbox"===s&&(o=K("#i"+e));const c=K("sandbox"===s?o.nodes()[0].contentDocument.body:"body").select(`[id='${e}']`);u3.insertMarkers(c,_3);let h;h=new jg({multigraph:!0,directed:!0,compound:!1}).setGraph({rankdir:_3.layoutDirection,marginx:20,marginy:20,nodesep:100,edgesep:100,ranksep:100}).setDefaultEdgeLabel(function(){return{}});const u=v3(c,l.db.getEntities(),h),d=(s=l.db.getRelationships(),i=h,s.forEach(function(t){i.setEdge(x3.get(t.entityA),x3.get(t.entityB),{relationship:t},w3(t))}),s);Iy(h),n=c,(a=h).nodes().forEach(function(t){void 0!==t&&void 0!==a.node(t)&&n.select("#"+t).attr("transform","translate("+(a.node(t).x-a.node(t).width/2)+","+(a.node(t).y-a.node(t).height/2)+" )")}),d.forEach(function(e){{var r=c,i=h,n=u,a=l,i=(T3++,i.edge(x3.get(e.entityA),x3.get(e.entityB),w3(e))),s=As().x(function(t){return t.x}).y(function(t){return t.y}).curve(Bs),o=r.insert("path","#"+n).classed("er relationshipLine",!0).attr("d",s(i.points)).style("stroke",_3.stroke).style("fill","none");e.relSpec.relType===a.db.Identification.NON_IDENTIFYING&&o.attr("stroke-dasharray","8,8");let t="";switch(_3.arrowMarkerAbsolute&&(t=(t=(t=window.location.protocol+"//"+window.location.host+window.location.pathname+window.location.search).replace(/\(/g,"\\(")).replace(/\)/g,"\\)")),e.relSpec.cardA){case a.db.Cardinality.ZERO_OR_ONE:o.attr("marker-end","url("+t+"#"+u3.ERMarkers.ZERO_OR_ONE_END+")");break;case a.db.Cardinality.ZERO_OR_MORE:o.attr("marker-end","url("+t+"#"+u3.ERMarkers.ZERO_OR_MORE_END+")");break;case a.db.Cardinality.ONE_OR_MORE:o.attr("marker-end","url("+t+"#"+u3.ERMarkers.ONE_OR_MORE_END+")");break;case a.db.Cardinality.ONLY_ONE:o.attr("marker-end","url("+t+"#"+u3.ERMarkers.ONLY_ONE_END+")")}switch(e.relSpec.cardB){case a.db.Cardinality.ZERO_OR_ONE:o.attr("marker-start","url("+t+"#"+u3.ERMarkers.ZERO_OR_ONE_START+")");break;case a.db.Cardinality.ZERO_OR_MORE:o.attr("marker-start","url("+t+"#"+u3.ERMarkers.ZERO_OR_MORE_START+")");break;case a.db.Cardinality.ONE_OR_MORE:o.attr("marker-start","url("+t+"#"+u3.ERMarkers.ONE_OR_MORE_START+")");break;case a.db.Cardinality.ONLY_ONE:o.attr("marker-start","url("+t+"#"+u3.ERMarkers.ONLY_ONE_START+")")}n=o.node().getTotalLength(),s=o.node().getPointAtLength(.5*n),i="rel"+T3,a=r.append("text").classed("er relationshipLabel",!0).attr("id",i).attr("x",s.x).attr("y",s.y).style("text-anchor","middle").style("dominant-baseline","middle").style("font-family",J().fontFamily).style("font-size",_3.fontSize+"px").text(e.roleA).node().getBBox(),r.insert("rect","#"+i).classed("er relationshipLabelBox",!0).attr("x",s.x-a.width/2).attr("y",s.y-a.height/2).attr("width",a.width).attr("height",a.height)}});var e=_3.diagramPadding,s=(t1.insertTitle(c,"entityTitleText",_3.titleTopMargin,l.db.getDiagramTitle()),c.node().getBBox()),p=s.width+2*e,f=s.height+2*e;K1(c,f,p,_3.useMaxWidth),c.attr("viewBox",`${s.x-e} ${s.y-e} ${p} `+f)}};eb=[1,20],rb=[1,21],Su=[1,22],ib=[1,23],fe=[1,30],nb=[1,32],ab=[1,33],sb=[1,34],ob=[1,62],lb=[1,48],Sn=[1,52],cb=[1,36],ic=[1,37],En=[1,38],hb=[1,39],ub=[1,40],db=[1,56],y=[1,63],p6=[1,51],od=[1,53],Md=[1,55],i2=[1,59],E2=[1,60],M2=[1,41],L2=[1,42],N2=[1,43],F2=[1,44],t=[1,61],d=[1,50],_=[1,54],p=[1,57],gp=[1,58],wp=[1,49],kp=[1,66],Tp=[1,71],Fp=[1,20,21,22,23,38,42,44,46,48,52,66,67,86,87,88,89,90,91,95,105,106,109,111,112,118,119,120,121,122,123,124,125,126,127],Rp=[1,75],qd=[1,74],Xp=[1,76],ef=[20,21,23,81,82],C=[1,99],u=[1,104],o=[1,107],r=[1,108],_f=[1,101],L=[1,106],M=[1,109],w6=[1,102],N=[1,114],O=[1,113],m=[1,103],b=[1,105],E=[1,110],A=[1,111],D=[1,112],B=[1,115],f6=[20,21,22,23,81,82],Gb=[20,21,22,23,53,81,82],e_=[20,21,22,23,40,52,53,55,57,59,61,63,65,66,67,69,71,73,74,76,81,82,91,95,105,106,109,111,112,122,123,124,125,126,127],Xb=[20,21,23],i_=[20,21,23,52,66,67,81,82,91,95,105,106,109,111,112,122,123,124,125,126,127],t_=[1,12,20,21,22,23,24,38,42,44,46,48,52,66,67,86,87,88,89,90,91,95,105,106,109,111,112,118,119,120,121,122,123,124,125,126,127],Ib=[52,66,67,91,95,105,106,109,111,112,122,123,124,125,126,127],e=[1,149],x=[1,157],a=[1,158],w=[1,159],T=[1,160],x6=[1,144],v6=[1,145],X4=[1,141],k6=[1,152],T6=[1,153],C6=[1,154],_6=[1,155],U5=[1,156],u6=[1,161],d6=[1,162],Ux=[1,147],Wx=[1,150],Hx=[1,146],tb=[1,143],m6=[20,21,22,23,38,42,44,46,48,52,66,67,86,87,88,89,90,91,95,105,106,109,111,112,118,119,120,121,122,123,124,125,126,127],Bb=[1,165],Ob=[20,21,22,23,26,52,66,67,91,105,106,109,111,112,122,123,124,125,126,127],Fb=[20,21,22,23,24,26,38,40,41,42,52,56,58,60,62,64,66,67,68,70,72,73,75,77,81,82,86,87,88,89,90,91,92,95,105,106,109,111,112,113,114,122,123,124,125,126,127],n_=[12,21,22,24],g6=[22,106],Rb=[1,250],Pb=[1,245],$b=[1,246],Yb=[1,254],jb=[1,251],zb=[1,248],Ub=[1,247],Wb=[1,249],Hb=[1,252],qb=[1,253],Vb=[1,255],Zb=[1,273],b6=[20,21,23,106],y6=[20,21,22,23,66,67,86,102,105,106,109,110,111,112,113],(Qb={trace:function(){},yy:{},symbols_:{error:2,start:3,mermaidDoc:4,directive:5,openDirective:6,typeDirective:7,closeDirective:8,separator:9,":":10,argDirective:11,open_directive:12,type_directive:13,arg_directive:14,close_directive:15,graphConfig:16,document:17,line:18,statement:19,SEMI:20,NEWLINE:21,SPACE:22,EOF:23,GRAPH:24,NODIR:25,DIR:26,FirstStmtSeperator:27,ending:28,endToken:29,spaceList:30,spaceListNewline:31,verticeStatement:32,styleStatement:33,linkStyleStatement:34,classDefStatement:35,classStatement:36,clickStatement:37,subgraph:38,text:39,SQS:40,SQE:41,end:42,direction:43,acc_title:44,acc_title_value:45,acc_descr:46,acc_descr_value:47,acc_descr_multiline_value:48,link:49,node:50,vertex:51,AMP:52,STYLE_SEPARATOR:53,idString:54,DOUBLECIRCLESTART:55,DOUBLECIRCLEEND:56,PS:57,PE:58,"(-":59,"-)":60,STADIUMSTART:61,STADIUMEND:62,SUBROUTINESTART:63,SUBROUTINEEND:64,VERTEX_WITH_PROPS_START:65,ALPHA:66,COLON:67,PIPE:68,CYLINDERSTART:69,CYLINDEREND:70,DIAMOND_START:71,DIAMOND_STOP:72,TAGEND:73,TRAPSTART:74,TRAPEND:75,INVTRAPSTART:76,INVTRAPEND:77,linkStatement:78,arrowText:79,TESTSTR:80,START_LINK:81,LINK:82,textToken:83,STR:84,keywords:85,STYLE:86,LINKSTYLE:87,CLASSDEF:88,CLASS:89,CLICK:90,DOWN:91,UP:92,textNoTags:93,textNoTagsToken:94,DEFAULT:95,stylesOpt:96,alphaNum:97,CALLBACKNAME:98,CALLBACKARGS:99,HREF:100,LINK_TARGET:101,HEX:102,numList:103,INTERPOLATE:104,NUM:105,COMMA:106,style:107,styleComponent:108,MINUS:109,UNIT:110,BRKT:111,DOT:112,PCT:113,TAGSTART:114,alphaNumToken:115,idStringToken:116,alphaNumStatement:117,direction_tb:118,direction_bt:119,direction_rl:120,direction_lr:121,PUNCTUATION:122,UNICODE_TEXT:123,PLUS:124,EQUALS:125,MULT:126,UNDERSCORE:127,graphCodeTokens:128,ARROW_CROSS:129,ARROW_POINT:130,ARROW_CIRCLE:131,ARROW_OPEN:132,QUOTE:133,$accept:0,$end:1},terminals_:{2:"error",10:":",12:"open_directive",13:"type_directive",14:"arg_directive",15:"close_directive",20:"SEMI",21:"NEWLINE",22:"SPACE",23:"EOF",24:"GRAPH",25:"NODIR",26:"DIR",38:"subgraph",40:"SQS",41:"SQE",42:"end",44:"acc_title",45:"acc_title_value",46:"acc_descr",47:"acc_descr_value",48:"acc_descr_multiline_value",52:"AMP",53:"STYLE_SEPARATOR",55:"DOUBLECIRCLESTART",56:"DOUBLECIRCLEEND",57:"PS",58:"PE",59:"(-",60:"-)",61:"STADIUMSTART",62:"STADIUMEND",63:"SUBROUTINESTART",64:"SUBROUTINEEND",65:"VERTEX_WITH_PROPS_START",66:"ALPHA",67:"COLON",68:"PIPE",69:"CYLINDERSTART",70:"CYLINDEREND",71:"DIAMOND_START",72:"DIAMOND_STOP",73:"TAGEND",74:"TRAPSTART",75:"TRAPEND",76:"INVTRAPSTART",77:"INVTRAPEND",80:"TESTSTR",81:"START_LINK",82:"LINK",84:"STR",86:"STYLE",87:"LINKSTYLE",88:"CLASSDEF",89:"CLASS",90:"CLICK",91:"DOWN",92:"UP",95:"DEFAULT",98:"CALLBACKNAME",99:"CALLBACKARGS",100:"HREF",101:"LINK_TARGET",102:"HEX",104:"INTERPOLATE",105:"NUM",106:"COMMA",109:"MINUS",110:"UNIT",111:"BRKT",112:"DOT",113:"PCT",114:"TAGSTART",118:"direction_tb",119:"direction_bt",120:"direction_rl",121:"direction_lr",122:"PUNCTUATION",123:"UNICODE_TEXT",124:"PLUS",125:"EQUALS",126:"MULT",127:"UNDERSCORE",129:"ARROW_CROSS",130:"ARROW_POINT",131:"ARROW_CIRCLE",132:"ARROW_OPEN",133:"QUOTE"},productions_:[0,[3,1],[3,2],[5,4],[5,6],[6,1],[7,1],[11,1],[8,1],[4,2],[17,0],[17,2],[18,1],[18,1],[18,1],[18,1],[18,1],[16,2],[16,2],[16,2],[16,3],[28,2],[28,1],[29,1],[29,1],[29,1],[27,1],[27,1],[27,2],[31,2],[31,2],[31,1],[31,1],[30,2],[30,1],[19,2],[19,2],[19,2],[19,2],[19,2],[19,2],[19,9],[19,6],[19,4],[19,1],[19,2],[19,2],[19,1],[9,1],[9,1],[9,1],[32,3],[32,4],[32,2],[32,1],[50,1],[50,5],[50,3],[51,4],[51,4],[51,6],[51,4],[51,4],[51,4],[51,8],[51,4],[51,4],[51,4],[51,6],[51,4],[51,4],[51,4],[51,4],[51,4],[51,1],[49,2],[49,3],[49,3],[49,1],[49,3],[78,1],[79,3],[39,1],[39,2],[39,1],[85,1],[85,1],[85,1],[85,1],[85,1],[85,1],[85,1],[85,1],[85,1],[85,1],[85,1],[93,1],[93,2],[35,5],[35,5],[36,5],[37,2],[37,4],[37,3],[37,5],[37,2],[37,4],[37,4],[37,6],[37,2],[37,4],[37,2],[37,4],[37,4],[37,6],[33,5],[33,5],[34,5],[34,5],[34,9],[34,9],[34,7],[34,7],[103,1],[103,3],[96,1],[96,3],[107,1],[107,2],[108,1],[108,1],[108,1],[108,1],[108,1],[108,1],[108,1],[108,1],[108,1],[108,1],[108,1],[83,1],[83,1],[83,1],[83,1],[83,1],[83,1],[94,1],[94,1],[94,1],[94,1],[54,1],[54,2],[97,1],[97,2],[117,1],[117,1],[117,1],[117,1],[43,1],[43,1],[43,1],[43,1],[115,1],[115,1],[115,1],[115,1],[115,1],[115,1],[115,1],[115,1],[115,1],[115,1],[115,1],[115,1],[115,1],[116,1],[116,1],[116,1],[116,1],[116,1],[116,1],[116,1],[116,1],[116,1],[116,1],[116,1],[116,1],[116,1],[116,1],[116,1],[116,1],[128,1],[128,1],[128,1],[128,1],[128,1],[128,1],[128,1],[128,1],[128,1],[128,1],[128,1],[128,1],[128,1],[128,1],[128,1],[128,1],[128,1],[128,1],[128,1],[128,1],[128,1],[128,1],[128,1],[128,1],[128,1],[128,1]],performAction:function(t,e,r,i,n,a,s){var o=a.length-1;switch(n){case 5:i.parseDirective("%%{","open_directive");break;case 6:i.parseDirective(a[o],"type_directive");break;case 7:a[o]=a[o].trim().replace(/'/g,'"'),i.parseDirective(a[o],"arg_directive");break;case 8:i.parseDirective("}%%","close_directive","flowchart");break;case 10:this.$=[];break;case 11:(!Array.isArray(a[o])||0<a[o].length)&&a[o-1].push(a[o]),this.$=a[o-1];break;case 12:case 82:case 84:case 96:case 152:case 154:case 155:this.$=a[o];break;case 19:i.setDirection("TB"),this.$="TB";break;case 20:i.setDirection(a[o-1]),this.$=a[o-1];break;case 35:this.$=a[o-1].nodes;break;case 36:case 37:case 38:case 39:case 40:this.$=[];break;case 41:this.$=i.addSubGraph(a[o-6],a[o-1],a[o-4]);break;case 42:this.$=i.addSubGraph(a[o-3],a[o-1],a[o-3]);break;case 43:this.$=i.addSubGraph(void 0,a[o-1],void 0);break;case 45:this.$=a[o].trim(),i.setAccTitle(this.$);break;case 46:case 47:this.$=a[o].trim(),i.setAccDescription(this.$);break;case 51:i.addLink(a[o-2].stmt,a[o],a[o-1]),this.$={stmt:a[o],nodes:a[o].concat(a[o-2].nodes)};break;case 52:i.addLink(a[o-3].stmt,a[o-1],a[o-2]),this.$={stmt:a[o-1],nodes:a[o-1].concat(a[o-3].nodes)};break;case 53:this.$={stmt:a[o-1],nodes:a[o-1]};break;case 54:this.$={stmt:a[o],nodes:a[o]};break;case 55:this.$=[a[o]];break;case 56:this.$=a[o-4].concat(a[o]);break;case 57:this.$=[a[o-2]],i.setClass(a[o-2],a[o]);break;case 58:this.$=a[o-3],i.addVertex(a[o-3],a[o-1],"square");break;case 59:this.$=a[o-3],i.addVertex(a[o-3],a[o-1],"doublecircle");break;case 60:this.$=a[o-5],i.addVertex(a[o-5],a[o-2],"circle");break;case 61:this.$=a[o-3],i.addVertex(a[o-3],a[o-1],"ellipse");break;case 62:this.$=a[o-3],i.addVertex(a[o-3],a[o-1],"stadium");break;case 63:this.$=a[o-3],i.addVertex(a[o-3],a[o-1],"subroutine");break;case 64:this.$=a[o-7],i.addVertex(a[o-7],a[o-1],"rect",void 0,void 0,void 0,Object.fromEntries([[a[o-5],a[o-3]]]));break;case 65:this.$=a[o-3],i.addVertex(a[o-3],a[o-1],"cylinder");break;case 66:this.$=a[o-3],i.addVertex(a[o-3],a[o-1],"round");break;case 67:this.$=a[o-3],i.addVertex(a[o-3],a[o-1],"diamond");break;case 68:this.$=a[o-5],i.addVertex(a[o-5],a[o-2],"hexagon");break;case 69:this.$=a[o-3],i.addVertex(a[o-3],a[o-1],"odd");break;case 70:this.$=a[o-3],i.addVertex(a[o-3],a[o-1],"trapezoid");break;case 71:this.$=a[o-3],i.addVertex(a[o-3],a[o-1],"inv_trapezoid");break;case 72:this.$=a[o-3],i.addVertex(a[o-3],a[o-1],"lean_right");break;case 73:this.$=a[o-3],i.addVertex(a[o-3],a[o-1],"lean_left");break;case 74:this.$=a[o],i.addVertex(a[o]);break;case 75:a[o-1].text=a[o],this.$=a[o-1];break;case 76:case 77:a[o-2].text=a[o-1],this.$=a[o-2];break;case 78:this.$=a[o];break;case 79:var l=i.destructLink(a[o],a[o-2]);this.$={type:l.type,stroke:l.stroke,length:l.length,text:a[o-1]};break;case 80:l=i.destructLink(a[o]);this.$={type:l.type,stroke:l.stroke,length:l.length};break;case 81:this.$=a[o-1];break;case 83:case 97:case 153:this.$=a[o-1]+""+a[o];break;case 98:case 99:this.$=a[o-4],i.addClass(a[o-2],a[o]);break;case 100:this.$=a[o-4],i.setClass(a[o-2],a[o]);break;case 101:case 109:this.$=a[o-1],i.setClickEvent(a[o-1],a[o]);break;case 102:case 110:this.$=a[o-3],i.setClickEvent(a[o-3],a[o-2]),i.setTooltip(a[o-3],a[o]);break;case 103:this.$=a[o-2],i.setClickEvent(a[o-2],a[o-1],a[o]);break;case 104:this.$=a[o-4],i.setClickEvent(a[o-4],a[o-3],a[o-2]),i.setTooltip(a[o-4],a[o]);break;case 105:case 111:this.$=a[o-1],i.setLink(a[o-1],a[o]);break;case 106:case 112:this.$=a[o-3],i.setLink(a[o-3],a[o-2]),i.setTooltip(a[o-3],a[o]);break;case 107:case 113:this.$=a[o-3],i.setLink(a[o-3],a[o-2],a[o]);break;case 108:case 114:this.$=a[o-5],i.setLink(a[o-5],a[o-4],a[o]),i.setTooltip(a[o-5],a[o-2]);break;case 115:this.$=a[o-4],i.addVertex(a[o-2],void 0,void 0,a[o]);break;case 116:case 118:this.$=a[o-4],i.updateLink(a[o-2],a[o]);break;case 117:this.$=a[o-4],i.updateLink([a[o-2]],a[o]);break;case 119:this.$=a[o-8],i.updateLinkInterpolate([a[o-6]],a[o-2]),i.updateLink([a[o-6]],a[o]);break;case 120:this.$=a[o-8],i.updateLinkInterpolate(a[o-6],a[o-2]),i.updateLink(a[o-6],a[o]);break;case 121:this.$=a[o-6],i.updateLinkInterpolate([a[o-4]],a[o]);break;case 122:this.$=a[o-6],i.updateLinkInterpolate(a[o-4],a[o]);break;case 123:case 125:this.$=[a[o]];break;case 124:case 126:a[o-2].push(a[o]),this.$=a[o-2];break;case 128:this.$=a[o-1]+a[o];break;case 150:this.$=a[o];break;case 151:this.$=a[o-1]+""+a[o];break;case 156:this.$="v";break;case 157:this.$="-";break;case 158:this.$={stmt:"dir",value:"TB"};break;case 159:this.$={stmt:"dir",value:"BT"};break;case 160:this.$={stmt:"dir",value:"RL"};break;case 161:this.$={stmt:"dir",value:"LR"}}},table:[{3:1,4:2,5:3,6:5,12:Qb=[1,9],16:4,21:S3=[1,7],22:Kb=[1,6],24:Jb=[1,8]},{1:[3]},{1:[2,1]},{3:10,4:2,5:3,6:5,12:Qb,16:4,21:S3,22:Kb,24:Jb},f(r_=[1,20,21,22,23,38,44,46,48,52,66,67,86,87,88,89,90,91,95,105,106,109,111,112,118,119,120,121,122,123,124,125,126,127],B5=[2,10],{17:11}),{7:12,13:[1,13]},{16:14,21:S3,22:Kb,24:Jb},{16:15,21:S3,22:Kb,24:Jb},{25:[1,16],26:[1,17]},{13:[2,5]},{1:[2,2]},{1:[2,9],18:18,19:19,20:eb,21:rb,22:Su,23:ib,32:24,33:25,34:26,35:27,36:28,37:29,38:fe,43:31,44:nb,46:ab,48:sb,50:35,51:45,52:ob,54:46,66:lb,67:Sn,86:cb,87:ic,88:En,89:hb,90:ub,91:db,95:y,105:p6,106:od,109:Md,111:i2,112:E2,116:47,118:M2,119:L2,120:N2,121:F2,122:t,123:d,124:_,125:p,126:gp,127:wp},{8:64,10:[1,65],15:kp},f([10,15],[2,6]),f(r_,[2,17]),f(r_,[2,18]),f(r_,[2,19]),{20:[1,68],21:[1,69],22:Tp,27:67,30:70},f(Fp,[2,11]),f(Fp,[2,12]),f(Fp,[2,13]),f(Fp,[2,14]),f(Fp,[2,15]),f(Fp,[2,16]),{9:72,20:Rp,21:qd,23:Xp,49:73,78:77,81:[1,78],82:[1,79]},{9:80,20:Rp,21:qd,23:Xp},{9:81,20:Rp,21:qd,23:Xp},{9:82,20:Rp,21:qd,23:Xp},{9:83,20:Rp,21:qd,23:Xp},{9:84,20:Rp,21:qd,23:Xp},{9:86,20:Rp,21:qd,22:[1,85],23:Xp},f(Fp,[2,44]),{45:[1,87]},{47:[1,88]},f(Fp,[2,47]),f(ef,[2,54],{30:89,22:Tp}),{22:[1,90]},{22:[1,91]},{22:[1,92]},{22:[1,93]},{26:C,52:u,66:o,67:r,84:[1,97],91:_f,97:96,98:[1,94],100:[1,95],105:L,106:M,109:w6,111:N,112:O,115:100,117:98,122:m,123:b,124:E,125:A,126:D,127:B},f(Fp,[2,158]),f(Fp,[2,159]),f(Fp,[2,160]),f(Fp,[2,161]),f(f6,[2,55],{53:[1,116]}),f(Gb,[2,74],{116:129,40:[1,117],52:ob,55:[1,118],57:[1,119],59:[1,120],61:[1,121],63:[1,122],65:[1,123],66:lb,67:Sn,69:[1,124],71:[1,125],73:[1,126],74:[1,127],76:[1,128],91:db,95:y,105:p6,106:od,109:Md,111:i2,112:E2,122:t,123:d,124:_,125:p,126:gp,127:wp}),f(e_,[2,150]),f(e_,[2,175]),f(e_,[2,176]),f(e_,[2,177]),f(e_,[2,178]),f(e_,[2,179]),f(e_,[2,180]),f(e_,[2,181]),f(e_,[2,182]),f(e_,[2,183]),f(e_,[2,184]),f(e_,[2,185]),f(e_,[2,186]),f(e_,[2,187]),f(e_,[2,188]),f(e_,[2,189]),f(e_,[2,190]),{9:130,20:Rp,21:qd,23:Xp},{11:131,14:[1,132]},f(Xb,[2,8]),f(r_,[2,20]),f(r_,[2,26]),f(r_,[2,27]),{21:[1,133]},f(i_,[2,34],{30:134,22:Tp}),f(Fp,[2,35]),{50:135,51:45,52:ob,54:46,66:lb,67:Sn,91:db,95:y,105:p6,106:od,109:Md,111:i2,112:E2,116:47,122:t,123:d,124:_,125:p,126:gp,127:wp},f(t_,[2,48]),f(t_,[2,49]),f(t_,[2,50]),f(Ib,[2,78],{79:136,68:[1,138],80:[1,137]}),{22:e,24:x,26:a,38:w,39:139,42:T,52:u,66:o,67:r,73:x6,81:v6,83:140,84:X4,85:151,86:k6,87:T6,88:C6,89:_6,90:U5,91:u6,92:d6,94:142,95:Ux,105:L,106:M,109:Wx,111:N,112:O,113:Hx,114:tb,115:148,122:m,123:b,124:E,125:A,126:D,127:B},f([52,66,67,68,80,91,95,105,106,109,111,112,122,123,124,125,126,127],[2,80]),f(Fp,[2,36]),f(Fp,[2,37]),f(Fp,[2,38]),f(Fp,[2,39]),f(Fp,[2,40]),{22:e,24:x,26:a,38:w,39:163,42:T,52:u,66:o,67:r,73:x6,81:v6,83:140,84:X4,85:151,86:k6,87:T6,88:C6,89:_6,90:U5,91:u6,92:d6,94:142,95:Ux,105:L,106:M,109:Wx,111:N,112:O,113:Hx,114:tb,115:148,122:m,123:b,124:E,125:A,126:D,127:B},f(m6,B5,{17:164}),f(Fp,[2,45]),f(Fp,[2,46]),f(ef,[2,53],{52:Bb}),{26:C,52:u,66:o,67:r,91:_f,97:166,102:[1,167],105:L,106:M,109:w6,111:N,112:O,115:100,117:98,122:m,123:b,124:E,125:A,126:D,127:B},{95:[1,168],103:169,105:[1,170]},{26:C,52:u,66:o,67:r,91:_f,95:[1,171],97:172,105:L,106:M,109:w6,111:N,112:O,115:100,117:98,122:m,123:b,124:E,125:A,126:D,127:B},{26:C,52:u,66:o,67:r,91:_f,97:173,105:L,106:M,109:w6,111:N,112:O,115:100,117:98,122:m,123:b,124:E,125:A,126:D,127:B},f(Xb,[2,101],{22:[1,174],99:[1,175]}),f(Xb,[2,105],{22:[1,176]}),f(Xb,[2,109],{115:100,117:178,22:[1,177],26:C,52:u,66:o,67:r,91:_f,105:L,106:M,109:w6,111:N,112:O,122:m,123:b,124:E,125:A,126:D,127:B}),f(Xb,[2,111],{22:[1,179]}),f(Ob,[2,152]),f(Ob,[2,154]),f(Ob,[2,155]),f(Ob,[2,156]),f(Ob,[2,157]),f(Fb,[2,162]),f(Fb,[2,163]),f(Fb,[2,164]),f(Fb,[2,165]),f(Fb,[2,166]),f(Fb,[2,167]),f(Fb,[2,168]),f(Fb,[2,169]),f(Fb,[2,170]),f(Fb,[2,171]),f(Fb,[2,172]),f(Fb,[2,173]),f(Fb,[2,174]),{52:ob,54:180,66:lb,67:Sn,91:db,95:y,105:p6,106:od,109:Md,111:i2,112:E2,116:47,122:t,123:d,124:_,125:p,126:gp,127:wp},{22:e,24:x,26:a,38:w,39:181,42:T,52:u,66:o,67:r,73:x6,81:v6,83:140,84:X4,85:151,86:k6,87:T6,88:C6,89:_6,90:U5,91:u6,92:d6,94:142,95:Ux,105:L,106:M,109:Wx,111:N,112:O,113:Hx,114:tb,115:148,122:m,123:b,124:E,125:A,126:D,127:B},{22:e,24:x,26:a,38:w,39:182,42:T,52:u,66:o,67:r,73:x6,81:v6,83:140,84:X4,85:151,86:k6,87:T6,88:C6,89:_6,90:U5,91:u6,92:d6,94:142,95:Ux,105:L,106:M,109:Wx,111:N,112:O,113:Hx,114:tb,115:148,122:m,123:b,124:E,125:A,126:D,127:B},{22:e,24:x,26:a,38:w,39:184,42:T,52:u,57:[1,183],66:o,67:r,73:x6,81:v6,83:140,84:X4,85:151,86:k6,87:T6,88:C6,89:_6,90:U5,91:u6,92:d6,94:142,95:Ux,105:L,106:M,109:Wx,111:N,112:O,113:Hx,114:tb,115:148,122:m,123:b,124:E,125:A,126:D,127:B},{22:e,24:x,26:a,38:w,39:185,42:T,52:u,66:o,67:r,73:x6,81:v6,83:140,84:X4,85:151,86:k6,87:T6,88:C6,89:_6,90:U5,91:u6,92:d6,94:142,95:Ux,105:L,106:M,109:Wx,111:N,112:O,113:Hx,114:tb,115:148,122:m,123:b,124:E,125:A,126:D,127:B},{22:e,24:x,26:a,38:w,39:186,42:T,52:u,66:o,67:r,73:x6,81:v6,83:140,84:X4,85:151,86:k6,87:T6,88:C6,89:_6,90:U5,91:u6,92:d6,94:142,95:Ux,105:L,106:M,109:Wx,111:N,112:O,113:Hx,114:tb,115:148,122:m,123:b,124:E,125:A,126:D,127:B},{22:e,24:x,26:a,38:w,39:187,42:T,52:u,66:o,67:r,73:x6,81:v6,83:140,84:X4,85:151,86:k6,87:T6,88:C6,89:_6,90:U5,91:u6,92:d6,94:142,95:Ux,105:L,106:M,109:Wx,111:N,112:O,113:Hx,114:tb,115:148,122:m,123:b,124:E,125:A,126:D,127:B},{66:[1,188]},{22:e,24:x,26:a,38:w,39:189,42:T,52:u,66:o,67:r,73:x6,81:v6,83:140,84:X4,85:151,86:k6,87:T6,88:C6,89:_6,90:U5,91:u6,92:d6,94:142,95:Ux,105:L,106:M,109:Wx,111:N,112:O,113:Hx,114:tb,115:148,122:m,123:b,124:E,125:A,126:D,127:B},{22:e,24:x,26:a,38:w,39:190,42:T,52:u,66:o,67:r,71:[1,191],73:x6,81:v6,83:140,84:X4,85:151,86:k6,87:T6,88:C6,89:_6,90:U5,91:u6,92:d6,94:142,95:Ux,105:L,106:M,109:Wx,111:N,112:O,113:Hx,114:tb,115:148,122:m,123:b,124:E,125:A,126:D,127:B},{22:e,24:x,26:a,38:w,39:192,42:T,52:u,66:o,67:r,73:x6,81:v6,83:140,84:X4,85:151,86:k6,87:T6,88:C6,89:_6,90:U5,91:u6,92:d6,94:142,95:Ux,105:L,106:M,109:Wx,111:N,112:O,113:Hx,114:tb,115:148,122:m,123:b,124:E,125:A,126:D,127:B},{22:e,24:x,26:a,38:w,39:193,42:T,52:u,66:o,67:r,73:x6,81:v6,83:140,84:X4,85:151,86:k6,87:T6,88:C6,89:_6,90:U5,91:u6,92:d6,94:142,95:Ux,105:L,106:M,109:Wx,111:N,112:O,113:Hx,114:tb,115:148,122:m,123:b,124:E,125:A,126:D,127:B},{22:e,24:x,26:a,38:w,39:194,42:T,52:u,66:o,67:r,73:x6,81:v6,83:140,84:X4,85:151,86:k6,87:T6,88:C6,89:_6,90:U5,91:u6,92:d6,94:142,95:Ux,105:L,106:M,109:Wx,111:N,112:O,113:Hx,114:tb,115:148,122:m,123:b,124:E,125:A,126:D,127:B},f(e_,[2,151]),f(n_,[2,3]),{8:195,15:kp},{15:[2,7]},f(r_,[2,28]),f(i_,[2,33]),f(ef,[2,51],{30:196,22:Tp}),f(Ib,[2,75],{22:[1,197]}),{22:[1,198]},{22:e,24:x,26:a,38:w,39:199,42:T,52:u,66:o,67:r,73:x6,81:v6,83:140,84:X4,85:151,86:k6,87:T6,88:C6,89:_6,90:U5,91:u6,92:d6,94:142,95:Ux,105:L,106:M,109:Wx,111:N,112:O,113:Hx,114:tb,115:148,122:m,123:b,124:E,125:A,126:D,127:B},{22:e,24:x,26:a,38:w,42:T,52:u,66:o,67:r,73:x6,81:v6,82:[1,200],83:201,85:151,86:k6,87:T6,88:C6,89:_6,90:U5,91:u6,92:d6,94:142,95:Ux,105:L,106:M,109:Wx,111:N,112:O,113:Hx,114:tb,115:148,122:m,123:b,124:E,125:A,126:D,127:B},f(Fb,[2,82]),f(Fb,[2,84]),f(Fb,[2,140]),f(Fb,[2,141]),f(Fb,[2,142]),f(Fb,[2,143]),f(Fb,[2,144]),f(Fb,[2,145]),f(Fb,[2,146]),f(Fb,[2,147]),f(Fb,[2,148]),f(Fb,[2,149]),f(Fb,[2,85]),f(Fb,[2,86]),f(Fb,[2,87]),f(Fb,[2,88]),f(Fb,[2,89]),f(Fb,[2,90]),f(Fb,[2,91]),f(Fb,[2,92]),f(Fb,[2,93]),f(Fb,[2,94]),f(Fb,[2,95]),{9:203,20:Rp,21:qd,22:e,23:Xp,24:x,26:a,38:w,40:[1,202],42:T,52:u,66:o,67:r,73:x6,81:v6,83:201,85:151,86:k6,87:T6,88:C6,89:_6,90:U5,91:u6,92:d6,94:142,95:Ux,105:L,106:M,109:Wx,111:N,112:O,113:Hx,114:tb,115:148,122:m,123:b,124:E,125:A,126:D,127:B},{18:18,19:19,20:eb,21:rb,22:Su,23:ib,32:24,33:25,34:26,35:27,36:28,37:29,38:fe,42:[1,204],43:31,44:nb,46:ab,48:sb,50:35,51:45,52:ob,54:46,66:lb,67:Sn,86:cb,87:ic,88:En,89:hb,90:ub,91:db,95:y,105:p6,106:od,109:Md,111:i2,112:E2,116:47,118:M2,119:L2,120:N2,121:F2,122:t,123:d,124:_,125:p,126:gp,127:wp},{22:Tp,30:205},{22:[1,206],26:C,52:u,66:o,67:r,91:_f,105:L,106:M,109:w6,111:N,112:O,115:100,117:178,122:m,123:b,124:E,125:A,126:D,127:B},{22:[1,207]},{22:[1,208]},{22:[1,209],106:[1,210]},f(g6,[2,123]),{22:[1,211]},{22:[1,212],26:C,52:u,66:o,67:r,91:_f,105:L,106:M,109:w6,111:N,112:O,115:100,117:178,122:m,123:b,124:E,125:A,126:D,127:B},{22:[1,213],26:C,52:u,66:o,67:r,91:_f,105:L,106:M,109:w6,111:N,112:O,115:100,117:178,122:m,123:b,124:E,125:A,126:D,127:B},{84:[1,214]},f(Xb,[2,103],{22:[1,215]}),{84:[1,216],101:[1,217]},{84:[1,218]},f(Ob,[2,153]),{84:[1,219],101:[1,220]},f(f6,[2,57],{116:129,52:ob,66:lb,67:Sn,91:db,95:y,105:p6,106:od,109:Md,111:i2,112:E2,122:t,123:d,124:_,125:p,126:gp,127:wp}),{22:e,24:x,26:a,38:w,41:[1,221],42:T,52:u,66:o,67:r,73:x6,81:v6,83:201,85:151,86:k6,87:T6,88:C6,89:_6,90:U5,91:u6,92:d6,94:142,95:Ux,105:L,106:M,109:Wx,111:N,112:O,113:Hx,114:tb,115:148,122:m,123:b,124:E,125:A,126:D,127:B},{22:e,24:x,26:a,38:w,42:T,52:u,56:[1,222],66:o,67:r,73:x6,81:v6,83:201,85:151,86:k6,87:T6,88:C6,89:_6,90:U5,91:u6,92:d6,94:142,95:Ux,105:L,106:M,109:Wx,111:N,112:O,113:Hx,114:tb,115:148,122:m,123:b,124:E,125:A,126:D,127:B},{22:e,24:x,26:a,38:w,39:223,42:T,52:u,66:o,67:r,73:x6,81:v6,83:140,84:X4,85:151,86:k6,87:T6,88:C6,89:_6,90:U5,91:u6,92:d6,94:142,95:Ux,105:L,106:M,109:Wx,111:N,112:O,113:Hx,114:tb,115:148,122:m,123:b,124:E,125:A,126:D,127:B},{22:e,24:x,26:a,38:w,42:T,52:u,58:[1,224],66:o,67:r,73:x6,81:v6,83:201,85:151,86:k6,87:T6,88:C6,89:_6,90:U5,91:u6,92:d6,94:142,95:Ux,105:L,106:M,109:Wx,111:N,112:O,113:Hx,114:tb,115:148,122:m,123:b,124:E,125:A,126:D,127:B},{22:e,24:x,26:a,38:w,42:T,52:u,60:[1,225],66:o,67:r,73:x6,81:v6,83:201,85:151,86:k6,87:T6,88:C6,89:_6,90:U5,91:u6,92:d6,94:142,95:Ux,105:L,106:M,109:Wx,111:N,112:O,113:Hx,114:tb,115:148,122:m,123:b,124:E,125:A,126:D,127:B},{22:e,24:x,26:a,38:w,42:T,52:u,62:[1,226],66:o,67:r,73:x6,81:v6,83:201,85:151,86:k6,87:T6,88:C6,89:_6,90:U5,91:u6,92:d6,94:142,95:Ux,105:L,106:M,109:Wx,111:N,112:O,113:Hx,114:tb,115:148,122:m,123:b,124:E,125:A,126:D,127:B},{22:e,24:x,26:a,38:w,42:T,52:u,64:[1,227],66:o,67:r,73:x6,81:v6,83:201,85:151,86:k6,87:T6,88:C6,89:_6,90:U5,91:u6,92:d6,94:142,95:Ux,105:L,106:M,109:Wx,111:N,112:O,113:Hx,114:tb,115:148,122:m,123:b,124:E,125:A,126:D,127:B},{67:[1,228]},{22:e,24:x,26:a,38:w,42:T,52:u,66:o,67:r,70:[1,229],73:x6,81:v6,83:201,85:151,86:k6,87:T6,88:C6,89:_6,90:U5,91:u6,92:d6,94:142,95:Ux,105:L,106:M,109:Wx,111:N,112:O,113:Hx,114:tb,115:148,122:m,123:b,124:E,125:A,126:D,127:B},{22:e,24:x,26:a,38:w,42:T,52:u,66:o,67:r,72:[1,230],73:x6,81:v6,83:201,85:151,86:k6,87:T6,88:C6,89:_6,90:U5,91:u6,92:d6,94:142,95:Ux,105:L,106:M,109:Wx,111:N,112:O,113:Hx,114:tb,115:148,122:m,123:b,124:E,125:A,126:D,127:B},{22:e,24:x,26:a,38:w,39:231,42:T,52:u,66:o,67:r,73:x6,81:v6,83:140,84:X4,85:151,86:k6,87:T6,88:C6,89:_6,90:U5,91:u6,92:d6,94:142,95:Ux,105:L,106:M,109:Wx,111:N,112:O,113:Hx,114:tb,115:148,122:m,123:b,124:E,125:A,126:D,127:B},{22:e,24:x,26:a,38:w,41:[1,232],42:T,52:u,66:o,67:r,73:x6,81:v6,83:201,85:151,86:k6,87:T6,88:C6,89:_6,90:U5,91:u6,92:d6,94:142,95:Ux,105:L,106:M,109:Wx,111:N,112:O,113:Hx,114:tb,115:148,122:m,123:b,124:E,125:A,126:D,127:B},{22:e,24:x,26:a,38:w,42:T,52:u,66:o,67:r,73:x6,75:[1,233],77:[1,234],81:v6,83:201,85:151,86:k6,87:T6,88:C6,89:_6,90:U5,91:u6,92:d6,94:142,95:Ux,105:L,106:M,109:Wx,111:N,112:O,113:Hx,114:tb,115:148,122:m,123:b,124:E,125:A,126:D,127:B},{22:e,24:x,26:a,38:w,42:T,52:u,66:o,67:r,73:x6,75:[1,236],77:[1,235],81:v6,83:201,85:151,86:k6,87:T6,88:C6,89:_6,90:U5,91:u6,92:d6,94:142,95:Ux,105:L,106:M,109:Wx,111:N,112:O,113:Hx,114:tb,115:148,122:m,123:b,124:E,125:A,126:D,127:B},{9:237,20:Rp,21:qd,23:Xp},f(ef,[2,52],{52:Bb}),f(Ib,[2,77]),f(Ib,[2,76]),{22:e,24:x,26:a,38:w,42:T,52:u,66:o,67:r,68:[1,238],73:x6,81:v6,83:201,85:151,86:k6,87:T6,88:C6,89:_6,90:U5,91:u6,92:d6,94:142,95:Ux,105:L,106:M,109:Wx,111:N,112:O,113:Hx,114:tb,115:148,122:m,123:b,124:E,125:A,126:D,127:B},f(Ib,[2,79]),f(Fb,[2,83]),{22:e,24:x,26:a,38:w,39:239,42:T,52:u,66:o,67:r,73:x6,81:v6,83:140,84:X4,85:151,86:k6,87:T6,88:C6,89:_6,90:U5,91:u6,92:d6,94:142,95:Ux,105:L,106:M,109:Wx,111:N,112:O,113:Hx,114:tb,115:148,122:m,123:b,124:E,125:A,126:D,127:B},f(m6,B5,{17:240}),f(Fp,[2,43]),{51:241,52:ob,54:46,66:lb,67:Sn,91:db,95:y,105:p6,106:od,109:Md,111:i2,112:E2,116:47,122:t,123:d,124:_,125:p,126:gp,127:wp},{22:Rb,66:Pb,67:$b,86:Yb,96:242,102:jb,105:zb,107:243,108:244,109:Ub,110:Wb,111:Hb,112:qb,113:Vb},{22:Rb,66:Pb,67:$b,86:Yb,96:256,102:jb,105:zb,107:243,108:244,109:Ub,110:Wb,111:Hb,112:qb,113:Vb},{22:Rb,66:Pb,67:$b,86:Yb,96:257,102:jb,104:[1,258],105:zb,107:243,108:244,109:Ub,110:Wb,111:Hb,112:qb,113:Vb},{22:Rb,66:Pb,67:$b,86:Yb,96:259,102:jb,104:[1,260],105:zb,107:243,108:244,109:Ub,110:Wb,111:Hb,112:qb,113:Vb},{105:[1,261]},{22:Rb,66:Pb,67:$b,86:Yb,96:262,102:jb,105:zb,107:243,108:244,109:Ub,110:Wb,111:Hb,112:qb,113:Vb},{22:Rb,66:Pb,67:$b,86:Yb,96:263,102:jb,105:zb,107:243,108:244,109:Ub,110:Wb,111:Hb,112:qb,113:Vb},{26:C,52:u,66:o,67:r,91:_f,97:264,105:L,106:M,109:w6,111:N,112:O,115:100,117:98,122:m,123:b,124:E,125:A,126:D,127:B},f(Xb,[2,102]),{84:[1,265]},f(Xb,[2,106],{22:[1,266]}),f(Xb,[2,107]),f(Xb,[2,110]),f(Xb,[2,112],{22:[1,267]}),f(Xb,[2,113]),f(Gb,[2,58]),f(Gb,[2,59]),{22:e,24:x,26:a,38:w,42:T,52:u,58:[1,268],66:o,67:r,73:x6,81:v6,83:201,85:151,86:k6,87:T6,88:C6,89:_6,90:U5,91:u6,92:d6,94:142,95:Ux,105:L,106:M,109:Wx,111:N,112:O,113:Hx,114:tb,115:148,122:m,123:b,124:E,125:A,126:D,127:B},f(Gb,[2,66]),f(Gb,[2,61]),f(Gb,[2,62]),f(Gb,[2,63]),{66:[1,269]},f(Gb,[2,65]),f(Gb,[2,67]),{22:e,24:x,26:a,38:w,42:T,52:u,66:o,67:r,72:[1,270],73:x6,81:v6,83:201,85:151,86:k6,87:T6,88:C6,89:_6,90:U5,91:u6,92:d6,94:142,95:Ux,105:L,106:M,109:Wx,111:N,112:O,113:Hx,114:tb,115:148,122:m,123:b,124:E,125:A,126:D,127:B},f(Gb,[2,69]),f(Gb,[2,70]),f(Gb,[2,72]),f(Gb,[2,71]),f(Gb,[2,73]),f(n_,[2,4]),f([22,52,66,67,91,95,105,106,109,111,112,122,123,124,125,126,127],[2,81]),{22:e,24:x,26:a,38:w,41:[1,271],42:T,52:u,66:o,67:r,73:x6,81:v6,83:201,85:151,86:k6,87:T6,88:C6,89:_6,90:U5,91:u6,92:d6,94:142,95:Ux,105:L,106:M,109:Wx,111:N,112:O,113:Hx,114:tb,115:148,122:m,123:b,124:E,125:A,126:D,127:B},{18:18,19:19,20:eb,21:rb,22:Su,23:ib,32:24,33:25,34:26,35:27,36:28,37:29,38:fe,42:[1,272],43:31,44:nb,46:ab,48:sb,50:35,51:45,52:ob,54:46,66:lb,67:Sn,86:cb,87:ic,88:En,89:hb,90:ub,91:db,95:y,105:p6,106:od,109:Md,111:i2,112:E2,116:47,118:M2,119:L2,120:N2,121:F2,122:t,123:d,124:_,125:p,126:gp,127:wp},f(f6,[2,56]),f(Xb,[2,115],{106:Zb}),f(b6,[2,125],{108:274,22:Rb,66:Pb,67:$b,86:Yb,102:jb,105:zb,109:Ub,110:Wb,111:Hb,112:qb,113:Vb}),f(y6,[2,127]),f(y6,[2,129]),f(y6,[2,130]),f(y6,[2,131]),f(y6,[2,132]),f(y6,[2,133]),f(y6,[2,134]),f(y6,[2,135]),f(y6,[2,136]),f(y6,[2,137]),f(y6,[2,138]),f(y6,[2,139]),f(Xb,[2,116],{106:Zb}),f(Xb,[2,117],{106:Zb}),{22:[1,275]},f(Xb,[2,118],{106:Zb}),{22:[1,276]},f(g6,[2,124]),f(Xb,[2,98],{106:Zb}),f(Xb,[2,99],{106:Zb}),f(Xb,[2,100],{115:100,117:178,26:C,52:u,66:o,67:r,91:_f,105:L,106:M,109:w6,111:N,112:O,122:m,123:b,124:E,125:A,126:D,127:B}),f(Xb,[2,104]),{101:[1,277]},{101:[1,278]},{58:[1,279]},{68:[1,280]},{72:[1,281]},{9:282,20:Rp,21:qd,23:Xp},f(Fp,[2,42]),{22:Rb,66:Pb,67:$b,86:Yb,102:jb,105:zb,107:283,108:244,109:Ub,110:Wb,111:Hb,112:qb,113:Vb},f(y6,[2,128]),{26:C,52:u,66:o,67:r,91:_f,97:284,105:L,106:M,109:w6,111:N,112:O,115:100,117:98,122:m,123:b,124:E,125:A,126:D,127:B},{26:C,52:u,66:o,67:r,91:_f,97:285,105:L,106:M,109:w6,111:N,112:O,115:100,117:98,122:m,123:b,124:E,125:A,126:D,127:B},f(Xb,[2,108]),f(Xb,[2,114]),f(Gb,[2,60]),{22:e,24:x,26:a,38:w,39:286,42:T,52:u,66:o,67:r,73:x6,81:v6,83:140,84:X4,85:151,86:k6,87:T6,88:C6,89:_6,90:U5,91:u6,92:d6,94:142,95:Ux,105:L,106:M,109:Wx,111:N,112:O,113:Hx,114:tb,115:148,122:m,123:b,124:E,125:A,126:D,127:B},f(Gb,[2,68]),f(m6,B5,{17:287}),f(b6,[2,126],{108:274,22:Rb,66:Pb,67:$b,86:Yb,102:jb,105:zb,109:Ub,110:Wb,111:Hb,112:qb,113:Vb}),f(Xb,[2,121],{115:100,117:178,22:[1,288],26:C,52:u,66:o,67:r,91:_f,105:L,106:M,109:w6,111:N,112:O,122:m,123:b,124:E,125:A,126:D,127:B}),f(Xb,[2,122],{115:100,117:178,22:[1,289],26:C,52:u,66:o,67:r,91:_f,105:L,106:M,109:w6,111:N,112:O,122:m,123:b,124:E,125:A,126:D,127:B}),{22:e,24:x,26:a,38:w,41:[1,290],42:T,52:u,66:o,67:r,73:x6,81:v6,83:201,85:151,86:k6,87:T6,88:C6,89:_6,90:U5,91:u6,92:d6,94:142,95:Ux,105:L,106:M,109:Wx,111:N,112:O,113:Hx,114:tb,115:148,122:m,123:b,124:E,125:A,126:D,127:B},{18:18,19:19,20:eb,21:rb,22:Su,23:ib,32:24,33:25,34:26,35:27,36:28,37:29,38:fe,42:[1,291],43:31,44:nb,46:ab,48:sb,50:35,51:45,52:ob,54:46,66:lb,67:Sn,86:cb,87:ic,88:En,89:hb,90:ub,91:db,95:y,105:p6,106:od,109:Md,111:i2,112:E2,116:47,118:M2,119:L2,120:N2,121:F2,122:t,123:d,124:_,125:p,126:gp,127:wp},{22:Rb,66:Pb,67:$b,86:Yb,96:292,102:jb,105:zb,107:243,108:244,109:Ub,110:Wb,111:Hb,112:qb,113:Vb},{22:Rb,66:Pb,67:$b,86:Yb,96:293,102:jb,105:zb,107:243,108:244,109:Ub,110:Wb,111:Hb,112:qb,113:Vb},f(Gb,[2,64]),f(Fp,[2,41]),f(Xb,[2,119],{106:Zb}),f(Xb,[2,120],{106:Zb})],defaultActions:{2:[2,1],9:[2,5],10:[2,2],132:[2,7]},parseError:function(t,e){var r;if(!e.recoverable)throw(r=new Error(t)).hash=e,r;this.trace(t)},parse:function(t){var e,r=this,i=[0],n=[],a=[null],s=[],o=this.table,l="",c=0,h=0,u=1,d=s.slice.call(arguments,1),p=Object.create(this.lexer),f={yy:{}};for(e in this.yy)Object.prototype.hasOwnProperty.call(this.yy,e)&&(f.yy[e]=this.yy[e]);p.setInput(t,f.yy),f.yy.lexer=p,f.yy.parser=this,"u"<typeof p.yylloc&&(p.yylloc={});var g=p.yylloc,y=(s.push(g),p.options&&p.options.ranges);"function"==typeof f.yy.parseError?this.parseError=f.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;for(var m,b,_,x,v,k,w={};;){if(b=i[i.length-1],"u"<typeof(_=this.defaultActions[b]||((null===m||"u"<typeof m)&&(T=void 0,"number"!=typeof(T=n.pop()||p.lex()||u)&&(T instanceof Array&&(T=(n=T).pop()),T=r.symbols_[T]||T),m=T),o[b]&&o[b][m]))||!_.length||!_[0]){var T="",C=[];for(x in o[b])this.terminals_[x]&&2<x&&C.push("'"+this.terminals_[x]+"'");T=p.showPosition?"Parse error on line "+(c+1)+`:
`+p.showPosition()+`
Expecting `+C.join(", ")+", got '"+(this.terminals_[m]||m)+"'":"Parse error on line "+(c+1)+": Unexpected "+(m==u?"end of input":"'"+(this.terminals_[m]||m)+"'"),this.parseError(T,{text:p.match,token:this.terminals_[m]||m,line:p.yylineno,loc:g,expected:C})}if(_[0]instanceof Array&&1<_.length)throw new Error("Parse Error: multiple actions possible at state: "+b+", token: "+m);switch(_[0]){case 1:i.push(m),a.push(p.yytext),s.push(p.yylloc),i.push(_[1]),m=null,h=p.yyleng,l=p.yytext,c=p.yylineno,g=p.yylloc;break;case 2:if(v=this.productions_[_[1]][1],w.$=a[a.length-v],w._$={first_line:s[s.length-(v||1)].first_line,last_line:s[s.length-1].last_line,first_column:s[s.length-(v||1)].first_column,last_column:s[s.length-1].last_column},y&&(w._$.range=[s[s.length-(v||1)].range[0],s[s.length-1].range[1]]),typeof(k=this.performAction.apply(w,[l,h,c,f.yy,_[1],a,s].concat(d)))<"u")return k;v&&(i=i.slice(0,-1*v*2),a=a.slice(0,-1*v),s=s.slice(0,-1*v)),i.push(this.productions_[_[1]][0]),a.push(w.$),s.push(w._$),k=o[i[i.length-2]][i[i.length-1]],i.push(k);break;case 3:return!0}}return!0}}).lexer={EOF:1,parseError:function(t,e){if(!this.yy.parser)throw new Error(t);this.yy.parser.parseError(t,e)},setInput:function(t,e){return this.yy=e||this.yy||{},this._input=t,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var t=this._input[0];return this.yytext+=t,this.yyleng++,this.offset++,this.match+=t,this.matched+=t,t.match(/(?:\r\n?|\n).*/g)?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),t},unput:function(t){var e=t.length,r=t.split(/(?:\r\n?|\n)/g),t=(this._input=t+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-e),this.offset-=e,this.match.split(/(?:\r\n?|\n)/g)),i=(this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),r.length-1&&(this.yylineno-=r.length-1),this.yylloc.range);return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:r?(r.length===t.length?this.yylloc.first_column:0)+t[t.length-r.length].length-r[0].length:this.yylloc.first_column-e},this.options.ranges&&(this.yylloc.range=[i[0],i[0]+this.yyleng-e]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){return this.options.backtrack_lexer?(this._backtrack=!0,this):this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},less:function(t){this.unput(this.match.slice(t))},pastInput:function(){var t=this.matched.substr(0,this.matched.length-this.match.length);return(20<t.length?"...":"")+t.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var t=this.match;return t.length<20&&(t+=this._input.substr(0,20-t.length)),(t.substr(0,20)+(20<t.length?"...":"")).replace(/\n/g,"")},showPosition:function(){var t=this.pastInput(),e=new Array(t.length+1).join("-");return t+this.upcomingInput()+`
`+e+"^"},test_match:function(t,e){var r,i;if(this.options.backtrack_lexer&&(i={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges)&&(i.yylloc.range=this.yylloc.range.slice(0)),(r=t[0].match(/(?:\r\n?|\n).*/g))&&(this.yylineno+=r.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:r?r[r.length-1].length-r[r.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+t[0].length},this.yytext+=t[0],this.match+=t[0],this.matches=t,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(t[0].length),this.matched+=t[0],r=this.performAction.call(this,this.yy,this,e,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),r)return r;if(this._backtrack)for(var n in i)this[n]=i[n];return!1},next:function(){if(this.done)return this.EOF;var t,e,r,i;this._input||(this.done=!0),this._more||(this.yytext="",this.match="");for(var n=this._currentRules(),a=0;a<n.length;a++)if((r=this._input.match(this.rules[n[a]]))&&(!e||r[0].length>e[0].length)){if(e=r,i=a,this.options.backtrack_lexer){if(!1!==(t=this.test_match(r,n[a])))return t;if(this._backtrack){e=!1;continue}return!1}if(!this.options.flex)break}return e?!1!==(t=this.test_match(e,n[i]))&&t:""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){return this.next()||this.lex()},begin:function(t){this.conditionStack.push(t)},popState:function(){return 0<this.conditionStack.length-1?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return(this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]]:this.conditions.INITIAL).rules},topState:function(t){return 0<=(t=this.conditionStack.length-1-Math.abs(t||0))?this.conditionStack[t]:"INITIAL"},pushState:function(t){this.begin(t)},stateStackSize:function(){return this.conditionStack.length},options:{},performAction:function(t,e,r,i){switch(r){case 0:return this.begin("open_directive"),12;case 1:return this.begin("type_directive"),13;case 2:return this.popState(),this.begin("arg_directive"),10;case 3:return this.popState(),this.popState(),15;case 4:return 14;case 5:case 6:break;case 7:return this.begin("acc_title"),44;case 8:return this.popState(),"acc_title_value";case 9:return this.begin("acc_descr"),46;case 10:return this.popState(),"acc_descr_value";case 11:this.begin("acc_descr_multiline");break;case 12:this.popState();break;case 13:return"acc_descr_multiline_value";case 14:this.begin("string");break;case 15:this.popState();break;case 16:return"STR";case 17:return 86;case 18:return 95;case 19:return 87;case 20:return 104;case 21:return 88;case 22:return 89;case 23:this.begin("href");break;case 24:this.popState();break;case 25:return 100;case 26:this.begin("callbackname");break;case 27:this.popState();break;case 28:this.popState(),this.begin("callbackargs");break;case 29:return 98;case 30:this.popState();break;case 31:return 99;case 32:this.begin("click");break;case 33:this.popState();break;case 34:return 90;case 35:case 36:return t.lex.firstGraph()&&this.begin("dir"),24;case 37:return 38;case 38:return 42;case 39:case 40:case 41:case 42:return 101;case 43:return this.popState(),25;case 44:case 45:case 46:case 47:case 48:case 49:case 50:case 51:case 52:case 53:return this.popState(),26;case 54:return 118;case 55:return 119;case 56:return 120;case 57:return 121;case 58:return 105;case 59:return 111;case 60:return 53;case 61:return 67;case 62:return 52;case 63:return 20;case 64:return 106;case 65:return 126;case 66:case 67:case 68:return 82;case 69:case 70:case 71:return 81;case 72:return 59;case 73:return 60;case 74:return 61;case 75:return 62;case 76:return 63;case 77:return 64;case 78:return 65;case 79:return 69;case 80:return 70;case 81:return 55;case 82:return 56;case 83:return 109;case 84:return 112;case 85:return 127;case 86:return 124;case 87:return 113;case 88:case 89:return 125;case 90:return 114;case 91:return 73;case 92:return 92;case 93:return"SEP";case 94:return 91;case 95:return 66;case 96:return 75;case 97:return 74;case 98:return 77;case 99:return 76;case 100:return 122;case 101:return 123;case 102:return 68;case 103:return 57;case 104:return 58;case 105:return 40;case 106:return 41;case 107:return 71;case 108:return 72;case 109:return 133;case 110:return 21;case 111:return 22;case 112:return 23}},rules:[/^(?:%%\{)/,/^(?:((?:(?!\}%%)[^:.])*))/,/^(?::)/,/^(?:\}%%)/,/^(?:((?:(?!\}%%).|\n)*))/,/^(?:%%(?!\{)[^\n]*)/,/^(?:[^\}]%%[^\n]*)/,/^(?:accTitle\s*:\s*)/,/^(?:(?!\n||)*[^\n]*)/,/^(?:accDescr\s*:\s*)/,/^(?:(?!\n||)*[^\n]*)/,/^(?:accDescr\s*\{\s*)/,/^(?:[\}])/,/^(?:[^\}]*)/,/^(?:["])/,/^(?:["])/,/^(?:[^"]*)/,/^(?:style\b)/,/^(?:default\b)/,/^(?:linkStyle\b)/,/^(?:interpolate\b)/,/^(?:classDef\b)/,/^(?:class\b)/,/^(?:href[\s]+["])/,/^(?:["])/,/^(?:[^"]*)/,/^(?:call[\s]+)/,/^(?:\([\s]*\))/,/^(?:\()/,/^(?:[^(]*)/,/^(?:\))/,/^(?:[^)]*)/,/^(?:click[\s]+)/,/^(?:[\s\n])/,/^(?:[^\s\n]*)/,/^(?:graph\b)/,/^(?:flowchart\b)/,/^(?:subgraph\b)/,/^(?:end\b\s*)/,/^(?:_self\b)/,/^(?:_blank\b)/,/^(?:_parent\b)/,/^(?:_top\b)/,/^(?:(\r?\n)*\s*\n)/,/^(?:\s*LR\b)/,/^(?:\s*RL\b)/,/^(?:\s*TB\b)/,/^(?:\s*BT\b)/,/^(?:\s*TD\b)/,/^(?:\s*BR\b)/,/^(?:\s*<)/,/^(?:\s*>)/,/^(?:\s*\^)/,/^(?:\s*v\b)/,/^(?:.*direction\s+TB[^\n]*)/,/^(?:.*direction\s+BT[^\n]*)/,/^(?:.*direction\s+RL[^\n]*)/,/^(?:.*direction\s+LR[^\n]*)/,/^(?:[0-9]+)/,/^(?:#)/,/^(?::::)/,/^(?::)/,/^(?:&)/,/^(?:;)/,/^(?:,)/,/^(?:\*)/,/^(?:\s*[xo<]?--+[-xo>]\s*)/,/^(?:\s*[xo<]?==+[=xo>]\s*)/,/^(?:\s*[xo<]?-?\.+-[xo>]?\s*)/,/^(?:\s*[xo<]?--\s*)/,/^(?:\s*[xo<]?==\s*)/,/^(?:\s*[xo<]?-\.\s*)/,/^(?:\(-)/,/^(?:-\))/,/^(?:\(\[)/,/^(?:\]\))/,/^(?:\[\[)/,/^(?:\]\])/,/^(?:\[\|)/,/^(?:\[\()/,/^(?:\)\])/,/^(?:\(\(\()/,/^(?:\)\)\))/,/^(?:-)/,/^(?:\.)/,/^(?:[\_])/,/^(?:\+)/,/^(?:%)/,/^(?:=)/,/^(?:=)/,/^(?:<)/,/^(?:>)/,/^(?:\^)/,/^(?:\\\|)/,/^(?:v\b)/,/^(?:[A-Za-z]+)/,/^(?:\\\])/,/^(?:\[\/)/,/^(?:\/\])/,/^(?:\[\\)/,/^(?:[!"#$%&'*+,-.`?\\_/])/,/^(?:[\u00AA\u00B5\u00BA\u00C0-\u00D6\u00D8-\u00F6]|[\u00F8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377]|[\u037A-\u037D\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5]|[\u03F7-\u0481\u048A-\u0527\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA]|[\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE]|[\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA]|[\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u08A0]|[\u08A2-\u08AC\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0977]|[\u0979-\u097F\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2]|[\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u0A05-\u0A0A]|[\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39]|[\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8]|[\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0B05-\u0B0C]|[\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C]|[\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99]|[\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0]|[\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C33\u0C35-\u0C39\u0C3D]|[\u0C58\u0C59\u0C60\u0C61\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3]|[\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10]|[\u0D12-\u0D3A\u0D3D\u0D4E\u0D60\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1]|[\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81]|[\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3]|[\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6]|[\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A]|[\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081]|[\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D]|[\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0]|[\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310]|[\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F4\u1401-\u166C]|[\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u1700-\u170C\u170E-\u1711]|[\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7]|[\u17DC\u1820-\u1877\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191C]|[\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19C1-\u19C7\u1A00-\u1A16]|[\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF]|[\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1CE9-\u1CEC]|[\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D]|[\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D]|[\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3]|[\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F]|[\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128]|[\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184]|[\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3]|[\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6]|[\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE]|[\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C]|[\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D]|[\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FCC]|[\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B]|[\uA640-\uA66E\uA67F-\uA697\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788]|[\uA78B-\uA78E\uA790-\uA793\uA7A0-\uA7AA\uA7F8-\uA801\uA803-\uA805]|[\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB]|[\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uAA00-\uAA28]|[\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA80-\uAAAF\uAAB1\uAAB5]|[\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4]|[\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E]|[\uABC0-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D]|[\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36]|[\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D]|[\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC]|[\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF]|[\uFFD2-\uFFD7\uFFDA-\uFFDC])/,/^(?:\|)/,/^(?:\()/,/^(?:\))/,/^(?:\[)/,/^(?:\])/,/^(?:\{)/,/^(?:\})/,/^(?:")/,/^(?:(\r?\n)+)/,/^(?:\s)/,/^(?:$)/],conditions:{close_directive:{rules:[],inclusive:!1},arg_directive:{rules:[3,4],inclusive:!1},type_directive:{rules:[2,3],inclusive:!1},open_directive:{rules:[1],inclusive:!1},callbackargs:{rules:[30,31],inclusive:!1},callbackname:{rules:[27,28,29],inclusive:!1},href:{rules:[24,25],inclusive:!1},click:{rules:[33,34],inclusive:!1},vertex:{rules:[],inclusive:!1},dir:{rules:[43,44,45,46,47,48,49,50,51,52,53],inclusive:!1},acc_descr_multiline:{rules:[12,13],inclusive:!1},acc_descr:{rules:[10],inclusive:!1},acc_title:{rules:[8],inclusive:!1},string:{rules:[15,16],inclusive:!1},INITIAL:{rules:[0,5,6,7,9,11,14,17,18,19,20,21,22,23,26,32,35,36,37,38,39,40,41,42,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112],inclusive:!0}}};var S3=new((A3.prototype=Qb).Parser=A3);function f(t,e,r,i){for(r=r||{},i=t.length;i--;r[t[i]]=e);return r}function A3(){this.yy={}}const D3=S3.parser=S3,L3=(t,e)=>{return"dagre-wrapper"!==(null==(e=null==e?void 0:e.flowchart)?void 0:e.defaultRenderer)&&null!==t.match(/^\s*graph/)},M3=(t,e)=>{return"dagre-wrapper"===(null==(e=null==e?void 0:e.flowchart)?void 0:e.defaultRenderer)&&null!==t.match(/^\s*graph/)||null!==t.match(/^\s*flowchart/)};let N3=0,O3=J(),B3={},I3=[],F3={},R3=[],P3={},$3={},Y3=0,j3=!0,z3,U3,W3=[];function H3(t,e){t.split(",").forEach(function(t){void 0!==B3[t]&&B3[t].classes.push(e),void 0!==P3[t]&&P3[t].classes.push(e)})}function q3(t){let r=K(".mermaidTooltip");null===(r._groups||r)[0][0]&&(r=K("body").append("div").attr("class","mermaidTooltip").style("opacity",0)),K(t).select("svg").selectAll("g.node").on("mouseover",function(){var t,e=K(this);null!==e.attr("title")&&(t=this.getBoundingClientRect(),r.transition().duration(200).style("opacity",".9"),r.text(e.attr("title")).style("left",window.scrollX+t.left+(t.right-t.left)/2+"px").style("top",window.scrollY+t.top-14+document.body.scrollTop+"px"),r.html(r.html().replace(/&lt;br\/&gt;/g,"<br/>")),e.classed("hover",!0))}).on("mouseout",function(){r.transition().duration(500).style("opacity",0),K(this).classed("hover",!1)})}const V3=t=>tl.sanitizeText(t,O3),G3=function(t){for(const e of Object.keys(B3))if(B3[e].id===t)return B3[e].domId;return t},X3=(W3.push(q3),function(t){for(var[e,r]of R3.entries())if(r.id===t)return e;return-1});let Z3=-1;const Q3=[],K3=function(r,i){var n=R3[i].nodes;if(!(2e3<(Z3+=1))){if(Q3[Z3]=i,R3[i].id===r)return{result:!0,count:0};let t=0,e=1;for(;t<n.length;){var a=X3(n[t]);if(0<=a){a=K3(r,a);if(a.result)return{result:!0,count:e+a.count};e+=a.count}t+=1}return{result:!1,count:e}}},J3=(e,r)=>{var i=r.length;let n=0;for(let t=0;t<i;++t)r[t]===e&&++n;return n},t4=(t,e)=>{let r=!1;return t.forEach(t=>{0<=t.nodes.indexOf(e)&&(r=!0)}),r},e4=(r,i)=>{const n=[];return r.nodes.forEach((t,e)=>{t4(i,t)||n.push(r.nodes[e])}),{nodes:n}},r4={parseDirective:function(t,e,r){Jv.parseDirective(this,t,e,r)},defaultConfig:()=>Y1.flowchart,setAccTitle:Iu,getAccTitle:Fu,getAccDescription:Pu,setAccDescription:Ru,addVertex:function(t,e,r,i,n,a,s={}){let o,l=t;void 0!==l&&0!==l.trim().length&&(void 0===B3[l]&&(B3[l]={id:l,domId:"flowchart-"+l+"-"+N3,styles:[],classes:[]}),N3++,void 0!==e?(O3=J(),'"'===(o=V3(e.trim()))[0]&&'"'===o[o.length-1]&&(o=o.substring(1,o.length-1)),B3[l].text=o):void 0===B3[l].text&&(B3[l].text=t),void 0!==r&&(B3[l].type=r),null!=i&&i.forEach(function(t){B3[l].styles.push(t)}),null!=n&&n.forEach(function(t){B3[l].classes.push(t)}),void 0!==a&&(B3[l].dir=a),void 0===B3[l].props?B3[l].props=s:void 0!==s&&Object.assign(B3[l].props,s))},lookUpDomId:G3,addLink:function(t,e,r,i){let n,a;for(n=0;n<t.length;n++)for(a=0;a<e.length;a++){var s=t[n];var o=e[a];var l=r;var c=i;s={start:s,end:o,type:void 0,text:""};void 0!==(c=l.text)&&(s.text=V3(c.trim()),'"'===s.text[0])&&'"'===s.text[s.text.length-1]&&(s.text=s.text.substring(1,s.text.length-1)),void 0!==l&&(s.type=l.type,s.stroke=l.stroke,s.length=l.length),I3.push(s)}},updateLinkInterpolate:function(t,e){t.forEach(function(t){"default"===t?I3.defaultInterpolate=e:I3[t].interpolate=e})},updateLink:function(t,e){t.forEach(function(t){"default"===t?I3.defaultStyle=e:(-1===t1.isSubstringInArray("fill",e)&&e.push("fill:none"),I3[t].style=e)})},addClass:function(r,t){void 0===F3[r]&&(F3[r]={id:r,styles:[],textStyles:[]}),null!=t&&t.forEach(function(t){var e;t.match("color")&&(e=t.replace("fill","bgFill").replace("color","fill"),F3[r].textStyles.push(e)),F3[r].styles.push(t)})},setDirection:function(t){(z3=(z3=(z3=(z3=t).match(/.*</)?"RL":z3).match(/.*\^/)?"BT":z3).match(/.*>/)?"LR":z3).match(/.*v/)&&(z3="TB")},setClass:H3,setTooltip:function(t,e){t.split(",").forEach(function(t){void 0!==e&&($3["gen-1"===U3?G3(t):t]=V3(e))})},getTooltip:function(t){return $3[t]},setClickEvent:function(t,r,a){t.split(",").forEach(function(t){{var i=r,n=a;let e=G3(t);if("loose"===J().securityLevel&&void 0!==i){let r=[];if("string"==typeof n){r=n.split(/,(?=(?:(?:[^"]*"){2})*[^"]*$)/);for(let e=0;e<r.length;e++){let t=r[e].trim();'"'===t.charAt(0)&&'"'===t.charAt(t.length-1)&&(t=t.substr(1,t.length-2)),r[e]=t}}0===r.length&&r.push(t),void 0!==B3[t]&&(B3[t].haveCallback=!0,W3.push(function(){var t=document.querySelector(`[id="${e}"]`);null!==t&&t.addEventListener("click",function(){t1.runFunc(i,...r)},!1)}))}}}),H3(t,"clickable")},setLink:function(t,e,r){t.split(",").forEach(function(t){void 0!==B3[t]&&(B3[t].link=t1.formatUrl(e,O3),B3[t].linkTarget=r)}),H3(t,"clickable")},bindFunctions:function(e){W3.forEach(function(t){t(e)})},getDirection:function(){return z3.trim()},getVertices:function(){return B3},getEdges:function(){return I3},getClasses:function(){return F3},clear:function(t="gen-1"){B3={},F3={},I3=[],W3=[q3],R3=[],P3={},Y3=0,$3=[],j3=!0,U3=t,Bu()},setGen:t=>{U3=t||"gen-1"},defaultStyle:function(){return"fill:#ffa;stroke: #f66; stroke-width: 3px; stroke-dasharray: 5, 5;fill:#ffa;stroke: #666;"},addSubGraph:function(t,e,r){let i=t.trim(),n=r;t===r&&r.match(/\s/)&&(i=void 0);let a=[];var{nodeList:t,dir:r}=function(t){const r={boolean:{},number:{},string:{}},i=[];let n;return{nodeList:t.filter(function(t){var e=typeof t;return t.stmt&&"dir"===t.stmt?(n=t.value,!1):""!==t.trim()&&(e in r?!r[e].hasOwnProperty(t)&&(r[e][t]=!0):!i.includes(t)&&i.push(t))}),dir:n}}(a.concat.apply(a,e));if(a=t,"gen-1"===U3)for(let t=0;t<a.length;t++)a[t]=G3(a[t]);i=i||"subGraph"+Y3,n=n||"",n=V3(n),Y3+=1;e={id:i,nodes:a,title:n.trim(),classes:[],dir:r};return S.info("Adding",e.id,e.nodes,e.dir),e.nodes=e4(e,R3).nodes,R3.push(e),P3[i]=e,i},getDepthFirstPos:function(t){return Q3[t]},indexNodes:function(){Z3=-1,0<R3.length&&K3("none",R3.length-1)},getSubGraphs:function(){return R3},destructLink:(t,e)=>{t=(t=>{var e=t.trim();let r=e.slice(0,-1),i="arrow_open";switch(e.slice(-1)){case"x":i="arrow_cross","x"===e[0]&&(i="double_"+i,r=r.slice(1));break;case">":i="arrow_point","<"===e[0]&&(i="double_"+i,r=r.slice(1));break;case"o":i="arrow_circle","o"===e[0]&&(i="double_"+i,r=r.slice(1))}let n="normal",a=r.length-1;"="===r[0]&&(n="thick");t=J3(".",r);return t&&(n="dotted",a=t),{type:i,stroke:n,length:a}})(t);if(e){if((e=(t=>{let e=t.trim(),r="arrow_open";switch(e[0]){case"<":r="arrow_point",e=e.slice(1);break;case"x":r="arrow_cross",e=e.slice(1);break;case"o":r="arrow_circle",e=e.slice(1)}let i="normal";return e.includes("=")&&(i="thick"),e.includes(".")&&(i="dotted"),{type:r,stroke:i}})(e)).stroke!==t.stroke)return{type:"INVALID",stroke:"INVALID"};if("arrow_open"===e.type)e.type=t.type;else{if(e.type!==t.type)return{type:"INVALID",stroke:"INVALID"};e.type="double_"+e.type}return"double_arrow"===e.type&&(e.type="double_arrow_point"),e.length=t.length,e}return t},lex:{firstGraph:()=>!!j3&&!(j3=!1)},exists:t4,makeUniq:e4,setDiagramTitle:$u,getDiagramTitle:Yu};function i4(t,e){return!!t.children(e).length}function n4(t){return s4(t.v)+":"+s4(t.w)+":"+s4(t.name)}var a4=/:/g;function s4(t){return t?String(t).replace(a4,"\\:"):""}function o4(t,e){e&&t.attr("style",e)}function l4(t,e,r){e&&t.attr("class",e).attr("class",r+" "+t.attr("class"))}function c4(t,e){e=e.graph();if(_p(e)){e=e.transition;if(fh(e))return e(t)}return t}var h4={normal:function(t,e,r,i){t=t.append("marker").attr("id",e).attr("viewBox","0 0 10 10").attr("refX",9).attr("refY",5).attr("markerUnits","strokeWidth").attr("markerWidth",8).attr("markerHeight",6).attr("orient","auto").append("path").attr("d","M 0 0 L 10 5 L 0 10 z").style("stroke-width",1).style("stroke-dasharray","1,0");o4(t,r[i+"Style"]),r[i+"Class"]&&t.attr("class",r[i+"Class"])},vee:function(t,e,r,i){t=t.append("marker").attr("id",e).attr("viewBox","0 0 10 10").attr("refX",9).attr("refY",5).attr("markerUnits","strokeWidth").attr("markerWidth",8).attr("markerHeight",6).attr("orient","auto").append("path").attr("d","M 0 0 L 10 5 L 0 10 L 4 5 z").style("stroke-width",1).style("stroke-dasharray","1,0");o4(t,r[i+"Style"]),r[i+"Class"]&&t.attr("class",r[i+"Class"])},undirected:function(t,e,r,i){t=t.append("marker").attr("id",e).attr("viewBox","0 0 10 10").attr("refX",9).attr("refY",5).attr("markerUnits","strokeWidth").attr("markerWidth",8).attr("markerHeight",6).attr("orient","auto").append("path").attr("d","M 0 5 L 10 5").style("stroke-width",1).style("stroke-dasharray","1,0");o4(t,r[i+"Style"]),r[i+"Class"]&&t.attr("class",r[i+"Class"])}};function u4(t,e){var t=t.append("foreignObject").attr("width","100000"),r=t.append("xhtml:div"),i=(r.attr("xmlns","http://www.w3.org/1999/xhtml"),e.label);switch(typeof i){case"function":r.insert(i);break;case"object":r.insert(function(){return i});break;default:r.html(i)}o4(r,e.labelStyle),r.style("display","inline-block"),r.style("white-space","nowrap");e=r.node().getBoundingClientRect();return t.attr("width",e.width).attr("height",e.height),t}function d4(t,e){for(var r=t.append("text"),i=function(t){for(var e,r="",i=!1,n=0;n<t.length;++n)e=t[n],i?(r+="n"===e?`
`:e,i=!1):"\\"===e?i=!0:r+=e;return r}(e.label).split(`
`),n=0;n<i.length;n++)r.append("tspan").attr("xml:space","preserve").attr("dy","1em").attr("x","1").text(i[n]);o4(r,e.labelStyle)}function p4(t,e,r){var i,n,a,s=e.label,t=t.append("g"),o=("svg"===e.labelType?(n=e,(i=t).node().appendChild(n.label),o4(i,n.labelStyle)):("string"!=typeof s||"html"===e.labelType?u4:d4)(t,e),t.node().getBBox());switch(r){case"top":a=-e.height/2;break;case"bottom":a=e.height/2-o.height;break;default:a=-o.height/2}return t.attr("transform","translate("+-o.width/2+","+a+")"),t}var f4=function(t,r){var e=r.nodes().filter(function(t){return i4(r,t)}),t=t.selectAll("g.cluster").data(e,function(t){return t}),e=(c4(t.exit(),r).style("opacity",0).remove(),t.enter().append("g").attr("class","cluster").attr("id",function(t){return r.node(t).id}).style("opacity",0).each(function(t){var t=r.node(t),e=K(this);K(this).append("rect"),p4(e.append("g").attr("class","label"),t,t.clusterLabelPos)}));return(t=c4(t=t.merge(e),r).style("opacity",1)).selectAll("rect").each(function(t){t=r.node(t);o4(K(this),t.style)}),t};let g4=function(t,i){var e=t.selectAll("g.edgeLabel").data(i.edges(),n4).classed("update",!0);return e.exit().remove(),e.enter().append("g").classed("edgeLabel",!0).style("opacity",0),(e=t.selectAll("g.edgeLabel")).each(function(t){var e=K(this),r=(e.select(".label").remove(),i.edge(t)),e=p4(e,i.edge(t),0).classed("label",!0),t=e.node().getBBox();r.labelId&&e.attr("id",r.labelId),pg(r,"width")||(r.width=t.width),pg(r,"height")||(r.height=t.height)}),c4(e.exit?e.exit():e.selectAll(null),i).style("opacity",0).remove(),e};function y4(t,e){return t.intersect(e)}var m4=function(t,n,e){var t=t.selectAll("g.edgePath").data(n.edges(),n4).classed("update",!0),r=function(t,i){t=t.enter().append("g").attr("class","edgePath").style("opacity",0);return t.append("path").attr("class","path").attr("d",function(t){var e=i.edge(t),r=i.node(t.v).elem;return b4(e,Ng(e.points.length).map(function(){return e=(t=r).getBBox(),{x:(t=t.ownerSVGElement.getScreenCTM().inverse().multiply(t.getScreenCTM()).translate(e.width/2,e.height/2)).e,y:t.f};var t,e}))}),t.append("defs"),t}(t,n),i=(i=n,c4(t.exit(),i).style("opacity",0).remove(),void 0!==t.merge?t.merge(r):t);return c4(i,n).style("opacity",1),i.each(function(t){var e=K(this),t=n.edge(t);t.elem=this,t.id&&e.attr("id",t.id),l4(e,t.class,(e.classed("update")?"update ":"")+"edgePath")}),i.selectAll("path.path").each(function(t){var r=n.edge(t),t=(r.arrowheadId=$g("arrowhead"),K(this).attr("marker-end",function(){return"url("+(t=location.href,e=r.arrowheadId,t.split("#")[0])+"#"+e+")";var t,e}).style("fill","none"));c4(t,n).attr("d",function(t){return t=t,r=(e=n).edge(t),i=e.node(t.v),e=e.node(t.w),(t=r.points.slice(1,r.points.length-1)).unshift(y4(i,t[0])),t.push(y4(e,t[t.length-1])),b4(r,t);var e,r,i}),o4(t,r.style)}),i.selectAll("defs *").remove(),i.selectAll("defs").each(function(t){t=n.edge(t);(0,e[t.arrowhead])(K(this),t.arrowheadId,t,"arrowhead")}),i};function b4(t,e){var r=(As||Ci.line)().x(function(t){return t.x}).y(function(t){return t.y});return(r.curve||r.interpolate)(t.curve),r(e)}var _4=function(t,a,s){var e=a.nodes().filter(function(t){return!i4(a,t)}),e=t.selectAll("g.node").data(e,function(t){return t}).classed("update",!0);return e.exit().remove(),e.enter().append("g").attr("class","node").style("opacity",0),(e=t.selectAll("g.node")).each(function(t){var t=a.node(t),e=K(this),r=(l4(e,t.class,(e.classed("update")?"update ":"")+"node"),e.select("g.label").remove(),e.append("g").attr("class","label")),i=p4(r,t),n=s[t.shape],i=Ag(i.node().getBBox(),"width","height"),e=(t.elem=this,t.id&&e.attr("id",t.id),t.labelId&&r.attr("id",t.labelId),pg(t,"width")&&(i.width=t.width),pg(t,"height")&&(i.height=t.height),i.width+=t.paddingLeft+t.paddingRight,i.height+=t.paddingTop+t.paddingBottom,r.attr("transform","translate("+(t.paddingLeft-t.paddingRight)/2+","+(t.paddingTop-t.paddingBottom)/2+")"),K(this)),r=(e.select(".label-container").remove(),n(e,i,t).classed("label-container",!0)),n=(o4(r,t.style),r.node().getBBox());t.width=n.width,t.height=n.height}),c4(e.exit?e.exit():e.selectAll(null),a).style("opacity",0).remove(),e};function x4(t,e,r,i){var n=t.x,t=t.y,a=n-i.x,s=t-i.y,o=Math.sqrt(e*e*s*s+r*r*a*a),a=Math.abs(e*r*a/o),e=(i.x<n&&(a=-a),Math.abs(e*r*s/o));return{x:n+a,y:t+(e=i.y<t?-e:e)}}function v4(t,e,i){var r=t.x,n=t.y,a=[],s=Number.POSITIVE_INFINITY,o=Number.POSITIVE_INFINITY;e.forEach(function(t){s=Math.min(s,t.x),o=Math.min(o,t.y)});for(var l=r-t.width/2-s,c=n-t.height/2-o,h=0;h<e.length;h++){var u=e[h],d=e[h<e.length-1?h+1:0],u=function(t,e,r,i){var n,a,s,o,l=e.y-t.y,c=t.x-e.x,h=e.x*t.y-t.x*e.y,u=l*r.x+c*r.y+h,d=l*i.x+c*i.y+h;if(!(0!=u&&0!=d&&0<u*d||(n=i.y-r.y,a=r.x-i.x,s=i.x*r.y-r.x*i.y,u=n*t.x+a*t.y+s,d=n*e.x+a*e.y+s,0!==u&&0!==d&&0<u*d)||0===(o=l*a-n*c)))return r=Math.abs(o/2),{x:(i=c*s-a*h)<0?(i-r)/o:(i+r)/o,y:(i=n*h-l*s)<0?(i-r)/o:(i+r)/o}}(t,i,{x:l+u.x,y:c+u.y},{x:l+d.x,y:c+d.y});u&&a.push(u)}return a.length?(1<a.length&&a.sort(function(t,e){var r=t.x-i.x,t=t.y-i.y,r=Math.sqrt(r*r+t*t),t=e.x-i.x,e=e.y-i.y,t=Math.sqrt(t*t+e*e);return r<t?-1:r===t?0:1}),a[0]):(console.log("NO INTERSECTION FOUND, RETURN NODE CENTER",t),t)}function k4(t,e){var r,i=t.x,n=t.y,a=e.x-i,e=e.y-n,s=t.width/2,t=t.height/2,t=Math.abs(e)*s>Math.abs(a)*t?(e<0&&(t=-t),r=0==e?0:t*a/e,t):(r=s=a<0?-s:s,0==a?0:s*e/a);return{x:i+r,y:n+t}}var w4={rect:function(t,e,r){t=t.insert("rect",":first-child").attr("rx",r.rx).attr("ry",r.ry).attr("x",-e.width/2).attr("y",-e.height/2).attr("width",e.width).attr("height",e.height);return r.intersect=function(t){return k4(r,t)},t},ellipse:function(t,e,r){var i=e.width/2,n=e.height/2,t=t.insert("ellipse",":first-child").attr("x",-e.width/2).attr("y",-e.height/2).attr("rx",i).attr("ry",n);return r.intersect=function(t){return x4(r,i,n,t)},t},circle:function(t,e,r){var i=Math.max(e.width,e.height)/2,t=t.insert("circle",":first-child").attr("x",-e.width/2).attr("y",-e.height/2).attr("r",i);return r.intersect=function(t){return x4(r,i,i,t)},t},diamond:function(t,e,r){var i=e.width*Math.SQRT2/2,e=e.height*Math.SQRT2/2,n=[{x:0,y:-e},{x:-i,y:0},{x:0,y:e},{x:i,y:0}],e=t.insert("polygon",":first-child").attr("points",n.map(function(t){return t.x+","+t.y}).join(" "));return r.intersect=function(t){return v4(r,n,t)},e}};function T4(){function e(t,e){(r=e).nodes().forEach(function(t){var e=r.node(t);pg(e,"label")||r.children(t).length||(e.label=t),pg(e,"paddingX")&&Gf(e,{paddingLeft:e.paddingX,paddingRight:e.paddingX}),pg(e,"paddingY")&&Gf(e,{paddingTop:e.paddingY,paddingBottom:e.paddingY}),pg(e,"padding")&&Gf(e,{paddingLeft:e.padding,paddingRight:e.padding,paddingTop:e.padding,paddingBottom:e.padding}),Gf(e,C4),g(["paddingLeft","paddingRight","paddingTop","paddingBottom"],function(t){e[t]=Number(e[t])}),pg(e,"width")&&(e._prevWidth=e.width),pg(e,"height")&&(e._prevHeight=e.height)}),r.edges().forEach(function(t){t=r.edge(t);pg(t,"label")||(t.label=""),Gf(t,E4)});var r,i,n,t=S4(t,"output"),a=S4(t,"clusters"),s=S4(t,"edgePaths"),o=g4(S4(t,"edgeLabels"),e),t=_4(S4(t,"nodes"),e,w4);function l(t){t=i.edge(t);return pg(t,"x")?"translate("+t.x+","+t.y+")":""}function c(t){t=n.node(t);return"translate("+t.x+","+t.y+")"}Iy(e),n=e,(t=t).filter(function(){return!K(this).classed("update")}).attr("transform",c),c4(t,n).style("opacity",1).attr("transform",c),i=e,(t=o).filter(function(){return!K(this).classed("update")}).attr("transform",l),c4(t,i).style("opacity",1).attr("transform",l),m4(s,e,h4);var h,u,o=f4(a,e);function d(t){t=u.node(t);return"translate("+t.x+","+t.y+")"}u=e,(s=(t=o).filter(function(){return!K(this).classed("update")})).attr("transform",d),c4(t,u).style("opacity",1).attr("transform",d),c4(s.selectAll("rect"),u).attr("width",function(t){return u.node(t).width}).attr("height",function(t){return u.node(t).height}).attr("x",function(t){return-u.node(t).width/2}).attr("y",function(t){return-u.node(t).height/2}),g((h=e).nodes(),function(t){t=h.node(t);pg(t,"_prevWidth")?t.width=t._prevWidth:delete t.width,pg(t,"_prevHeight")?t.height=t._prevHeight:delete t.height,delete t._prevWidth,delete t._prevHeight})}return e.createNodes=function(t){return arguments.length?(_4=t,e):_4},e.createClusters=function(t){return arguments.length?(f4=t,e):f4},e.createEdgeLabels=function(t){return arguments.length?(t=t,g4=t,e):g4},e.createEdgePaths=function(t){return arguments.length?(m4=t,e):m4},e.shapes=function(t){return arguments.length?(w4=t,e):w4},e.arrows=function(t){return arguments.length?(h4=t,e):h4},e}var C4={paddingLeft:10,paddingRight:10,paddingTop:10,paddingBottom:10,rx:0,ry:0,shape:"rect"},E4={arrowhead:"normal",curve:Cs};function S4(t,e){var r=t.select("g."+e);return r=r.empty()?t.append("g").attr("class",e):r}function A4(t,e,r){const i=e.width,n=e.height,a=.9*(i+n),s=[{x:a/2,y:0},{x:a,y:-a/2},{x:a/2,y:-a},{x:0,y:-a/2}],o=$4(t,a,a,s);return r.intersect=function(t){return v4(r,s,t)},o}function D4(t,e,r){const i=e.height,n=i/4,a=e.width+2*n,s=[{x:n,y:0},{x:a-n,y:0},{x:a,y:-i/2},{x:a-n,y:-i},{x:n,y:-i},{x:0,y:-i/2}],o=$4(t,a,i,s);return r.intersect=function(t){return v4(r,s,t)},o}function L4(t,e,r){const i=e.width,n=e.height,a=[{x:-n/2,y:0},{x:i,y:0},{x:i,y:-n},{x:-n/2,y:-n},{x:0,y:-n/2}],s=$4(t,i,n,a);return r.intersect=function(t){return v4(r,a,t)},s}function M4(t,e,r){const i=e.width,n=e.height,a=[{x:-2*n/6,y:0},{x:i-n/6,y:0},{x:i+2*n/6,y:-n},{x:n/6,y:-n}],s=$4(t,i,n,a);return r.intersect=function(t){return v4(r,a,t)},s}function N4(t,e,r){const i=e.width,n=e.height,a=[{x:2*n/6,y:0},{x:i+n/6,y:0},{x:i-2*n/6,y:-n},{x:-n/6,y:-n}],s=$4(t,i,n,a);return r.intersect=function(t){return v4(r,a,t)},s}function O4(t,e,r){const i=e.width,n=e.height,a=[{x:-2*n/6,y:0},{x:i+2*n/6,y:0},{x:i-n/6,y:-n},{x:n/6,y:-n}],s=$4(t,i,n,a);return r.intersect=function(t){return v4(r,a,t)},s}function B4(t,e,r){const i=e.width,n=e.height,a=[{x:n/6,y:0},{x:i-n/6,y:0},{x:i+2*n/6,y:-n},{x:-2*n/6,y:-n}],s=$4(t,i,n,a);return r.intersect=function(t){return v4(r,a,t)},s}function I4(t,e,r){const i=e.width,n=e.height,a=[{x:0,y:0},{x:i+n/2,y:0},{x:i,y:-n/2},{x:i+n/2,y:-n},{x:0,y:-n}],s=$4(t,i,n,a);return r.intersect=function(t){return v4(r,a,t)},s}function F4(t,e,r){var i=e.height,e=e.width+i/4,t=t.insert("rect",":first-child").attr("rx",i/2).attr("ry",i/2).attr("x",-e/2).attr("y",-i/2).attr("width",e).attr("height",i);return r.intersect=function(t){return k4(r,t)},t}function R4(t,e,r){const i=e.width,n=e.height,a=[{x:0,y:0},{x:i,y:0},{x:i,y:-n},{x:0,y:-n},{x:0,y:0},{x:-8,y:0},{x:i+8,y:0},{x:i+8,y:-n},{x:-8,y:-n},{x:-8,y:0}],s=$4(t,i,n,a);return r.intersect=function(t){return v4(r,a,t)},s}function P4(t,e,n){const r=e.width,a=r/2,s=a/(2.5+r/50),i=e.height+s,o="M 0,"+s+" a "+a+","+s+" 0,0,0 "+r+" 0 a "+a+","+s+" 0,0,0 "+-r+" 0 l 0,"+i+" a "+a+","+s+" 0,0,0 "+r+" 0 l 0,"+-i,l=t.attr("label-offset-y",s).insert("path",":first-child").attr("d",o).attr("transform","translate("+-r/2+","+-(i/2+s)+")");return n.intersect=function(e){var r=k4(n,e),i=r.x-n.x;if(0!=a&&(Math.abs(i)<n.width/2||Math.abs(i)==n.width/2&&Math.abs(r.y-n.y)>n.height/2-s)){let t=s*s*(1-i*i/(a*a));0!=t&&(t=Math.sqrt(t)),t=s-t,0<e.y-n.y&&(t=-t),r.y+=t}return r},l}function $4(t,e,r,i){return t.insert("polygon",":first-child").attr("points",i.map(function(t){return t.x+","+t.y}).join(" ")).attr("transform","translate("+-e/2+","+r/2+")")}function Y4(u,d,t,e,r,p){const f=e?e.select(`[id="${t}"]`):K(`[id="${t}"]`),g=r||document;Object.keys(u).forEach(function(t){t=u[t];let e="default";0<t.classes.length&&(e=t.classes.join(" "));var r=jh(t.styles);let i=void 0!==t.text?t.text:t.id,n;if(Ko(J().flowchart.htmlLabels)){var a={label:i.replace(/fa[blrs]?:fa-[\w-]+/g,t=>`<i class='${t.replace(":"," ")}'></i>`)};(n=u4(f,a).node()).parentNode.removeChild(n)}else{var s=g.createElementNS("http://www.w3.org/2000/svg","text"),a=(s.setAttribute("style",r.labelStyle.replace("color:","fill:")),i.split(tl.lineBreakRegex));for(const h of a){var o=g.createElementNS("http://www.w3.org/2000/svg","tspan");o.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve"),o.setAttribute("dy","1em"),o.setAttribute("x","1"),o.textContent=h,s.appendChild(o)}n=s}let l=0,c="";switch(t.type){case"round":l=5,c="rect";break;case"square":c="rect";break;case"diamond":c="question";break;case"hexagon":c="hexagon";break;case"odd":c="rect_left_inv_arrow";break;case"lean_right":c="lean_right";break;case"lean_left":c="lean_left";break;case"trapezoid":c="trapezoid";break;case"inv_trapezoid":c="inv_trapezoid";break;case"odd_right":c="rect_left_inv_arrow";break;case"circle":c="circle";break;case"ellipse":c="ellipse";break;case"stadium":c="stadium";break;case"subroutine":c="subroutine";break;case"cylinder":c="cylinder";break;default:c="rect"}S.warn("Adding node",t.id,t.domId),d.setNode(p.db.lookUpDomId(t.id),{labelType:"svg",labelStyle:r.labelStyle,shape:c,label:n,rx:l,ry:l,class:e,style:r.style,id:p.db.lookUpDomId(t.id)})})}function j4(l,c,h){let u=0,d,p;var t;void 0!==l.defaultStyle&&(t=jh(l.defaultStyle),d=t.style,p=t.labelStyle),l.forEach(function(t){u++;var e="L-"+t.start+"-"+t.end,r="LS-"+t.start,i="LE-"+t.end,n={};"arrow_open"===t.type?n.arrowhead="none":n.arrowhead="normal";let a="",s="";if(void 0!==t.style){var o=jh(t.style);a=o.style,s=o.labelStyle}else switch(t.stroke){case"normal":a="fill:none",void 0!==d&&(a=d),void 0!==p&&(s=p);break;case"dotted":a="fill:none;stroke-width:2px;stroke-dasharray:3;";break;case"thick":a=" stroke-width: 3.5px;fill:none"}n.style=a,n.labelStyle=s,void 0!==t.interpolate?n.curve=$h(t.interpolate,Cs):void 0!==l.defaultInterpolate?n.curve=$h(l.defaultInterpolate,Cs):n.curve=$h(H4.curve,Cs),void 0===t.text?void 0!==t.style&&(n.arrowheadStyle="fill: #333"):(n.arrowheadStyle="fill: #333",n.labelpos="c",Ko(J().flowchart.htmlLabels)?(n.labelType="html",n.label=`<span id="L-${e}" class="edgeLabel L-${r}' L-${i}" style="${n.labelStyle}">${t.text.replace(/fa[blrs]?:fa-[\w-]+/g,t=>`<i class='${t.replace(":"," ")}'></i>`)}</span>`):(n.labelType="text",n.label=t.text.replace(tl.lineBreakRegex,`
`),void 0===t.style&&(n.style=n.style||"stroke: #333; stroke-width: 1.5px;fill:none"),n.labelStyle=n.labelStyle.replace("color:","fill:"))),n.id=e,n.class=r+" "+i,n.minlen=t.length||1,c.setEdge(h.db.lookUpDomId(t.start),h.db.lookUpDomId(t.end),n,u)})}function z4(u,d,t,e,p,f){const g=e.select(`[id="${t}"]`);Object.keys(u).forEach(function(t){t=u[t];let e="default";0<t.classes.length&&(e=t.classes.join(" "));var r=jh(t.styles);let i=void 0!==t.text?t.text:t.id,n;if(Ko(J().flowchart.htmlLabels)){var a={label:i.replace(/fa[blrs]?:fa-[\w-]+/g,t=>`<i class='${t.replace(":"," ")}'></i>`)};(n=u4(g,a).node()).parentNode.removeChild(n)}else{var s=p.createElementNS("http://www.w3.org/2000/svg","text"),a=(s.setAttribute("style",r.labelStyle.replace("color:","fill:")),i.split(tl.lineBreakRegex));for(const h of a){var o=p.createElementNS("http://www.w3.org/2000/svg","tspan");o.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve"),o.setAttribute("dy","1em"),o.setAttribute("x","1"),o.textContent=h,s.appendChild(o)}n=s}let l=0,c="";switch(t.type){case"round":l=5,c="rect";break;case"square":c="rect";break;case"diamond":c="question";break;case"hexagon":c="hexagon";break;case"odd":c="rect_left_inv_arrow";break;case"lean_right":c="lean_right";break;case"lean_left":c="lean_left";break;case"trapezoid":c="trapezoid";break;case"inv_trapezoid":c="inv_trapezoid";break;case"odd_right":c="rect_left_inv_arrow";break;case"circle":c="circle";break;case"ellipse":c="ellipse";break;case"stadium":c="stadium";break;case"subroutine":c="subroutine";break;case"cylinder":c="cylinder";break;case"group":c="rect";break;case"doublecircle":c="doublecircle";break;default:c="rect"}d.setNode(t.id,{labelStyle:r.labelStyle,shape:c,labelText:i,rx:l,ry:l,class:e,style:r.style,id:t.id,link:t.link,linkTarget:t.linkTarget,tooltip:f.db.getTooltip(t.id)||"",domId:f.db.lookUpDomId(t.id),haveCallback:t.haveCallback,width:"group"===t.type?500:void 0,dir:t.dir,type:t.type,props:t.props,padding:J().flowchart.padding}),S.info("setNode",{labelStyle:r.labelStyle,shape:c,labelText:i,rx:l,ry:l,class:e,style:r.style,id:t.id,domId:f.db.lookUpDomId(t.id),width:"group"===t.type?500:void 0,type:t.type,dir:t.dir,props:t.props,padding:J().flowchart.padding})})}function U4(l,c,t){S.info("abc78 edges = ",l);let h=0,u={},d,p;var e;void 0!==l.defaultStyle&&(e=jh(l.defaultStyle),d=e.style,p=e.labelStyle),l.forEach(function(t){h++;var e,r="L-"+t.start+"-"+t.end,i=(void 0===u[r]?u[r]=0:u[r]++,S.info("abc78 new entry",r,u[r]),r+"-"+u[r]),r=(S.info("abc78 new link id to be used is",r,i,u[r]),"LS-"+t.start),n="LE-"+t.end,a={style:"",labelStyle:""};switch(a.minlen=t.length||1,"arrow_open"===t.type?a.arrowhead="none":a.arrowhead="normal",a.arrowTypeStart="arrow_open",a.arrowTypeEnd="arrow_open",t.type){case"double_arrow_cross":a.arrowTypeStart="arrow_cross";case"arrow_cross":a.arrowTypeEnd="arrow_cross";break;case"double_arrow_point":a.arrowTypeStart="arrow_point";case"arrow_point":a.arrowTypeEnd="arrow_point";break;case"double_arrow_circle":a.arrowTypeStart="arrow_circle";case"arrow_circle":a.arrowTypeEnd="arrow_circle"}let s="",o="";switch(t.stroke){case"normal":s="fill:none;",void 0!==d&&(s=d),void 0!==p&&(o=p),a.thickness="normal",a.pattern="solid";break;case"dotted":a.thickness="normal",a.pattern="dotted",a.style="fill:none;stroke-width:2px;stroke-dasharray:3;";break;case"thick":a.thickness="thick",a.pattern="solid",a.style="stroke-width: 3.5px;fill:none;"}void 0!==t.style&&(e=jh(t.style),s=e.style,o=e.labelStyle),a.style=a.style+=s,a.labelStyle=a.labelStyle+=o,void 0!==t.interpolate?a.curve=$h(t.interpolate,Cs):void 0!==l.defaultInterpolate?a.curve=$h(l.defaultInterpolate,Cs):a.curve=$h(V4.curve,Cs),void 0===t.text?void 0!==t.style&&(a.arrowheadStyle="fill: #333"):(a.arrowheadStyle="fill: #333",a.labelpos="c"),a.labelType="text",a.label=t.text.replace(tl.lineBreakRegex,`
`),void 0===t.style&&(a.style=a.style||"stroke: #333; stroke-width: 1.5px;fill:none;"),a.labelStyle=a.labelStyle.replace("color:","fill:"),a.id=i,a.classes="flowchart-link "+r+" "+n,c.setEdge(t.start,t.end,a,h)})}const W4={addToRender:function(t){t.shapes().question=A4,t.shapes().hexagon=D4,t.shapes().stadium=F4,t.shapes().subroutine=R4,t.shapes().cylinder=P4,t.shapes().rect_left_inv_arrow=L4,t.shapes().lean_right=M4,t.shapes().lean_left=N4,t.shapes().trapezoid=O4,t.shapes().inv_trapezoid=B4,t.shapes().rect_right_inv_arrow=I4},addToRenderV2:function(t){t({question:A4}),t({hexagon:D4}),t({stadium:F4}),t({subroutine:R4}),t({cylinder:P4}),t({rect_left_inv_arrow:L4}),t({lean_right:M4}),t({lean_left:N4}),t({trapezoid:O4}),t({inv_trapezoid:B4}),t({rect_right_inv_arrow:I4})}},H4={},q4={setConf:function(t){for(const e of Object.keys(t))H4[e]=t[e]},addVertices:Y4,addEdges:j4,getClasses:function(t,e){S.info("Extracting classes"),e.db.clear();try{return e.parse(t),e.db.getClasses()}catch(t){return S.error(t),{}}},draw:function(t,s,e,o){S.info("Drawing flowchart"),o.db.clear();const{securityLevel:l,flowchart:r}=J();let i;"sandbox"===l&&(i=K("#i"+s));const c=K("sandbox"===l?i.nodes()[0].contentDocument.body:"body"),h="sandbox"===l?i.nodes()[0].contentDocument:document;try{o.parser.parse(t)}catch{S.debug("Parsing failed")}let n=o.db.getDirection();void 0===n&&(n="TD");var t=r.nodeSpacing||50,a=r.rankSpacing||50,u=new jg({multigraph:!0,compound:!0}).setGraph({rankdir:n,nodesep:t,ranksep:a,marginx:8,marginy:8}).setDefaultEdgeLabel(function(){return{}});let d;var p=o.db.getSubGraphs();for(let t=p.length-1;0<=t;t--)d=p[t],o.db.addVertex(d.id,d.title,"group",void 0,d.classes);const f=o.db.getVertices();S.warn("Get vertices",f);t=o.db.getEdges();let g=0;for(g=p.length-1;0<=g;g--){d=p[g],he("cluster").append("text");for(let t=0;t<d.nodes.length;t++)S.warn("Setting subgraph",d.nodes[t],o.db.lookUpDomId(d.nodes[t]),o.db.lookUpDomId(d.id)),u.setParent(o.db.lookUpDomId(d.nodes[t]),o.db.lookUpDomId(d.id))}Y4(f,u,s,c,h,o),j4(t,u,o);var a=new T4,t=(W4.addToRender(a),a.arrows().none=function(t,e,r,i){o4(t.append("marker").attr("id",e).attr("viewBox","0 0 10 10").attr("refX",9).attr("refY",5).attr("markerUnits","strokeWidth").attr("markerWidth",8).attr("markerHeight",6).attr("orient","auto").append("path").attr("d","M 0 0 L 0 0 L 0 0 z"),r[i+"Style"])},a.arrows().normal=function(t,e){t.append("marker").attr("id",e).attr("viewBox","0 0 10 10").attr("refX",9).attr("refY",5).attr("markerUnits","strokeWidth").attr("markerWidth",8).attr("markerHeight",6).attr("orient","auto").append("path").attr("d","M 0 0 L 10 5 L 0 10 z").attr("class","arrowheadPath").style("stroke-width",1).style("stroke-dasharray","1,0")},c.select(`[id="${s}"]`)),y=c.select("#"+s+" g");for(a(y,u),y.selectAll("g.node").attr("title",function(){return o.db.getTooltip(this.id)}),o.db.indexNodes("subGraph"+g),g=0;g<p.length;g++)if("undefined"!==(d=p[g]).title){var m=h.querySelectorAll("#"+s+' [id="'+o.db.lookUpDomId(d.id)+'"] rect'),b=h.querySelectorAll("#"+s+' [id="'+o.db.lookUpDomId(d.id)+'"]'),_=m[0].x.baseVal.value,x=m[0].y.baseVal.value,m=m[0].width.baseVal.value,v=K(b[0]).select(".label");v.attr("transform",`translate(${_+m/2}, ${x+14})`),v.attr("id",s+"Text");for(let t=0;t<d.classes.length;t++)b[0].classList.add(d.classes[t])}if(!r.htmlLabels)for(const T of h.querySelectorAll('[id="'+s+'"] .edgeLabel .label')){var k=T.getBBox(),w=h.createElementNS("http://www.w3.org/2000/svg","rect");w.setAttribute("rx",0),w.setAttribute("ry",0),w.setAttribute("width",k.width),w.setAttribute("height",k.height),T.insertBefore(w,T.firstChild)}J1(u,t,r.diagramPadding,r.useMaxWidth),Object.keys(f).forEach(function(t){var e=f[t];if(e.link){t=c.select("#"+s+' [id="'+o.db.lookUpDomId(t)+'"]');if(t){const r=h.createElementNS("http://www.w3.org/2000/svg","a"),i=(r.setAttributeNS("http://www.w3.org/2000/svg","class",e.classes.join(" ")),r.setAttributeNS("http://www.w3.org/2000/svg","href",e.link),r.setAttributeNS("http://www.w3.org/2000/svg","rel","noopener"),"sandbox"===l?r.setAttributeNS("http://www.w3.org/2000/svg","target","_top"):e.linkTarget&&r.setAttributeNS("http://www.w3.org/2000/svg","target",e.linkTarget),t.insert(function(){return r},":first-child")),n=t.select(".label-container"),a=(n&&i.append(function(){return n.node()}),t.select(".label"));a&&i.append(function(){return a.node()})}}})}},V4={},G4={setConf:function(t){for(const e of Object.keys(t))V4[e]=t[e]},addVertices:z4,addEdges:U4,getClasses:function(t,e){S.info("Extracting classes"),e.db.clear();try{return e.parse(t),e.db.getClasses()}catch{}},draw:function(t,s,e,r){S.info("Drawing flowchart"),r.db.clear(),r4.setGen("gen-2"),r.parser.parse(t);let i=r.db.getDirection();void 0===i&&(i="TD");const{securityLevel:o,flowchart:n}=J(),a=n.nodeSpacing||50,l=n.rankSpacing||50;let c;"sandbox"===o&&(c=K("#i"+s));const h=K("sandbox"===o?c.nodes()[0].contentDocument.body:"body"),u="sandbox"===o?c.nodes()[0].contentDocument:document,d=new jg({multigraph:!0,compound:!0}).setGraph({rankdir:i,nodesep:a,ranksep:l,marginx:0,marginy:0}).setDefaultEdgeLabel(function(){return{}});let p;var f=r.db.getSubGraphs();S.info("Subgraphs - ",f);for(let t=f.length-1;0<=t;t--)p=f[t],S.info("Subgraph - ",p),r.db.addVertex(p.id,p.title,"group",void 0,p.classes,p.dir);const g=r.db.getVertices(),y=r.db.getEdges();S.info(y);let m=0;for(m=f.length-1;0<=m;m--){p=f[m],he("cluster").append("text");for(let t=0;t<p.nodes.length;t++)S.info("Setting up subgraphs",p.nodes[t],p.id),d.setParent(p.nodes[t],p.id)}z4(g,d,s,h,u,r),U4(y,d);var t=h.select(`[id="${s}"]`),b=h.select("#"+s+" g");if(Qm(b,d,["point","circle","cross"],"flowchart",s),t1.insertTitle(t,"flowchartTitleText",n.titleTopMargin,r.db.getDiagramTitle()),J1(d,t,n.diagramPadding,n.useMaxWidth),r.db.indexNodes("subGraph"+m),!n.htmlLabels)for(const v of u.querySelectorAll('[id="'+s+'"] .edgeLabel .label')){var _=v.getBBox(),x=u.createElementNS("http://www.w3.org/2000/svg","rect");x.setAttribute("rx",0),x.setAttribute("ry",0),x.setAttribute("width",_.width),x.setAttribute("height",_.height),v.insertBefore(x,v.firstChild)}Object.keys(g).forEach(function(t){var e=g[t];if(e.link){t=K("#"+s+' [id="'+t+'"]');if(t){const r=u.createElementNS("http://www.w3.org/2000/svg","a"),i=(r.setAttributeNS("http://www.w3.org/2000/svg","class",e.classes.join(" ")),r.setAttributeNS("http://www.w3.org/2000/svg","href",e.link),r.setAttributeNS("http://www.w3.org/2000/svg","rel","noopener"),"sandbox"===o?r.setAttributeNS("http://www.w3.org/2000/svg","target","_top"):e.linkTarget&&r.setAttributeNS("http://www.w3.org/2000/svg","target",e.linkTarget),t.insert(function(){return r},":first-child")),n=t.select(".label-container"),a=(n&&i.append(function(){return n.node()}),t.select(".label"));a&&i.append(function(){return a.node()})}}})}};Kb=[1,15],Jb=[1,16],t_=[1,17],e_=[1,18],kp=[1,19],r_=[1,20],i_=[1,21],Tp=[1,22],Ob=[1,23],ef=[1,24],Bb=[1,25],Ib=[1,26],Fb=[1,27],n_=[1,29],f6=[1,31],g6=[1,34],Rp=[5,7,9,11,12,13,14,15,16,17,18,19,20,21,23,25,26,28,35,40],(qd={trace:function(){},yy:{},symbols_:{error:2,start:3,directive:4,gantt:5,document:6,EOF:7,line:8,SPACE:9,statement:10,NL:11,dateFormat:12,inclusiveEndDates:13,topAxis:14,axisFormat:15,tickInterval:16,excludes:17,includes:18,todayMarker:19,title:20,acc_title:21,acc_title_value:22,acc_descr:23,acc_descr_value:24,acc_descr_multiline_value:25,section:26,clickStatement:27,taskTxt:28,taskData:29,openDirective:30,typeDirective:31,closeDirective:32,":":33,argDirective:34,click:35,callbackname:36,callbackargs:37,href:38,clickStatementDebug:39,open_directive:40,type_directive:41,arg_directive:42,close_directive:43,$accept:0,$end:1},terminals_:{2:"error",5:"gantt",7:"EOF",9:"SPACE",11:"NL",12:"dateFormat",13:"inclusiveEndDates",14:"topAxis",15:"axisFormat",16:"tickInterval",17:"excludes",18:"includes",19:"todayMarker",20:"title",21:"acc_title",22:"acc_title_value",23:"acc_descr",24:"acc_descr_value",25:"acc_descr_multiline_value",26:"section",28:"taskTxt",29:"taskData",33:":",35:"click",36:"callbackname",37:"callbackargs",38:"href",40:"open_directive",41:"type_directive",42:"arg_directive",43:"close_directive"},productions_:[0,[3,2],[3,3],[6,0],[6,2],[8,2],[8,1],[8,1],[8,1],[10,1],[10,1],[10,1],[10,1],[10,1],[10,1],[10,1],[10,1],[10,1],[10,2],[10,2],[10,1],[10,1],[10,1],[10,2],[10,1],[4,4],[4,6],[27,2],[27,3],[27,3],[27,4],[27,3],[27,4],[27,2],[39,2],[39,3],[39,3],[39,4],[39,3],[39,4],[39,2],[30,1],[31,1],[34,1],[32,1]],performAction:function(t,e,r,i,n,a,s){var o=a.length-1;switch(n){case 2:return a[o-1];case 3:this.$=[];break;case 4:a[o-1].push(a[o]),this.$=a[o-1];break;case 5:case 6:this.$=a[o];break;case 7:case 8:this.$=[];break;case 9:i.setDateFormat(a[o].substr(11)),this.$=a[o].substr(11);break;case 10:i.enableInclusiveEndDates(),this.$=a[o].substr(18);break;case 11:i.TopAxis(),this.$=a[o].substr(8);break;case 12:i.setAxisFormat(a[o].substr(11)),this.$=a[o].substr(11);break;case 13:i.setTickInterval(a[o].substr(13)),this.$=a[o].substr(13);break;case 14:i.setExcludes(a[o].substr(9)),this.$=a[o].substr(9);break;case 15:i.setIncludes(a[o].substr(9)),this.$=a[o].substr(9);break;case 16:i.setTodayMarker(a[o].substr(12)),this.$=a[o].substr(12);break;case 17:i.setDiagramTitle(a[o].substr(6)),this.$=a[o].substr(6);break;case 18:this.$=a[o].trim(),i.setAccTitle(this.$);break;case 19:case 20:this.$=a[o].trim(),i.setAccDescription(this.$);break;case 21:i.addSection(a[o].substr(8)),this.$=a[o].substr(8);break;case 23:i.addTask(a[o-1],a[o]),this.$="task";break;case 27:this.$=a[o-1],i.setClickEvent(a[o-1],a[o],null);break;case 28:this.$=a[o-2],i.setClickEvent(a[o-2],a[o-1],a[o]);break;case 29:this.$=a[o-2],i.setClickEvent(a[o-2],a[o-1],null),i.setLink(a[o-2],a[o]);break;case 30:this.$=a[o-3],i.setClickEvent(a[o-3],a[o-2],a[o-1]),i.setLink(a[o-3],a[o]);break;case 31:this.$=a[o-2],i.setClickEvent(a[o-2],a[o],null),i.setLink(a[o-2],a[o-1]);break;case 32:this.$=a[o-3],i.setClickEvent(a[o-3],a[o-1],a[o]),i.setLink(a[o-3],a[o-2]);break;case 33:this.$=a[o-1],i.setLink(a[o-1],a[o]);break;case 34:case 40:this.$=a[o-1]+" "+a[o];break;case 35:case 36:case 38:this.$=a[o-2]+" "+a[o-1]+" "+a[o];break;case 37:case 39:this.$=a[o-3]+" "+a[o-2]+" "+a[o-1]+" "+a[o];break;case 41:i.parseDirective("%%{","open_directive");break;case 42:i.parseDirective(a[o],"type_directive");break;case 43:a[o]=a[o].trim().replace(/'/g,'"'),i.parseDirective(a[o],"arg_directive");break;case 44:i.parseDirective("}%%","close_directive","gantt")}},table:[{3:1,4:2,5:qd=[1,3],30:4,40:Xp=[1,5]},{1:[3]},{3:6,4:2,5:qd,30:4,40:Xp},Z4(y6=[7,9,11,12,13,14,15,16,17,18,19,20,21,23,25,26,28,35,40],[2,3],{6:7}),{31:8,41:[1,9]},{41:[2,41]},{1:[2,1]},{4:30,7:[1,10],8:11,9:[1,12],10:13,11:[1,14],12:Kb,13:Jb,14:t_,15:e_,16:kp,17:r_,18:i_,19:Tp,20:Ob,21:ef,23:Bb,25:Ib,26:Fb,27:28,28:n_,30:4,35:f6,40:Xp},{32:32,33:[1,33],43:g6},Z4([33,43],[2,42]),Z4(y6,[2,8],{1:[2,2]}),Z4(y6,[2,4]),{4:30,10:35,12:Kb,13:Jb,14:t_,15:e_,16:kp,17:r_,18:i_,19:Tp,20:Ob,21:ef,23:Bb,25:Ib,26:Fb,27:28,28:n_,30:4,35:f6,40:Xp},Z4(y6,[2,6]),Z4(y6,[2,7]),Z4(y6,[2,9]),Z4(y6,[2,10]),Z4(y6,[2,11]),Z4(y6,[2,12]),Z4(y6,[2,13]),Z4(y6,[2,14]),Z4(y6,[2,15]),Z4(y6,[2,16]),Z4(y6,[2,17]),{22:[1,36]},{24:[1,37]},Z4(y6,[2,20]),Z4(y6,[2,21]),Z4(y6,[2,22]),{29:[1,38]},Z4(y6,[2,24]),{36:[1,39],38:[1,40]},{11:[1,41]},{34:42,42:[1,43]},{11:[2,44]},Z4(y6,[2,5]),Z4(y6,[2,18]),Z4(y6,[2,19]),Z4(y6,[2,23]),Z4(y6,[2,27],{37:[1,44],38:[1,45]}),Z4(y6,[2,33],{36:[1,46]}),Z4(Rp,[2,25]),{32:47,43:g6},{43:[2,43]},Z4(y6,[2,28],{38:[1,48]}),Z4(y6,[2,29]),Z4(y6,[2,31],{37:[1,49]}),{11:[1,50]},Z4(y6,[2,30]),Z4(y6,[2,32]),Z4(Rp,[2,26])],defaultActions:{5:[2,41],6:[2,1],34:[2,44],43:[2,43]},parseError:function(t,e){var r;if(!e.recoverable)throw(r=new Error(t)).hash=e,r;this.trace(t)},parse:function(t){var e,r=this,i=[0],n=[],a=[null],s=[],o=this.table,l="",c=0,h=0,u=1,d=s.slice.call(arguments,1),p=Object.create(this.lexer),f={yy:{}};for(e in this.yy)Object.prototype.hasOwnProperty.call(this.yy,e)&&(f.yy[e]=this.yy[e]);p.setInput(t,f.yy),f.yy.lexer=p,f.yy.parser=this,"u"<typeof p.yylloc&&(p.yylloc={});var g=p.yylloc,y=(s.push(g),p.options&&p.options.ranges);"function"==typeof f.yy.parseError?this.parseError=f.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;for(var m,b,_,x,v,k,w={};;){if(b=i[i.length-1],"u"<typeof(_=this.defaultActions[b]||((null===m||"u"<typeof m)&&(T=void 0,"number"!=typeof(T=n.pop()||p.lex()||u)&&(T instanceof Array&&(T=(n=T).pop()),T=r.symbols_[T]||T),m=T),o[b]&&o[b][m]))||!_.length||!_[0]){var T="",C=[];for(x in o[b])this.terminals_[x]&&2<x&&C.push("'"+this.terminals_[x]+"'");T=p.showPosition?"Parse error on line "+(c+1)+`:
`+p.showPosition()+`
Expecting `+C.join(", ")+", got '"+(this.terminals_[m]||m)+"'":"Parse error on line "+(c+1)+": Unexpected "+(m==u?"end of input":"'"+(this.terminals_[m]||m)+"'"),this.parseError(T,{text:p.match,token:this.terminals_[m]||m,line:p.yylineno,loc:g,expected:C})}if(_[0]instanceof Array&&1<_.length)throw new Error("Parse Error: multiple actions possible at state: "+b+", token: "+m);switch(_[0]){case 1:i.push(m),a.push(p.yytext),s.push(p.yylloc),i.push(_[1]),m=null,h=p.yyleng,l=p.yytext,c=p.yylineno,g=p.yylloc;break;case 2:if(v=this.productions_[_[1]][1],w.$=a[a.length-v],w._$={first_line:s[s.length-(v||1)].first_line,last_line:s[s.length-1].last_line,first_column:s[s.length-(v||1)].first_column,last_column:s[s.length-1].last_column},y&&(w._$.range=[s[s.length-(v||1)].range[0],s[s.length-1].range[1]]),typeof(k=this.performAction.apply(w,[l,h,c,f.yy,_[1],a,s].concat(d)))<"u")return k;v&&(i=i.slice(0,-1*v*2),a=a.slice(0,-1*v),s=s.slice(0,-1*v)),i.push(this.productions_[_[1]][0]),a.push(w.$),s.push(w._$),k=o[i[i.length-2]][i[i.length-1]],i.push(k);break;case 3:return!0}}return!0}}).lexer={EOF:1,parseError:function(t,e){if(!this.yy.parser)throw new Error(t);this.yy.parser.parseError(t,e)},setInput:function(t,e){return this.yy=e||this.yy||{},this._input=t,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var t=this._input[0];return this.yytext+=t,this.yyleng++,this.offset++,this.match+=t,this.matched+=t,t.match(/(?:\r\n?|\n).*/g)?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),t},unput:function(t){var e=t.length,r=t.split(/(?:\r\n?|\n)/g),t=(this._input=t+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-e),this.offset-=e,this.match.split(/(?:\r\n?|\n)/g)),i=(this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),r.length-1&&(this.yylineno-=r.length-1),this.yylloc.range);return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:r?(r.length===t.length?this.yylloc.first_column:0)+t[t.length-r.length].length-r[0].length:this.yylloc.first_column-e},this.options.ranges&&(this.yylloc.range=[i[0],i[0]+this.yyleng-e]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){return this.options.backtrack_lexer?(this._backtrack=!0,this):this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},less:function(t){this.unput(this.match.slice(t))},pastInput:function(){var t=this.matched.substr(0,this.matched.length-this.match.length);return(20<t.length?"...":"")+t.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var t=this.match;return t.length<20&&(t+=this._input.substr(0,20-t.length)),(t.substr(0,20)+(20<t.length?"...":"")).replace(/\n/g,"")},showPosition:function(){var t=this.pastInput(),e=new Array(t.length+1).join("-");return t+this.upcomingInput()+`
`+e+"^"},test_match:function(t,e){var r,i;if(this.options.backtrack_lexer&&(i={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges)&&(i.yylloc.range=this.yylloc.range.slice(0)),(r=t[0].match(/(?:\r\n?|\n).*/g))&&(this.yylineno+=r.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:r?r[r.length-1].length-r[r.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+t[0].length},this.yytext+=t[0],this.match+=t[0],this.matches=t,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(t[0].length),this.matched+=t[0],r=this.performAction.call(this,this.yy,this,e,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),r)return r;if(this._backtrack)for(var n in i)this[n]=i[n];return!1},next:function(){if(this.done)return this.EOF;var t,e,r,i;this._input||(this.done=!0),this._more||(this.yytext="",this.match="");for(var n=this._currentRules(),a=0;a<n.length;a++)if((r=this._input.match(this.rules[n[a]]))&&(!e||r[0].length>e[0].length)){if(e=r,i=a,this.options.backtrack_lexer){if(!1!==(t=this.test_match(r,n[a])))return t;if(this._backtrack){e=!1;continue}return!1}if(!this.options.flex)break}return e?!1!==(t=this.test_match(e,n[i]))&&t:""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){return this.next()||this.lex()},begin:function(t){this.conditionStack.push(t)},popState:function(){return 0<this.conditionStack.length-1?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return(this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]]:this.conditions.INITIAL).rules},topState:function(t){return 0<=(t=this.conditionStack.length-1-Math.abs(t||0))?this.conditionStack[t]:"INITIAL"},pushState:function(t){this.begin(t)},stateStackSize:function(){return this.conditionStack.length},options:{"case-insensitive":!0},performAction:function(t,e,r,i){switch(r){case 0:return this.begin("open_directive"),40;case 1:return this.begin("type_directive"),41;case 2:return this.popState(),this.begin("arg_directive"),33;case 3:return this.popState(),this.popState(),43;case 4:return 42;case 5:return this.begin("acc_title"),21;case 6:return this.popState(),"acc_title_value";case 7:return this.begin("acc_descr"),23;case 8:return this.popState(),"acc_descr_value";case 9:this.begin("acc_descr_multiline");break;case 10:this.popState();break;case 11:return"acc_descr_multiline_value";case 12:case 13:case 14:break;case 15:return 11;case 16:case 17:case 18:break;case 19:this.begin("href");break;case 20:this.popState();break;case 21:return 38;case 22:this.begin("callbackname");break;case 23:this.popState();break;case 24:this.popState(),this.begin("callbackargs");break;case 25:return 36;case 26:this.popState();break;case 27:return 37;case 28:this.begin("click");break;case 29:this.popState();break;case 30:return 35;case 31:return 5;case 32:return 12;case 33:return 13;case 34:return 14;case 35:return 15;case 36:return 16;case 37:return 18;case 38:return 17;case 39:return 19;case 40:return"date";case 41:return 20;case 42:return"accDescription";case 43:return 26;case 44:return 28;case 45:return 29;case 46:return 33;case 47:return 7;case 48:return"INVALID"}},rules:[/^(?:%%\{)/i,/^(?:((?:(?!\}%%)[^:.])*))/i,/^(?::)/i,/^(?:\}%%)/i,/^(?:((?:(?!\}%%).|\n)*))/i,/^(?:accTitle\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*\{\s*)/i,/^(?:[\}])/i,/^(?:[^\}]*)/i,/^(?:%%(?!\{)*[^\n]*)/i,/^(?:[^\}]%%*[^\n]*)/i,/^(?:%%*[^\n]*[\n]*)/i,/^(?:[\n]+)/i,/^(?:\s+)/i,/^(?:#[^\n]*)/i,/^(?:%[^\n]*)/i,/^(?:href[\s]+["])/i,/^(?:["])/i,/^(?:[^"]*)/i,/^(?:call[\s]+)/i,/^(?:\([\s]*\))/i,/^(?:\()/i,/^(?:[^(]*)/i,/^(?:\))/i,/^(?:[^)]*)/i,/^(?:click[\s]+)/i,/^(?:[\s\n])/i,/^(?:[^\s\n]*)/i,/^(?:gantt\b)/i,/^(?:dateFormat\s[^#\n;]+)/i,/^(?:inclusiveEndDates\b)/i,/^(?:topAxis\b)/i,/^(?:axisFormat\s[^#\n;]+)/i,/^(?:tickInterval\s[^#\n;]+)/i,/^(?:includes\s[^#\n;]+)/i,/^(?:excludes\s[^#\n;]+)/i,/^(?:todayMarker\s[^\n;]+)/i,/^(?:\d\d\d\d-\d\d-\d\d\b)/i,/^(?:title\s[^#\n;]+)/i,/^(?:accDescription\s[^#\n;]+)/i,/^(?:section\s[^#:\n;]+)/i,/^(?:[^#:\n;]+)/i,/^(?::[^#\n;]+)/i,/^(?::)/i,/^(?:$)/i,/^(?:.)/i],conditions:{acc_descr_multiline:{rules:[10,11],inclusive:!1},acc_descr:{rules:[8],inclusive:!1},acc_title:{rules:[6],inclusive:!1},close_directive:{rules:[],inclusive:!1},arg_directive:{rules:[3,4],inclusive:!1},type_directive:{rules:[2,3],inclusive:!1},open_directive:{rules:[1],inclusive:!1},callbackargs:{rules:[26,27],inclusive:!1},callbackname:{rules:[23,24,25],inclusive:!1},href:{rules:[20,21],inclusive:!1},click:{rules:[29,30],inclusive:!1},INITIAL:{rules:[0,5,7,9,12,13,14,15,16,17,18,19,22,28,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48],inclusive:!0}}};var X4=new((Q4.prototype=qd).Parser=Q4);function Z4(t,e,r,i){for(r=r||{},i=t.length;i--;r[t[i]]=e);return r}function Q4(){this.yy={}}const K4=X4.parser=X4,J4=t=>null!==t.match(/^\s*gantt/);let t5="",e5="",r5,i5="",n5=[],a5=[],s5={},o5=[],l5=[],c5="";const h5=["active","done","crit","milestone"];let u5=[],d5=!1,p5=!1,f5=0;function g5(t){return null!==(t=/^(\d+(?:\.\d+)?)([Mdhmswy]|ms)$/.exec(t.trim()))?tt.duration(Number.parseFloat(t[1]),t[2]):tt.duration.invalid()}const y5=function(t,e,r,i){return!i.includes(t.format(e.trim()))&&(!!(6<=t.isoWeekday()&&r.includes("weekends")||r.includes(t.format("dddd").toLowerCase()))||r.includes(t.format(e.trim())))},m5=function(t,e,r,i){var n;r.length&&!t.manualEndTime&&((n=tt(t.startTime,e,!0)).add(1,"d"),e=function(t,e,r,i,n){let a=!1,s=null;for(;t<=e;)a||(s=e.toDate()),(a=y5(t,r,i,n))&&e.add(1,"d"),t.add(1,"d");return s}(n,n=tt(t.endTime,e,!0),e,r,i),t.endTime=n.toDate(),t.renderEndTime=e)},b5=function(t,e,r){r=r.trim();var i=/^after\s+([\d\w- ]+)/.exec(r.trim());if(null!==i){let e=null;return(i[1].split(" ").forEach(function(t){t=D5(t);void 0!==t&&(!e||t.endTime>e.endTime)&&(e=t)}),e)?e.endTime:((i=new Date).setHours(0,0,0,0),i)}i=tt(r,e.trim(),!0);if(i.isValid())return i.toDate();S.debug("Invalid date:"+r),S.debug("With date format:"+e.trim());i=new Date(r);if(void 0===i||isNaN(i.getTime()))throw new Error("Invalid date:"+r);return i},_5=function(t,e,r,i=!1){r=r.trim();var e=tt(r,e.trim(),!0);return(e.isValid()?(i&&e.add(1,"d"),e):(i=tt(t),(e=g5(r)).isValid()&&i.add(e),i)).toDate()};let x5=0;const v5=function(t){return void 0===t?"task"+(x5+=1):t};let k5,w5,T5=[];function C5(){var t,e;let r=!0;for([t,e]of T5.entries()){{i=void 0;n=void 0;a=void 0;var i=t;var n=T5[i];switch(T5[i].raw.startTime.type){case"prevTaskEnd":var a=D5(n.prevTaskId);n.startTime=a.endTime;break;case"getStartDate":(a=b5(void 0,t5,T5[i].raw.startTime.startData))&&(T5[i].startTime=a)}T5[i].startTime&&(T5[i].endTime=_5(T5[i].startTime,t5,T5[i].raw.endTime.data,d5),T5[i].endTime)&&(T5[i].processed=!0,T5[i].manualEndTime=tt(T5[i].raw.endTime.data,"YYYY-MM-DD",!0).isValid(),m5(T5[i],t5,a5,n5)),T5[i].processed}r=r&&e.processed}return r}function E5(t,e){t.split(",").forEach(function(t){t=D5(t);void 0!==t&&t.classes.push(e)})}function S5(e,r){u5.push(function(){var t=document.querySelector(`[id="${e}"]`);null!==t&&t.addEventListener("click",function(){r()})},function(){var t=document.querySelector(`[id="${e}-text"]`);null!==t&&t.addEventListener("click",function(){r()})})}const A5={},D5=function(t){t=A5[t];return T5[t]},L5={parseDirective:function(t,e,r){Jv.parseDirective(this,t,e,r)},getConfig:()=>J().gantt,clear:function(){o5=[],l5=[],c5="",u5=[],x5=0,k5=void 0,w5=void 0,T5=[],t5="",e5="",r5=void 0,i5="",n5=[],a5=[],d5=!1,p5=!1,f5=0,s5={},Bu()},setDateFormat:function(t){t5=t},getDateFormat:function(){return t5},enableInclusiveEndDates:function(){d5=!0},endDatesAreInclusive:function(){return d5},enableTopAxis:function(){p5=!0},topAxisEnabled:function(){return p5},setAxisFormat:function(t){e5=t},getAxisFormat:function(){return e5},setTickInterval:function(t){r5=t},getTickInterval:function(){return r5},setTodayMarker:function(t){i5=t},getTodayMarker:function(){return i5},setAccTitle:Iu,getAccTitle:Fu,setDiagramTitle:$u,getDiagramTitle:Yu,setAccDescription:Ru,getAccDescription:Pu,addSection:function(t){c5=t,o5.push(t)},getSections:function(){return o5},getTasks:function(){let t=C5();let e=0;for(;!t&&e<10;)t=C5(),e++;return l5=T5},addTask:function(t,e){t={section:c5,type:c5,processed:!1,manualEndTime:!1,renderEndTime:null,raw:{data:e},task:t,classes:[]},e=function(t,e){let r;var i=(r=":"===e.substr(0,1)?e.substr(1,e.length):e).split(","),n={};M5(i,n,h5);for(let t=0;t<i.length;t++)i[t]=i[t].trim();switch(i.length){case 1:n.id=v5(),n.startTime={type:"prevTaskEnd",id:t},n.endTime={data:i[0]};break;case 2:n.id=v5(),n.startTime={type:"getStartDate",startData:i[0]},n.endTime={data:i[1]};break;case 3:n.id=v5(i[0]),n.startTime={type:"getStartDate",startData:i[1]},n.endTime={data:i[2]}}return n}(w5,e),t.raw.startTime=e.startTime,t.raw.endTime=e.endTime,t.id=e.id,t.prevTaskId=w5,t.active=e.active,t.done=e.done,t.crit=e.crit,t.milestone=e.milestone,t.order=f5,f5++,e=T5.push(t);w5=t.id,A5[t.id]=e-1},findTaskById:D5,addTaskOrg:function(t,e){t={section:c5,type:c5,description:t,task:t,classes:[]},e=function(t,e){let r;var i=(r=":"===e.substr(0,1)?e.substr(1,e.length):e).split(","),n={};M5(i,n,h5);for(let t=0;t<i.length;t++)i[t]=i[t].trim();let a="";switch(i.length){case 1:n.id=v5(),n.startTime=t.endTime,a=i[0];break;case 2:n.id=v5(),n.startTime=b5(void 0,t5,i[0]),a=i[1];break;case 3:n.id=v5(i[0]),n.startTime=b5(void 0,t5,i[1]),a=i[2]}return a&&(n.endTime=_5(n.startTime,t5,a,d5),n.manualEndTime=tt(a,"YYYY-MM-DD",!0).isValid(),m5(n,t5,a5,n5)),n}(k5,e);t.startTime=e.startTime,t.endTime=e.endTime,t.id=e.id,t.active=e.active,t.done=e.done,t.crit=e.crit,t.milestone=e.milestone,k5=t,l5.push(t)},setIncludes:function(t){n5=t.toLowerCase().split(/[\s,]+/)},getIncludes:function(){return n5},setExcludes:function(t){a5=t.toLowerCase().split(/[\s,]+/)},getExcludes:function(){return a5},setClickEvent:function(t,r,n){t.split(",").forEach(function(t){var e=r,i=n;if("loose"===J().securityLevel&&void 0!==e){let r=[];if("string"==typeof i){r=i.split(/,(?=(?:(?:[^"]*"){2})*[^"]*$)/);for(let e=0;e<r.length;e++){let t=r[e].trim();'"'===t.charAt(0)&&'"'===t.charAt(t.length-1)&&(t=t.substr(1,t.length-2)),r[e]=t}}0===r.length&&r.push(t),void 0!==D5(t)&&S5(t,()=>{t1.runFunc(e,...r)})}}),E5(t,"clickable")},setLink:function(t,e){let r=e;"loose"!==J().securityLevel&&(r=Y(e)),t.split(",").forEach(function(t){void 0!==D5(t)&&(S5(t,()=>{window.open(r,"_self")}),s5[t]=r)}),E5(t,"clickable")},getLinks:function(){return s5},bindFunctions:function(e){u5.forEach(function(t){t(e)})},parseDuration:g5,isInvalidDate:y5};function M5(r,i,t){let n=!0;for(;n;)n=!1,t.forEach(function(t){var e=new RegExp("^\\s*"+t+"\\s*$");r[0].match(e)&&(i[t]=!0,r.shift(1),n=!0)})}let N5;const O5={setConf:function(){S.debug("Something is calling, setConf, remove the call")},draw:function(F,t,R,r){const c=J().gantt,e=J().securityLevel;let i;"sandbox"===e&&(i=K("#i"+t));const P=K("sandbox"===e?i.nodes()[0].contentDocument.body:"body"),s="sandbox"===e?i.nodes()[0].contentDocument:document,n=s.getElementById(t);void 0===(N5=n.parentElement.offsetWidth)&&(N5=1200),void 0!==c.useWidth&&(N5=c.useWidth);var a=r.db.getTasks(),o=a.length*(c.barHeight+c.barGap)+2*c.topPadding;n.setAttribute("viewBox","0 0 "+N5+" "+o);const l=P.select(`[id="${t}"]`),h=function(){return Yi.apply(rs(Ln,Mn,xn,_n,yn,fn,pn,dn,un,Fn).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}().domain([function(e,r){let i;if(void 0===r)for(const t of e)null!=t&&(i>t||void 0===i&&t>=t)&&(i=t);else{let t=-1;for(var n of e)null!=(n=r(n,++t,e))&&(i>n||void 0===i&&n>=n)&&(i=n)}return i}(a,function(t){return t.startTime}),function(e,r){let i;if(void 0===r)for(const t of e)null!=t&&(i<t||void 0===i&&t>=t)&&(i=t);else{let t=-1;for(var n of e)null!=(n=r(n,++t,e))&&(i<n||void 0===i&&n>=n)&&(i=n)}return i}(a,function(t){return t.endTime})]).rangeRound([0,N5-c.leftPadding-c.rightPadding]);let u=[];for(const Q of a)u.push(Q.type);const $=u;u=function(r){var i={},n=[];for(let t=0,e=r.length;t<e;++t)Object.prototype.hasOwnProperty.call(i,r[t])||(i[r[t]]=!0,n.push(r[t]));return n}(u),a.sort(function(t,e){t=t.startTime,e=e.startTime;let r=0;return e<t?r=1:t<e&&(r=-1),r});var Y=N5,d=o,p=c.barHeight,f=p+c.barGap,g=c.topPadding,y=c.leftPadding,j=(function t(){var e=Zi();return e.copy=function(){return Gi(e,t())},Yi.apply(e,arguments),Ki(e)}().domain([0,u.length]).range(["#00B9FA","#F95002"]).interpolate(Cr),f),m=g,z=y,U=d,b=a,W=r.db.getExcludes(),H=r.db.getIncludes(),_=b.reduce((t,{startTime:e})=>t?Math.min(t,e):e,0),q=b.reduce((t,{endTime:e})=>t?Math.max(t,e):e,0),V=r.db.getDateFormat();if(_&&q){var G=[];let t=null,e=tt(_);for(;e.valueOf()<=q;)r.db.isInvalidDate(e,V,W,H)?t?t.end=e.clone():t={start:e.clone(),end:e.clone()}:t&&(G.push(t),t=null),e.add(1,"d");l.append("g").selectAll("rect").data(G).enter().append("rect").attr("id",function(t){return"exclude-"+t.start.format("YYYY-MM-DD")}).attr("x",function(t){return h(t.start)+z}).attr("y",c.gridLineStartPadding).attr("width",function(t){var e=t.end.clone().add(1,"day");return h(e)-h(t.start)}).attr("height",U-m-c.gridLineStartPadding).attr("transform-origin",function(t,e){return(h(t.start)+z+.5*(h(t.end)-h(t.start))).toString()+"px "+(e*j+.5*U).toString()+"px"}).attr("class","exclude-range")}var b=y,_=g,m=d,x=function(t){return mt(ct,t)}(h).tickSize(-m+_+c.gridLineStartPadding).tickFormat(Fn(r.db.getAxisFormat()||c.axisFormat||"%Y-%m-%d")),v=/^([1-9]\d*)(minute|hour|day|week|month)$/.exec(r.db.getTickInterval()||c.tickInterval);if(null!==v){var k=v[1];switch(v[2]){case"minute":x.ticks(dn.every(k));break;case"hour":x.ticks(pn.every(k));break;case"day":x.ticks(fn.every(k));break;case"week":x.ticks(yn.every(k));break;case"month":x.ticks(_n.every(k))}}if(l.append("g").attr("class","grid").attr("transform","translate("+b+", "+(m-50)+")").call(x).selectAll("text").style("text-anchor","middle").attr("fill","#000").attr("stroke","none").attr("font-size",10).attr("dy","1em"),r.db.topAxisEnabled()||c.topAxis){var w=function(t){return mt(ot,t)}(h).tickSize(-m+_+c.gridLineStartPadding).tickFormat(Fn(r.db.getAxisFormat()||c.axisFormat||"%Y-%m-%d"));if(null!==v){var T=v[1];switch(v[2]){case"minute":w.ticks(dn.every(T));break;case"hour":w.ticks(pn.every(T));break;case"day":w.ticks(fn.every(T));break;case"week":w.ticks(yn.every(T));break;case"month":w.ticks(_n.every(T))}}l.append("g").attr("class","grid").attr("transform","translate("+b+", "+_+")").call(w).selectAll("text").style("text-anchor","middle").attr("fill","#000").attr("stroke","none").attr("font-size",10)}{m=a;var C=f,E=g,S=y,A=p,D=Y;l.append("g").selectAll("rect").data(m).enter().append("rect").attr("x",0).attr("y",function(t,e){return t.order*C+E-2}).attr("width",function(){return D-c.rightPadding/2}).attr("height",C).attr("class",function(t){for(var[e,r]of u.entries())if(t.type===r)return"section section"+e%c.numberSectionStyles;return"section section0"});const N=l.append("g").selectAll("rect").data(m).enter(),O=r.db.getLinks();if(N.append("rect").attr("id",function(t){return t.id}).attr("rx",3).attr("ry",3).attr("x",function(t){return t.milestone?h(t.startTime)+S+.5*(h(t.endTime)-h(t.startTime))-.5*A:h(t.startTime)+S}).attr("y",function(t,e){return t.order*C+E}).attr("width",function(t){return t.milestone?A:h(t.renderEndTime||t.endTime)-h(t.startTime)}).attr("height",A).attr("transform-origin",function(t,e){return e=t.order,(h(t.startTime)+S+.5*(h(t.endTime)-h(t.startTime))).toString()+"px "+(e*C+E+.5*A).toString()+"px"}).attr("class",function(t){var e,r;let i="",n=(0<t.classes.length&&(i=t.classes.join(" ")),0);for([e,r]of u.entries())t.type===r&&(n=e%c.numberSectionStyles);let a="";return t.active?t.crit?a+=" activeCrit":a=" active":t.done?a=t.crit?" doneCrit":" done":t.crit&&(a+=" crit"),0===a.length&&(a=" task"),t.milestone&&(a=" milestone "+a),"task"+(a=(a+=n)+(" "+i))}),N.append("text").attr("id",function(t){return t.id+"-text"}).text(function(t){return t.task}).attr("font-size",c.fontSize).attr("x",function(t){let e=h(t.startTime),r=h(t.renderEndTime||t.endTime);t.milestone&&(e+=.5*(h(t.endTime)-h(t.startTime))-.5*A),t.milestone&&(r=e+A);t=this.getBBox().width;return t>r-e?r+t+1.5*c.leftPadding>D?e+S-5:r+S+5:(r-e)/2+e+S}).attr("y",function(t,e){return t.order*C+c.barHeight/2+(c.fontSize/2-2)+E}).attr("text-height",A).attr("class",function(t){var e=h(t.startTime);let r=h(t.endTime);t.milestone&&(r=e+A);var i,n,a=this.getBBox().width;let s="",o=(0<t.classes.length&&(s=t.classes.join(" ")),0);for([i,n]of u.entries())t.type===n&&(o=i%c.numberSectionStyles);let l="";return t.active&&(l=t.crit?"activeCritText"+o:"activeText"+o),t.done?l=t.crit?l+" doneCritText"+o:l+" doneText"+o:t.crit&&(l=l+" critText"+o),t.milestone&&(l+=" milestoneText"),a>r-e?r+a+1.5*c.leftPadding>D?s+" taskTextOutsideLeft taskTextOutside"+o+" "+l:s+" taskTextOutsideRight taskTextOutside"+o+" "+l+" width-"+a:s+" taskText taskText"+o+" "+l+" width-"+a}),"sandbox"===J().securityLevel){const B=K("#i"+t).nodes()[0].contentDocument;N.filter(function(t){return void 0!==O[t.id]}).each(function(t){var e=B.querySelector("#"+t.id),r=B.querySelector("#"+t.id+"-text"),i=e.parentNode,n=B.createElement("a");n.setAttribute("xlink:href",O[t.id]),n.setAttribute("target","_top"),i.appendChild(n),n.appendChild(e),n.appendChild(r)})}}{var L=f,X=g,Z,M;const I=[];let i=0;for([Z,M]of u.entries())I[Z]=[M,function(t,e){return function(t){let e=t.length;var r={};for(;e;)r[t[--e]]=(r[t[e]]||0)+1;return r}(e)[t]||0}(M,$)];l.append("g").selectAll("text").data(I).enter().append(function(t){var e,r,t=t[0].split(tl.lineBreakRegex),i=-(t.length-1)/2,n=s.createElementNS("http://www.w3.org/2000/svg","text");n.setAttribute("dy",i+"em");for([e,r]of t.entries()){var a=s.createElementNS("http://www.w3.org/2000/svg","tspan");a.setAttribute("alignment-baseline","central"),a.setAttribute("x","10"),0<e&&a.setAttribute("dy","1em"),a.textContent=r,n.appendChild(a)}return n}).attr("x",10).attr("y",function(e,r){if(!(0<r))return e[1]*L/2+X;{let t=0;if(t<r)return i+=I[r-1][1],e[1]*L/2+i*L+X}}).attr("font-size",c.sectionFontSize).attr("font-size",c.sectionFontSize).attr("class",function(t){for(var[e,r]of u.entries())if(t[0]===r)return"sectionTitle sectionTitle"+e%c.numberSectionStyles;return"sectionTitle"})}v=y,b=d,_=r.db.getTodayMarker();"off"!==_&&(a=l.append("g").attr("class","today"),p=new Date,(a=a.append("line")).attr("x1",h(p)+v).attr("x2",h(p)+v).attr("y1",c.titleTopMargin).attr("y2",b-c.titleTopMargin).attr("class","today"),""!==_)&&a.attr("style",_.replace(/,/g,";")),K1(l,o,N5,c.useMaxWidth),l.append("text").text(r.db.getDiagramTitle()).attr("x",N5/2).attr("y",c.titleTopMargin).attr("class","titleText")}};(m6={trace:function(){},yy:{},symbols_:{error:2,start:3,info:4,document:5,EOF:6,line:7,statement:8,NL:9,showInfo:10,$accept:0,$end:1},terminals_:{2:"error",4:"info",6:"EOF",9:"NL",10:"showInfo"},productions_:[0,[3,3],[5,0],[5,2],[7,1],[7,1],[8,1]],performAction:function(t,e,r,i,n,a,s){switch(a.length,n){case 1:return i;case 4:break;case 6:i.setInfo(!0)}},table:[{3:1,4:[1,2]},{1:[3]},I5(m6=[6,9,10],[2,2],{5:3}),{6:[1,4],7:5,8:6,9:[1,7],10:[1,8]},{1:[2,1]},I5(m6,[2,3]),I5(m6,[2,4]),I5(m6,[2,5]),I5(m6,[2,6])],defaultActions:{4:[2,1]},parseError:function(t,e){var r;if(!e.recoverable)throw(r=new Error(t)).hash=e,r;this.trace(t)},parse:function(t){var e,r=this,i=[0],n=[],a=[null],s=[],o=this.table,l="",c=0,h=0,u=1,d=s.slice.call(arguments,1),p=Object.create(this.lexer),f={yy:{}};for(e in this.yy)Object.prototype.hasOwnProperty.call(this.yy,e)&&(f.yy[e]=this.yy[e]);p.setInput(t,f.yy),f.yy.lexer=p,f.yy.parser=this,"u"<typeof p.yylloc&&(p.yylloc={});var g=p.yylloc,y=(s.push(g),p.options&&p.options.ranges);"function"==typeof f.yy.parseError?this.parseError=f.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;for(var m,b,_,x,v,k,w={};;){if(b=i[i.length-1],"u"<typeof(_=this.defaultActions[b]||((null===m||"u"<typeof m)&&(T=void 0,"number"!=typeof(T=n.pop()||p.lex()||u)&&(T instanceof Array&&(T=(n=T).pop()),T=r.symbols_[T]||T),m=T),o[b]&&o[b][m]))||!_.length||!_[0]){var T="",C=[];for(x in o[b])this.terminals_[x]&&2<x&&C.push("'"+this.terminals_[x]+"'");T=p.showPosition?"Parse error on line "+(c+1)+`:
`+p.showPosition()+`
Expecting `+C.join(", ")+", got '"+(this.terminals_[m]||m)+"'":"Parse error on line "+(c+1)+": Unexpected "+(m==u?"end of input":"'"+(this.terminals_[m]||m)+"'"),this.parseError(T,{text:p.match,token:this.terminals_[m]||m,line:p.yylineno,loc:g,expected:C})}if(_[0]instanceof Array&&1<_.length)throw new Error("Parse Error: multiple actions possible at state: "+b+", token: "+m);switch(_[0]){case 1:i.push(m),a.push(p.yytext),s.push(p.yylloc),i.push(_[1]),m=null,h=p.yyleng,l=p.yytext,c=p.yylineno,g=p.yylloc;break;case 2:if(v=this.productions_[_[1]][1],w.$=a[a.length-v],w._$={first_line:s[s.length-(v||1)].first_line,last_line:s[s.length-1].last_line,first_column:s[s.length-(v||1)].first_column,last_column:s[s.length-1].last_column},y&&(w._$.range=[s[s.length-(v||1)].range[0],s[s.length-1].range[1]]),typeof(k=this.performAction.apply(w,[l,h,c,f.yy,_[1],a,s].concat(d)))<"u")return k;v&&(i=i.slice(0,-1*v*2),a=a.slice(0,-1*v),s=s.slice(0,-1*v)),i.push(this.productions_[_[1]][0]),a.push(w.$),s.push(w._$),k=o[i[i.length-2]][i[i.length-1]],i.push(k);break;case 3:return!0}}return!0}}).lexer={EOF:1,parseError:function(t,e){if(!this.yy.parser)throw new Error(t);this.yy.parser.parseError(t,e)},setInput:function(t,e){return this.yy=e||this.yy||{},this._input=t,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var t=this._input[0];return this.yytext+=t,this.yyleng++,this.offset++,this.match+=t,this.matched+=t,t.match(/(?:\r\n?|\n).*/g)?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),t},unput:function(t){var e=t.length,r=t.split(/(?:\r\n?|\n)/g),t=(this._input=t+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-e),this.offset-=e,this.match.split(/(?:\r\n?|\n)/g)),i=(this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),r.length-1&&(this.yylineno-=r.length-1),this.yylloc.range);return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:r?(r.length===t.length?this.yylloc.first_column:0)+t[t.length-r.length].length-r[0].length:this.yylloc.first_column-e},this.options.ranges&&(this.yylloc.range=[i[0],i[0]+this.yyleng-e]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){return this.options.backtrack_lexer?(this._backtrack=!0,this):this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},less:function(t){this.unput(this.match.slice(t))},pastInput:function(){var t=this.matched.substr(0,this.matched.length-this.match.length);return(20<t.length?"...":"")+t.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var t=this.match;return t.length<20&&(t+=this._input.substr(0,20-t.length)),(t.substr(0,20)+(20<t.length?"...":"")).replace(/\n/g,"")},showPosition:function(){var t=this.pastInput(),e=new Array(t.length+1).join("-");return t+this.upcomingInput()+`
`+e+"^"},test_match:function(t,e){var r,i;if(this.options.backtrack_lexer&&(i={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges)&&(i.yylloc.range=this.yylloc.range.slice(0)),(r=t[0].match(/(?:\r\n?|\n).*/g))&&(this.yylineno+=r.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:r?r[r.length-1].length-r[r.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+t[0].length},this.yytext+=t[0],this.match+=t[0],this.matches=t,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(t[0].length),this.matched+=t[0],r=this.performAction.call(this,this.yy,this,e,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),r)return r;if(this._backtrack)for(var n in i)this[n]=i[n];return!1},next:function(){if(this.done)return this.EOF;var t,e,r,i;this._input||(this.done=!0),this._more||(this.yytext="",this.match="");for(var n=this._currentRules(),a=0;a<n.length;a++)if((r=this._input.match(this.rules[n[a]]))&&(!e||r[0].length>e[0].length)){if(e=r,i=a,this.options.backtrack_lexer){if(!1!==(t=this.test_match(r,n[a])))return t;if(this._backtrack){e=!1;continue}return!1}if(!this.options.flex)break}return e?!1!==(t=this.test_match(e,n[i]))&&t:""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){return this.next()||this.lex()},begin:function(t){this.conditionStack.push(t)},popState:function(){return 0<this.conditionStack.length-1?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return(this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]]:this.conditions.INITIAL).rules},topState:function(t){return 0<=(t=this.conditionStack.length-1-Math.abs(t||0))?this.conditionStack[t]:"INITIAL"},pushState:function(t){this.begin(t)},stateStackSize:function(){return this.conditionStack.length},options:{"case-insensitive":!0},performAction:function(t,e,r,i){switch(r){case 0:return 4;case 1:return 9;case 2:return"space";case 3:return 10;case 4:return 6;case 5:return"TXT"}},rules:[/^(?:info\b)/i,/^(?:[\s\n\r]+)/i,/^(?:[\s]+)/i,/^(?:showInfo\b)/i,/^(?:$)/i,/^(?:.)/i],conditions:{INITIAL:{rules:[0,1,2,3,4,5],inclusive:!0}}};var B5=new((F5.prototype=m6).Parser=F5);function I5(t,e,r,i){for(r=r||{},i=t.length;i--;r[t[i]]=e);return r}function F5(){this.yy={}}const R5=B5.parser=B5;var P5="",$5=!1;const Y5={setMessage:t=>{S.debug("Setting message to: "+t),P5=t},getMessage:()=>P5,setInfo:t=>{$5=t},getInfo:()=>$5,clear:Bu},j5={draw:(e,r,i)=>{try{S.debug(`Rendering info diagram
`+e);var n=J().securityLevel;let t;"sandbox"===n&&(t=K("#i"+r));var a=K("sandbox"===n?t.nodes()[0].contentDocument.body:"body").select("#"+r);a.append("g").append("text").attr("x",100).attr("y",40).attr("class","version").attr("font-size","32px").style("text-anchor","middle").text("v "+i),a.attr("height",100),a.attr("width",400)}catch(t){S.error("Error while rendering info diagram"),S.error(t.message)}}},z5=t=>null!==t.match(/^\s*info/);b6=[1,6,11,13,15,17,19,20,26,27,28,29],C=[26,27,28],_f=[2,8],w6=[1,18],e=[1,19],x=[1,20],a=[1,21],w=[1,22],T=[1,23],u=[1,28],o=[6,26,27,28,29],(r={trace:function(){},yy:{},symbols_:{error:2,start:3,eol:4,directive:5,PIE:6,document:7,showData:8,line:9,statement:10,txt:11,value:12,title:13,title_value:14,acc_title:15,acc_title_value:16,acc_descr:17,acc_descr_value:18,acc_descr_multiline_value:19,section:20,openDirective:21,typeDirective:22,closeDirective:23,":":24,argDirective:25,NEWLINE:26,";":27,EOF:28,open_directive:29,type_directive:30,arg_directive:31,close_directive:32,$accept:0,$end:1},terminals_:{2:"error",6:"PIE",8:"showData",11:"txt",12:"value",13:"title",14:"title_value",15:"acc_title",16:"acc_title_value",17:"acc_descr",18:"acc_descr_value",19:"acc_descr_multiline_value",20:"section",24:":",26:"NEWLINE",27:";",28:"EOF",29:"open_directive",30:"type_directive",31:"arg_directive",32:"close_directive"},productions_:[0,[3,2],[3,2],[3,2],[3,3],[7,0],[7,2],[9,2],[10,0],[10,2],[10,2],[10,2],[10,2],[10,1],[10,1],[10,1],[5,3],[5,5],[4,1],[4,1],[4,1],[21,1],[22,1],[25,1],[23,1]],performAction:function(t,e,r,i,n,a,s){var o=a.length-1;switch(n){case 4:i.setShowData(!0);break;case 7:this.$=a[o-1];break;case 9:i.addSection(a[o-1],i.cleanupValue(a[o]));break;case 10:this.$=a[o].trim(),i.setDiagramTitle(this.$);break;case 11:this.$=a[o].trim(),i.setAccTitle(this.$);break;case 12:case 13:this.$=a[o].trim(),i.setAccDescription(this.$);break;case 14:i.addSection(a[o].substr(8)),this.$=a[o].substr(8);break;case 21:i.parseDirective("%%{","open_directive");break;case 22:i.parseDirective(a[o],"type_directive");break;case 23:a[o]=a[o].trim().replace(/'/g,'"'),i.parseDirective(a[o],"arg_directive");break;case 24:i.parseDirective("}%%","close_directive","pie")}},table:[{3:1,4:2,5:3,6:r=[1,4],21:8,26:x6=[1,5],27:v6=[1,6],28:k6=[1,7],29:T6=[1,9]},{1:[3]},{3:10,4:2,5:3,6:r,21:8,26:x6,27:v6,28:k6,29:T6},{3:11,4:2,5:3,6:r,21:8,26:x6,27:v6,28:k6,29:T6},W5(C6=[1,11,13,15,17,19,20,26,27,28,29],_6=[2,5],{7:12,8:[1,13]}),W5(b6,[2,18]),W5(b6,[2,19]),W5(b6,[2,20]),{22:14,30:[1,15]},{30:[2,21]},{1:[2,1]},{1:[2,2]},W5(C,_f,{21:8,9:16,10:17,5:24,1:[2,3],11:w6,13:e,15:x,17:a,19:w,20:T,29:T6}),W5(C6,_6,{7:25}),{23:26,24:[1,27],32:u},W5([24,32],[2,22]),W5(C6,[2,6]),{4:29,26:x6,27:v6,28:k6},{12:[1,30]},{14:[1,31]},{16:[1,32]},{18:[1,33]},W5(C,[2,13]),W5(C,[2,14]),W5(C,[2,15]),W5(C,_f,{21:8,9:16,10:17,5:24,1:[2,4],11:w6,13:e,15:x,17:a,19:w,20:T,29:T6}),W5(o,[2,16]),{25:34,31:[1,35]},W5(o,[2,24]),W5(C6,[2,7]),W5(C,[2,9]),W5(C,[2,10]),W5(C,[2,11]),W5(C,[2,12]),{23:36,32:u},{32:[2,23]},W5(o,[2,17])],defaultActions:{9:[2,21],10:[2,1],11:[2,2],35:[2,23]},parseError:function(t,e){var r;if(!e.recoverable)throw(r=new Error(t)).hash=e,r;this.trace(t)},parse:function(t){var e,r=this,i=[0],n=[],a=[null],s=[],o=this.table,l="",c=0,h=0,u=1,d=s.slice.call(arguments,1),p=Object.create(this.lexer),f={yy:{}};for(e in this.yy)Object.prototype.hasOwnProperty.call(this.yy,e)&&(f.yy[e]=this.yy[e]);p.setInput(t,f.yy),f.yy.lexer=p,f.yy.parser=this,"u"<typeof p.yylloc&&(p.yylloc={});var g=p.yylloc,y=(s.push(g),p.options&&p.options.ranges);"function"==typeof f.yy.parseError?this.parseError=f.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;for(var m,b,_,x,v,k,w={};;){if(b=i[i.length-1],"u"<typeof(_=this.defaultActions[b]||((null===m||"u"<typeof m)&&(T=void 0,"number"!=typeof(T=n.pop()||p.lex()||u)&&(T instanceof Array&&(T=(n=T).pop()),T=r.symbols_[T]||T),m=T),o[b]&&o[b][m]))||!_.length||!_[0]){var T="",C=[];for(x in o[b])this.terminals_[x]&&2<x&&C.push("'"+this.terminals_[x]+"'");T=p.showPosition?"Parse error on line "+(c+1)+`:
`+p.showPosition()+`
Expecting `+C.join(", ")+", got '"+(this.terminals_[m]||m)+"'":"Parse error on line "+(c+1)+": Unexpected "+(m==u?"end of input":"'"+(this.terminals_[m]||m)+"'"),this.parseError(T,{text:p.match,token:this.terminals_[m]||m,line:p.yylineno,loc:g,expected:C})}if(_[0]instanceof Array&&1<_.length)throw new Error("Parse Error: multiple actions possible at state: "+b+", token: "+m);switch(_[0]){case 1:i.push(m),a.push(p.yytext),s.push(p.yylloc),i.push(_[1]),m=null,h=p.yyleng,l=p.yytext,c=p.yylineno,g=p.yylloc;break;case 2:if(v=this.productions_[_[1]][1],w.$=a[a.length-v],w._$={first_line:s[s.length-(v||1)].first_line,last_line:s[s.length-1].last_line,first_column:s[s.length-(v||1)].first_column,last_column:s[s.length-1].last_column},y&&(w._$.range=[s[s.length-(v||1)].range[0],s[s.length-1].range[1]]),typeof(k=this.performAction.apply(w,[l,h,c,f.yy,_[1],a,s].concat(d)))<"u")return k;v&&(i=i.slice(0,-1*v*2),a=a.slice(0,-1*v),s=s.slice(0,-1*v)),i.push(this.productions_[_[1]][0]),a.push(w.$),s.push(w._$),k=o[i[i.length-2]][i[i.length-1]],i.push(k);break;case 3:return!0}}return!0}}).lexer={EOF:1,parseError:function(t,e){if(!this.yy.parser)throw new Error(t);this.yy.parser.parseError(t,e)},setInput:function(t,e){return this.yy=e||this.yy||{},this._input=t,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var t=this._input[0];return this.yytext+=t,this.yyleng++,this.offset++,this.match+=t,this.matched+=t,t.match(/(?:\r\n?|\n).*/g)?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),t},unput:function(t){var e=t.length,r=t.split(/(?:\r\n?|\n)/g),t=(this._input=t+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-e),this.offset-=e,this.match.split(/(?:\r\n?|\n)/g)),i=(this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),r.length-1&&(this.yylineno-=r.length-1),this.yylloc.range);return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:r?(r.length===t.length?this.yylloc.first_column:0)+t[t.length-r.length].length-r[0].length:this.yylloc.first_column-e},this.options.ranges&&(this.yylloc.range=[i[0],i[0]+this.yyleng-e]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){return this.options.backtrack_lexer?(this._backtrack=!0,this):this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},less:function(t){this.unput(this.match.slice(t))},pastInput:function(){var t=this.matched.substr(0,this.matched.length-this.match.length);return(20<t.length?"...":"")+t.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var t=this.match;return t.length<20&&(t+=this._input.substr(0,20-t.length)),(t.substr(0,20)+(20<t.length?"...":"")).replace(/\n/g,"")},showPosition:function(){var t=this.pastInput(),e=new Array(t.length+1).join("-");return t+this.upcomingInput()+`
`+e+"^"},test_match:function(t,e){var r,i;if(this.options.backtrack_lexer&&(i={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges)&&(i.yylloc.range=this.yylloc.range.slice(0)),(r=t[0].match(/(?:\r\n?|\n).*/g))&&(this.yylineno+=r.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:r?r[r.length-1].length-r[r.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+t[0].length},this.yytext+=t[0],this.match+=t[0],this.matches=t,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(t[0].length),this.matched+=t[0],r=this.performAction.call(this,this.yy,this,e,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),r)return r;if(this._backtrack)for(var n in i)this[n]=i[n];return!1},next:function(){if(this.done)return this.EOF;var t,e,r,i;this._input||(this.done=!0),this._more||(this.yytext="",this.match="");for(var n=this._currentRules(),a=0;a<n.length;a++)if((r=this._input.match(this.rules[n[a]]))&&(!e||r[0].length>e[0].length)){if(e=r,i=a,this.options.backtrack_lexer){if(!1!==(t=this.test_match(r,n[a])))return t;if(this._backtrack){e=!1;continue}return!1}if(!this.options.flex)break}return e?!1!==(t=this.test_match(e,n[i]))&&t:""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){return this.next()||this.lex()},begin:function(t){this.conditionStack.push(t)},popState:function(){return 0<this.conditionStack.length-1?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return(this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]]:this.conditions.INITIAL).rules},topState:function(t){return 0<=(t=this.conditionStack.length-1-Math.abs(t||0))?this.conditionStack[t]:"INITIAL"},pushState:function(t){this.begin(t)},stateStackSize:function(){return this.conditionStack.length},options:{"case-insensitive":!0},performAction:function(t,e,r,i){switch(r){case 0:return this.begin("open_directive"),29;case 1:return this.begin("type_directive"),30;case 2:return this.popState(),this.begin("arg_directive"),24;case 3:return this.popState(),this.popState(),32;case 4:return 31;case 5:case 6:break;case 7:return 26;case 8:case 9:break;case 10:return this.begin("title"),13;case 11:return this.popState(),"title_value";case 12:return this.begin("acc_title"),15;case 13:return this.popState(),"acc_title_value";case 14:return this.begin("acc_descr"),17;case 15:return this.popState(),"acc_descr_value";case 16:this.begin("acc_descr_multiline");break;case 17:this.popState();break;case 18:return"acc_descr_multiline_value";case 19:this.begin("string");break;case 20:this.popState();break;case 21:return"txt";case 22:return 6;case 23:return 8;case 24:return"value";case 25:return 28}},rules:[/^(?:%%\{)/i,/^(?:((?:(?!\}%%)[^:.])*))/i,/^(?::)/i,/^(?:\}%%)/i,/^(?:((?:(?!\}%%).|\n)*))/i,/^(?:%%(?!\{)[^\n]*)/i,/^(?:[^\}]%%[^\n]*)/i,/^(?:[\n\r]+)/i,/^(?:%%[^\n]*)/i,/^(?:[\s]+)/i,/^(?:title\b)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accTitle\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*\{\s*)/i,/^(?:[\}])/i,/^(?:[^\}]*)/i,/^(?:["])/i,/^(?:["])/i,/^(?:[^"]*)/i,/^(?:pie\b)/i,/^(?:showData\b)/i,/^(?::[\s]*[\d]+(?:\.[\d]+)?)/i,/^(?:$)/i],conditions:{acc_descr_multiline:{rules:[17,18],inclusive:!1},acc_descr:{rules:[15],inclusive:!1},acc_title:{rules:[13],inclusive:!1},close_directive:{rules:[],inclusive:!1},arg_directive:{rules:[3,4],inclusive:!1},type_directive:{rules:[2,3],inclusive:!1},open_directive:{rules:[1],inclusive:!1},title:{rules:[11],inclusive:!1},string:{rules:[20,21],inclusive:!1},INITIAL:{rules:[0,5,6,7,8,9,10,12,14,16,19,22,23,24,25],inclusive:!0}}};var U5=new((H5.prototype=r).Parser=H5);function W5(t,e,r,i){for(r=r||{},i=t.length;i--;r[t[i]]=e);return r}function H5(){this.yy={}}const q5=U5.parser=U5,V5=t=>null!==t.match(/^\s*pie/)||null!==t.match(/^\s*bar/);let G5={},X5=!1;const Z5={parseDirective:function(t,e,r){Jv.parseDirective(this,t,e,r)},getConfig:()=>J().pie,addSection:function(t,e){t=tl.sanitizeText(t,J()),void 0===G5[t]&&(G5[t]=e,S.debug("Added new section :",t))},getSections:()=>G5,cleanupValue:function(t){return":"===t.substring(0,1)&&(t=t.substring(1).trim()),Number(t.trim())},clear:function(){G5={},X5=!1,Bu()},setAccTitle:Iu,getAccTitle:Fu,setDiagramTitle:$u,getDiagramTitle:Yu,setShowData:function(t){X5=t},getShowData:function(){return X5},getAccDescription:Pu,setAccDescription:Ru};J();let Q5,K5;const J5={draw:(e,r,t,i)=>{try{Q5=J(),S.debug(`Rendering info diagram
`+e);var n=J().securityLevel;let t;"sandbox"===n&&(t=K("#i"+r));var a=K("sandbox"===n?t.nodes()[0].contentDocument.body:"body"),s="sandbox"===n?t.nodes()[0].contentDocument:document,o=(i.db.clear(),i.parser.parse(e),S.debug("Parsed info diagram"),s.getElementById(r)),l=(void 0===(K5=o.parentElement.offsetWidth)&&(K5=1200),void 0!==Q5.useWidth&&(K5=Q5.useWidth),void 0!==Q5.pie.useWidth&&(K5=Q5.pie.useWidth),a.select("#"+r)),c=(K1(l,450,K5,Q5.pie.useMaxWidth),o.setAttribute("viewBox","0 0 "+K5+" 450"),Math.min(K5,450)/2-40),h=l.append("g").attr("transform","translate("+K5/2+",225)"),u=i.db.getSections(),d=0,p=(Object.keys(u).forEach(function(t){d+=u[t]}),Q5.themeVariables),f=[p.pie1,p.pie2,p.pie3,p.pie4,p.pie5,p.pie6,p.pie7,p.pie8,p.pie9,p.pie10,p.pie11,p.pie12],g=function t(){var r=new Z,i=[],n=[],a=ji;function s(t){let e=r.get(t);if(void 0===e){if(a!==ji)return a;r.set(t,e=i.push(t)-1)}return n[e%n.length]}return s.domain=function(t){if(!arguments.length)return i.slice();i=[],r=new Z;for(const e of t)r.has(e)||r.set(e,i.push(e)-1);return s},s.range=function(t){return arguments.length?(n=Array.from(t),s):n.slice()},s.unknown=function(t){return arguments.length?(a=t,s):a},s.copy=function(){return t(i,n).unknown(a)},Yi.apply(s,arguments),s}().range(f),y=Object.entries(u).map(function(t,e){return{order:e,name:t[0],value:t[1]}});v=Ls,k=Ds,w=null,T=is(0),C=is(fs),E=is(0),x.value=function(t){return arguments.length?(v="function"==typeof t?t:is(+t),x):v},x.sortValues=function(t){return arguments.length?(k=t,w=null,x):k},x.sort=function(t){return arguments.length?(w=t,k=null,x):w},x.startAngle=function(t){return arguments.length?(T="function"==typeof t?t:is(+t),x):T},x.endAngle=function(t){return arguments.length?(C="function"==typeof t?t:is(+t),x):C},x.padAngle=function(t){return arguments.length?(E="function"==typeof t?t:is(+t),x):E};var m=x.value(function(t){return t.value}).sort(function(t,e){return t.order-e.order})(y),b=ks().innerRadius(0).outerRadius(c),_=(h.selectAll("mySlices").data(m).enter().append("path").attr("d",b).attr("fill",function(t){return g(t.data.name)}).attr("class","pieCircle"),h.selectAll("mySlices").data(m).enter().append("text").text(function(t){return(t.data.value/d*100).toFixed(0)+"%"}).attr("transform",function(t){return"translate("+b.centroid(t)+")"}).style("text-anchor","middle").attr("class","slice"),h.append("text").text(i.db.getDiagramTitle()).attr("x",0).attr("y",-200).attr("class","pieTitleText"),h.selectAll(".legend").data(g.domain()).enter().append("g").attr("class","legend").attr("transform",function(t,e){return"translate(216,"+(22*e-22*g.domain().length/2)+")"}));_.append("rect").attr("width",18).attr("height",18).style("fill",g).style("stroke",g),_.data(m).append("text").attr("x",22).attr("y",14).text(function(t){return i.db.getShowData()||Q5.showData||Q5.pie.showData?t.data.name+" ["+t.data.value+"]":t.data.name})}catch(t){S.error("Error while rendering info diagram"),S.error(t)}function x(r){for(var t,e,i,n=(r=ws(r)).length,a=0,s=new Array(n),o=new Array(n),l=+T.apply(this,arguments),c=Math.min(fs,Math.max(-fs,C.apply(this,arguments)-l)),h=Math.min(Math.abs(c)/n,E.apply(this,arguments)),u=h*(c<0?-1:1),d=0;d<n;++d)0<(i=o[s[d]=d]=+v(r[d],d,r))&&(a+=i);for(null!=k?s.sort(function(t,e){return k(o[t],o[e])}):null!=w&&s.sort(function(t,e){return w(r[t],r[e])}),d=0,t=a?(c-n*u)/a:0;d<n;++d,l=e)e=s[d],i=o[e],o[e]={data:r[e],index:d,value:i,startAngle:l,endAngle:e=l+(0<i?i*t:0)+u,padAngle:h};return o}var v,k,w,T,C,E}};u6=[1,22],d6=[2,13],Ux=[1,26],L=[1,27],M=[1,28],Wx=[1,29],N=[1,30],O=[1,31],Hx=[1,24],tb=[1,32],m=[1,33],b=[1,36],E=[71,72],A=[5,8,14,16,18,19,40,41,42,43,44,45,53,60,62,71,72],D=[1,56],B=[1,57],eb=[1,58],rb=[1,59],Su=[1,60],ib=[1,61],fe=[1,62],nb=[62,63],ab=[1,74],sb=[1,70],ob=[1,71],lb=[1,72],Sn=[1,73],cb=[1,75],ic=[1,79],En=[1,80],hb=[1,77],ub=[1,78],db=[5,8,14,16,18,19,40,41,42,43,44,45,53,71,72],(y={trace:function(){},yy:{},symbols_:{error:2,start:3,directive:4,NEWLINE:5,RD:6,diagram:7,EOF:8,openDirective:9,typeDirective:10,closeDirective:11,":":12,argDirective:13,acc_title:14,acc_title_value:15,acc_descr:16,acc_descr_value:17,acc_descr_multiline_value:18,open_directive:19,type_directive:20,arg_directive:21,close_directive:22,requirementDef:23,elementDef:24,relationshipDef:25,requirementType:26,requirementName:27,STRUCT_START:28,requirementBody:29,ID:30,COLONSEP:31,id:32,TEXT:33,text:34,RISK:35,riskLevel:36,VERIFYMTHD:37,verifyType:38,STRUCT_STOP:39,REQUIREMENT:40,FUNCTIONAL_REQUIREMENT:41,INTERFACE_REQUIREMENT:42,PERFORMANCE_REQUIREMENT:43,PHYSICAL_REQUIREMENT:44,DESIGN_CONSTRAINT:45,LOW_RISK:46,MED_RISK:47,HIGH_RISK:48,VERIFY_ANALYSIS:49,VERIFY_DEMONSTRATION:50,VERIFY_INSPECTION:51,VERIFY_TEST:52,ELEMENT:53,elementName:54,elementBody:55,TYPE:56,type:57,DOCREF:58,ref:59,END_ARROW_L:60,relationship:61,LINE:62,END_ARROW_R:63,CONTAINS:64,COPIES:65,DERIVES:66,SATISFIES:67,VERIFIES:68,REFINES:69,TRACES:70,unqString:71,qString:72,$accept:0,$end:1},terminals_:{2:"error",5:"NEWLINE",6:"RD",8:"EOF",12:":",14:"acc_title",15:"acc_title_value",16:"acc_descr",17:"acc_descr_value",18:"acc_descr_multiline_value",19:"open_directive",20:"type_directive",21:"arg_directive",22:"close_directive",28:"STRUCT_START",30:"ID",31:"COLONSEP",33:"TEXT",35:"RISK",37:"VERIFYMTHD",39:"STRUCT_STOP",40:"REQUIREMENT",41:"FUNCTIONAL_REQUIREMENT",42:"INTERFACE_REQUIREMENT",43:"PERFORMANCE_REQUIREMENT",44:"PHYSICAL_REQUIREMENT",45:"DESIGN_CONSTRAINT",46:"LOW_RISK",47:"MED_RISK",48:"HIGH_RISK",49:"VERIFY_ANALYSIS",50:"VERIFY_DEMONSTRATION",51:"VERIFY_INSPECTION",52:"VERIFY_TEST",53:"ELEMENT",56:"TYPE",58:"DOCREF",60:"END_ARROW_L",62:"LINE",63:"END_ARROW_R",64:"CONTAINS",65:"COPIES",66:"DERIVES",67:"SATISFIES",68:"VERIFIES",69:"REFINES",70:"TRACES",71:"unqString",72:"qString"},productions_:[0,[3,3],[3,2],[3,4],[4,3],[4,5],[4,2],[4,2],[4,1],[9,1],[10,1],[13,1],[11,1],[7,0],[7,2],[7,2],[7,2],[7,2],[7,2],[23,5],[29,5],[29,5],[29,5],[29,5],[29,2],[29,1],[26,1],[26,1],[26,1],[26,1],[26,1],[26,1],[36,1],[36,1],[36,1],[38,1],[38,1],[38,1],[38,1],[24,5],[55,5],[55,5],[55,2],[55,1],[25,5],[25,5],[61,1],[61,1],[61,1],[61,1],[61,1],[61,1],[61,1],[27,1],[27,1],[32,1],[32,1],[34,1],[34,1],[54,1],[54,1],[57,1],[57,1],[59,1],[59,1]],performAction:function(t,e,r,i,n,a,s){var o=a.length-1;switch(n){case 6:this.$=a[o].trim(),i.setAccTitle(this.$);break;case 7:case 8:this.$=a[o].trim(),i.setAccDescription(this.$);break;case 9:i.parseDirective("%%{","open_directive");break;case 10:i.parseDirective(a[o],"type_directive");break;case 11:a[o]=a[o].trim().replace(/'/g,'"'),i.parseDirective(a[o],"arg_directive");break;case 12:i.parseDirective("}%%","close_directive","pie");break;case 13:this.$=[];break;case 19:i.addRequirement(a[o-3],a[o-4]);break;case 20:i.setNewReqId(a[o-2]);break;case 21:i.setNewReqText(a[o-2]);break;case 22:i.setNewReqRisk(a[o-2]);break;case 23:i.setNewReqVerifyMethod(a[o-2]);break;case 26:this.$=i.RequirementType.REQUIREMENT;break;case 27:this.$=i.RequirementType.FUNCTIONAL_REQUIREMENT;break;case 28:this.$=i.RequirementType.INTERFACE_REQUIREMENT;break;case 29:this.$=i.RequirementType.PERFORMANCE_REQUIREMENT;break;case 30:this.$=i.RequirementType.PHYSICAL_REQUIREMENT;break;case 31:this.$=i.RequirementType.DESIGN_CONSTRAINT;break;case 32:this.$=i.RiskLevel.LOW_RISK;break;case 33:this.$=i.RiskLevel.MED_RISK;break;case 34:this.$=i.RiskLevel.HIGH_RISK;break;case 35:this.$=i.VerifyType.VERIFY_ANALYSIS;break;case 36:this.$=i.VerifyType.VERIFY_DEMONSTRATION;break;case 37:this.$=i.VerifyType.VERIFY_INSPECTION;break;case 38:this.$=i.VerifyType.VERIFY_TEST;break;case 39:i.addElement(a[o-3]);break;case 40:i.setNewElementType(a[o-2]);break;case 41:i.setNewElementDocRef(a[o-2]);break;case 44:i.addRelationship(a[o-2],a[o],a[o-4]);break;case 45:i.addRelationship(a[o-2],a[o-4],a[o]);break;case 46:this.$=i.Relationships.CONTAINS;break;case 47:this.$=i.Relationships.COPIES;break;case 48:this.$=i.Relationships.DERIVES;break;case 49:this.$=i.Relationships.SATISFIES;break;case 50:this.$=i.Relationships.VERIFIES;break;case 51:this.$=i.Relationships.REFINES;break;case 52:this.$=i.Relationships.TRACES}},table:[{3:1,4:2,6:y=[1,3],9:4,14:p6=[1,5],16:od=[1,6],18:Md=[1,7],19:i2=[1,8]},{1:[3]},{3:10,4:2,5:[1,9],6:y,9:4,14:p6,16:od,18:Md,19:i2},{5:[1,11]},{10:12,20:[1,13]},{15:[1,14]},{17:[1,15]},pb(E2=[5,6,8,14,16,18,19,40,41,42,43,44,45,53,71,72],[2,8]),{20:[2,9]},{3:16,4:2,6:y,9:4,14:p6,16:od,18:Md,19:i2},{1:[2,2]},{4:21,5:u6,7:17,8:d6,9:4,14:p6,16:od,18:Md,19:i2,23:18,24:19,25:20,26:23,32:25,40:Ux,41:L,42:M,43:Wx,44:N,45:O,53:Hx,71:tb,72:m},{11:34,12:[1,35],22:b},pb([12,22],[2,10]),pb(E2,[2,6]),pb(E2,[2,7]),{1:[2,1]},{8:[1,37]},{4:21,5:u6,7:38,8:d6,9:4,14:p6,16:od,18:Md,19:i2,23:18,24:19,25:20,26:23,32:25,40:Ux,41:L,42:M,43:Wx,44:N,45:O,53:Hx,71:tb,72:m},{4:21,5:u6,7:39,8:d6,9:4,14:p6,16:od,18:Md,19:i2,23:18,24:19,25:20,26:23,32:25,40:Ux,41:L,42:M,43:Wx,44:N,45:O,53:Hx,71:tb,72:m},{4:21,5:u6,7:40,8:d6,9:4,14:p6,16:od,18:Md,19:i2,23:18,24:19,25:20,26:23,32:25,40:Ux,41:L,42:M,43:Wx,44:N,45:O,53:Hx,71:tb,72:m},{4:21,5:u6,7:41,8:d6,9:4,14:p6,16:od,18:Md,19:i2,23:18,24:19,25:20,26:23,32:25,40:Ux,41:L,42:M,43:Wx,44:N,45:O,53:Hx,71:tb,72:m},{4:21,5:u6,7:42,8:d6,9:4,14:p6,16:od,18:Md,19:i2,23:18,24:19,25:20,26:23,32:25,40:Ux,41:L,42:M,43:Wx,44:N,45:O,53:Hx,71:tb,72:m},{27:43,71:[1,44],72:[1,45]},{54:46,71:[1,47],72:[1,48]},{60:[1,49],62:[1,50]},pb(E,[2,26]),pb(E,[2,27]),pb(E,[2,28]),pb(E,[2,29]),pb(E,[2,30]),pb(E,[2,31]),pb(A,[2,55]),pb(A,[2,56]),pb(E2,[2,4]),{13:51,21:[1,52]},pb(E2,[2,12]),{1:[2,3]},{8:[2,14]},{8:[2,15]},{8:[2,16]},{8:[2,17]},{8:[2,18]},{28:[1,53]},{28:[2,53]},{28:[2,54]},{28:[1,54]},{28:[2,59]},{28:[2,60]},{61:55,64:D,65:B,66:eb,67:rb,68:Su,69:ib,70:fe},{61:63,64:D,65:B,66:eb,67:rb,68:Su,69:ib,70:fe},{11:64,22:b},{22:[2,11]},{5:[1,65]},{5:[1,66]},{62:[1,67]},pb(nb,[2,46]),pb(nb,[2,47]),pb(nb,[2,48]),pb(nb,[2,49]),pb(nb,[2,50]),pb(nb,[2,51]),pb(nb,[2,52]),{63:[1,68]},pb(E2,[2,5]),{5:ab,29:69,30:sb,33:ob,35:lb,37:Sn,39:cb},{5:ic,39:En,55:76,56:hb,58:ub},{32:81,71:tb,72:m},{32:82,71:tb,72:m},pb(db,[2,19]),{31:[1,83]},{31:[1,84]},{31:[1,85]},{31:[1,86]},{5:ab,29:87,30:sb,33:ob,35:lb,37:Sn,39:cb},pb(db,[2,25]),pb(db,[2,39]),{31:[1,88]},{31:[1,89]},{5:ic,39:En,55:90,56:hb,58:ub},pb(db,[2,43]),pb(db,[2,44]),pb(db,[2,45]),{32:91,71:tb,72:m},{34:92,71:[1,93],72:[1,94]},{36:95,46:[1,96],47:[1,97],48:[1,98]},{38:99,49:[1,100],50:[1,101],51:[1,102],52:[1,103]},pb(db,[2,24]),{57:104,71:[1,105],72:[1,106]},{59:107,71:[1,108],72:[1,109]},pb(db,[2,42]),{5:[1,110]},{5:[1,111]},{5:[2,57]},{5:[2,58]},{5:[1,112]},{5:[2,32]},{5:[2,33]},{5:[2,34]},{5:[1,113]},{5:[2,35]},{5:[2,36]},{5:[2,37]},{5:[2,38]},{5:[1,114]},{5:[2,61]},{5:[2,62]},{5:[1,115]},{5:[2,63]},{5:[2,64]},{5:ab,29:116,30:sb,33:ob,35:lb,37:Sn,39:cb},{5:ab,29:117,30:sb,33:ob,35:lb,37:Sn,39:cb},{5:ab,29:118,30:sb,33:ob,35:lb,37:Sn,39:cb},{5:ab,29:119,30:sb,33:ob,35:lb,37:Sn,39:cb},{5:ic,39:En,55:120,56:hb,58:ub},{5:ic,39:En,55:121,56:hb,58:ub},pb(db,[2,20]),pb(db,[2,21]),pb(db,[2,22]),pb(db,[2,23]),pb(db,[2,40]),pb(db,[2,41])],defaultActions:{8:[2,9],10:[2,2],16:[2,1],37:[2,3],38:[2,14],39:[2,15],40:[2,16],41:[2,17],42:[2,18],44:[2,53],45:[2,54],47:[2,59],48:[2,60],52:[2,11],93:[2,57],94:[2,58],96:[2,32],97:[2,33],98:[2,34],100:[2,35],101:[2,36],102:[2,37],103:[2,38],105:[2,61],106:[2,62],108:[2,63],109:[2,64]},parseError:function(t,e){var r;if(!e.recoverable)throw(r=new Error(t)).hash=e,r;this.trace(t)},parse:function(t){var e,r=this,i=[0],n=[],a=[null],s=[],o=this.table,l="",c=0,h=0,u=1,d=s.slice.call(arguments,1),p=Object.create(this.lexer),f={yy:{}};for(e in this.yy)Object.prototype.hasOwnProperty.call(this.yy,e)&&(f.yy[e]=this.yy[e]);p.setInput(t,f.yy),f.yy.lexer=p,f.yy.parser=this,"u"<typeof p.yylloc&&(p.yylloc={});var g=p.yylloc,y=(s.push(g),p.options&&p.options.ranges);"function"==typeof f.yy.parseError?this.parseError=f.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;for(var m,b,_,x,v,k,w={};;){if(b=i[i.length-1],"u"<typeof(_=this.defaultActions[b]||((null===m||"u"<typeof m)&&(T=void 0,"number"!=typeof(T=n.pop()||p.lex()||u)&&(T instanceof Array&&(T=(n=T).pop()),T=r.symbols_[T]||T),m=T),o[b]&&o[b][m]))||!_.length||!_[0]){var T="",C=[];for(x in o[b])this.terminals_[x]&&2<x&&C.push("'"+this.terminals_[x]+"'");T=p.showPosition?"Parse error on line "+(c+1)+`:
`+p.showPosition()+`
Expecting `+C.join(", ")+", got '"+(this.terminals_[m]||m)+"'":"Parse error on line "+(c+1)+": Unexpected "+(m==u?"end of input":"'"+(this.terminals_[m]||m)+"'"),this.parseError(T,{text:p.match,token:this.terminals_[m]||m,line:p.yylineno,loc:g,expected:C})}if(_[0]instanceof Array&&1<_.length)throw new Error("Parse Error: multiple actions possible at state: "+b+", token: "+m);switch(_[0]){case 1:i.push(m),a.push(p.yytext),s.push(p.yylloc),i.push(_[1]),m=null,h=p.yyleng,l=p.yytext,c=p.yylineno,g=p.yylloc;break;case 2:if(v=this.productions_[_[1]][1],w.$=a[a.length-v],w._$={first_line:s[s.length-(v||1)].first_line,last_line:s[s.length-1].last_line,first_column:s[s.length-(v||1)].first_column,last_column:s[s.length-1].last_column},y&&(w._$.range=[s[s.length-(v||1)].range[0],s[s.length-1].range[1]]),typeof(k=this.performAction.apply(w,[l,h,c,f.yy,_[1],a,s].concat(d)))<"u")return k;v&&(i=i.slice(0,-1*v*2),a=a.slice(0,-1*v),s=s.slice(0,-1*v)),i.push(this.productions_[_[1]][0]),a.push(w.$),s.push(w._$),k=o[i[i.length-2]][i[i.length-1]],i.push(k);break;case 3:return!0}}return!0}}).lexer={EOF:1,parseError:function(t,e){if(!this.yy.parser)throw new Error(t);this.yy.parser.parseError(t,e)},setInput:function(t,e){return this.yy=e||this.yy||{},this._input=t,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var t=this._input[0];return this.yytext+=t,this.yyleng++,this.offset++,this.match+=t,this.matched+=t,t.match(/(?:\r\n?|\n).*/g)?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),t},unput:function(t){var e=t.length,r=t.split(/(?:\r\n?|\n)/g),t=(this._input=t+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-e),this.offset-=e,this.match.split(/(?:\r\n?|\n)/g)),i=(this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),r.length-1&&(this.yylineno-=r.length-1),this.yylloc.range);return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:r?(r.length===t.length?this.yylloc.first_column:0)+t[t.length-r.length].length-r[0].length:this.yylloc.first_column-e},this.options.ranges&&(this.yylloc.range=[i[0],i[0]+this.yyleng-e]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){return this.options.backtrack_lexer?(this._backtrack=!0,this):this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},less:function(t){this.unput(this.match.slice(t))},pastInput:function(){var t=this.matched.substr(0,this.matched.length-this.match.length);return(20<t.length?"...":"")+t.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var t=this.match;return t.length<20&&(t+=this._input.substr(0,20-t.length)),(t.substr(0,20)+(20<t.length?"...":"")).replace(/\n/g,"")},showPosition:function(){var t=this.pastInput(),e=new Array(t.length+1).join("-");return t+this.upcomingInput()+`
`+e+"^"},test_match:function(t,e){var r,i;if(this.options.backtrack_lexer&&(i={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges)&&(i.yylloc.range=this.yylloc.range.slice(0)),(r=t[0].match(/(?:\r\n?|\n).*/g))&&(this.yylineno+=r.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:r?r[r.length-1].length-r[r.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+t[0].length},this.yytext+=t[0],this.match+=t[0],this.matches=t,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(t[0].length),this.matched+=t[0],r=this.performAction.call(this,this.yy,this,e,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),r)return r;if(this._backtrack)for(var n in i)this[n]=i[n];return!1},next:function(){if(this.done)return this.EOF;var t,e,r,i;this._input||(this.done=!0),this._more||(this.yytext="",this.match="");for(var n=this._currentRules(),a=0;a<n.length;a++)if((r=this._input.match(this.rules[n[a]]))&&(!e||r[0].length>e[0].length)){if(e=r,i=a,this.options.backtrack_lexer){if(!1!==(t=this.test_match(r,n[a])))return t;if(this._backtrack){e=!1;continue}return!1}if(!this.options.flex)break}return e?!1!==(t=this.test_match(e,n[i]))&&t:""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){return this.next()||this.lex()},begin:function(t){this.conditionStack.push(t)},popState:function(){return 0<this.conditionStack.length-1?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return(this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]]:this.conditions.INITIAL).rules},topState:function(t){return 0<=(t=this.conditionStack.length-1-Math.abs(t||0))?this.conditionStack[t]:"INITIAL"},pushState:function(t){this.begin(t)},stateStackSize:function(){return this.conditionStack.length},options:{"case-insensitive":!0},performAction:function(t,e,r,i){switch(r){case 0:return this.begin("open_directive"),19;case 1:return this.begin("type_directive"),20;case 2:return this.popState(),this.begin("arg_directive"),12;case 3:return this.popState(),this.popState(),22;case 4:return 21;case 5:return"title";case 6:return this.begin("acc_title"),14;case 7:return this.popState(),"acc_title_value";case 8:return this.begin("acc_descr"),16;case 9:return this.popState(),"acc_descr_value";case 10:this.begin("acc_descr_multiline");break;case 11:this.popState();break;case 12:return"acc_descr_multiline_value";case 13:return 5;case 14:case 15:case 16:break;case 17:return 8;case 18:return 6;case 19:return 28;case 20:return 39;case 21:return 31;case 22:return 30;case 23:return 33;case 24:return 35;case 25:return 37;case 26:return 40;case 27:return 41;case 28:return 42;case 29:return 43;case 30:return 44;case 31:return 45;case 32:return 46;case 33:return 47;case 34:return 48;case 35:return 49;case 36:return 50;case 37:return 51;case 38:return 52;case 39:return 53;case 40:return 64;case 41:return 65;case 42:return 66;case 43:return 67;case 44:return 68;case 45:return 69;case 46:return 70;case 47:return 56;case 48:return 58;case 49:return 60;case 50:return 63;case 51:return 62;case 52:this.begin("string");break;case 53:this.popState();break;case 54:return"qString";case 55:return e.yytext=e.yytext.trim(),71}},rules:[/^(?:%%\{)/i,/^(?:((?:(?!\}%%)[^:.])*))/i,/^(?::)/i,/^(?:\}%%)/i,/^(?:((?:(?!\}%%).|\n)*))/i,/^(?:title\s[^#\n;]+)/i,/^(?:accTitle\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*\{\s*)/i,/^(?:[\}])/i,/^(?:[^\}]*)/i,/^(?:(\r?\n)+)/i,/^(?:\s+)/i,/^(?:#[^\n]*)/i,/^(?:%[^\n]*)/i,/^(?:$)/i,/^(?:requirementDiagram\b)/i,/^(?:\{)/i,/^(?:\})/i,/^(?::)/i,/^(?:id\b)/i,/^(?:text\b)/i,/^(?:risk\b)/i,/^(?:verifyMethod\b)/i,/^(?:requirement\b)/i,/^(?:functionalRequirement\b)/i,/^(?:interfaceRequirement\b)/i,/^(?:performanceRequirement\b)/i,/^(?:physicalRequirement\b)/i,/^(?:designConstraint\b)/i,/^(?:low\b)/i,/^(?:medium\b)/i,/^(?:high\b)/i,/^(?:analysis\b)/i,/^(?:demonstration\b)/i,/^(?:inspection\b)/i,/^(?:test\b)/i,/^(?:element\b)/i,/^(?:contains\b)/i,/^(?:copies\b)/i,/^(?:derives\b)/i,/^(?:satisfies\b)/i,/^(?:verifies\b)/i,/^(?:refines\b)/i,/^(?:traces\b)/i,/^(?:type\b)/i,/^(?:docref\b)/i,/^(?:<-)/i,/^(?:->)/i,/^(?:-)/i,/^(?:["])/i,/^(?:["])/i,/^(?:[^"]*)/i,/^(?:[\w][^\r\n\{\<\>\-\=]*)/i],conditions:{acc_descr_multiline:{rules:[11,12],inclusive:!1},acc_descr:{rules:[9],inclusive:!1},acc_title:{rules:[7],inclusive:!1},close_directive:{rules:[],inclusive:!1},arg_directive:{rules:[3,4],inclusive:!1},type_directive:{rules:[2,3],inclusive:!1},open_directive:{rules:[1],inclusive:!1},unqString:{rules:[],inclusive:!1},token:{rules:[],inclusive:!1},string:{rules:[53,54],inclusive:!1},INITIAL:{rules:[0,5,6,8,10,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,55],inclusive:!0}}};var y,tb,m,b,eb,rb,ib,nb,ab,sb,ob,lb,cb,hb,ub,db,M2=new((fb.prototype=y).Parser=fb);function pb(t,e,r,i){for(r=r||{},i=t.length;i--;r[t[i]]=e);return r}function fb(){this.yy={}}const gb=M2.parser=M2,yb=t=>null!==t.match(/^\s*requirement(Diagram)?/);let mb=[],bb={},_b={},xb={},vb={};const kb={RequirementType:{REQUIREMENT:"Requirement",FUNCTIONAL_REQUIREMENT:"Functional Requirement",INTERFACE_REQUIREMENT:"Interface Requirement",PERFORMANCE_REQUIREMENT:"Performance Requirement",PHYSICAL_REQUIREMENT:"Physical Requirement",DESIGN_CONSTRAINT:"Design Constraint"},RiskLevel:{LOW_RISK:"Low",MED_RISK:"Medium",HIGH_RISK:"High"},VerifyType:{VERIFY_ANALYSIS:"Analysis",VERIFY_DEMONSTRATION:"Demonstration",VERIFY_INSPECTION:"Inspection",VERIFY_TEST:"Test"},Relationships:{CONTAINS:"contains",COPIES:"copies",DERIVES:"derives",SATISFIES:"satisfies",VERIFIES:"verifies",REFINES:"refines",TRACES:"traces"},parseDirective:function(t,e,r){Jv.parseDirective(this,t,e,r)},getConfig:()=>J().req,addRequirement:(t,e)=>(void 0===_b[t]&&(_b[t]={name:t,type:e,id:bb.id,text:bb.text,risk:bb.risk,verifyMethod:bb.verifyMethod}),bb={},_b[t]),getRequirements:()=>_b,setNewReqId:t=>{void 0!==bb&&(bb.id=t)},setNewReqText:t=>{void 0!==bb&&(bb.text=t)},setNewReqRisk:t=>{void 0!==bb&&(bb.risk=t)},setNewReqVerifyMethod:t=>{void 0!==bb&&(bb.verifyMethod=t)},setAccTitle:Iu,getAccTitle:Fu,setAccDescription:Ru,getAccDescription:Pu,addElement:t=>(void 0===vb[t]&&(vb[t]={name:t,type:xb.type,docRef:xb.docRef},S.info("Added new requirement: ",t)),xb={},vb[t]),getElements:()=>vb,setNewElementType:t=>{void 0!==xb&&(xb.type=t)},setNewElementDocRef:t=>{void 0!==xb&&(xb.docRef=t)},addRelationship:(t,e,r)=>{mb.push({type:t,src:e,dst:r})},getRelationships:()=>mb,clear:()=>{mb=[],bb={},_b={},xb={},vb={},Bu()}},wb={CONTAINS:"contains",ARROW:"arrow"},Tb={ReqMarkers:wb,insertLineEndings:(t,e)=>{var r=t.append("defs").append("marker").attr("id",wb.CONTAINS+"_line_ending").attr("refX",0).attr("refY",e.line_height/2).attr("markerWidth",e.line_height).attr("markerHeight",e.line_height).attr("orient","auto").append("g");r.append("circle").attr("cx",e.line_height/2).attr("cy",e.line_height/2).attr("r",e.line_height/2).attr("fill","none"),r.append("line").attr("x1",0).attr("x2",e.line_height).attr("y1",e.line_height/2).attr("y2",e.line_height/2).attr("stroke-width",1),r.append("line").attr("y1",0).attr("y2",e.line_height).attr("x1",e.line_height/2).attr("x2",e.line_height/2).attr("stroke-width",1),t.append("defs").append("marker").attr("id",wb.ARROW+"_line_ending").attr("refX",e.line_height).attr("refY",.5*e.line_height).attr("markerWidth",e.line_height).attr("markerHeight",e.line_height).attr("orient","auto").append("path").attr("d",`M0,0
      L${e.line_height},${e.line_height/2}
      M${e.line_height},${e.line_height/2}
      L0,`+e.line_height).attr("stroke-width",1)}};let Cb={},Eb=0;function Sb(t,e,r,i,n){var r=r.edge(Mb(e.src),Mb(e.dst)),a=As().x(function(t){return t.x}).y(function(t){return t.y}),i=t.insert("path","#"+i).attr("class","er relationshipLine").attr("d",a(r.points)).attr("fill","none");e.type==n.db.Relationships.CONTAINS?i.attr("marker-start","url("+tl.getUrl(Cb.arrowMarkerAbsolute)+"#"+e.type+"_line_ending)"):(i.attr("stroke-dasharray","10,7"),i.attr("marker-end","url("+tl.getUrl(Cb.arrowMarkerAbsolute)+"#"+Tb.ReqMarkers.ARROW+"_line_ending)")),a=t,r=i,Cb,n=`<<${e.type}>>`,t=r.node().getTotalLength(),r=r.node().getPointAtLength(.5*t),t="rel"+Eb,Eb++,n=a.append("text").attr("class","req relationshipLabel").attr("id",t).attr("x",r.x).attr("y",r.y).attr("text-anchor","middle").attr("dominant-baseline","middle").text(n).node().getBBox(),a.insert("rect","#"+t).attr("class","req reqLabelBox").attr("x",r.x-n.width/2).attr("y",r.y-n.height/2).attr("width",n.width).attr("height",n.height).attr("fill","white").attr("fill-opacity","85%")}const Ab=(t,e)=>t.insert("rect","#"+e).attr("class","req reqBox").attr("x",0).attr("y",0).attr("width",Cb.rect_min_width+"px").attr("height",Cb.rect_min_height+"px"),Db=(t,e,r)=>{let i=Cb.rect_min_width/2,n=t.append("text").attr("class","req reqLabel reqTitle").attr("id",e).attr("x",i).attr("y",Cb.rect_padding).attr("dominant-baseline","hanging"),a=0;r.forEach(t=>{(0==a?n.append("tspan").attr("text-anchor","middle").attr("x",Cb.rect_min_width/2).attr("dy",0):n.append("tspan").attr("text-anchor","middle").attr("x",Cb.rect_min_width/2).attr("dy",.75*Cb.line_height)).text(t),a++});e=1.5*Cb.rect_padding+a*Cb.line_height*.75;return t.append("line").attr("class","req-title-line").attr("x1","0").attr("x2",Cb.rect_min_width).attr("y1",e).attr("y2",e),{titleNode:n,y:e}},Lb=(t,e,r,i)=>{let n=t.append("text").attr("class","req reqLabel").attr("id",e).attr("x",Cb.rect_padding).attr("y",i).attr("dominant-baseline","hanging"),a=0;let s=[];return r.forEach(t=>{let e=t.length;for(;30<e&&a<3;){var r=t.substring(0,30);t=t.substring(30,t.length),e=t.length,s[s.length]=r,a++}var i;3==a?(i=s[s.length-1],s[s.length-1]=i.substring(0,i.length-4)+"..."):s[s.length]=t,a=0}),s.forEach(t=>{n.append("tspan").attr("x",Cb.rect_padding).attr("dy",Cb.line_height).text(t)}),n},Mb=t=>t.replace(/\s/g,"").replace(/\./g,"_"),Nb={draw:(t,e,r,i)=>{Cb=J().requirement,i.db.clear(),i.parser.parse(t);t=Cb.securityLevel;let n;"sandbox"===t&&(n=K("#i"+e));const a=K("sandbox"===t?n.nodes()[0].contentDocument.body:"body").select(`[id='${e}']`),s=(Tb.insertLineEndings(a,Cb),new jg({multigraph:!1,compound:!1,directed:!0}).setGraph({rankdir:Cb.layoutDirection,marginx:20,marginy:20,nodesep:100,edgesep:100,ranksep:100}).setDefaultEdgeLabel(function(){return{}}));var o,l,c,h,u,d,p,f,g,t=i.db.getRequirements(),y=i.db.getElements(),m=i.db.getRelationships(),t=(p=t,f=s,g=a,Object.keys(p).forEach(t=>{var e=p[t],r=(t=Mb(t),S.info("Added new requirement: ",t),g.append("g").attr("id",t)),i="req-"+t,i=Ab(r,i),n=Db(r,t+"_title",[`<<${e.type}>>`,""+e.name]),r=(Lb(r,t+"_body",["Id: "+e.id,"Text: "+e.text,"Risk: "+e.risk,"Verification: "+e.verifyMethod],n.y),i.node().getBBox());f.setNode(t,{width:r.width,height:r.height,shape:"rect",id:t})}),h=y,u=s,d=a,Object.keys(h).forEach(t=>{var e=h[t],r=Mb(t),i=d.append("g").attr("id",r),n="element-"+r,a=Ab(i,n),t=Db(i,n+"_title",["<<Element>>",""+t]),i=(Lb(i,n+"_body",["Type: "+(e.type||"Not Specified"),"Doc Ref: "+(e.docRef||"None")],t.y),a.node().getBBox());u.setNode(r,{width:i.width,height:i.height,shape:"rect",id:r})}),c=s,m.forEach(function(t){var e=Mb(t.src),r=Mb(t.dst);c.setEdge(e,r,{relationship:t})}),Iy(s),o=a,(l=s).nodes().forEach(function(t){void 0!==t&&void 0!==l.node(t)&&(o.select("#"+t),o.select("#"+t).attr("transform","translate("+(l.node(t).x-l.node(t).width/2)+","+(l.node(t).y-l.node(t).height/2)+" )"))}),m.forEach(function(t){Sb(a,t,s,e,i)}),Cb.rect_padding),y=a.node().getBBox(),m=y.width+2*t,b=y.height+2*t;K1(a,b,m,Cb.useMaxWidth),a.attr("viewBox",`${y.x-t} ${y.y-t} ${m} `+b)}};L2=[1,15],N2=[1,17],F2=[1,18],t=[1,19],d=[1,21],_=[1,22],p=[1,23],gp=[1,29],wp=[1,30],Rb=[1,31],Pb=[1,32],$b=[1,33],Yb=[1,34],jb=[1,35],zb=[1,36],Ub=[1,37],Wb=[1,38],Hb=[1,39],qb=[1,40],Vb=[1,43],Gb=[1,44],Fp=[1,45],Xb=[1,46],Zb=[1,47],Qb=[1,48],S3=[1,51],Kb=[1,4,5,16,20,22,25,26,32,33,34,36,38,39,40,41,42,43,45,47,49,50,51,52,53,58,59,60,61,69,79],Jb=[4,5,16,20,22,25,26,32,33,34,36,38,39,40,41,42,43,45,47,49,53,58,59,60,61,69,79],t_=[4,5,16,20,22,25,26,32,33,34,36,38,39,40,41,42,43,45,47,49,52,53,58,59,60,61,69,79],e_=[4,5,16,20,22,25,26,32,33,34,36,38,39,40,41,42,43,45,47,49,51,53,58,59,60,61,69,79],kp=[4,5,16,20,22,25,26,32,33,34,36,38,39,40,41,42,43,45,47,49,50,53,58,59,60,61,69,79],r_=[67,68,69],i_=[1,121],Tp=[1,4,5,7,16,20,22,25,26,32,33,34,36,38,39,40,41,42,43,45,47,49,50,51,52,53,58,59,60,61,69,79],(Ob={trace:function(){},yy:{},symbols_:{error:2,start:3,SPACE:4,NEWLINE:5,directive:6,SD:7,document:8,line:9,statement:10,openDirective:11,typeDirective:12,closeDirective:13,":":14,argDirective:15,participant:16,actor:17,AS:18,restOfLine:19,participant_actor:20,signal:21,autonumber:22,NUM:23,off:24,activate:25,deactivate:26,note_statement:27,links_statement:28,link_statement:29,properties_statement:30,details_statement:31,title:32,legacy_title:33,acc_title:34,acc_title_value:35,acc_descr:36,acc_descr_value:37,acc_descr_multiline_value:38,loop:39,end:40,rect:41,opt:42,alt:43,else_sections:44,par:45,par_sections:46,critical:47,option_sections:48,break:49,option:50,and:51,else:52,note:53,placement:54,text2:55,over:56,actor_pair:57,links:58,link:59,properties:60,details:61,spaceList:62,",":63,left_of:64,right_of:65,signaltype:66,"+":67,"-":68,ACTOR:69,SOLID_OPEN_ARROW:70,DOTTED_OPEN_ARROW:71,SOLID_ARROW:72,DOTTED_ARROW:73,SOLID_CROSS:74,DOTTED_CROSS:75,SOLID_POINT:76,DOTTED_POINT:77,TXT:78,open_directive:79,type_directive:80,arg_directive:81,close_directive:82,$accept:0,$end:1},terminals_:{2:"error",4:"SPACE",5:"NEWLINE",7:"SD",14:":",16:"participant",18:"AS",19:"restOfLine",20:"participant_actor",22:"autonumber",23:"NUM",24:"off",25:"activate",26:"deactivate",32:"title",33:"legacy_title",34:"acc_title",35:"acc_title_value",36:"acc_descr",37:"acc_descr_value",38:"acc_descr_multiline_value",39:"loop",40:"end",41:"rect",42:"opt",43:"alt",45:"par",47:"critical",49:"break",50:"option",51:"and",52:"else",53:"note",56:"over",58:"links",59:"link",60:"properties",61:"details",63:",",64:"left_of",65:"right_of",67:"+",68:"-",69:"ACTOR",70:"SOLID_OPEN_ARROW",71:"DOTTED_OPEN_ARROW",72:"SOLID_ARROW",73:"DOTTED_ARROW",74:"SOLID_CROSS",75:"DOTTED_CROSS",76:"SOLID_POINT",77:"DOTTED_POINT",78:"TXT",79:"open_directive",80:"type_directive",81:"arg_directive",82:"close_directive"},productions_:[0,[3,2],[3,2],[3,2],[3,2],[8,0],[8,2],[9,2],[9,1],[9,1],[6,4],[6,6],[10,5],[10,3],[10,5],[10,3],[10,2],[10,4],[10,3],[10,3],[10,2],[10,3],[10,3],[10,2],[10,2],[10,2],[10,2],[10,2],[10,1],[10,1],[10,2],[10,2],[10,1],[10,4],[10,4],[10,4],[10,4],[10,4],[10,4],[10,4],[10,1],[48,1],[48,4],[46,1],[46,4],[44,1],[44,4],[27,4],[27,4],[28,3],[29,3],[30,3],[31,3],[62,2],[62,1],[57,3],[57,1],[54,1],[54,1],[21,5],[21,5],[21,4],[17,1],[66,1],[66,1],[66,1],[66,1],[66,1],[66,1],[66,1],[66,1],[55,1],[11,1],[12,1],[15,1],[13,1]],performAction:function(t,e,r,i,n,a,s){var o=a.length-1;switch(n){case 4:return i.apply(a[o]),a[o];case 5:this.$=[];break;case 6:a[o-1].push(a[o]),this.$=a[o-1];break;case 7:case 8:this.$=a[o];break;case 9:this.$=[];break;case 12:a[o-3].type="addParticipant",a[o-3].description=i.parseMessage(a[o-1]),this.$=a[o-3];break;case 13:a[o-1].type="addParticipant",this.$=a[o-1];break;case 14:a[o-3].type="addActor",a[o-3].description=i.parseMessage(a[o-1]),this.$=a[o-3];break;case 15:a[o-1].type="addActor",this.$=a[o-1];break;case 17:this.$={type:"sequenceIndex",sequenceIndex:Number(a[o-2]),sequenceIndexStep:Number(a[o-1]),sequenceVisible:!0,signalType:i.LINETYPE.AUTONUMBER};break;case 18:this.$={type:"sequenceIndex",sequenceIndex:Number(a[o-1]),sequenceIndexStep:1,sequenceVisible:!0,signalType:i.LINETYPE.AUTONUMBER};break;case 19:this.$={type:"sequenceIndex",sequenceVisible:!1,signalType:i.LINETYPE.AUTONUMBER};break;case 20:this.$={type:"sequenceIndex",sequenceVisible:!0,signalType:i.LINETYPE.AUTONUMBER};break;case 21:this.$={type:"activeStart",signalType:i.LINETYPE.ACTIVE_START,actor:a[o-1]};break;case 22:this.$={type:"activeEnd",signalType:i.LINETYPE.ACTIVE_END,actor:a[o-1]};break;case 28:i.setDiagramTitle(a[o].substring(6)),this.$=a[o].substring(6);break;case 29:i.setDiagramTitle(a[o].substring(7)),this.$=a[o].substring(7);break;case 30:this.$=a[o].trim(),i.setAccTitle(this.$);break;case 31:case 32:this.$=a[o].trim(),i.setAccDescription(this.$);break;case 33:a[o-1].unshift({type:"loopStart",loopText:i.parseMessage(a[o-2]),signalType:i.LINETYPE.LOOP_START}),a[o-1].push({type:"loopEnd",loopText:a[o-2],signalType:i.LINETYPE.LOOP_END}),this.$=a[o-1];break;case 34:a[o-1].unshift({type:"rectStart",color:i.parseMessage(a[o-2]),signalType:i.LINETYPE.RECT_START}),a[o-1].push({type:"rectEnd",color:i.parseMessage(a[o-2]),signalType:i.LINETYPE.RECT_END}),this.$=a[o-1];break;case 35:a[o-1].unshift({type:"optStart",optText:i.parseMessage(a[o-2]),signalType:i.LINETYPE.OPT_START}),a[o-1].push({type:"optEnd",optText:i.parseMessage(a[o-2]),signalType:i.LINETYPE.OPT_END}),this.$=a[o-1];break;case 36:a[o-1].unshift({type:"altStart",altText:i.parseMessage(a[o-2]),signalType:i.LINETYPE.ALT_START}),a[o-1].push({type:"altEnd",signalType:i.LINETYPE.ALT_END}),this.$=a[o-1];break;case 37:a[o-1].unshift({type:"parStart",parText:i.parseMessage(a[o-2]),signalType:i.LINETYPE.PAR_START}),a[o-1].push({type:"parEnd",signalType:i.LINETYPE.PAR_END}),this.$=a[o-1];break;case 38:a[o-1].unshift({type:"criticalStart",criticalText:i.parseMessage(a[o-2]),signalType:i.LINETYPE.CRITICAL_START}),a[o-1].push({type:"criticalEnd",signalType:i.LINETYPE.CRITICAL_END}),this.$=a[o-1];break;case 39:a[o-1].unshift({type:"breakStart",breakText:i.parseMessage(a[o-2]),signalType:i.LINETYPE.BREAK_START}),a[o-1].push({type:"breakEnd",optText:i.parseMessage(a[o-2]),signalType:i.LINETYPE.BREAK_END}),this.$=a[o-1];break;case 42:this.$=a[o-3].concat([{type:"option",optionText:i.parseMessage(a[o-1]),signalType:i.LINETYPE.CRITICAL_OPTION},a[o]]);break;case 44:this.$=a[o-3].concat([{type:"and",parText:i.parseMessage(a[o-1]),signalType:i.LINETYPE.PAR_AND},a[o]]);break;case 46:this.$=a[o-3].concat([{type:"else",altText:i.parseMessage(a[o-1]),signalType:i.LINETYPE.ALT_ELSE},a[o]]);break;case 47:this.$=[a[o-1],{type:"addNote",placement:a[o-2],actor:a[o-1].actor,text:a[o]}];break;case 48:a[o-2]=[].concat(a[o-1],a[o-1]).slice(0,2),a[o-2][0]=a[o-2][0].actor,a[o-2][1]=a[o-2][1].actor,this.$=[a[o-1],{type:"addNote",placement:i.PLACEMENT.OVER,actor:a[o-2].slice(0,2),text:a[o]}];break;case 49:this.$=[a[o-1],{type:"addLinks",actor:a[o-1].actor,text:a[o]}];break;case 50:this.$=[a[o-1],{type:"addALink",actor:a[o-1].actor,text:a[o]}];break;case 51:this.$=[a[o-1],{type:"addProperties",actor:a[o-1].actor,text:a[o]}];break;case 52:this.$=[a[o-1],{type:"addDetails",actor:a[o-1].actor,text:a[o]}];break;case 55:this.$=[a[o-2],a[o]];break;case 56:this.$=a[o];break;case 57:this.$=i.PLACEMENT.LEFTOF;break;case 58:this.$=i.PLACEMENT.RIGHTOF;break;case 59:this.$=[a[o-4],a[o-1],{type:"addMessage",from:a[o-4].actor,to:a[o-1].actor,signalType:a[o-3],msg:a[o]},{type:"activeStart",signalType:i.LINETYPE.ACTIVE_START,actor:a[o-1]}];break;case 60:this.$=[a[o-4],a[o-1],{type:"addMessage",from:a[o-4].actor,to:a[o-1].actor,signalType:a[o-3],msg:a[o]},{type:"activeEnd",signalType:i.LINETYPE.ACTIVE_END,actor:a[o-4]}];break;case 61:this.$=[a[o-3],a[o-1],{type:"addMessage",from:a[o-3].actor,to:a[o-1].actor,signalType:a[o-2],msg:a[o]}];break;case 62:this.$={type:"addParticipant",actor:a[o]};break;case 63:this.$=i.LINETYPE.SOLID_OPEN;break;case 64:this.$=i.LINETYPE.DOTTED_OPEN;break;case 65:this.$=i.LINETYPE.SOLID;break;case 66:this.$=i.LINETYPE.DOTTED;break;case 67:this.$=i.LINETYPE.SOLID_CROSS;break;case 68:this.$=i.LINETYPE.DOTTED_CROSS;break;case 69:this.$=i.LINETYPE.SOLID_POINT;break;case 70:this.$=i.LINETYPE.DOTTED_POINT;break;case 71:this.$=i.parseMessage(a[o].trim().substring(1));break;case 72:i.parseDirective("%%{","open_directive");break;case 73:i.parseDirective(a[o],"type_directive");break;case 74:a[o]=a[o].trim().replace(/'/g,'"'),i.parseDirective(a[o],"arg_directive");break;case 75:i.parseDirective("}%%","close_directive","sequence")}},table:[{3:1,4:Ob=[1,2],5:ef=[1,3],6:4,7:Bb=[1,5],11:6,79:Ib=[1,7]},{1:[3]},{3:8,4:Ob,5:ef,6:4,7:Bb,11:6,79:Ib},{3:9,4:Ob,5:ef,6:4,7:Bb,11:6,79:Ib},{3:10,4:Ob,5:ef,6:4,7:Bb,11:6,79:Ib},a_([1,4,5,16,20,22,25,26,32,33,34,36,38,39,41,42,43,45,47,49,53,58,59,60,61,69,79],Fb=[2,5],{8:11}),{12:12,80:[1,13]},{80:[2,72]},{1:[2,1]},{1:[2,2]},{1:[2,3]},{1:[2,4],4:L2,5:N2,6:41,9:14,10:16,11:6,16:F2,17:42,20:t,21:20,22:d,25:_,26:p,27:24,28:25,29:26,30:27,31:28,32:gp,33:wp,34:Rb,36:Pb,38:$b,39:Yb,41:jb,42:zb,43:Ub,45:Wb,47:Hb,49:qb,53:Vb,58:Gb,59:Fp,60:Xb,61:Zb,69:Qb,79:Ib},{13:49,14:[1,50],82:S3},a_([14,82],[2,73]),a_(Kb,[2,6]),{6:41,10:52,11:6,16:F2,17:42,20:t,21:20,22:d,25:_,26:p,27:24,28:25,29:26,30:27,31:28,32:gp,33:wp,34:Rb,36:Pb,38:$b,39:Yb,41:jb,42:zb,43:Ub,45:Wb,47:Hb,49:qb,53:Vb,58:Gb,59:Fp,60:Xb,61:Zb,69:Qb,79:Ib},a_(Kb,[2,8]),a_(Kb,[2,9]),{17:53,69:Qb},{17:54,69:Qb},{5:[1,55]},{5:[1,58],23:[1,56],24:[1,57]},{17:59,69:Qb},{17:60,69:Qb},{5:[1,61]},{5:[1,62]},{5:[1,63]},{5:[1,64]},{5:[1,65]},a_(Kb,[2,28]),a_(Kb,[2,29]),{35:[1,66]},{37:[1,67]},a_(Kb,[2,32]),{19:[1,68]},{19:[1,69]},{19:[1,70]},{19:[1,71]},{19:[1,72]},{19:[1,73]},{19:[1,74]},a_(Kb,[2,40]),{66:75,70:[1,76],71:[1,77],72:[1,78],73:[1,79],74:[1,80],75:[1,81],76:[1,82],77:[1,83]},{54:84,56:[1,85],64:[1,86],65:[1,87]},{17:88,69:Qb},{17:89,69:Qb},{17:90,69:Qb},{17:91,69:Qb},a_([5,18,63,70,71,72,73,74,75,76,77,78],[2,62]),{5:[1,92]},{15:93,81:[1,94]},{5:[2,75]},a_(Kb,[2,7]),{5:[1,96],18:[1,95]},{5:[1,98],18:[1,97]},a_(Kb,[2,16]),{5:[1,100],23:[1,99]},{5:[1,101]},a_(Kb,[2,20]),{5:[1,102]},{5:[1,103]},a_(Kb,[2,23]),a_(Kb,[2,24]),a_(Kb,[2,25]),a_(Kb,[2,26]),a_(Kb,[2,27]),a_(Kb,[2,30]),a_(Kb,[2,31]),a_(Jb,Fb,{8:104}),a_(Jb,Fb,{8:105}),a_(Jb,Fb,{8:106}),a_(t_,Fb,{44:107,8:108}),a_(e_,Fb,{46:109,8:110}),a_(kp,Fb,{48:111,8:112}),a_(Jb,Fb,{8:113}),{17:116,67:[1,114],68:[1,115],69:Qb},a_(r_,[2,63]),a_(r_,[2,64]),a_(r_,[2,65]),a_(r_,[2,66]),a_(r_,[2,67]),a_(r_,[2,68]),a_(r_,[2,69]),a_(r_,[2,70]),{17:117,69:Qb},{17:119,57:118,69:Qb},{69:[2,57]},{69:[2,58]},{55:120,78:i_},{55:122,78:i_},{55:123,78:i_},{55:124,78:i_},a_(Tp,[2,10]),{13:125,82:S3},{82:[2,74]},{19:[1,126]},a_(Kb,[2,13]),{19:[1,127]},a_(Kb,[2,15]),{5:[1,128]},a_(Kb,[2,18]),a_(Kb,[2,19]),a_(Kb,[2,21]),a_(Kb,[2,22]),{4:L2,5:N2,6:41,9:14,10:16,11:6,16:F2,17:42,20:t,21:20,22:d,25:_,26:p,27:24,28:25,29:26,30:27,31:28,32:gp,33:wp,34:Rb,36:Pb,38:$b,39:Yb,40:[1,129],41:jb,42:zb,43:Ub,45:Wb,47:Hb,49:qb,53:Vb,58:Gb,59:Fp,60:Xb,61:Zb,69:Qb,79:Ib},{4:L2,5:N2,6:41,9:14,10:16,11:6,16:F2,17:42,20:t,21:20,22:d,25:_,26:p,27:24,28:25,29:26,30:27,31:28,32:gp,33:wp,34:Rb,36:Pb,38:$b,39:Yb,40:[1,130],41:jb,42:zb,43:Ub,45:Wb,47:Hb,49:qb,53:Vb,58:Gb,59:Fp,60:Xb,61:Zb,69:Qb,79:Ib},{4:L2,5:N2,6:41,9:14,10:16,11:6,16:F2,17:42,20:t,21:20,22:d,25:_,26:p,27:24,28:25,29:26,30:27,31:28,32:gp,33:wp,34:Rb,36:Pb,38:$b,39:Yb,40:[1,131],41:jb,42:zb,43:Ub,45:Wb,47:Hb,49:qb,53:Vb,58:Gb,59:Fp,60:Xb,61:Zb,69:Qb,79:Ib},{40:[1,132]},{4:L2,5:N2,6:41,9:14,10:16,11:6,16:F2,17:42,20:t,21:20,22:d,25:_,26:p,27:24,28:25,29:26,30:27,31:28,32:gp,33:wp,34:Rb,36:Pb,38:$b,39:Yb,40:[2,45],41:jb,42:zb,43:Ub,45:Wb,47:Hb,49:qb,52:[1,133],53:Vb,58:Gb,59:Fp,60:Xb,61:Zb,69:Qb,79:Ib},{40:[1,134]},{4:L2,5:N2,6:41,9:14,10:16,11:6,16:F2,17:42,20:t,21:20,22:d,25:_,26:p,27:24,28:25,29:26,30:27,31:28,32:gp,33:wp,34:Rb,36:Pb,38:$b,39:Yb,40:[2,43],41:jb,42:zb,43:Ub,45:Wb,47:Hb,49:qb,51:[1,135],53:Vb,58:Gb,59:Fp,60:Xb,61:Zb,69:Qb,79:Ib},{40:[1,136]},{4:L2,5:N2,6:41,9:14,10:16,11:6,16:F2,17:42,20:t,21:20,22:d,25:_,26:p,27:24,28:25,29:26,30:27,31:28,32:gp,33:wp,34:Rb,36:Pb,38:$b,39:Yb,40:[2,41],41:jb,42:zb,43:Ub,45:Wb,47:Hb,49:qb,50:[1,137],53:Vb,58:Gb,59:Fp,60:Xb,61:Zb,69:Qb,79:Ib},{4:L2,5:N2,6:41,9:14,10:16,11:6,16:F2,17:42,20:t,21:20,22:d,25:_,26:p,27:24,28:25,29:26,30:27,31:28,32:gp,33:wp,34:Rb,36:Pb,38:$b,39:Yb,40:[1,138],41:jb,42:zb,43:Ub,45:Wb,47:Hb,49:qb,53:Vb,58:Gb,59:Fp,60:Xb,61:Zb,69:Qb,79:Ib},{17:139,69:Qb},{17:140,69:Qb},{55:141,78:i_},{55:142,78:i_},{55:143,78:i_},{63:[1,144],78:[2,56]},{5:[2,49]},{5:[2,71]},{5:[2,50]},{5:[2,51]},{5:[2,52]},{5:[1,145]},{5:[1,146]},{5:[1,147]},a_(Kb,[2,17]),a_(Kb,[2,33]),a_(Kb,[2,34]),a_(Kb,[2,35]),a_(Kb,[2,36]),{19:[1,148]},a_(Kb,[2,37]),{19:[1,149]},a_(Kb,[2,38]),{19:[1,150]},a_(Kb,[2,39]),{55:151,78:i_},{55:152,78:i_},{5:[2,61]},{5:[2,47]},{5:[2,48]},{17:153,69:Qb},a_(Tp,[2,11]),a_(Kb,[2,12]),a_(Kb,[2,14]),a_(t_,Fb,{8:108,44:154}),a_(e_,Fb,{8:110,46:155}),a_(kp,Fb,{8:112,48:156}),{5:[2,59]},{5:[2,60]},{78:[2,55]},{40:[2,46]},{40:[2,44]},{40:[2,42]}],defaultActions:{7:[2,72],8:[2,1],9:[2,2],10:[2,3],51:[2,75],86:[2,57],87:[2,58],94:[2,74],120:[2,49],121:[2,71],122:[2,50],123:[2,51],124:[2,52],141:[2,61],142:[2,47],143:[2,48],151:[2,59],152:[2,60],153:[2,55],154:[2,46],155:[2,44],156:[2,42]},parseError:function(t,e){var r;if(!e.recoverable)throw(r=new Error(t)).hash=e,r;this.trace(t)},parse:function(t){var e,r=this,i=[0],n=[],a=[null],s=[],o=this.table,l="",c=0,h=0,u=1,d=s.slice.call(arguments,1),p=Object.create(this.lexer),f={yy:{}};for(e in this.yy)Object.prototype.hasOwnProperty.call(this.yy,e)&&(f.yy[e]=this.yy[e]);p.setInput(t,f.yy),f.yy.lexer=p,f.yy.parser=this,"u"<typeof p.yylloc&&(p.yylloc={});var g=p.yylloc,y=(s.push(g),p.options&&p.options.ranges);"function"==typeof f.yy.parseError?this.parseError=f.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;for(var m,b,_,x,v,k,w={};;){if(b=i[i.length-1],"u"<typeof(_=this.defaultActions[b]||((null===m||"u"<typeof m)&&(T=void 0,"number"!=typeof(T=n.pop()||p.lex()||u)&&(T instanceof Array&&(T=(n=T).pop()),T=r.symbols_[T]||T),m=T),o[b]&&o[b][m]))||!_.length||!_[0]){var T="",C=[];for(x in o[b])this.terminals_[x]&&2<x&&C.push("'"+this.terminals_[x]+"'");T=p.showPosition?"Parse error on line "+(c+1)+`:
`+p.showPosition()+`
Expecting `+C.join(", ")+", got '"+(this.terminals_[m]||m)+"'":"Parse error on line "+(c+1)+": Unexpected "+(m==u?"end of input":"'"+(this.terminals_[m]||m)+"'"),this.parseError(T,{text:p.match,token:this.terminals_[m]||m,line:p.yylineno,loc:g,expected:C})}if(_[0]instanceof Array&&1<_.length)throw new Error("Parse Error: multiple actions possible at state: "+b+", token: "+m);switch(_[0]){case 1:i.push(m),a.push(p.yytext),s.push(p.yylloc),i.push(_[1]),m=null,h=p.yyleng,l=p.yytext,c=p.yylineno,g=p.yylloc;break;case 2:if(v=this.productions_[_[1]][1],w.$=a[a.length-v],w._$={first_line:s[s.length-(v||1)].first_line,last_line:s[s.length-1].last_line,first_column:s[s.length-(v||1)].first_column,last_column:s[s.length-1].last_column},y&&(w._$.range=[s[s.length-(v||1)].range[0],s[s.length-1].range[1]]),typeof(k=this.performAction.apply(w,[l,h,c,f.yy,_[1],a,s].concat(d)))<"u")return k;v&&(i=i.slice(0,-1*v*2),a=a.slice(0,-1*v),s=s.slice(0,-1*v)),i.push(this.productions_[_[1]][0]),a.push(w.$),s.push(w._$),k=o[i[i.length-2]][i[i.length-1]],i.push(k);break;case 3:return!0}}return!0}}).lexer={EOF:1,parseError:function(t,e){if(!this.yy.parser)throw new Error(t);this.yy.parser.parseError(t,e)},setInput:function(t,e){return this.yy=e||this.yy||{},this._input=t,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var t=this._input[0];return this.yytext+=t,this.yyleng++,this.offset++,this.match+=t,this.matched+=t,t.match(/(?:\r\n?|\n).*/g)?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),t},unput:function(t){var e=t.length,r=t.split(/(?:\r\n?|\n)/g),t=(this._input=t+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-e),this.offset-=e,this.match.split(/(?:\r\n?|\n)/g)),i=(this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),r.length-1&&(this.yylineno-=r.length-1),this.yylloc.range);return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:r?(r.length===t.length?this.yylloc.first_column:0)+t[t.length-r.length].length-r[0].length:this.yylloc.first_column-e},this.options.ranges&&(this.yylloc.range=[i[0],i[0]+this.yyleng-e]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){return this.options.backtrack_lexer?(this._backtrack=!0,this):this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},less:function(t){this.unput(this.match.slice(t))},pastInput:function(){var t=this.matched.substr(0,this.matched.length-this.match.length);return(20<t.length?"...":"")+t.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var t=this.match;return t.length<20&&(t+=this._input.substr(0,20-t.length)),(t.substr(0,20)+(20<t.length?"...":"")).replace(/\n/g,"")},showPosition:function(){var t=this.pastInput(),e=new Array(t.length+1).join("-");return t+this.upcomingInput()+`
`+e+"^"},test_match:function(t,e){var r,i;if(this.options.backtrack_lexer&&(i={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges)&&(i.yylloc.range=this.yylloc.range.slice(0)),(r=t[0].match(/(?:\r\n?|\n).*/g))&&(this.yylineno+=r.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:r?r[r.length-1].length-r[r.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+t[0].length},this.yytext+=t[0],this.match+=t[0],this.matches=t,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(t[0].length),this.matched+=t[0],r=this.performAction.call(this,this.yy,this,e,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),r)return r;if(this._backtrack)for(var n in i)this[n]=i[n];return!1},next:function(){if(this.done)return this.EOF;var t,e,r,i;this._input||(this.done=!0),this._more||(this.yytext="",this.match="");for(var n=this._currentRules(),a=0;a<n.length;a++)if((r=this._input.match(this.rules[n[a]]))&&(!e||r[0].length>e[0].length)){if(e=r,i=a,this.options.backtrack_lexer){if(!1!==(t=this.test_match(r,n[a])))return t;if(this._backtrack){e=!1;continue}return!1}if(!this.options.flex)break}return e?!1!==(t=this.test_match(e,n[i]))&&t:""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){return this.next()||this.lex()},begin:function(t){this.conditionStack.push(t)},popState:function(){return 0<this.conditionStack.length-1?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return(this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]]:this.conditions.INITIAL).rules},topState:function(t){return 0<=(t=this.conditionStack.length-1-Math.abs(t||0))?this.conditionStack[t]:"INITIAL"},pushState:function(t){this.begin(t)},stateStackSize:function(){return this.conditionStack.length},options:{"case-insensitive":!0},performAction:function(t,e,r,i){switch(r){case 0:return this.begin("open_directive"),79;case 1:return this.begin("type_directive"),80;case 2:return this.popState(),this.begin("arg_directive"),14;case 3:return this.popState(),this.popState(),82;case 4:return 81;case 5:return 5;case 6:case 7:case 8:case 9:case 10:break;case 11:return 23;case 12:return this.begin("ID"),16;case 13:return this.begin("ID"),20;case 14:return e.yytext=e.yytext.trim(),this.begin("ALIAS"),69;case 15:return this.popState(),this.popState(),this.begin("LINE"),18;case 16:return this.popState(),this.popState(),5;case 17:return this.begin("LINE"),39;case 18:return this.begin("LINE"),41;case 19:return this.begin("LINE"),42;case 20:return this.begin("LINE"),43;case 21:return this.begin("LINE"),52;case 22:return this.begin("LINE"),45;case 23:return this.begin("LINE"),51;case 24:return this.begin("LINE"),47;case 25:return this.begin("LINE"),50;case 26:return this.begin("LINE"),49;case 27:return this.popState(),19;case 28:return 40;case 29:return 64;case 30:return 65;case 31:return 58;case 32:return 59;case 33:return 60;case 34:return 61;case 35:return 56;case 36:return 53;case 37:return this.begin("ID"),25;case 38:return this.begin("ID"),26;case 39:return 32;case 40:return 33;case 41:return this.begin("acc_title"),34;case 42:return this.popState(),"acc_title_value";case 43:return this.begin("acc_descr"),36;case 44:return this.popState(),"acc_descr_value";case 45:this.begin("acc_descr_multiline");break;case 46:this.popState();break;case 47:return"acc_descr_multiline_value";case 48:return 7;case 49:return 22;case 50:return 24;case 51:return 63;case 52:return 5;case 53:return e.yytext=e.yytext.trim(),69;case 54:return 72;case 55:return 73;case 56:return 70;case 57:return 71;case 58:return 74;case 59:return 75;case 60:return 76;case 61:return 77;case 62:return 78;case 63:return 67;case 64:return 68;case 65:return 5;case 66:return"INVALID"}},rules:[/^(?:%%\{)/i,/^(?:((?:(?!\}%%)[^:.])*))/i,/^(?::)/i,/^(?:\}%%)/i,/^(?:((?:(?!\}%%).|\n)*))/i,/^(?:[\n]+)/i,/^(?:\s+)/i,/^(?:((?!\n)\s)+)/i,/^(?:#[^\n]*)/i,/^(?:%(?!\{)[^\n]*)/i,/^(?:[^\}]%%[^\n]*)/i,/^(?:[0-9]+(?=[ \n]+))/i,/^(?:participant\b)/i,/^(?:actor\b)/i,/^(?:[^\->:\n,;]+?([\-]*[^\->:\n,;]+?)*?(?=((?!\n)\s)+as(?!\n)\s|[#\n;]|$))/i,/^(?:as\b)/i,/^(?:(?:))/i,/^(?:loop\b)/i,/^(?:rect\b)/i,/^(?:opt\b)/i,/^(?:alt\b)/i,/^(?:else\b)/i,/^(?:par\b)/i,/^(?:and\b)/i,/^(?:critical\b)/i,/^(?:option\b)/i,/^(?:break\b)/i,/^(?:(?:[:]?(?:no)?wrap)?[^#\n;]*)/i,/^(?:end\b)/i,/^(?:left of\b)/i,/^(?:right of\b)/i,/^(?:links\b)/i,/^(?:link\b)/i,/^(?:properties\b)/i,/^(?:details\b)/i,/^(?:over\b)/i,/^(?:note\b)/i,/^(?:activate\b)/i,/^(?:deactivate\b)/i,/^(?:title\s[^#\n;]+)/i,/^(?:title:\s[^#\n;]+)/i,/^(?:accTitle\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*\{\s*)/i,/^(?:[\}])/i,/^(?:[^\}]*)/i,/^(?:sequenceDiagram\b)/i,/^(?:autonumber\b)/i,/^(?:off\b)/i,/^(?:,)/i,/^(?:;)/i,/^(?:[^\+\->:\n,;]+((?!(-x|--x|-\)|--\)))[\-]*[^\+\->:\n,;]+)*)/i,/^(?:->>)/i,/^(?:-->>)/i,/^(?:->)/i,/^(?:-->)/i,/^(?:-[x])/i,/^(?:--[x])/i,/^(?:-[\)])/i,/^(?:--[\)])/i,/^(?::(?:(?:no)?wrap)?[^#\n;]+)/i,/^(?:\+)/i,/^(?:-)/i,/^(?:$)/i,/^(?:.)/i],conditions:{acc_descr_multiline:{rules:[46,47],inclusive:!1},acc_descr:{rules:[44],inclusive:!1},acc_title:{rules:[42],inclusive:!1},open_directive:{rules:[1,8],inclusive:!1},type_directive:{rules:[2,3,8],inclusive:!1},arg_directive:{rules:[3,4,8],inclusive:!1},ID:{rules:[7,8,14],inclusive:!1},ALIAS:{rules:[7,8,15,16],inclusive:!1},LINE:{rules:[7,8,27],inclusive:!1},INITIAL:{rules:[0,5,6,8,9,10,11,12,13,17,18,19,20,21,22,23,24,25,26,28,29,30,31,32,33,34,35,36,37,38,39,40,41,43,45,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66],inclusive:!0}}};var Ob,Bb,Ib,Fb,_,Rb,Pb,$b,Yb,jb,zb,Ub,Wb,Hb,qb,Vb,Gb,Xb,Zb,Qb,Kb,Jb,t_,e_,r_,i_,n_=new((s_.prototype=Ob).Parser=s_);function a_(t,e,r,i){for(r=r||{},i=t.length;i--;r[t[i]]=e);return r}function s_(){this.yy={}}const o_=n_.parser=n_,l_=t=>null!==t.match(/^\s*sequenceDiagram/);let c_,h_={},u_=[],d_=!1,p_;function f_(t,e,r,i){var n=h_[t];n&&e===n.name&&null==r||(null!=r&&null!=r.text||(r={text:e,wrap:null,type:i}),null!=i&&null!=r.text||(r={text:e,wrap:null,type:i}),h_[t]={name:e,description:r.text,wrap:void 0===r.wrap&&__()||!!r.wrap,prevActor:c_,links:{},properties:{},actorCnt:null,rectData:null,type:i||"participant"},c_&&h_[c_]&&(h_[c_].nextActor=t),c_=t)}function g_(t,e,r={text:void 0,wrap:void 0},i){var n;if(i===x_.ACTIVE_END&&(t=>{let e,r=0;for(e=0;e<u_.length;e++)u_[e].type===x_.ACTIVE_START&&u_[e].from.actor===t&&r++,u_[e].type===x_.ACTIVE_END&&u_[e].from.actor===t&&r--;return r})(t.actor)<1)throw(n=new Error("Trying to inactivate an inactive participant ("+t.actor+")")).hash={text:"->>-",token:"->>-",line:"1",loc:{first_line:1,last_line:1,first_column:1,last_column:1},expected:["'ACTIVE_PARTICIPANT'"]},n;return u_.push({from:t,to:e,message:r.text,wrap:void 0===r.wrap&&__()||!!r.wrap,type:i}),!0}function y_(t,e,r){r.text,void 0===r.wrap&&__()||r.wrap,t=[].concat(t,t),u_.push({from:t[0],to:t[1],message:r.text,wrap:void 0===r.wrap&&__()||!!r.wrap,type:x_.NOTE,placement:e})}function m_(e,r){e=b_(e);try{let t=Go(r.text,J());t=(t=t.replace(/&amp;/g,"&")).replace(/&equals;/g,"="),v_(e,JSON.parse(t))}catch(t){S.error("error while parsing actor link text",t)}}const b_=function(t){return h_[t]},__=()=>void 0!==p_?p_:J().sequence.wrap,x_={SOLID:0,DOTTED:1,NOTE:2,SOLID_CROSS:3,DOTTED_CROSS:4,SOLID_OPEN:5,DOTTED_OPEN:6,LOOP_START:10,LOOP_END:11,ALT_START:12,ALT_ELSE:13,ALT_END:14,OPT_START:15,OPT_END:16,ACTIVE_START:17,ACTIVE_END:18,PAR_START:19,PAR_AND:20,PAR_END:21,RECT_START:22,RECT_END:23,SOLID_POINT:24,DOTTED_POINT:25,AUTONUMBER:26,CRITICAL_START:27,CRITICAL_OPTION:28,CRITICAL_END:29,BREAK_START:30,BREAK_END:31};function v_(t,e){if(null==t.links)t.links=e;else for(var r in e)t.links[r]=e[r]}function k_(t,e){t=b_(t);try{var r=Go(e.text,J());w_(t,JSON.parse(r))}catch(t){S.error("error while parsing actor properties text",t)}}function w_(t,e){if(null==t.properties)t.properties=e;else for(var r in e)t.properties[r]=e[r]}function T_(t,e){t=b_(t),e=document.getElementById(e.text);try{var r=e.innerHTML,i=JSON.parse(r);i.properties&&w_(t,i.properties),i.links&&v_(t,i.links)}catch(t){S.error("error while parsing actor details text",t)}}function C_(t){if(Array.isArray(t))t.forEach(function(t){C_(t)});else switch(t.type){case"sequenceIndex":u_.push({from:void 0,to:void 0,message:{start:t.sequenceIndex,step:t.sequenceIndexStep,visible:t.sequenceVisible},wrap:!1,type:t.signalType});break;case"addParticipant":f_(t.actor,t.actor,t.description,"participant");break;case"addActor":f_(t.actor,t.actor,t.description,"actor");break;case"activeStart":case"activeEnd":g_(t.actor,void 0,void 0,t.signalType);break;case"addNote":y_(t.actor,t.placement,t.text);break;case"addLinks":m_(t.actor,t.text);break;case"addALink":var e=t.actor,r=t.text;e=b_(e);try{var i={};let t=Go(r.text,J());var n=t.indexOf("@"),a=(t=(t=t.replace(/&amp;/g,"&")).replace(/&equals;/g,"=")).slice(0,n-1).trim(),s=t.slice(n+1).trim();i[a]=s,v_(e,i)}catch(t){S.error("error while parsing actor link text",t)}break;case"addProperties":k_(t.actor,t.text);break;case"addDetails":T_(t.actor,t.text);break;case"addMessage":g_(t.from,t.to,t.msg,t.signalType);break;case"loopStart":g_(void 0,void 0,t.loopText,t.signalType);break;case"loopEnd":g_(void 0,void 0,void 0,t.signalType);break;case"rectStart":g_(void 0,void 0,t.color,t.signalType);break;case"rectEnd":g_(void 0,void 0,void 0,t.signalType);break;case"optStart":g_(void 0,void 0,t.optText,t.signalType);break;case"optEnd":g_(void 0,void 0,void 0,t.signalType);break;case"altStart":case"else":g_(void 0,void 0,t.altText,t.signalType);break;case"altEnd":g_(void 0,void 0,void 0,t.signalType);break;case"setAccTitle":Iu(t.text);break;case"parStart":case"and":g_(void 0,void 0,t.parText,t.signalType);break;case"parEnd":g_(void 0,void 0,void 0,t.signalType);break;case"criticalStart":g_(void 0,void 0,t.criticalText,t.signalType);break;case"option":g_(void 0,void 0,t.optionText,t.signalType);break;case"criticalEnd":g_(void 0,void 0,void 0,t.signalType);break;case"breakStart":g_(void 0,void 0,t.breakText,t.signalType);break;case"breakEnd":g_(void 0,void 0,void 0,t.signalType)}}const E_={addActor:f_,addMessage:function(t,e,r,i){u_.push({from:t,to:e,message:r.text,wrap:void 0===r.wrap&&__()||!!r.wrap,answer:i})},addSignal:g_,addLinks:m_,addDetails:T_,addProperties:k_,autoWrap:__,setWrap:function(t){p_=t},enableSequenceNumbers:function(){d_=!0},disableSequenceNumbers:function(){d_=!1},showSequenceNumbers:()=>d_,getMessages:function(){return u_},getActors:function(){return h_},getActor:b_,getActorKeys:function(){return Object.keys(h_)},getActorProperty:function(t,e){if(void 0!==t&&void 0!==t.properties)return t.properties[e]},getAccTitle:Fu,getDiagramTitle:Yu,setDiagramTitle:$u,parseDirective:function(t,e,r){Jv.parseDirective(this,t,e,r)},getConfig:()=>J().sequence,clear:function(){h_={},u_=[],d_=!1,Bu()},parseMessage:function(t){t=t.trim(),t={text:t.replace(/^:?(?:no)?wrap:/,"").trim(),wrap:null!==t.match(/^:?wrap:/)||null===t.match(/^:?nowrap:/)&&void 0};return S.debug("parseMessage:",t),t},LINETYPE:x_,ARROWTYPE:{FILLED:0,OPEN:1},PLACEMENT:{LEFTOF:0,RIGHTOF:1,OVER:2},addNote:y_,setAccTitle:Iu,apply:C_,setAccDescription:Ru,getAccDescription:Pu};let S_=[];function A_(t,e){var r,i,n,a,s,o=t.append("polygon");return o.attr("points",(r=e.x,i=e.y,n=e.width,a=e.height,r+","+i+" "+(r+n)+","+i+" "+(r+n)+","+(i+a-(s=7))+" "+(r+n-1.2*s)+","+(i+a)+" "+r+","+(i+a))),o.attr("class","labelBox"),e.y=e.y+e.height/2,R_(t,e),o}const D_=t=>{S_.push(t)},L_=()=>{S_.forEach(t=>{t()}),S_=[]},M_=function(t,e){t=t.append("rect");return t.attr("x",e.x),t.attr("y",e.y),t.attr("fill",e.fill),t.attr("stroke",e.stroke),t.attr("width",e.width),t.attr("height",e.height),t.attr("rx",e.rx),t.attr("ry",e.ry),void 0!==e.class&&t.attr("class",e.class),t},N_=(e,r)=>{D_(()=>{var t=document.querySelectorAll(e);0!==t.length&&(t[0].addEventListener("mouseover",function(){I_("actor"+r+"_popup")}),t[0].addEventListener("mouseout",function(){F_("actor"+r+"_popup")}))})},O_=function(t,e,r,i){t=t.append("image"),t.attr("x",e),t.attr("y",r),e=Y(i);t.attr("xlink:href",e)},B_=function(t,e,r,i){t=t.append("use"),t.attr("x",e),t.attr("y",r),e=Y(i);t.attr("xlink:href","#"+e)},I_=function(t){t=document.getElementById(t);null!=t&&(t.style.display="block")},F_=function(t){t=document.getElementById(t);null!=t&&(t.style.display="none")},R_=function(t,e){let r=0,i=0;var n,a,s=e.text.split(tl.lineBreakRegex);let o=[],l=0,c=()=>e.y;if(void 0!==e.valign&&void 0!==e.textMargin&&0<e.textMargin)switch(e.valign){case"top":case"start":c=()=>Math.round(e.y+e.textMargin);break;case"middle":case"center":c=()=>Math.round(e.y+(r+i+e.textMargin)/2);break;case"bottom":case"end":c=()=>Math.round(e.y+(r+i+2*e.textMargin)-e.textMargin)}if(void 0!==e.anchor&&void 0!==e.textMargin&&void 0!==e.width)switch(e.anchor){case"left":case"start":e.x=Math.round(e.x+e.textMargin),e.anchor="start",e.dominantBaseline="middle",e.alignmentBaseline="middle";break;case"middle":case"center":e.x=Math.round(e.x+e.width/2),e.anchor="middle",e.dominantBaseline="middle",e.alignmentBaseline="middle";break;case"right":case"end":e.x=Math.round(e.x+e.width-e.textMargin),e.anchor="end",e.dominantBaseline="middle",e.alignmentBaseline="middle"}for([n,a]of s.entries()){void 0!==e.textMargin&&0===e.textMargin&&void 0!==e.fontSize&&(l=n*e.fontSize);var h,u=t.append("text");u.attr("x",e.x),u.attr("y",c()),void 0!==e.anchor&&u.attr("text-anchor",e.anchor).attr("dominant-baseline",e.dominantBaseline).attr("alignment-baseline",e.alignmentBaseline),void 0!==e.fontFamily&&u.style("font-family",e.fontFamily),void 0!==e.fontSize&&u.style("font-size",e.fontSize),void 0!==e.fontWeight&&u.style("font-weight",e.fontWeight),void 0!==e.fill&&u.attr("fill",e.fill),void 0!==e.class&&u.attr("class",e.class),void 0!==e.dy?u.attr("dy",e.dy):0!==l&&u.attr("dy",l),(e.tspan?((h=u.append("tspan")).attr("x",e.x),void 0!==e.fill&&h.attr("fill",e.fill),h):u).text(a),void 0!==e.valign&&void 0!==e.textMargin&&0<e.textMargin&&(i+=(u._groups||u)[0][0].getBBox().height,r=i),o.push(u)}return o};let P_=-1;function $_(){return{x:0,y:0,fill:void 0,anchor:void 0,style:"#666",width:void 0,height:void 0,textMargin:0,rx:0,ry:0,tspan:!0,valign:void 0}}const Y_=(t,e)=>{t.selectAll&&t.selectAll(".actor-line").attr("class","200").attr("y2",e-55)},j_=function(){return{x:0,y:0,fill:"#EDF2AE",stroke:"#666",width:100,anchor:"start",height:100,rx:0,ry:0}},z_=function(t){return"fo"===t.textPlacement?Q_:"old"===t.textPlacement?X_:Z_},U_=function(t){return"fo"===t.textPlacement?V_:"old"===t.textPlacement?H_:q_},W_={drawRect:M_,drawText:R_,drawLabel:A_,drawActor:function(e,r,i){switch(r.type){case"actor":return l=e,a=i,s=(o=r).x+o.width/2,0===o.y&&(P_++,l.append("line").attr("id","actor"+P_).attr("x1",s).attr("y1",80).attr("x2",s).attr("y2",2e3).attr("class","actor-line").attr("stroke-width","0.5px").attr("stroke","#999")),(l=l.append("g")).attr("class","actor-man"),(c=j_()).x=o.x,c.y=o.y,c.fill="#eaeaea",c.width=o.width,c.height=o.height,c.class="actor",c.rx=3,c.ry=3,l.append("line").attr("id","actor-man-torso"+P_).attr("x1",s).attr("y1",o.y+25).attr("x2",s).attr("y2",o.y+45),l.append("line").attr("id","actor-man-arms"+P_).attr("x1",s-18).attr("y1",o.y+33).attr("x2",s+18).attr("y2",o.y+33),l.append("line").attr("x1",s-18).attr("y1",o.y+60).attr("x2",s).attr("y2",o.y+45),l.append("line").attr("x1",s).attr("y1",o.y+45).attr("x2",s+16).attr("y2",o.y+60),(s=l.append("circle")).attr("cx",o.x+o.width/2),s.attr("cy",o.y+10),s.attr("r",15),s.attr("width",o.width),s.attr("height",o.height),s=l.node().getBBox(),o.height=s.height,z_(a)(o.description,l,c.x,c.y+35,c.width,c.height,{class:"actor"},a),o.height;case"participant":{s=e;l=r;c=i;var n,a=l.x+l.width/2,s=s.append("g"),o=s,a=(0===l.y&&(P_++,o.append("line").attr("id","actor"+P_).attr("x1",a).attr("y1",5).attr("x2",a).attr("y2",2e3).attr("class","actor-line").attr("stroke-width","0.5px").attr("stroke","#999"),o=s.append("g"),l.actorCnt=P_,null!=l.links)&&(o.attr("id","root-"+P_),N_("#root-"+P_,P_)),j_()),s="actor",s=(null!=l.properties&&l.properties.class?s=l.properties.class:a.fill="#eaeaea",a.x=l.x,a.y=l.y,a.width=l.width,a.height=l.height,a.class=s,a.rx=3,a.ry=3,M_(o,a));l.rectData=a,null!=l.properties&&l.properties.icon&&("@"===(n=l.properties.icon.trim()).charAt(0)?B_(o,a.x+a.width-20,a.y+10,n.substr(1)):O_(o,a.x+a.width-20,a.y+10,n)),z_(c)(l.description,o,a.x,a.y,a.width,a.height,{class:"actor"},c);let t=l.height;return s.node&&(n=s.node().getBBox(),l.height=n.height,t=n.height),t;return}}var l,o,a,s,c},drawPopup:function(t,e,r,i,n){if(void 0===e.links||null===e.links||0===Object.keys(e.links).length)return{height:0,width:0};var a=e.links,s=e.actorCnt,o=e.rectData,e="none",l=(n&&(e="block !important"),t.append("g")),n=(l.attr("id","actor"+s+"_popup"),l.attr("class","actorPopupMenu"),l.attr("display",e),N_("#actor"+s+"_popup",s),""),c=(void 0!==o.class&&(n=" "+o.class),o.width>r?o.width:r),t=l.append("rect");if(t.attr("class","actorPopupMenuPanel"+n),t.attr("x",o.x),t.attr("y",o.height),t.attr("fill",o.fill),t.attr("stroke",o.stroke),t.attr("width",c),t.attr("height",o.height),t.attr("rx",o.rx),t.attr("ry",o.ry),null!=a){var h,u=20;for(h in a){var d=l.append("a"),p=Y(a[h]);d.attr("xlink:href",p),d.attr("target","_blank"),U_(i)(h,d,o.x+10,o.height+u,c,20,{class:"actor"},i),u+=30}}return t.attr("height",u),{height:o.height+u,width:c}},drawImage:O_,drawEmbeddedImage:B_,anchorElement:function(t){return t.append("g")},drawActivation:function(t,e,r,i,n){var a=j_(),s=e.anchored;a.x=e.startx,a.y=e.starty,a.class="activation"+n%3,a.width=e.stopx-e.startx,a.height=r-e.starty,M_(s,a)},drawLoop:function(t,r,e,i){function n(t,e,r,i){return d.append("line").attr("x1",t).attr("y1",e).attr("x2",r).attr("y2",i).attr("class","loopLine")}const{boxMargin:a,boxTextMargin:s,labelBoxHeight:o,labelBoxWidth:l,messageFontFamily:c,messageFontSize:h,messageFontWeight:u}=i,d=t.append("g");n(r.startx,r.starty,r.stopx,r.starty),n(r.stopx,r.starty,r.stopx,r.stopy),n(r.startx,r.stopy,r.stopx,r.stopy),n(r.startx,r.starty,r.startx,r.stopy),void 0!==r.sections&&r.sections.forEach(function(t){n(r.startx,t.y,r.stopx,t.y).style("stroke-dasharray","3, 3")});let p=$_(),f=(p.text=e,p.x=r.startx,p.y=r.starty,p.fontFamily=c,p.fontSize=h,p.fontWeight=u,p.anchor="middle",p.valign="middle",p.tspan=!1,p.width=l||50,p.height=o||20,p.textMargin=s,p.class="labelText",A_(d,p),(p=$_()).text=r.title,p.x=r.startx+l/2+(r.stopx-r.startx)/2,p.y=r.starty+a+s,p.anchor="middle",p.valign="middle",p.textMargin=s,p.class="loopText",p.fontFamily=c,p.fontSize=h,p.fontWeight=u,p.wrap=!0,R_(d,p));return void 0!==r.sectionTitles&&r.sectionTitles.forEach(function(t,e){t.message&&(p.text=t.message,p.x=r.startx+(r.stopx-r.startx)/2,p.y=r.sections[e].y+a+s,p.class="loopText",p.anchor="middle",p.valign="middle",p.tspan=!1,p.fontFamily=c,p.fontSize=h,p.fontWeight=u,p.wrap=r.wrap,f=R_(d,p),t=Math.round(f.map(t=>(t._groups||t)[0][0].getBBox().height).reduce((t,e)=>t+e)),r.sections[e].height+=t-(a+s))}),r.height=Math.round(r.stopy-r.starty),d},drawBackgroundRect:function(t,e){M_(t,{x:e.startx,y:e.starty,width:e.stopx-e.startx,height:e.stopy-e.starty,fill:e.fill,class:"rect"}).lower()},insertArrowHead:function(t){t.append("defs").append("marker").attr("id","arrowhead").attr("refX",9).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",12).attr("markerHeight",12).attr("orient","auto").append("path").attr("d","M 0 0 L 10 5 L 0 10 z")},insertArrowFilledHead:function(t){t.append("defs").append("marker").attr("id","filled-head").attr("refX",18).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L14,7 L9,1 Z")},insertSequenceNumber:function(t){t.append("defs").append("marker").attr("id","sequencenumber").attr("refX",15).attr("refY",15).attr("markerWidth",60).attr("markerHeight",40).attr("orient","auto").append("circle").attr("cx",15).attr("cy",15).attr("r",6)},insertArrowCrossHead:function(t){t.append("defs").append("marker").attr("id","crosshead").attr("markerWidth",15).attr("markerHeight",8).attr("orient","auto").attr("refX",4).attr("refY",5).append("path").attr("fill","none").attr("stroke","#000000").style("stroke-dasharray","0, 0").attr("stroke-width","1pt").attr("d","M 1,2 L 6,7 M 6,2 L 1,7")},insertDatabaseIcon:function(t){t.append("defs").append("symbol").attr("id","database").attr("fill-rule","evenodd").attr("clip-rule","evenodd").append("path").attr("transform","scale(.5)").attr("d","M12.258.001l.256.004.255.005.253.008.251.01.249.012.247.015.246.016.242.019.241.02.239.023.236.024.233.027.231.028.229.031.225.032.223.034.22.036.217.038.214.04.211.041.208.043.205.045.201.046.198.048.194.05.191.051.187.053.183.054.18.056.175.057.172.059.168.06.163.061.16.063.155.064.15.066.074.033.073.033.071.034.07.034.069.035.068.035.067.035.066.035.064.036.064.036.062.036.06.036.06.037.058.037.058.037.055.038.055.038.053.038.052.038.051.039.05.039.048.039.047.039.045.04.044.04.043.04.041.04.04.041.039.041.037.041.036.041.034.041.033.042.032.042.03.042.029.042.027.042.026.043.024.043.023.043.021.043.02.043.018.044.017.043.015.044.013.044.012.044.011.045.009.044.007.045.006.045.004.045.002.045.001.045v17l-.001.045-.002.045-.004.045-.006.045-.007.045-.009.044-.011.045-.012.044-.013.044-.015.044-.017.043-.018.044-.02.043-.021.043-.023.043-.024.043-.026.043-.027.042-.029.042-.03.042-.032.042-.033.042-.034.041-.036.041-.037.041-.039.041-.04.041-.041.04-.043.04-.044.04-.045.04-.047.039-.048.039-.05.039-.051.039-.052.038-.053.038-.055.038-.055.038-.058.037-.058.037-.06.037-.06.036-.062.036-.064.036-.064.036-.066.035-.067.035-.068.035-.069.035-.07.034-.071.034-.073.033-.074.033-.15.066-.155.064-.16.063-.163.061-.168.06-.172.059-.175.057-.18.056-.183.054-.187.053-.191.051-.194.05-.198.048-.201.046-.205.045-.208.043-.211.041-.214.04-.217.038-.22.036-.223.034-.225.032-.229.031-.231.028-.233.027-.236.024-.239.023-.241.02-.242.019-.246.016-.247.015-.249.012-.251.01-.253.008-.255.005-.256.004-.258.001-.258-.001-.256-.004-.255-.005-.253-.008-.251-.01-.249-.012-.247-.015-.245-.016-.243-.019-.241-.02-.238-.023-.236-.024-.234-.027-.231-.028-.228-.031-.226-.032-.223-.034-.22-.036-.217-.038-.214-.04-.211-.041-.208-.043-.204-.045-.201-.046-.198-.048-.195-.05-.19-.051-.187-.053-.184-.054-.179-.056-.176-.057-.172-.059-.167-.06-.164-.061-.159-.063-.155-.064-.151-.066-.074-.033-.072-.033-.072-.034-.07-.034-.069-.035-.068-.035-.067-.035-.066-.035-.064-.036-.063-.036-.062-.036-.061-.036-.06-.037-.058-.037-.057-.037-.056-.038-.055-.038-.053-.038-.052-.038-.051-.039-.049-.039-.049-.039-.046-.039-.046-.04-.044-.04-.043-.04-.041-.04-.04-.041-.039-.041-.037-.041-.036-.041-.034-.041-.033-.042-.032-.042-.03-.042-.029-.042-.027-.042-.026-.043-.024-.043-.023-.043-.021-.043-.02-.043-.018-.044-.017-.043-.015-.044-.013-.044-.012-.044-.011-.045-.009-.044-.007-.045-.006-.045-.004-.045-.002-.045-.001-.045v-17l.001-.045.002-.045.004-.045.006-.045.007-.045.009-.044.011-.045.012-.044.013-.044.015-.044.017-.043.018-.044.02-.043.021-.043.023-.043.024-.043.026-.043.027-.042.029-.042.03-.042.032-.042.033-.042.034-.041.036-.041.037-.041.039-.041.04-.041.041-.04.043-.04.044-.04.046-.04.046-.039.049-.039.049-.039.051-.039.052-.038.053-.038.055-.038.056-.038.057-.037.058-.037.06-.037.061-.036.062-.036.063-.036.064-.036.066-.035.067-.035.068-.035.069-.035.07-.034.072-.034.072-.033.074-.033.151-.066.155-.064.159-.063.164-.061.167-.06.172-.059.176-.057.179-.056.184-.054.187-.053.19-.051.195-.05.198-.048.201-.046.204-.045.208-.043.211-.041.214-.04.217-.038.22-.036.223-.034.226-.032.228-.031.231-.028.234-.027.236-.024.238-.023.241-.02.243-.019.245-.016.247-.015.249-.012.251-.01.253-.008.255-.005.256-.004.258-.001.258.001zm-9.258 20.499v.01l.001.021.003.021.004.022.005.021.006.022.007.022.009.023.01.022.011.023.012.023.013.023.015.023.016.024.017.023.018.024.019.024.021.024.022.025.023.024.024.025.052.049.056.05.061.051.066.051.07.051.075.051.079.052.084.052.088.052.092.052.097.052.102.051.105.052.11.052.114.051.119.051.123.051.127.05.131.05.135.05.139.048.144.049.147.047.152.047.155.047.16.045.163.045.167.043.171.043.176.041.178.041.183.039.187.039.19.037.194.035.197.035.202.033.204.031.209.03.212.029.216.027.219.025.222.024.226.021.23.02.233.018.236.016.24.015.243.012.246.01.249.008.253.005.256.004.259.001.26-.001.257-.004.254-.005.25-.008.247-.011.244-.012.241-.014.237-.016.233-.018.231-.021.226-.021.224-.024.22-.026.216-.027.212-.028.21-.031.205-.031.202-.034.198-.034.194-.036.191-.037.187-.039.183-.04.179-.04.175-.042.172-.043.168-.044.163-.045.16-.046.155-.046.152-.047.148-.048.143-.049.139-.049.136-.05.131-.05.126-.05.123-.051.118-.052.114-.051.11-.052.106-.052.101-.052.096-.052.092-.052.088-.053.083-.051.079-.052.074-.052.07-.051.065-.051.06-.051.056-.05.051-.05.023-.024.023-.025.021-.024.02-.024.019-.024.018-.024.017-.024.015-.023.014-.024.013-.023.012-.023.01-.023.01-.022.008-.022.006-.022.006-.022.004-.022.004-.021.001-.021.001-.021v-4.127l-.077.055-.08.053-.083.054-.085.053-.087.052-.09.052-.093.051-.095.05-.097.05-.1.049-.102.049-.105.048-.106.047-.109.047-.111.046-.114.045-.115.045-.118.044-.12.043-.122.042-.124.042-.126.041-.128.04-.13.04-.132.038-.134.038-.135.037-.138.037-.139.035-.142.035-.143.034-.144.033-.147.032-.148.031-.15.03-.151.03-.153.029-.154.027-.156.027-.158.026-.159.025-.161.024-.162.023-.163.022-.165.021-.166.02-.167.019-.169.018-.169.017-.171.016-.173.015-.173.014-.175.013-.175.012-.177.011-.178.01-.179.008-.179.008-.181.006-.182.005-.182.004-.184.003-.184.002h-.37l-.184-.002-.184-.003-.182-.004-.182-.005-.181-.006-.179-.008-.179-.008-.178-.01-.176-.011-.176-.012-.175-.013-.173-.014-.172-.015-.171-.016-.17-.017-.169-.018-.167-.019-.166-.02-.165-.021-.163-.022-.162-.023-.161-.024-.159-.025-.157-.026-.156-.027-.155-.027-.153-.029-.151-.03-.15-.03-.148-.031-.146-.032-.145-.033-.143-.034-.141-.035-.14-.035-.137-.037-.136-.037-.134-.038-.132-.038-.13-.04-.128-.04-.126-.041-.124-.042-.122-.042-.12-.044-.117-.043-.116-.045-.113-.045-.112-.046-.109-.047-.106-.047-.105-.048-.102-.049-.1-.049-.097-.05-.095-.05-.093-.052-.09-.051-.087-.052-.085-.053-.083-.054-.08-.054-.077-.054v4.127zm0-5.654v.011l.001.021.003.021.004.021.005.022.006.022.007.022.009.022.01.022.011.023.012.023.013.023.015.024.016.023.017.024.018.024.019.024.021.024.022.024.023.025.024.024.052.05.056.05.061.05.066.051.07.051.075.052.079.051.084.052.088.052.092.052.097.052.102.052.105.052.11.051.114.051.119.052.123.05.127.051.131.05.135.049.139.049.144.048.147.048.152.047.155.046.16.045.163.045.167.044.171.042.176.042.178.04.183.04.187.038.19.037.194.036.197.034.202.033.204.032.209.03.212.028.216.027.219.025.222.024.226.022.23.02.233.018.236.016.24.014.243.012.246.01.249.008.253.006.256.003.259.001.26-.001.257-.003.254-.006.25-.008.247-.01.244-.012.241-.015.237-.016.233-.018.231-.02.226-.022.224-.024.22-.025.216-.027.212-.029.21-.03.205-.032.202-.033.198-.035.194-.036.191-.037.187-.039.183-.039.179-.041.175-.042.172-.043.168-.044.163-.045.16-.045.155-.047.152-.047.148-.048.143-.048.139-.05.136-.049.131-.05.126-.051.123-.051.118-.051.114-.052.11-.052.106-.052.101-.052.096-.052.092-.052.088-.052.083-.052.079-.052.074-.051.07-.052.065-.051.06-.05.056-.051.051-.049.023-.025.023-.024.021-.025.02-.024.019-.024.018-.024.017-.024.015-.023.014-.023.013-.024.012-.022.01-.023.01-.023.008-.022.006-.022.006-.022.004-.021.004-.022.001-.021.001-.021v-4.139l-.077.054-.08.054-.083.054-.085.052-.087.053-.09.051-.093.051-.095.051-.097.05-.1.049-.102.049-.105.048-.106.047-.109.047-.111.046-.114.045-.115.044-.118.044-.12.044-.122.042-.124.042-.126.041-.128.04-.13.039-.132.039-.134.038-.135.037-.138.036-.139.036-.142.035-.143.033-.144.033-.147.033-.148.031-.15.03-.151.03-.153.028-.154.028-.156.027-.158.026-.159.025-.161.024-.162.023-.163.022-.165.021-.166.02-.167.019-.169.018-.169.017-.171.016-.173.015-.173.014-.175.013-.175.012-.177.011-.178.009-.179.009-.179.007-.181.007-.182.005-.182.004-.184.003-.184.002h-.37l-.184-.002-.184-.003-.182-.004-.182-.005-.181-.007-.179-.007-.179-.009-.178-.009-.176-.011-.176-.012-.175-.013-.173-.014-.172-.015-.171-.016-.17-.017-.169-.018-.167-.019-.166-.02-.165-.021-.163-.022-.162-.023-.161-.024-.159-.025-.157-.026-.156-.027-.155-.028-.153-.028-.151-.03-.15-.03-.148-.031-.146-.033-.145-.033-.143-.033-.141-.035-.14-.036-.137-.036-.136-.037-.134-.038-.132-.039-.13-.039-.128-.04-.126-.041-.124-.042-.122-.043-.12-.043-.117-.044-.116-.044-.113-.046-.112-.046-.109-.046-.106-.047-.105-.048-.102-.049-.1-.049-.097-.05-.095-.051-.093-.051-.09-.051-.087-.053-.085-.052-.083-.054-.08-.054-.077-.054v4.139zm0-5.666v.011l.001.02.003.022.004.021.005.022.006.021.007.022.009.023.01.022.011.023.012.023.013.023.015.023.016.024.017.024.018.023.019.024.021.025.022.024.023.024.024.025.052.05.056.05.061.05.066.051.07.051.075.052.079.051.084.052.088.052.092.052.097.052.102.052.105.051.11.052.114.051.119.051.123.051.127.05.131.05.135.05.139.049.144.048.147.048.152.047.155.046.16.045.163.045.167.043.171.043.176.042.178.04.183.04.187.038.19.037.194.036.197.034.202.033.204.032.209.03.212.028.216.027.219.025.222.024.226.021.23.02.233.018.236.017.24.014.243.012.246.01.249.008.253.006.256.003.259.001.26-.001.257-.003.254-.006.25-.008.247-.01.244-.013.241-.014.237-.016.233-.018.231-.02.226-.022.224-.024.22-.025.216-.027.212-.029.21-.03.205-.032.202-.033.198-.035.194-.036.191-.037.187-.039.183-.039.179-.041.175-.042.172-.043.168-.044.163-.045.16-.045.155-.047.152-.047.148-.048.143-.049.139-.049.136-.049.131-.051.126-.05.123-.051.118-.052.114-.051.11-.052.106-.052.101-.052.096-.052.092-.052.088-.052.083-.052.079-.052.074-.052.07-.051.065-.051.06-.051.056-.05.051-.049.023-.025.023-.025.021-.024.02-.024.019-.024.018-.024.017-.024.015-.023.014-.024.013-.023.012-.023.01-.022.01-.023.008-.022.006-.022.006-.022.004-.022.004-.021.001-.021.001-.021v-4.153l-.077.054-.08.054-.083.053-.085.053-.087.053-.09.051-.093.051-.095.051-.097.05-.1.049-.102.048-.105.048-.106.048-.109.046-.111.046-.114.046-.115.044-.118.044-.12.043-.122.043-.124.042-.126.041-.128.04-.13.039-.132.039-.134.038-.135.037-.138.036-.139.036-.142.034-.143.034-.144.033-.147.032-.148.032-.15.03-.151.03-.153.028-.154.028-.156.027-.158.026-.159.024-.161.024-.162.023-.163.023-.165.021-.166.02-.167.019-.169.018-.169.017-.171.016-.173.015-.173.014-.175.013-.175.012-.177.01-.178.01-.179.009-.179.007-.181.006-.182.006-.182.004-.184.003-.184.001-.185.001-.185-.001-.184-.001-.184-.003-.182-.004-.182-.006-.181-.006-.179-.007-.179-.009-.178-.01-.176-.01-.176-.012-.175-.013-.173-.014-.172-.015-.171-.016-.17-.017-.169-.018-.167-.019-.166-.02-.165-.021-.163-.023-.162-.023-.161-.024-.159-.024-.157-.026-.156-.027-.155-.028-.153-.028-.151-.03-.15-.03-.148-.032-.146-.032-.145-.033-.143-.034-.141-.034-.14-.036-.137-.036-.136-.037-.134-.038-.132-.039-.13-.039-.128-.041-.126-.041-.124-.041-.122-.043-.12-.043-.117-.044-.116-.044-.113-.046-.112-.046-.109-.046-.106-.048-.105-.048-.102-.048-.1-.05-.097-.049-.095-.051-.093-.051-.09-.052-.087-.052-.085-.053-.083-.053-.08-.054-.077-.054v4.153zm8.74-8.179l-.257.004-.254.005-.25.008-.247.011-.244.012-.241.014-.237.016-.233.018-.231.021-.226.022-.224.023-.22.026-.216.027-.212.028-.21.031-.205.032-.202.033-.198.034-.194.036-.191.038-.187.038-.183.04-.179.041-.175.042-.172.043-.168.043-.163.045-.16.046-.155.046-.152.048-.148.048-.143.048-.139.049-.136.05-.131.05-.126.051-.123.051-.118.051-.114.052-.11.052-.106.052-.101.052-.096.052-.092.052-.088.052-.083.052-.079.052-.074.051-.07.052-.065.051-.06.05-.056.05-.051.05-.023.025-.023.024-.021.024-.02.025-.019.024-.018.024-.017.023-.015.024-.014.023-.013.023-.012.023-.01.023-.01.022-.008.022-.006.023-.006.021-.004.022-.004.021-.001.021-.001.021.001.021.001.021.004.021.004.022.006.021.006.023.008.022.01.022.01.023.012.023.013.023.014.023.015.024.017.023.018.024.019.024.02.025.021.024.023.024.023.025.051.05.056.05.06.05.065.051.07.052.074.051.079.052.083.052.088.052.092.052.096.052.101.052.106.052.11.052.114.052.118.051.123.051.126.051.131.05.136.05.139.049.143.048.148.048.152.048.155.046.16.046.163.045.168.043.172.043.175.042.179.041.183.04.187.038.191.038.194.036.198.034.202.033.205.032.21.031.212.028.216.027.22.026.224.023.226.022.231.021.233.018.237.016.241.014.244.012.247.011.25.008.254.005.257.004.26.001.26-.001.257-.004.254-.005.25-.008.247-.011.244-.012.241-.014.237-.016.233-.018.231-.021.226-.022.224-.023.22-.026.216-.027.212-.028.21-.031.205-.032.202-.033.198-.034.194-.036.191-.038.187-.038.183-.04.179-.041.175-.042.172-.043.168-.043.163-.045.16-.046.155-.046.152-.048.148-.048.143-.048.139-.049.136-.05.131-.05.126-.051.123-.051.118-.051.114-.052.11-.052.106-.052.101-.052.096-.052.092-.052.088-.052.083-.052.079-.052.074-.051.07-.052.065-.051.06-.05.056-.05.051-.05.023-.025.023-.024.021-.024.02-.025.019-.024.018-.024.017-.023.015-.024.014-.023.013-.023.012-.023.01-.023.01-.022.008-.022.006-.023.006-.021.004-.022.004-.021.001-.021.001-.021-.001-.021-.001-.021-.004-.021-.004-.022-.006-.021-.006-.023-.008-.022-.01-.022-.01-.023-.012-.023-.013-.023-.014-.023-.015-.024-.017-.023-.018-.024-.019-.024-.02-.025-.021-.024-.023-.024-.023-.025-.051-.05-.056-.05-.06-.05-.065-.051-.07-.052-.074-.051-.079-.052-.083-.052-.088-.052-.092-.052-.096-.052-.101-.052-.106-.052-.11-.052-.114-.052-.118-.051-.123-.051-.126-.051-.131-.05-.136-.05-.139-.049-.143-.048-.148-.048-.152-.048-.155-.046-.16-.046-.163-.045-.168-.043-.172-.043-.175-.042-.179-.041-.183-.04-.187-.038-.191-.038-.194-.036-.198-.034-.202-.033-.205-.032-.21-.031-.212-.028-.216-.027-.22-.026-.224-.023-.226-.022-.231-.021-.233-.018-.237-.016-.241-.014-.244-.012-.247-.011-.25-.008-.254-.005-.257-.004-.26-.001-.26.001z")},insertComputerIcon:function(t){t.append("defs").append("symbol").attr("id","computer").attr("width","24").attr("height","24").append("path").attr("transform","scale(.5)").attr("d","M2 2v13h20v-13h-20zm18 11h-16v-9h16v9zm-10.228 6l.466-1h3.524l.467 1h-4.457zm14.228 3h-24l2-6h2.104l-1.33 4h18.45l-1.297-4h2.073l2 6zm-5-10h-14v-7h14v7z")},insertClockIcon:function(t){t.append("defs").append("symbol").attr("id","clock").attr("width","24").attr("height","24").append("path").attr("transform","scale(.5)").attr("d","M12 2c5.514 0 10 4.486 10 10s-4.486 10-10 10-10-4.486-10-10 4.486-10 10-10zm0-2c-6.627 0-12 5.373-12 12s5.373 12 12 12 12-5.373 12-12-5.373-12-12-12zm5.848 12.459c.202.038.202.333.001.372-1.907.361-6.045 1.111-6.547 1.111-.719 0-1.301-.582-1.301-1.301 0-.512.77-5.447 1.125-7.445.034-.192.312-.181.343.014l.985 6.238 5.394 1.011z")},getTextObj:$_,getNoteRect:j_,popupMenu:function(t){return"var pu = document.getElementById('"+t+"'); if (pu != null) { pu.style.display = 'block'; }"},popdownMenu:function(t){return"var pu = document.getElementById('"+t+"'); if (pu != null) { pu.style.display = 'none'; }"},fixLifeLineHeights:Y_,sanitizeUrl:Y};function H_(t,e,r,i,n,a,s){G_(e.append("text").attr("x",r).attr("y",i).style("text-anchor","start").text(t),s)}function q_(t,e,r,i,n,a,s,o){var{actorFontSize:l,actorFontFamily:c,actorFontWeight:h}=o,u=t.split(tl.lineBreakRegex);for(let t=0;t<u.length;t++){var d=t*l-l*(u.length-1)/2,p=e.append("text").attr("x",r).attr("y",i).style("text-anchor","start").style("font-size",l).style("font-weight",h).style("font-family",c);p.append("tspan").attr("x",r).attr("dy",d).text(u[t]),p.attr("y",i+a/2).attr("dominant-baseline","central").attr("alignment-baseline","central"),G_(p,s)}}function V_(t,e,r,i,n,a,s,o){e=e.append("switch"),n=e.append("foreignObject").attr("x",r).attr("y",i).attr("width",n).attr("height",a).append("xhtml:div").style("display","table").style("height","100%").style("width","100%");n.append("div").style("display","table-cell").style("text-align","center").style("vertical-align","middle").text(t),q_(t,e,r,i,0,a,s,o),G_(n,s)}function G_(t,e){for(const r in e)e.hasOwnProperty(r)&&t.attr(r,e[r])}function X_(t,e,r,i,n,a,s){K_(e.append("text").attr("x",r+n/2).attr("y",i+a/2+5).style("text-anchor","middle").text(t),s)}function Z_(t,e,r,i,n,a,s,o){var{actorFontSize:l,actorFontFamily:c,actorFontWeight:h}=o,u=l&&l.replace?l.replace("px",""):l,d=t.split(tl.lineBreakRegex);for(let t=0;t<d.length;t++){var p=t*u-u*(d.length-1)/2,f=e.append("text").attr("x",r+n/2).attr("y",i).style("text-anchor","middle").style("font-size",l).style("font-weight",h).style("font-family",c);f.append("tspan").attr("x",r+n/2).attr("dy",p).text(d[t]),f.attr("y",i+a/2).attr("dominant-baseline","central").attr("alignment-baseline","central"),K_(f,s)}}function Q_(t,e,r,i,n,a,s,o){var e=e.append("switch"),l=e.append("foreignObject").attr("x",r).attr("y",i).attr("width",n).attr("height",a).append("xhtml:div").style("display","table").style("height","100%").style("width","100%");l.append("div").style("display","table-cell").style("text-align","center").style("vertical-align","middle").text(t),Z_(t,e,r,i,n,a,s,o),K_(l,s)}function K_(t,e){for(const r in e)e.hasOwnProperty(r)&&t.attr(r,e[r])}let v={};const k={data:{startx:void 0,stopx:void 0,starty:void 0,stopy:void 0},verticalPos:0,sequenceItems:[],activations:[],models:{getHeight:function(){return Math.max.apply(null,0===this.actors.length?[0]:this.actors.map(t=>t.height||0))+(0===this.loops.length?0:this.loops.map(t=>t.height||0).reduce((t,e)=>t+e))+(0===this.messages.length?0:this.messages.map(t=>t.height||0).reduce((t,e)=>t+e))+(0===this.notes.length?0:this.notes.map(t=>t.height||0).reduce((t,e)=>t+e))},clear:function(){this.actors=[],this.loops=[],this.messages=[],this.notes=[]},addActor:function(t){this.actors.push(t)},addLoop:function(t){this.loops.push(t)},addMessage:function(t){this.messages.push(t)},addNote:function(t){this.notes.push(t)},lastActor:function(){return this.actors[this.actors.length-1]},lastLoop:function(){return this.loops[this.loops.length-1]},lastMessage:function(){return this.messages[this.messages.length-1]},lastNote:function(){return this.notes[this.notes.length-1]},actors:[],loops:[],messages:[],notes:[]},init:function(){this.sequenceItems=[],this.activations=[],this.models.clear(),this.data={startx:void 0,stopx:void 0,starty:void 0,stopy:void 0},this.verticalPos=0,a6(J())},updateVal:function(t,e,r,i){void 0===t[e]?t[e]=r:t[e]=i(r,t[e])},updateBounds:function(i,n,a,s){const o=this;let l=0;function t(r){return function(t){l++;var e=o.sequenceItems.length-l+1;o.updateVal(t,"starty",n-e*v.boxMargin,Math.min),o.updateVal(t,"stopy",s+e*v.boxMargin,Math.max),o.updateVal(k.data,"startx",i-e*v.boxMargin,Math.min),o.updateVal(k.data,"stopx",a+e*v.boxMargin,Math.max),"activation"!==r&&(o.updateVal(t,"startx",i-e*v.boxMargin,Math.min),o.updateVal(t,"stopx",a+e*v.boxMargin,Math.max),o.updateVal(k.data,"starty",n-e*v.boxMargin,Math.min),o.updateVal(k.data,"stopy",s+e*v.boxMargin,Math.max))}}this.sequenceItems.forEach(t()),this.activations.forEach(t("activation"))},insert:function(t,e,r,i){var n=Math.min(t,r),t=Math.max(t,r),r=Math.min(e,i),e=Math.max(e,i);this.updateVal(k.data,"startx",n,Math.min),this.updateVal(k.data,"starty",r,Math.min),this.updateVal(k.data,"stopx",t,Math.max),this.updateVal(k.data,"stopy",e,Math.max),this.updateBounds(n,r,t,e)},newActivation:function(t,e,r){var r=r[t.from.actor],i=s6(t.from.actor).length||0,r=r.x+r.width/2+(i-1)*v.activationWidth/2;this.activations.push({startx:r,starty:this.verticalPos+2,stopx:r+v.activationWidth,stopy:void 0,actor:t.from.actor,anchored:W_.anchorElement(e)})},endActivation:function(t){t=this.activations.map(function(t){return t.actor}).lastIndexOf(t.from.actor);return this.activations.splice(t,1)[0]},createLoop:function(t={message:void 0,wrap:!1,width:void 0},e){return{startx:void 0,starty:this.verticalPos,stopx:void 0,stopy:void 0,title:t.message,wrap:t.wrap,width:t.width,height:0,fill:e}},newLoop:function(t={message:void 0,wrap:!1,width:void 0},e){this.sequenceItems.push(this.createLoop(t,e))},endLoop:function(){return this.sequenceItems.pop()},addSectionToLoop:function(t){var e=this.sequenceItems.pop();e.sections=e.sections||[],e.sectionTitles=e.sectionTitles||[],e.sections.push({y:k.getVerticalPos(),height:0}),e.sectionTitles.push(t),this.sequenceItems.push(e)},bumpVerticalPos:function(t){this.verticalPos=this.verticalPos+t,this.data.stopy=this.verticalPos},getVerticalPos:function(){return this.verticalPos},getBounds:function(){return{bounds:this.data,models:this.models}}},J_=t=>({fontFamily:t.messageFontFamily,fontSize:t.messageFontSize,fontWeight:t.messageFontWeight}),t6=t=>({fontFamily:t.noteFontFamily,fontSize:t.noteFontSize,fontWeight:t.noteFontWeight}),e6=t=>({fontFamily:t.actorFontFamily,fontSize:t.actorFontSize,fontWeight:t.actorFontWeight});function r6(t,e,r,i,n,a){if(!0===n.hideUnusedParticipants){const u=new Set;a.forEach(t=>{u.add(t.from),u.add(t.to)}),r=r.filter(t=>u.has(t))}let s=0,o=0,l=0;for(const d of r){var c=e[d],h=(c.width=c.width||v.width,c.height=Math.max(c.height||v.height,v.height),c.margin=c.margin||v.actorMargin,c.x=s+o,c.y=i,W_.drawActor(t,c,v));l=Math.max(l,h),k.insert(c.x,i,c.x+c.width,c.height),s+=c.width,o+=c.margin,k.models.addActor(c)}k.bumpVerticalPos(l)}function i6(t,e,r,i){let n=0,a=0;for(const l of r){var s=e[l],o=function(t){let e=0;const r=e6(v);for(const i in t.links){const n=t1.calculateTextDimensions(i,r).width+2*v.wrapPadding+2*v.boxMargin;e<n&&(e=n)}return e}(s),o=W_.drawPopup(t,s,o,v,v.forceMenus,i);o.height>n&&(n=o.height),o.width+s.x>a&&(a=o.width+s.x)}return{maxHeight:n,maxWidth:a}}function n6(t,e){return e=e[t],[(t=s6(t)).reduce(function(t,e){return Math.min(t,e.startx)},e.x+e.width/2),t.reduce(function(t,e){return Math.max(t,e.stopx)},e.x+e.width/2)]}const a6=function(t){Jc(v,t),t.fontFamily&&(v.actorFontFamily=v.noteFontFamily=v.messageFontFamily=t.fontFamily),t.fontSize&&(v.actorFontSize=v.noteFontSize=v.messageFontSize=t.fontSize),t.fontWeight&&(v.actorFontWeight=v.noteFontWeight=v.messageFontWeight=t.fontWeight)},s6=function(e){return k.activations.filter(function(t){return t.actor===e})};function o6(t,e,r,i,n){k.bumpVerticalPos(r);let a=i;e.id&&e.message&&t[e.id]&&(r=t[e.id].width,t=J_(v),e.message=t1.wrapLabel(`[${e.message}]`,r-2*v.wrapPadding,t),e.width=r,e.wrap=!0,r=t1.calculateTextDimensions(e.message,t),t=Math.max(r.height,v.labelBoxHeight),a=i+t,S.debug(t+" - "+e.message)),n(e),k.bumpVerticalPos(a)}const l6=function(t,e,r){var i=e[t.from].x,n=e[t.to].x,a=t.wrap&&t.message,s=t1.calculateTextDimensions(a?t1.wrapLabel(t.message,v.width,t6(v)):t.message,t6(v)),o={width:a?v.width:Math.max(v.width,s.width+2*v.noteMargin),height:0,startx:e[t.from].x,stopx:0,starty:0,stopy:0,message:t.message};return t.placement===r.db.PLACEMENT.RIGHTOF?(o.width=a?Math.max(v.width,s.width):Math.max(e[t.from].width/2+e[t.to].width/2,s.width+2*v.noteMargin),o.startx=i+(e[t.from].width+v.actorMargin)/2):t.placement===r.db.PLACEMENT.LEFTOF?(o.width=Math.max(a?v.width:e[t.from].width/2+e[t.to].width/2,s.width+2*v.noteMargin),o.startx=i-o.width+(e[t.from].width-v.actorMargin)/2):t.to===t.from?(s=t1.calculateTextDimensions(a?t1.wrapLabel(t.message,Math.max(v.width,e[t.from].width),t6(v)):t.message,t6(v)),o.width=a?Math.max(v.width,e[t.from].width):Math.max(e[t.from].width,v.width,s.width+2*v.noteMargin),o.startx=i+(e[t.from].width-o.width)/2):(o.width=Math.abs(i+e[t.from].width/2-(n+e[t.to].width/2))+v.actorMargin,o.startx=i<n?i+e[t.from].width/2-v.actorMargin/2:n+e[t.to].width/2-v.actorMargin/2),a&&(o.message=t1.wrapLabel(t.message,o.width-2*v.wrapPadding,t6(v))),S.debug(`NM:[${o.startx},${o.stopx},${o.starty},${o.stopy}:${o.width},${o.height}=${t.message}]`),o},c6=function(t,e,r){let i=!1;var n,a,s,o,l;return(i=!![r.db.LINETYPE.SOLID_OPEN,r.db.LINETYPE.DOTTED_OPEN,r.db.LINETYPE.SOLID,r.db.LINETYPE.DOTTED,r.db.LINETYPE.SOLID_CROSS,r.db.LINETYPE.DOTTED_CROSS,r.db.LINETYPE.SOLID_POINT,r.db.LINETYPE.DOTTED_POINT].includes(t.type)||i)?(r=n6(t.from,e),e=n6(t.to,e),n=r[0]<=e[0]?1:0,a=r[0]<e[0]?0:1,s=[...r,...e],o=Math.abs(e[a]-r[n]),t.wrap&&t.message&&(t.message=t1.wrapLabel(t.message,Math.max(o+2*v.wrapPadding,v.width),J_(v))),l=t1.calculateTextDimensions(t.message,J_(v)),{width:Math.max(t.wrap?0:l.width+2*v.wrapPadding,o+2*v.wrapPadding,v.width),height:0,startx:r[n],stopx:e[a],starty:0,stopy:0,message:t.message,type:t.type,wrap:t.wrap,fromBounds:Math.min.apply(null,s),toBounds:Math.max.apply(null,s)}):{}},h6={bounds:k,drawActors:r6,drawActorsPopup:i6,setConf:a6,draw:function(t,e,r,f){var{securityLevel:i,sequence:n}=J();v=n;let a;"sandbox"===i&&(a=K("#i"+e));var n=K("sandbox"===i?a.nodes()[0].contentDocument.body:"body"),s="sandbox"===i?a.nodes()[0].contentDocument:document;k.init(),S.debug(f.db);const g="sandbox"===i?n.select(`[id="${e}"]`):K(`[id="${e}"]`),h=f.db.getActors(),o=f.db.getActorKeys(),l=f.db.getMessages(),c=f.db.getDiagramTitle(),u=function(a,t,s){const o={};return t.forEach(function(t){var e,r,i,n;a[t.to]&&a[t.from]&&(e=a[t.to],t.placement===s.db.PLACEMENT.LEFTOF&&!e.prevActor||t.placement===s.db.PLACEMENT.RIGHTOF&&!e.nextActor||(r=!(i=void 0!==t.placement),i=(i?t6:J_)(v),n=t.wrap?t1.wrapLabel(t.message,v.width-2*v.wrapPadding,i):t.message,n=t1.calculateTextDimensions(n,i).width+2*v.wrapPadding,r&&t.from===e.nextActor?o[t.to]=Math.max(o[t.to]||0,n):r&&t.from===e.prevActor?o[t.from]=Math.max(o[t.from]||0,n):r&&t.from===t.to?(o[t.from]=Math.max(o[t.from]||0,n/2),o[t.to]=Math.max(o[t.to]||0,n/2)):t.placement===s.db.PLACEMENT.RIGHTOF?o[t.from]=Math.max(o[t.from]||0,n):t.placement===s.db.PLACEMENT.LEFTOF?o[e.prevActor]=Math.max(o[e.prevActor]||0,n):t.placement===s.db.PLACEMENT.OVER&&(e.prevActor&&(o[e.prevActor]=Math.max(o[e.prevActor]||0,n/2)),e.nextActor)&&(o[t.from]=Math.max(o[t.from]||0,n/2))))}),S.debug("maxMessageWidthPerActor:",o),o}(h,l,f),d=(v.height=function(r,t){let i=0;Object.keys(r).forEach(t=>{var t=r[t],e=(t.wrap&&(t.description=t1.wrapLabel(t.description,v.width-2*v.wrapPadding,e6(v))),t1.calculateTextDimensions(t.description,e6(v)));t.width=t.wrap?v.width:Math.max(v.width,e.width+2*v.wrapPadding),t.height=t.wrap?Math.max(e.height,v.height):v.height,i=Math.max(i,t.height)});for(const a in t){var e,n=r[a];n&&(e=r[n.nextActor])&&(e=t[a]+v.actorMargin-n.width/2-e.width/2,n.margin=Math.max(e,v.actorMargin))}return Math.max(i,v.height)}(h,u),W_.insertComputerIcon(g),W_.insertDatabaseIcon(g),W_.insertClockIcon(g),r6(g,h,o,0,v,l),function(t,s,o){const l={},c=[];let h,u,d;return t.forEach(function(i){switch(i.id=t1.random({length:10}),i.type){case o.db.LINETYPE.LOOP_START:case o.db.LINETYPE.ALT_START:case o.db.LINETYPE.OPT_START:case o.db.LINETYPE.PAR_START:case o.db.LINETYPE.CRITICAL_START:case o.db.LINETYPE.BREAK_START:c.push({id:i.id,msg:i.message,from:Number.MAX_SAFE_INTEGER,to:Number.MIN_SAFE_INTEGER,width:0});break;case o.db.LINETYPE.ALT_ELSE:case o.db.LINETYPE.PAR_AND:case o.db.LINETYPE.CRITICAL_OPTION:i.message&&(h=c.pop(),l[h.id]=h,l[i.id]=h,c.push(h));break;case o.db.LINETYPE.LOOP_END:case o.db.LINETYPE.ALT_END:case o.db.LINETYPE.OPT_END:case o.db.LINETYPE.PAR_END:case o.db.LINETYPE.CRITICAL_END:case o.db.LINETYPE.BREAK_END:h=c.pop(),l[h.id]=h;break;case o.db.LINETYPE.ACTIVE_START:{const t=s[i.from?i.from.actor:i.to.actor],e=s6(i.from?i.from.actor:i.to.actor).length,r=t.x+t.width/2+(e-1)*v.activationWidth/2,n={startx:r,stopx:r+v.activationWidth,actor:i.from.actor,enabled:!0};k.activations.push(n)}break;case o.db.LINETYPE.ACTIVE_END:{const a=k.activations.map(t=>t.actor).lastIndexOf(i.from.actor);delete k.activations.splice(a,1)[0]}break}i.placement!==void 0?(u=l6(i,s,o),i.noteModel=u,c.forEach(t=>{h=t,h.from=Math.min(h.from,u.startx),h.to=Math.max(h.to,u.startx+u.width),h.width=Math.max(h.width,Math.abs(h.from-h.to))-v.labelBoxWidth})):(d=c6(i,s,o),i.msgModel=d,d.startx&&d.stopx&&c.length>0&&c.forEach(t=>{if(h=t,d.startx===d.stopx){const e=s[i.from],r=s[i.to];h.from=Math.min(e.x-d.width/2,e.x-e.width/2,h.from),h.to=Math.max(r.x+d.width/2,r.x+e.width/2,h.to),h.width=Math.max(h.width,Math.abs(h.to-h.from))-v.labelBoxWidth}else h.from=Math.min(d.startx,h.from),h.to=Math.max(d.stopx,h.to),h.width=Math.max(h.width,d.width)-v.labelBoxWidth}))}),k.activations=[],S.debug("Loop type widths:",l),l}(l,h,f));W_.insertArrowHead(g),W_.insertArrowCrossHead(g),W_.insertArrowFilledHead(g),W_.insertSequenceNumber(g);let p=1,y=1;const m=[];l.forEach(function(t){let e,r,i;switch(t.type){case f.db.LINETYPE.NOTE:r=t.noteModel,a=g,s=r,k.bumpVerticalPos(v.boxMargin),s.height=v.boxMargin,s.starty=k.getVerticalPos(),(o=W_.getNoteRect()).x=s.startx,o.y=s.starty,o.width=s.width||v.width,o.class="note",a=a.append("g"),l=W_.drawRect(a,o),(c=W_.getTextObj()).x=s.startx,c.y=s.starty,c.width=o.width,c.dy="1em",c.text=s.message,c.class="noteText",c.fontFamily=v.noteFontFamily,c.fontSize=v.noteFontSize,c.fontWeight=v.noteFontWeight,c.anchor=v.noteAlign,c.textMargin=v.noteMargin,c.valign="center",a=R_(a,c),c=Math.round(a.map(t=>(t._groups||t)[0][0].getBBox().height).reduce((t,e)=>t+e)),l.attr("height",c+2*v.noteMargin),s.height+=c+2*v.noteMargin,k.bumpVerticalPos(c+2*v.noteMargin),s.stopy=s.starty+c+2*v.noteMargin,s.stopx=s.startx+o.width,k.insert(s.startx,s.starty,s.stopx,s.stopy),k.models.addNote(s);break;case f.db.LINETYPE.ACTIVE_START:k.newActivation(t,g,h);break;case f.db.LINETYPE.ACTIVE_END:a=t,l=k.getVerticalPos(),(c=k.endActivation(a)).starty+18>l&&(c.starty=l-6,l+=12),W_.drawActivation(g,c,l,v,s6(a.from.actor).length),k.insert(c.startx,l-10,c.stopx,l);break;case f.db.LINETYPE.LOOP_START:o6(d,t,v.boxMargin,v.boxMargin+v.boxTextMargin,t=>k.newLoop(t));break;case f.db.LINETYPE.LOOP_END:e=k.endLoop(),W_.drawLoop(g,e,"loop",v),k.bumpVerticalPos(e.stopy-k.getVerticalPos()),k.models.addLoop(e);break;case f.db.LINETYPE.RECT_START:o6(d,t,v.boxMargin,v.boxMargin,t=>k.newLoop(void 0,t.message));break;case f.db.LINETYPE.RECT_END:e=k.endLoop(),W_.drawBackgroundRect(g,e),k.models.addLoop(e),k.bumpVerticalPos(e.stopy-k.getVerticalPos());break;case f.db.LINETYPE.OPT_START:o6(d,t,v.boxMargin,v.boxMargin+v.boxTextMargin,t=>k.newLoop(t));break;case f.db.LINETYPE.OPT_END:e=k.endLoop(),W_.drawLoop(g,e,"opt",v),k.bumpVerticalPos(e.stopy-k.getVerticalPos()),k.models.addLoop(e);break;case f.db.LINETYPE.ALT_START:o6(d,t,v.boxMargin,v.boxMargin+v.boxTextMargin,t=>k.newLoop(t));break;case f.db.LINETYPE.ALT_ELSE:o6(d,t,v.boxMargin+v.boxTextMargin,v.boxMargin,t=>k.addSectionToLoop(t));break;case f.db.LINETYPE.ALT_END:e=k.endLoop(),W_.drawLoop(g,e,"alt",v),k.bumpVerticalPos(e.stopy-k.getVerticalPos()),k.models.addLoop(e);break;case f.db.LINETYPE.PAR_START:o6(d,t,v.boxMargin,v.boxMargin+v.boxTextMargin,t=>k.newLoop(t));break;case f.db.LINETYPE.PAR_AND:o6(d,t,v.boxMargin+v.boxTextMargin,v.boxMargin,t=>k.addSectionToLoop(t));break;case f.db.LINETYPE.PAR_END:e=k.endLoop(),W_.drawLoop(g,e,"par",v),k.bumpVerticalPos(e.stopy-k.getVerticalPos()),k.models.addLoop(e);break;case f.db.LINETYPE.AUTONUMBER:p=t.message.start||p,y=t.message.step||y,t.message.visible?f.db.enableSequenceNumbers():f.db.disableSequenceNumbers();break;case f.db.LINETYPE.CRITICAL_START:o6(d,t,v.boxMargin,v.boxMargin+v.boxTextMargin,t=>k.newLoop(t));break;case f.db.LINETYPE.CRITICAL_OPTION:o6(d,t,v.boxMargin+v.boxTextMargin,v.boxMargin,t=>k.addSectionToLoop(t));break;case f.db.LINETYPE.CRITICAL_END:e=k.endLoop(),W_.drawLoop(g,e,"critical",v),k.bumpVerticalPos(e.stopy-k.getVerticalPos()),k.models.addLoop(e);break;case f.db.LINETYPE.BREAK_START:o6(d,t,v.boxMargin,v.boxMargin+v.boxTextMargin,t=>k.newLoop(t));break;case f.db.LINETYPE.BREAK_END:e=k.endLoop(),W_.drawLoop(g,e,"break",v),k.bumpVerticalPos(e.stopy-k.getVerticalPos()),k.models.addLoop(e);break;default:try{(i=t.msgModel).starty=k.getVerticalPos(),i.sequenceIndex=p,i.sequenceVisible=f.db.showSequenceNumbers();var n=function(t){k.bumpVerticalPos(10);var{startx:e,stopx:r,message:i}=t,n=tl.splitBreaks(i).length,n=(i=t1.calculateTextDimensions(i,J_(v))).height/n;t.height+=n,k.bumpVerticalPos(n);let a,s=i.height-10;return n=i.width,e===r?(a=k.getVerticalPos()+s,v.rightAngles||(s+=v.boxMargin,a=k.getVerticalPos()+s),s+=30,i=Math.max(n/2,v.width/2),k.insert(e-i,k.getVerticalPos()-10+s,r+i,k.getVerticalPos()+30+s)):(s+=v.boxMargin,a=k.getVerticalPos()+s,k.insert(e,a-10,r,a)),k.bumpVerticalPos(s),t.height+=s,t.stopy=t.starty+t.height,k.insert(t.fromBounds,t.starty,t.toBounds,t.stopy),a}((g,i));m.push({messageModel:i,lineStartY:n}),k.models.addMessage(i)}catch(t){S.error("error while drawing message",t)}}var a,s,o,l,c;[f.db.LINETYPE.SOLID_OPEN,f.db.LINETYPE.DOTTED_OPEN,f.db.LINETYPE.SOLID,f.db.LINETYPE.DOTTED,f.db.LINETYPE.SOLID_CROSS,f.db.LINETYPE.DOTTED_CROSS,f.db.LINETYPE.SOLID_POINT,f.db.LINETYPE.DOTTED_POINT].includes(t.type)&&(p+=y)}),m.forEach(r=>{{var i=g,n=r.messageModel,a=(r=r.lineStartY,f),{startx:n,stopx:s,starty:o,message:l,type:c,sequenceIndex:h,sequenceVisible:u}=n,d=t1.calculateTextDimensions(l,J_(v)),p=W_.getTextObj(),o=(p.x=n,p.y=o+10,p.width=s-n,p.class="messageText",p.dy="1em",p.text=l,p.fontFamily=v.messageFontFamily,p.fontSize=v.messageFontSize,p.fontWeight=v.messageFontWeight,p.anchor=v.messageAlign,p.valign="center",p.textMargin=v.wrapPadding,p.tspan=!1,R_(i,p),d.width);let t,e=(n===s?t=v.rightAngles?i.append("path").attr("d",`M  ${n},${r} H ${n+Math.max(v.width/2,o/2)} V ${r+25} H `+n):i.append("path").attr("d","M "+n+","+r+" C "+(n+60)+","+(r-10)+" "+(n+60)+","+(r+30)+" "+n+","+(r+20)):((t=i.append("line")).attr("x1",n),t.attr("y1",r),t.attr("x2",s),t.attr("y2",r)),c===a.db.LINETYPE.DOTTED||c===a.db.LINETYPE.DOTTED_CROSS||c===a.db.LINETYPE.DOTTED_POINT||c===a.db.LINETYPE.DOTTED_OPEN?(t.style("stroke-dasharray","3, 3"),t.attr("class","messageLine1")):t.attr("class","messageLine0"),"");v.arrowMarkerAbsolute&&(e=(e=(e=window.location.protocol+"//"+window.location.host+window.location.pathname+window.location.search).replace(/\(/g,"\\(")).replace(/\)/g,"\\)")),t.attr("stroke-width",2),t.attr("stroke","none"),t.style("fill","none"),c!==a.db.LINETYPE.SOLID&&c!==a.db.LINETYPE.DOTTED||t.attr("marker-end","url("+e+"#arrowhead)"),c!==a.db.LINETYPE.SOLID_POINT&&c!==a.db.LINETYPE.DOTTED_POINT||t.attr("marker-end","url("+e+"#filled-head)"),c!==a.db.LINETYPE.SOLID_CROSS&&c!==a.db.LINETYPE.DOTTED_CROSS||t.attr("marker-end","url("+e+"#crosshead)"),(u||v.showSequenceNumbers)&&(t.attr("marker-start","url("+e+"#sequencenumber)"),i.append("text").attr("x",n).attr("y",r+4).attr("font-family","sans-serif").attr("font-size","12px").attr("text-anchor","middle").attr("class","sequenceNumber").text(h))}}),v.mirrorActors&&(k.bumpVerticalPos(2*v.boxMargin),r6(g,h,o,k.getVerticalPos(),v,l),k.bumpVerticalPos(v.boxMargin),Y_(g,k.getVerticalPos()));i=i6(g,h,o,s),n=k.getBounds().bounds;S.debug("For line height fix Querying: #"+e+" .actor-line"),he("#"+e+" .actor-line").attr("y2",n.stopy);let b=n.stopy-n.starty,_=(b=b<i.maxHeight?i.maxHeight:b)+2*v.diagramMarginY,x=(v.mirrorActors&&(_=_-v.boxMargin+v.bottomMarginAdj),n.stopx-n.startx);s=(x=x<i.maxWidth?i.maxWidth:x)+2*v.diagramMarginX,c&&g.append("text").text(c).attr("x",(n.stopx-n.startx)/2-2*v.diagramMarginX).attr("y",-25),K1(g,_,s,v.useMaxWidth),e=c?40:0;g.attr("viewBox",n.startx-v.diagramMarginX+" -"+(v.diagramMarginY+e)+" "+s+" "+(_+e)),S.debug("models:",k.models)}};f6=[1,15],Xp=[1,17],g6=[1,21],y6=[1,22],Rp=[1,23],qd=[1,24],X4=[1,37],m6=[1,25],B5=[1,26],b6=[1,27],_6=[1,28],x6=[1,29],v6=[1,32],k6=[1,33],_f=[1,34],w6=[1,35],e=[1,36],x=[1,39],a=[1,40],w=[1,41],T=[1,42],T6=[1,38],C6=[1,45],C=[1,4,5,16,17,19,21,22,24,25,26,27,28,29,33,35,37,38,42,50,51,52,53,56,60],u=[1,4,5,14,15,16,17,19,21,22,24,25,26,27,28,29,33,35,37,38,42,50,51,52,53,56,60],o=[1,4,5,7,16,17,19,21,22,24,25,26,27,28,29,33,35,37,38,42,50,51,52,53,56,60],r=[4,5,16,17,19,21,22,24,25,26,27,28,29,33,35,37,38,42,50,51,52,53,56,60],(U5={trace:function(){},yy:{},symbols_:{error:2,start:3,SPACE:4,NL:5,directive:6,SD:7,document:8,line:9,statement:10,classDefStatement:11,cssClassStatement:12,idStatement:13,DESCR:14,"--\x3e":15,HIDE_EMPTY:16,scale:17,WIDTH:18,COMPOSIT_STATE:19,STRUCT_START:20,STRUCT_STOP:21,STATE_DESCR:22,AS:23,ID:24,FORK:25,JOIN:26,CHOICE:27,CONCURRENT:28,note:29,notePosition:30,NOTE_TEXT:31,direction:32,acc_title:33,acc_title_value:34,acc_descr:35,acc_descr_value:36,acc_descr_multiline_value:37,classDef:38,CLASSDEF_ID:39,CLASSDEF_STYLEOPTS:40,DEFAULT:41,class:42,CLASSENTITY_IDS:43,STYLECLASS:44,openDirective:45,typeDirective:46,closeDirective:47,":":48,argDirective:49,direction_tb:50,direction_bt:51,direction_rl:52,direction_lr:53,eol:54,";":55,EDGE_STATE:56,STYLE_SEPARATOR:57,left_of:58,right_of:59,open_directive:60,type_directive:61,arg_directive:62,close_directive:63,$accept:0,$end:1},terminals_:{2:"error",4:"SPACE",5:"NL",7:"SD",14:"DESCR",15:"--\x3e",16:"HIDE_EMPTY",17:"scale",18:"WIDTH",19:"COMPOSIT_STATE",20:"STRUCT_START",21:"STRUCT_STOP",22:"STATE_DESCR",23:"AS",24:"ID",25:"FORK",26:"JOIN",27:"CHOICE",28:"CONCURRENT",29:"note",31:"NOTE_TEXT",33:"acc_title",34:"acc_title_value",35:"acc_descr",36:"acc_descr_value",37:"acc_descr_multiline_value",38:"classDef",39:"CLASSDEF_ID",40:"CLASSDEF_STYLEOPTS",41:"DEFAULT",42:"class",43:"CLASSENTITY_IDS",44:"STYLECLASS",48:":",50:"direction_tb",51:"direction_bt",52:"direction_rl",53:"direction_lr",55:";",56:"EDGE_STATE",57:"STYLE_SEPARATOR",58:"left_of",59:"right_of",60:"open_directive",61:"type_directive",62:"arg_directive",63:"close_directive"},productions_:[0,[3,2],[3,2],[3,2],[3,2],[8,0],[8,2],[9,2],[9,1],[9,1],[10,1],[10,1],[10,1],[10,2],[10,3],[10,4],[10,1],[10,2],[10,1],[10,4],[10,3],[10,6],[10,1],[10,1],[10,1],[10,1],[10,4],[10,4],[10,1],[10,1],[10,2],[10,2],[10,1],[11,3],[11,3],[12,3],[6,3],[6,5],[32,1],[32,1],[32,1],[32,1],[54,1],[54,1],[13,1],[13,1],[13,3],[13,3],[30,1],[30,1],[45,1],[46,1],[49,1],[47,1]],performAction:function(t,e,r,i,n,a,s){var o=a.length-1;switch(n){case 4:return i.setRootDoc(a[o]),a[o];case 5:this.$=[];break;case 6:"nl"!=a[o]&&(a[o-1].push(a[o]),this.$=a[o-1]);break;case 7:case 8:this.$=a[o];break;case 9:this.$="nl";break;case 12:this.$=a[o];break;case 13:var l=a[o-1];l.description=i.trimColon(a[o]),this.$=l;break;case 14:this.$={stmt:"relation",state1:a[o-2],state2:a[o]};break;case 15:l=i.trimColon(a[o]);this.$={stmt:"relation",state1:a[o-3],state2:a[o-1],description:l};break;case 19:this.$={stmt:"state",id:a[o-3],type:"default",description:"",doc:a[o-1]};break;case 20:var c,l=a[o],h=a[o-2].trim();a[o].match(":")&&(l=(c=a[o].split(":"))[0],h=[h,c[1]]),this.$={stmt:"state",id:l,type:"default",description:h};break;case 21:this.$={stmt:"state",id:a[o-3],type:"default",description:a[o-5],doc:a[o-1]};break;case 22:this.$={stmt:"state",id:a[o],type:"fork"};break;case 23:this.$={stmt:"state",id:a[o],type:"join"};break;case 24:this.$={stmt:"state",id:a[o],type:"choice"};break;case 25:this.$={stmt:"state",id:i.getDividerId(),type:"divider"};break;case 26:this.$={stmt:"state",id:a[o-1].trim(),note:{position:a[o-2].trim(),text:a[o].trim()}};break;case 30:this.$=a[o].trim(),i.setAccTitle(this.$);break;case 31:case 32:this.$=a[o].trim(),i.setAccDescription(this.$);break;case 33:case 34:this.$={stmt:"classDef",id:a[o-1].trim(),classes:a[o].trim()};break;case 35:this.$={stmt:"applyClass",id:a[o-1].trim(),styleClass:a[o].trim()};break;case 38:i.setDirection("TB"),this.$={stmt:"dir",value:"TB"};break;case 39:i.setDirection("BT"),this.$={stmt:"dir",value:"BT"};break;case 40:i.setDirection("RL"),this.$={stmt:"dir",value:"RL"};break;case 41:i.setDirection("LR"),this.$={stmt:"dir",value:"LR"};break;case 44:case 45:this.$={stmt:"state",id:a[o].trim(),type:"default",description:""};break;case 46:case 47:this.$={stmt:"state",id:a[o-2].trim(),classes:[a[o].trim()],type:"default",description:""};break;case 50:i.parseDirective("%%{","open_directive");break;case 51:i.parseDirective(a[o],"type_directive");break;case 52:a[o]=a[o].trim().replace(/'/g,'"'),i.parseDirective(a[o],"arg_directive");break;case 53:i.parseDirective("}%%","close_directive","state")}},table:[{3:1,4:U5=[1,2],5:u6=[1,3],6:4,7:d6=[1,5],45:6,60:p6=[1,7]},{1:[3]},{3:8,4:U5,5:u6,6:4,7:d6,45:6,60:p6},{3:9,4:U5,5:u6,6:4,7:d6,45:6,60:p6},{3:10,4:U5,5:u6,6:4,7:d6,45:6,60:p6},E6([1,4,5,16,17,19,22,24,25,26,27,28,29,33,35,37,38,42,50,51,52,53,56,60],od=[2,5],{8:11}),{46:12,61:[1,13]},{61:[2,50]},{1:[2,1]},{1:[2,2]},{1:[2,3]},{1:[2,4],4:f6,5:Xp,6:30,9:14,10:16,11:18,12:19,13:20,16:g6,17:y6,19:Rp,22:qd,24:X4,25:m6,26:B5,27:b6,28:_6,29:x6,32:31,33:v6,35:k6,37:_f,38:w6,42:e,45:6,50:x,51:a,52:w,53:T,56:T6,60:p6},{47:43,48:[1,44],63:C6},E6([48,63],[2,51]),E6(C,[2,6]),{6:30,10:46,11:18,12:19,13:20,16:g6,17:y6,19:Rp,22:qd,24:X4,25:m6,26:B5,27:b6,28:_6,29:x6,32:31,33:v6,35:k6,37:_f,38:w6,42:e,45:6,50:x,51:a,52:w,53:T,56:T6,60:p6},E6(C,[2,8]),E6(C,[2,9]),E6(C,[2,10]),E6(C,[2,11]),E6(C,[2,12],{14:[1,47],15:[1,48]}),E6(C,[2,16]),{18:[1,49]},E6(C,[2,18],{20:[1,50]}),{23:[1,51]},E6(C,[2,22]),E6(C,[2,23]),E6(C,[2,24]),E6(C,[2,25]),{30:52,31:[1,53],58:[1,54],59:[1,55]},E6(C,[2,28]),E6(C,[2,29]),{34:[1,56]},{36:[1,57]},E6(C,[2,32]),{39:[1,58],41:[1,59]},{43:[1,60]},E6(u,[2,44],{57:[1,61]}),E6(u,[2,45],{57:[1,62]}),E6(C,[2,38]),E6(C,[2,39]),E6(C,[2,40]),E6(C,[2,41]),E6(o,[2,36]),{49:63,62:[1,64]},E6(o,[2,53]),E6(C,[2,7]),E6(C,[2,13]),{13:65,24:X4,56:T6},E6(C,[2,17]),E6(r,od,{8:66}),{24:[1,67]},{24:[1,68]},{23:[1,69]},{24:[2,48]},{24:[2,49]},E6(C,[2,30]),E6(C,[2,31]),{40:[1,70]},{40:[1,71]},{44:[1,72]},{24:[1,73]},{24:[1,74]},{47:75,63:C6},{63:[2,52]},E6(C,[2,14],{14:[1,76]}),{4:f6,5:Xp,6:30,9:14,10:16,11:18,12:19,13:20,16:g6,17:y6,19:Rp,21:[1,77],22:qd,24:X4,25:m6,26:B5,27:b6,28:_6,29:x6,32:31,33:v6,35:k6,37:_f,38:w6,42:e,45:6,50:x,51:a,52:w,53:T,56:T6,60:p6},E6(C,[2,20],{20:[1,78]}),{31:[1,79]},{24:[1,80]},E6(C,[2,33]),E6(C,[2,34]),E6(C,[2,35]),E6(u,[2,46]),E6(u,[2,47]),E6(o,[2,37]),E6(C,[2,15]),E6(C,[2,19]),E6(r,od,{8:81}),E6(C,[2,26]),E6(C,[2,27]),{4:f6,5:Xp,6:30,9:14,10:16,11:18,12:19,13:20,16:g6,17:y6,19:Rp,21:[1,82],22:qd,24:X4,25:m6,26:B5,27:b6,28:_6,29:x6,32:31,33:v6,35:k6,37:_f,38:w6,42:e,45:6,50:x,51:a,52:w,53:T,56:T6,60:p6},E6(C,[2,21])],defaultActions:{7:[2,50],8:[2,1],9:[2,2],10:[2,3],54:[2,48],55:[2,49],64:[2,52]},parseError:function(t,e){var r;if(!e.recoverable)throw(r=new Error(t)).hash=e,r;this.trace(t)},parse:function(t){var e,r=this,i=[0],n=[],a=[null],s=[],o=this.table,l="",c=0,h=0,u=1,d=s.slice.call(arguments,1),p=Object.create(this.lexer),f={yy:{}};for(e in this.yy)Object.prototype.hasOwnProperty.call(this.yy,e)&&(f.yy[e]=this.yy[e]);p.setInput(t,f.yy),f.yy.lexer=p,f.yy.parser=this,"u"<typeof p.yylloc&&(p.yylloc={});var g=p.yylloc,y=(s.push(g),p.options&&p.options.ranges);"function"==typeof f.yy.parseError?this.parseError=f.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;for(var m,b,_,x,v,k,w={};;){if(b=i[i.length-1],"u"<typeof(_=this.defaultActions[b]||((null===m||"u"<typeof m)&&(T=void 0,"number"!=typeof(T=n.pop()||p.lex()||u)&&(T instanceof Array&&(T=(n=T).pop()),T=r.symbols_[T]||T),m=T),o[b]&&o[b][m]))||!_.length||!_[0]){var T="",C=[];for(x in o[b])this.terminals_[x]&&2<x&&C.push("'"+this.terminals_[x]+"'");T=p.showPosition?"Parse error on line "+(c+1)+`:
`+p.showPosition()+`
Expecting `+C.join(", ")+", got '"+(this.terminals_[m]||m)+"'":"Parse error on line "+(c+1)+": Unexpected "+(m==u?"end of input":"'"+(this.terminals_[m]||m)+"'"),this.parseError(T,{text:p.match,token:this.terminals_[m]||m,line:p.yylineno,loc:g,expected:C})}if(_[0]instanceof Array&&1<_.length)throw new Error("Parse Error: multiple actions possible at state: "+b+", token: "+m);switch(_[0]){case 1:i.push(m),a.push(p.yytext),s.push(p.yylloc),i.push(_[1]),m=null,h=p.yyleng,l=p.yytext,c=p.yylineno,g=p.yylloc;break;case 2:if(v=this.productions_[_[1]][1],w.$=a[a.length-v],w._$={first_line:s[s.length-(v||1)].first_line,last_line:s[s.length-1].last_line,first_column:s[s.length-(v||1)].first_column,last_column:s[s.length-1].last_column},y&&(w._$.range=[s[s.length-(v||1)].range[0],s[s.length-1].range[1]]),typeof(k=this.performAction.apply(w,[l,h,c,f.yy,_[1],a,s].concat(d)))<"u")return k;v&&(i=i.slice(0,-1*v*2),a=a.slice(0,-1*v),s=s.slice(0,-1*v)),i.push(this.productions_[_[1]][0]),a.push(w.$),s.push(w._$),k=o[i[i.length-2]][i[i.length-1]],i.push(k);break;case 3:return!0}}return!0}}).lexer={EOF:1,parseError:function(t,e){if(!this.yy.parser)throw new Error(t);this.yy.parser.parseError(t,e)},setInput:function(t,e){return this.yy=e||this.yy||{},this._input=t,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var t=this._input[0];return this.yytext+=t,this.yyleng++,this.offset++,this.match+=t,this.matched+=t,t.match(/(?:\r\n?|\n).*/g)?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),t},unput:function(t){var e=t.length,r=t.split(/(?:\r\n?|\n)/g),t=(this._input=t+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-e),this.offset-=e,this.match.split(/(?:\r\n?|\n)/g)),i=(this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),r.length-1&&(this.yylineno-=r.length-1),this.yylloc.range);return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:r?(r.length===t.length?this.yylloc.first_column:0)+t[t.length-r.length].length-r[0].length:this.yylloc.first_column-e},this.options.ranges&&(this.yylloc.range=[i[0],i[0]+this.yyleng-e]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){return this.options.backtrack_lexer?(this._backtrack=!0,this):this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},less:function(t){this.unput(this.match.slice(t))},pastInput:function(){var t=this.matched.substr(0,this.matched.length-this.match.length);return(20<t.length?"...":"")+t.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var t=this.match;return t.length<20&&(t+=this._input.substr(0,20-t.length)),(t.substr(0,20)+(20<t.length?"...":"")).replace(/\n/g,"")},showPosition:function(){var t=this.pastInput(),e=new Array(t.length+1).join("-");return t+this.upcomingInput()+`
`+e+"^"},test_match:function(t,e){var r,i;if(this.options.backtrack_lexer&&(i={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges)&&(i.yylloc.range=this.yylloc.range.slice(0)),(r=t[0].match(/(?:\r\n?|\n).*/g))&&(this.yylineno+=r.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:r?r[r.length-1].length-r[r.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+t[0].length},this.yytext+=t[0],this.match+=t[0],this.matches=t,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(t[0].length),this.matched+=t[0],r=this.performAction.call(this,this.yy,this,e,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),r)return r;if(this._backtrack)for(var n in i)this[n]=i[n];return!1},next:function(){if(this.done)return this.EOF;var t,e,r,i;this._input||(this.done=!0),this._more||(this.yytext="",this.match="");for(var n=this._currentRules(),a=0;a<n.length;a++)if((r=this._input.match(this.rules[n[a]]))&&(!e||r[0].length>e[0].length)){if(e=r,i=a,this.options.backtrack_lexer){if(!1!==(t=this.test_match(r,n[a])))return t;if(this._backtrack){e=!1;continue}return!1}if(!this.options.flex)break}return e?!1!==(t=this.test_match(e,n[i]))&&t:""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){return this.next()||this.lex()},begin:function(t){this.conditionStack.push(t)},popState:function(){return 0<this.conditionStack.length-1?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return(this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]]:this.conditions.INITIAL).rules},topState:function(t){return 0<=(t=this.conditionStack.length-1-Math.abs(t||0))?this.conditionStack[t]:"INITIAL"},pushState:function(t){this.begin(t)},stateStackSize:function(){return this.conditionStack.length},options:{"case-insensitive":!0},performAction:function(t,e,r,i){switch(r){case 0:return 41;case 1:return 50;case 2:return 51;case 3:return 52;case 4:return 53;case 5:return this.begin("open_directive"),60;case 6:return this.begin("type_directive"),61;case 7:return this.popState(),this.begin("arg_directive"),48;case 8:return this.popState(),this.popState(),63;case 9:return 62;case 10:case 11:break;case 12:return 5;case 13:case 14:case 15:case 16:break;case 17:return this.pushState("SCALE"),17;case 18:return 18;case 19:this.popState();break;case 20:return this.begin("acc_title"),33;case 21:return this.popState(),"acc_title_value";case 22:return this.begin("acc_descr"),35;case 23:return this.popState(),"acc_descr_value";case 24:this.begin("acc_descr_multiline");break;case 25:this.popState();break;case 26:return"acc_descr_multiline_value";case 27:return this.pushState("CLASSDEF"),38;case 28:return this.popState(),this.pushState("CLASSDEFID"),"DEFAULT_CLASSDEF_ID";case 29:return this.popState(),this.pushState("CLASSDEFID"),39;case 30:return this.popState(),40;case 31:return this.pushState("CLASS"),42;case 32:return this.popState(),this.pushState("CLASS_STYLE"),43;case 33:return this.popState(),44;case 34:return this.pushState("SCALE"),17;case 35:return 18;case 36:this.popState();break;case 37:this.pushState("STATE");break;case 38:return this.popState(),e.yytext=e.yytext.slice(0,-8).trim(),25;case 39:return this.popState(),e.yytext=e.yytext.slice(0,-8).trim(),26;case 40:return this.popState(),e.yytext=e.yytext.slice(0,-10).trim(),27;case 41:return this.popState(),e.yytext=e.yytext.slice(0,-8).trim(),25;case 42:return this.popState(),e.yytext=e.yytext.slice(0,-8).trim(),26;case 43:return this.popState(),e.yytext=e.yytext.slice(0,-10).trim(),27;case 44:return 50;case 45:return 51;case 46:return 52;case 47:return 53;case 48:this.begin("STATE_STRING");break;case 49:return this.popState(),this.pushState("STATE_ID"),"AS";case 50:return this.popState(),"ID";case 51:this.popState();break;case 52:return"STATE_DESCR";case 53:return 19;case 54:this.popState();break;case 55:return this.popState(),this.pushState("struct"),20;case 56:break;case 57:return this.popState(),21;case 58:break;case 59:return this.begin("NOTE"),29;case 60:return this.popState(),this.pushState("NOTE_ID"),58;case 61:return this.popState(),this.pushState("NOTE_ID"),59;case 62:this.popState(),this.pushState("FLOATING_NOTE");break;case 63:return this.popState(),this.pushState("FLOATING_NOTE_ID"),"AS";case 64:break;case 65:return"NOTE_TEXT";case 66:return this.popState(),"ID";case 67:return this.popState(),this.pushState("NOTE_TEXT"),24;case 68:return this.popState(),e.yytext=e.yytext.substr(2).trim(),31;case 69:return this.popState(),e.yytext=e.yytext.slice(0,-8).trim(),31;case 70:case 71:return 7;case 72:return 16;case 73:return 56;case 74:return 24;case 75:return e.yytext=e.yytext.trim(),14;case 76:return 15;case 77:return 28;case 78:return 57;case 79:return 5;case 80:return"INVALID"}},rules:[/^(?:default\b)/i,/^(?:.*direction\s+TB[^\n]*)/i,/^(?:.*direction\s+BT[^\n]*)/i,/^(?:.*direction\s+RL[^\n]*)/i,/^(?:.*direction\s+LR[^\n]*)/i,/^(?:%%\{)/i,/^(?:((?:(?!\}%%)[^:.])*))/i,/^(?::)/i,/^(?:\}%%)/i,/^(?:((?:(?!\}%%).|\n)*))/i,/^(?:%%(?!\{)[^\n]*)/i,/^(?:[^\}]%%[^\n]*)/i,/^(?:[\n]+)/i,/^(?:[\s]+)/i,/^(?:((?!\n)\s)+)/i,/^(?:#[^\n]*)/i,/^(?:%[^\n]*)/i,/^(?:scale\s+)/i,/^(?:\d+)/i,/^(?:\s+width\b)/i,/^(?:accTitle\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*\{\s*)/i,/^(?:[\}])/i,/^(?:[^\}]*)/i,/^(?:classDef\s+)/i,/^(?:DEFAULT\s+)/i,/^(?:\w+\s+)/i,/^(?:[^\n]*)/i,/^(?:class\s+)/i,/^(?:(\w+)+((,\s*\w+)*))/i,/^(?:[^\n]*)/i,/^(?:scale\s+)/i,/^(?:\d+)/i,/^(?:\s+width\b)/i,/^(?:state\s+)/i,/^(?:.*<<fork>>)/i,/^(?:.*<<join>>)/i,/^(?:.*<<choice>>)/i,/^(?:.*\[\[fork\]\])/i,/^(?:.*\[\[join\]\])/i,/^(?:.*\[\[choice\]\])/i,/^(?:.*direction\s+TB[^\n]*)/i,/^(?:.*direction\s+BT[^\n]*)/i,/^(?:.*direction\s+RL[^\n]*)/i,/^(?:.*direction\s+LR[^\n]*)/i,/^(?:["])/i,/^(?:\s*as\s+)/i,/^(?:[^\n\{]*)/i,/^(?:["])/i,/^(?:[^"]*)/i,/^(?:[^\n\s\{]+)/i,/^(?:\n)/i,/^(?:\{)/i,/^(?:%%(?!\{)[^\n]*)/i,/^(?:\})/i,/^(?:[\n])/i,/^(?:note\s+)/i,/^(?:left of\b)/i,/^(?:right of\b)/i,/^(?:")/i,/^(?:\s*as\s*)/i,/^(?:["])/i,/^(?:[^"]*)/i,/^(?:[^\n]*)/i,/^(?:\s*[^:\n\s\-]+)/i,/^(?:\s*:[^:\n;]+)/i,/^(?:[\s\S]*?end note\b)/i,/^(?:stateDiagram\s+)/i,/^(?:stateDiagram-v2\s+)/i,/^(?:hide empty description\b)/i,/^(?:\[\*\])/i,/^(?:[^:\n\s\-\{]+)/i,/^(?:\s*:[^:\n;]+)/i,/^(?:-->)/i,/^(?:--)/i,/^(?::::)/i,/^(?:$)/i,/^(?:.)/i],conditions:{LINE:{rules:[14,15],inclusive:!1},close_directive:{rules:[14,15],inclusive:!1},arg_directive:{rules:[8,9,14,15],inclusive:!1},type_directive:{rules:[7,8,14,15],inclusive:!1},open_directive:{rules:[6,14,15],inclusive:!1},struct:{rules:[14,15,27,31,37,44,45,46,47,56,57,58,59,73,74,75,76,77],inclusive:!1},FLOATING_NOTE_ID:{rules:[66],inclusive:!1},FLOATING_NOTE:{rules:[63,64,65],inclusive:!1},NOTE_TEXT:{rules:[68,69],inclusive:!1},NOTE_ID:{rules:[67],inclusive:!1},NOTE:{rules:[60,61,62],inclusive:!1},CLASS_STYLE:{rules:[33],inclusive:!1},CLASS:{rules:[32],inclusive:!1},CLASSDEFID:{rules:[30],inclusive:!1},CLASSDEF:{rules:[28,29],inclusive:!1},acc_descr_multiline:{rules:[25,26],inclusive:!1},acc_descr:{rules:[23],inclusive:!1},acc_title:{rules:[21],inclusive:!1},SCALE:{rules:[18,19,35,36],inclusive:!1},ALIAS:{rules:[],inclusive:!1},STATE_ID:{rules:[50],inclusive:!1},STATE_STRING:{rules:[51,52],inclusive:!1},FORK_STATE:{rules:[],inclusive:!1},STATE:{rules:[14,15,38,39,40,41,42,43,48,49,53,54,55],inclusive:!1},ID:{rules:[14,15],inclusive:!1},INITIAL:{rules:[0,1,2,3,4,5,10,11,12,13,15,16,17,20,22,24,27,31,34,37,55,59,70,71,72,73,74,75,76,78,79,80],inclusive:!0}}};var u6,d6,p6,f6,g6,y6,m6,b6,_6,x6,v6,k6,w6,x,w,T,T6,C6,C,Md=new((S6.prototype=U5).Parser=S6);function E6(t,e,r,i){for(r=r||{},i=t.length;i--;r[t[i]]=e);return r}function S6(){this.yy={}}const A6=Md.parser=Md,D6=(t,e)=>{return"dagre-wrapper"!==(null==(e=null==e?void 0:e.state)?void 0:e.defaultRenderer)&&null!==t.match(/^\s*stateDiagram/)},L6=(t,e)=>{return!!(null!==t.match(/^\s*stateDiagram-v2/)||t.match(/^\s*stateDiagram/)&&"dagre-wrapper"===(null==(t=null==e?void 0:e.state)?void 0:t.defaultRenderer))},M6="state",N6="relation",O6="default",B6="divider",I6="[*]",F6="start",R6=I6,P6="end",$6="color",Y6="fill",j6="bgFill",z6=",";let U6="LR",W6=[],H6={};const q6=()=>({relations:[],states:{},documents:{}});let V6={root:q6()},G6=V6.root,X6=0,Z6=0;function Q6(t){V6={root:q6()},G6=V6.root,X6=0,H6={},t||Bu()}const K6=t=>JSON.parse(JSON.stringify(t)),J6=(r,i,t)=>{if(i.stmt===N6)J6(r,i.state1,!0),J6(r,i.state2,!1);else if(i.stmt===M6&&"[*]"===i.id&&(i.id=t?r.id+"_start":r.id+"_end",i.start=t),i.doc){var n,a=[];let t=[],e;for(e=0;e<i.doc.length;e++)i.doc[e].type===B6?((n=K6(i.doc[e])).doc=K6(t),a.push(n),t=[]):t.push(i.doc[e]);0<a.length&&0<t.length&&(r={stmt:M6,id:Uh(),type:"divider",doc:K6(t)},a.push(K6(r)),i.doc=a),i.doc.forEach(t=>J6(i,t,!0))}},tx=function(i,t=O6,e=null,r=null,n=null,a=null,s=null,o=null){void 0===G6.states[i]?(S.info("Adding state ",i,r),G6.states[i]={id:i,descriptions:[],type:t,doc:e,note:n,classes:[],styles:[],textStyles:[]}):(G6.states[i].doc||(G6.states[i].doc=e),G6.states[i].type||(G6.states[i].type=t)),r&&(S.info("Setting state description",i,r),"string"==typeof r&&ax(i,r.trim()),"object"==typeof r)&&r.forEach(t=>ax(i,t.trim())),n&&(G6.states[i].note=n,G6.states[i].note.text=tl.sanitizeText(G6.states[i].note.text,J())),a&&(S.info("Setting state classes",i,a),("string"==typeof a?[a]:a).forEach(t=>ox(i,t.trim()))),s&&(S.info("Setting state styles",i,s),("string"==typeof s?[s]:s).forEach(t=>{{var e=i,r=(t=t.trim(),ex(e));void 0!==r&&r.textStyles.push(t)}})),o&&(S.info("Setting state styles",i,s),("string"==typeof o?[o]:o).forEach(t=>{{var e=i,r=(t=t.trim(),ex(e));void 0!==r&&r.textStyles.push(t)}}))},ex=function(t){return G6.states[t]};function rx(t=""){let e=t;return t===I6&&(X6++,e=""+F6+X6),e}function ix(t="",e=O6){return t===I6?F6:e}function nx(t,e,r){var i,n,a,s,o,l,c;"object"==typeof t?(n=e,a=r,s=rx((i=t).id),o=ix(i.id,i.type),l=rx(n.id),c=ix(n.id,n.type),tx(s,o,i.doc,i.description,i.note,i.classes,i.styles,i.textStyles),tx(l,c,n.doc,n.description,n.note,n.classes,n.styles,n.textStyles),G6.relations.push({id1:s,id2:l,relationTitle:tl.sanitizeText(a,J())})):(o=rx(t),i=ix(t),c=function(t=""){let e=t;return t===R6&&(X6++,e=""+P6+X6),e}(e),[n="",s=O6]=[e],l=n===R6?P6:s,tx(o,i),tx(c,l),G6.relations.push({id1:o,id2:c,title:tl.sanitizeText(r,J())}))}function ax(t,e){t=G6.states[t],e=e.startsWith(":")?e.replace(":","").trim():e,t.descriptions.push(tl.sanitizeText(e,J()))}function sx(t,e=""){void 0===H6[t]&&(H6[t]={id:t,styles:[],textStyles:[]});const r=H6[t];null!=e&&e.split(z6).forEach(t=>{var e=t.replace(/([^;]*);/,"$1").trim();t.match($6)&&(t=e.replace(Y6,j6).replace($6,Y6),r.textStyles.push(t)),r.styles.push(e)})}function ox(t,r){t.split(",").forEach(function(t){let e=ex(t);void 0===e&&(t=t.trim(),tx(t),e=ex(t)),e.classes.push(r)})}const lx={parseDirective:function(t,e,r){Jv.parseDirective(this,t,e,r)},getConfig:()=>J().state,addState:tx,clear:Q6,getState:ex,getStates:function(){return G6.states},getRelations:function(){return G6.relations},getClasses:function(){return H6},getDirection:()=>U6,addRelation:nx,getDividerId:()=>"divider-id-"+ ++Z6,setDirection:t=>{U6=t},cleanupLabel:function(t){return(":"===t.substring(0,1)?t.substr(2):t).trim()},lineType:{LINE:0,DOTTED_LINE:1},relationType:{AGGREGATION:0,EXTENSION:1,COMPOSITION:2,DEPENDENCY:3},logDocuments:function(){S.info("Documents = ",V6)},getRootDoc:()=>W6,setRootDoc:t=>{S.info("Setting root doc",t),W6=t},getRootDocV2:()=>(J6({id:"root"},{id:"root",doc:W6},!0),{id:"root",doc:W6}),extract:t=>{let e;e=t.doc||t,S.info(e),Q6(!0),S.info("Extract",e),e.forEach(t=>{switch(t.stmt){case M6:tx(t.id,t.type,t.doc,t.description,t.note,t.classes,t.styles,t.textStyles);break;case N6:nx(t.state1,t.state2,t.description);break;case"classDef":sx(t.id,t.classes);break;case"applyClass":ox(t.id,t.styleClass)}})},trimColon:t=>(t&&":"===t[0]?t.substr(1):t).trim(),getAccTitle:Fu,setAccTitle:Iu,getAccDescription:Pu,setAccDescription:Ru,addStyleClass:sx,setCssClass:ox,addDescription:ax,setDiagramTitle:$u,getDiagramTitle:Yu},cx={},hx=()=>Object.keys(cx),ux={get:t=>cx[t],set:(t,e)=>{cx[t]=e},keys:hx,size:()=>hx().length},dx=(t,e)=>{const r=t.append("text").attr("x",2*J().state.padding).attr("y",J().state.textHeight+1.3*J().state.padding).attr("font-size",J().state.fontSize).attr("class","state-title").text(e.descriptions[0]).node().getBBox(),i=r.height,n=t.append("text").attr("x",J().state.padding).attr("y",i+.4*J().state.padding+J().state.dividerMargin+J().state.textHeight).attr("class","state-description");let a=!0,s=!0;e.descriptions.forEach(function(t){{var e,r;a||(e=n,r=s,e=e.append("tspan").attr("x",2*J().state.padding).text(t),r||e.attr("dy",J().state.textHeight),s=!1)}a=!1});var e=t.append("line").attr("x1",J().state.padding).attr("y1",J().state.padding+i+J().state.dividerMargin/2).attr("y2",J().state.padding+i+J().state.dividerMargin/2).attr("class","descr-divider"),o=n.node().getBBox(),l=Math.max(o.width,r.width);return e.attr("x2",l+3*J().state.padding),t.insert("rect",":first-child").attr("x",J().state.padding).attr("y",J().state.padding).attr("width",l+2*J().state.padding).attr("height",o.height+i+2*J().state.padding).attr("rx",J().state.radius),t},px=(t,e,r)=>{var i=J().state.padding,n=2*J().state.padding,a=t.node().getBBox(),s=a.width,a=a.x,o=t.append("text").attr("x",0).attr("y",J().state.titleShift).attr("font-size",J().state.fontSize).attr("class","state-title").text(e.id),l=o.node().getBBox().width+n;let c=Math.max(l,s);c===s&&(c+=n);let h;var u=t.node().getBBox(),e=(e.doc,h=a-i,s<l&&(h=(s-c)/2+i),Math.abs(a-u.x)<i&&s<l&&(h=a-(l-s)/2),1-J().state.textHeight);return t.insert("rect",":first-child").attr("x",h).attr("y",e).attr("class",r?"alt-composit":"composit").attr("width",c).attr("height",u.height+J().state.textHeight+J().state.titleShift+1).attr("rx","0"),o.attr("x",h+i),l<=s&&o.attr("x",a+(c-n)/2-l/2+i),t.insert("rect",":first-child").attr("x",h).attr("y",J().state.titleShift-J().state.textHeight-J().state.padding).attr("width",c).attr("height",3*J().state.textHeight).attr("rx",J().state.radius),t.insert("rect",":first-child").attr("x",h).attr("y",J().state.titleShift-J().state.textHeight-J().state.padding).attr("width",c).attr("height",u.height+3+2*J().state.textHeight).attr("rx",J().state.radius),t},fx=(t,e)=>{e.attr("class","state-note");var r=e.append("rect").attr("x",0).attr("y",J().state.padding),{textWidth:t,textHeight:e}=((t,e,r,i)=>{let n=0;var a=i.append("text");a.style("text-anchor","start"),a.attr("class","noteText");let s=t.replace(/\r\n/g,"<br/>");i=(s=s.replace(/\n/g,"<br/>")).split(tl.lineBreakRegex);let o=1.25*J().state.noteMargin;for(const h of i){var l,c=h.trim();0<c.length&&((l=a.append("tspan")).text(c),0===o&&(c=l.node().getBBox(),o+=c.height),n+=o,l.attr("x",e+J().state.noteMargin),l.attr("y",r+n+1.25*J().state.noteMargin))}return{textWidth:a.node().getBBox().width,textHeight:n}})(t,0,0,e.append("g"));return r.attr("height",e+2*J().state.noteMargin),r.attr("width",t+2*J().state.noteMargin),r},gx=function(r,i){var t,e=i.id,n={id:e,label:i.id,width:0,height:0},r=r.append("g").attr("id",e).attr("class","stateGroup");if("start"===i.type&&r.append("circle").attr("class","start-state").attr("r",J().state.sizeUnit).attr("cx",J().state.padding+J().state.sizeUnit).attr("cy",J().state.padding+J().state.sizeUnit),"end"===i.type&&((a=r).append("circle").attr("class","end-state-outer").attr("r",J().state.sizeUnit+J().state.miniPadding).attr("cx",J().state.padding+J().state.sizeUnit+J().state.miniPadding).attr("cy",J().state.padding+J().state.sizeUnit+J().state.miniPadding),a.append("circle").attr("class","end-state-inner").attr("r",J().state.sizeUnit).attr("cx",J().state.padding+J().state.sizeUnit+2).attr("cy",J().state.padding+J().state.sizeUnit+2)),"fork"===i.type||"join"===i.type){var a=r,s=i;let t=J().state.forkWidth,e=J().state.forkHeight;s.parentId&&(s=t,t=e,e=s),a.append("rect").style("stroke","black").style("fill","black").attr("width",t).attr("height",e).attr("x",J().state.padding).attr("y",J().state.padding)}"note"===i.type&&fx(i.note.text,r),"divider"===i.type&&r.append("line").style("stroke","grey").style("stroke-dasharray","3").attr("x1",J().state.textHeight).attr("class","divider").attr("x2",2*J().state.textHeight).attr("y1",0).attr("y2",0),"default"===i.type&&0===i.descriptions.length&&(s=i,s=(o=r).append("text").attr("x",2*J().state.padding).attr("y",J().state.textHeight+2*J().state.padding).attr("font-size",J().state.fontSize).attr("class","state-title").text(s.id),t=s.node().getBBox(),o.insert("rect",":first-child").attr("x",J().state.padding).attr("y",J().state.padding).attr("width",t.width+2*J().state.padding).attr("height",t.height+2*J().state.padding).attr("rx",J().state.radius)),"default"===i.type&&0<i.descriptions.length&&dx(r,i);var o=r.node().getBBox();return n.width=o.width+2*J().state.padding,n.height=o.height+2*J().state.padding,ux.set(e,n),n};let yx=0;const mx=function(n,a,s){a.points=a.points.filter(t=>!Number.isNaN(t.y));var o=a.points,t=As().x(function(t){return t.x}).y(function(t){return t.y}).curve(Bs),t=n.append("path").attr("d",t(o)).attr("id","edge"+yx).attr("class","transition");let e="";if(J().state.arrowMarkerAbsolute&&(e=(e=(e=window.location.protocol+"//"+window.location.host+window.location.pathname+window.location.search).replace(/\(/g,"\\(")).replace(/\)/g,"\\)")),t.attr("marker-end","url("+e+"#"+function(t){switch(t){case lx.relationType.AGGREGATION:return"aggregation";case lx.relationType.EXTENSION:return"extension";case lx.relationType.COMPOSITION:return"composition";case lx.relationType.DEPENDENCY:return"dependency"}}(lx.relationType.DEPENDENCY)+"End)"),void 0!==s.title){const u=n.append("g").attr("class","stateLabel"),{x:d,y:p}=t1.calcLabelPosition(a.points),f=tl.getRows(s.title);let r=0;var l=[];let e=0,i=0;for(let t=0;t<=f.length;t++){var c=u.append("text").attr("text-anchor","middle").text(f[t]).attr("x",d).attr("y",p+r),h=c.node().getBBox();e=Math.max(e,h.width),i=Math.min(i,h.x),S.info(h.x,d,p+r),0===r&&(r=c.node().getBBox().height,S.info("Title height",r,p)),l.push(c)}let t=r*f.length;if(1<f.length){const g=(f.length-1)*r*.5;l.forEach((t,e)=>t.attr("y",p+e*r-g)),t=r*f.length}o=u.node().getBBox();u.insert("rect",":first-child").attr("class","box").attr("x",d-e/2-J().state.padding/2).attr("y",p-t/2-J().state.padding/2-3.5).attr("width",e+J().state.padding).attr("height",t+J().state.padding),S.info(o)}yx++};let bx;const _x={},xx=t=>t?t.length*bx.fontSizeFactor:1,vx=(t,e,r,i,n,a,s)=>{const o=new jg({compound:!0,multigraph:!0});let l,c=!0;for(l=0;l<t.length;l++)if("relation"===t[l].stmt){c=!1;break}r?o.setGraph({rankdir:"LR",multigraph:!0,compound:!0,ranker:"tight-tree",ranksep:c?1:bx.edgeLengthFactor,nodeSep:c?1:50,isMultiGraph:!0}):o.setGraph({rankdir:"TB",multigraph:!0,compound:!0,ranksep:c?1:bx.edgeLengthFactor,nodeSep:c?1:50,ranker:"tight-tree",isMultiGraph:!0}),o.setDefaultEdgeLabel(function(){return{}}),s.db.extract(t);var h=s.db.getStates(),u=s.db.getRelations();for(const b of Object.keys(h)){var d,p,f=h[b];r&&(f.parentId=r);let t;f.doc?(d=e.append("g").attr("id",f.id).attr("class","stateGroup"),t=vx(f.doc,d,f.id,!i,n,a,s),d=(d=px(d,f,i)).node().getBBox(),t.width=d.width,t.height=d.height+bx.padding/2,_x[f.id]={y:bx.compositTitleSize}):t=gx(e,f),f.note?(d={descriptions:[],id:f.id+"-note",note:f.note,type:"note"},p=gx(e,d),"left of"===f.note.position?(o.setNode(t.id+"-note",p),o.setNode(t.id,t)):(o.setNode(t.id,t),o.setNode(t.id+"-note",p)),o.setParent(t.id,t.id+"-group"),o.setParent(t.id+"-note",t.id+"-group")):o.setNode(t.id,t)}S.debug("Count=",o.nodeCount(),o);let g=0;u.forEach(function(t){g++,S.debug("Setting edge",t),o.setEdge(t.id1,t.id2,{relation:t,width:xx(t.title),height:bx.labelHeight*tl.getRows(t.title).length,labelpos:"c"},"id"+g)}),Iy(o),S.debug("Graph after layout",o.nodes());const y=e.node();o.nodes().forEach(function(t){void 0!==t&&void 0!==o.node(t)?(S.warn("Node "+t+": "+JSON.stringify(o.node(t))),n.select("#"+y.id+" #"+t).attr("transform","translate("+(o.node(t).x-o.node(t).width/2)+","+(o.node(t).y+(_x[t]?_x[t].y:0)-o.node(t).height/2)+" )"),n.select("#"+y.id+" #"+t).attr("data-x-shift",o.node(t).x-o.node(t).width/2),a.querySelectorAll("#"+y.id+" #"+t+" .divider").forEach(t=>{var e=t.parentElement;let r=0,i=0;e&&(e.parentElement&&(r=e.parentElement.getBBox().width),i=parseInt(e.getAttribute("data-x-shift"),10),Number.isNaN(i))&&(i=0),t.setAttribute("x1",0-i+8),t.setAttribute("x2",r-i-8)})):S.debug("No Node "+t+": "+JSON.stringify(o.node(t)))});y.getBBox();o.edges().forEach(function(t){void 0!==t&&void 0!==o.edge(t)&&(S.debug("Edge "+t.v+" -> "+t.w+": "+JSON.stringify(o.edge(t))),mx(e,o.edge(t),o.edge(t).relation))}),u=y.getBBox();var m={id:r||"root",label:r||"root",width:0,height:0};return m.width=u.width+2*bx.padding,m.height=u.height+2*bx.padding,S.debug("Doc rendered",m,o),m},kx={setConf:function(){},draw:function(t,e,r,i){bx=J().state;var n=J().securityLevel;let a;"sandbox"===n&&(a=K("#i"+e));var s=K("sandbox"===n?a.nodes()[0].contentDocument.body:"body"),n="sandbox"===n?a.nodes()[0].contentDocument:document,t=(S.debug("Rendering diagram "+t),s.select(`[id='${e}']`)),e=(t.append("defs").append("marker").attr("id","dependencyEnd").attr("refX",19).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 19,7 L9,13 L14,7 L9,1 Z"),new jg({multigraph:!0,compound:!0,rankdir:"RL"}).setDefaultEdgeLabel(function(){return{}}),i.db.getRootDoc()),e=(vx(e,t,void 0,!1,s,n,i),bx.padding),s=t.node().getBBox(),n=s.width+2*e,i=s.height+2*e,e=1.75*n;K1(t,i,e,bx.useMaxWidth),t.attr("viewBox",`${s.x-bx.padding}  ${s.y-bx.padding} `+n+" "+i)}},wx="rect",Tx="rectWithTitle",Cx="statediagram",Ex=(Cx,"transition"),Sx=Ex+" note-edge",Ax=(Cx,Cx,Cx,"state"),Dx="----",Lx=Dx+"note",Mx=Dx+"parent",Nx="fill:none",Ox="fill: #333",Bx="c",Ix="text",Fx="normal";let Rx={},Px=0;function $x(t="",e=0,r="",i=Dx){i=null!==r&&0<r.length?""+i+r:"";return Ax+`-${t}${i}-`+e}const Yx=(r,t,i,e,n,a)=>{var s,o,l,c,h,u=i.id,d=null!=(d=e[u])&&d.classes?d.classes.join(" "):"";if("root"!==u){let t=wx;!0===i.start&&(t="start"),!1===i.start&&(t="end"),i.type!==O6&&(t=i.type),Rx[u]||(Rx[u]={id:u,shape:t,description:tl.sanitizeText(u,J()),classes:d+" statediagram-state"});var d=Rx[u],p=(i.description&&(Array.isArray(d.description)?(d.shape=Tx,d.description.push(i.description)):0<d.description.length?(d.shape=Tx,d.description===u?d.description=[i.description]:d.description=[d.description,i.description]):(d.shape=wx,d.description=i.description),d.description=tl.sanitizeTextOrArray(d.description,J())),1===d.description.length&&d.shape===Tx&&(d.shape=wx),!d.type&&i.doc&&(S.info("Setting cluster for ",u,jx(i)),d.type="group",d.dir=jx(i),d.shape=i.type===B6?"divider":"roundedWithTitle",d.classes=d.classes+" statediagram-cluster "+(a?"statediagram-cluster-alt":"")),{labelStyle:"",shape:d.shape,labelText:d.description,classes:d.classes,style:"",id:u,dir:d.dir,domId:$x(u,Px),type:d.type,padding:15});if(i.note){var f={labelStyle:"",shape:"note",labelText:i.note.text,classes:"statediagram-note",style:"",id:u+Lx+"-"+Px,domId:$x(u,Px,"note"),type:d.type,padding:15},d={labelStyle:"",shape:"noteGroup",labelText:i.note.text,classes:d.classes,style:"",id:u+Mx,domId:$x(u,Px,"parent"),type:"group",padding:0},g=(Px++,u+Mx);r.setNode(g,d),r.setNode(f.id,f),r.setNode(u,p),r.setParent(u,g),r.setParent(f.id,g);let t=u,e=f.id;"left of"===i.note.position&&(t=f.id,e=u),r.setEdge(t,e,{arrowhead:"none",arrowType:"",style:Nx,labelStyle:"",classes:Sx,arrowheadStyle:Ox,labelpos:Bx,labelType:Ix,thickness:Fx})}else r.setNode(u,p)}t&&"root"!==t.id&&(S.trace("Setting node ",u," to be child of its parent ",t.id),r.setParent(u,t.id)),i.doc&&(S.trace("Adding nodes children "),s=r,d=(o=i).doc,l=e,c=n,h=!a,S.trace("items",d),d.forEach(t=>{switch(t.stmt){case M6:case O6:Yx(s,o,t,l,c,h);break;case N6:Yx(s,o,t.state1,l,c,h),Yx(s,o,t.state2,l,c,h);var e={id:"edge"+Px,arrowhead:"normal",arrowTypeEnd:"arrow_barb",style:Nx,labelStyle:"",label:tl.sanitizeText(t.description,J()),arrowheadStyle:Ox,labelpos:Bx,labelType:Ix,thickness:Fx,classes:Ex};s.setEdge(t.state1.id,t.state2.id,e,Px),Px++}}))},jx=(e,t="TB")=>{let r=t;if(e.doc)for(let t=0;t<e.doc.length;t++){var i=e.doc[t];"dir"===i.stmt&&(r=i.value)}return r},zx={setConf:function(t){for(const e of Object.keys(t))t[e]},getClasses:function(t,e){S.trace("Extracting classes"),e.db.clear();try{return e.parser.parse(t),e.db.extract(e.db.getRootDocV2()),e.db.getClasses()}catch(t){return t}},draw:function(t,e,r,i){S.info("Drawing state diagram (v2)",e),Rx={};i.db.getDirection();var{securityLevel:n,state:a}=J(),s=a.nodeSpacing||50,o=a.rankSpacing||50,l=(S.info(i.db.getRootDocV2()),i.db.extract(i.db.getRootDocV2()),S.info(i.db.getRootDocV2()),i.db.getStates()),s=new jg({multigraph:!0,compound:!0}).setGraph({rankdir:jx(i.db.getRootDocV2()),nodesep:s,ranksep:o,marginx:8,marginy:8}).setDefaultEdgeLabel(function(){return{}});Yx(s,void 0,i.db.getRootDocV2(),l,i.db,!0);let c;"sandbox"===n&&(c=K("#i"+e));o=K("sandbox"===n?c.nodes()[0].contentDocument.body:"body"),l=o.select(`[id="${e}"]`),n=o.select("#"+e+" g"),Qm(n,s,["barb"],Cx,e),t1.insertTitle(l,"statediagramTitleText",a.titleTopMargin,i.db.getDiagramTitle()),o=l.node().getBBox(),n=o.width+16,s=o.height+16,l.attr("class",Cx),i=l.node().getBBox(),K1(l,s,n,a.useMaxWidth),o=`${i.x-8} ${i.y-8} ${n} `+s,S.debug("viewBox "+o),l.attr("viewBox",o),a=document.querySelectorAll('[id="'+e+'"] .edgeLabel .label');for(const d of a){var h=d.getBBox(),u=document.createElementNS("http://www.w3.org/2000/svg",wx);u.setAttribute("rx",0),u.setAttribute("ry",0),u.setAttribute("width",h.width),u.setAttribute("height",h.height),d.insertBefore(u,d.firstChild)}}};i2=[1,15],Ux=[1,16],L=[1,17],M=[1,18],Wx=[1,19],N=[1,20],O=[1,24],Hx=[4,6,9,11,17,18,20,22,23,24,26],(E={trace:function(){},yy:{},symbols_:{error:2,start:3,journey:4,document:5,EOF:6,directive:7,line:8,SPACE:9,statement:10,NEWLINE:11,openDirective:12,typeDirective:13,closeDirective:14,":":15,argDirective:16,title:17,acc_title:18,acc_title_value:19,acc_descr:20,acc_descr_value:21,acc_descr_multiline_value:22,section:23,taskName:24,taskData:25,open_directive:26,type_directive:27,arg_directive:28,close_directive:29,$accept:0,$end:1},terminals_:{2:"error",4:"journey",6:"EOF",9:"SPACE",11:"NEWLINE",15:":",17:"title",18:"acc_title",19:"acc_title_value",20:"acc_descr",21:"acc_descr_value",22:"acc_descr_multiline_value",23:"section",24:"taskName",25:"taskData",26:"open_directive",27:"type_directive",28:"arg_directive",29:"close_directive"},productions_:[0,[3,3],[3,2],[5,0],[5,2],[8,2],[8,1],[8,1],[8,1],[7,4],[7,6],[10,1],[10,2],[10,2],[10,1],[10,1],[10,2],[10,1],[12,1],[13,1],[16,1],[14,1]],performAction:function(t,e,r,i,n,a,s){var o=a.length-1;switch(n){case 1:return a[o-1];case 3:this.$=[];break;case 4:a[o-1].push(a[o]),this.$=a[o-1];break;case 5:case 6:this.$=a[o];break;case 7:case 8:this.$=[];break;case 11:i.setDiagramTitle(a[o].substr(6)),this.$=a[o].substr(6);break;case 12:this.$=a[o].trim(),i.setAccTitle(this.$);break;case 13:case 14:this.$=a[o].trim(),i.setAccDescription(this.$);break;case 15:i.addSection(a[o].substr(8)),this.$=a[o].substr(8);break;case 16:i.addTask(a[o-1],a[o]),this.$="task";break;case 18:i.parseDirective("%%{","open_directive");break;case 19:i.parseDirective(a[o],"type_directive");break;case 20:a[o]=a[o].trim().replace(/'/g,'"'),i.parseDirective(a[o],"arg_directive");break;case 21:i.parseDirective("}%%","close_directive","journey")}},table:[{3:1,4:E=[1,2],7:3,12:4,26:A=[1,5]},{1:[3]},qx(D=[6,9,11,17,18,20,22,23,24,26],[2,3],{5:6}),{3:7,4:E,7:3,12:4,26:A},{13:8,27:[1,9]},{27:[2,18]},{6:[1,10],7:21,8:11,9:[1,12],10:13,11:[1,14],12:4,17:i2,18:Ux,20:L,22:M,23:Wx,24:N,26:A},{1:[2,2]},{14:22,15:[1,23],29:O},qx([15,29],[2,19]),qx(D,[2,8],{1:[2,1]}),qx(D,[2,4]),{7:21,10:25,12:4,17:i2,18:Ux,20:L,22:M,23:Wx,24:N,26:A},qx(D,[2,6]),qx(D,[2,7]),qx(D,[2,11]),{19:[1,26]},{21:[1,27]},qx(D,[2,14]),qx(D,[2,15]),{25:[1,28]},qx(D,[2,17]),{11:[1,29]},{16:30,28:[1,31]},{11:[2,21]},qx(D,[2,5]),qx(D,[2,12]),qx(D,[2,13]),qx(D,[2,16]),qx(Hx,[2,9]),{14:32,29:O},{29:[2,20]},{11:[1,33]},qx(Hx,[2,10])],defaultActions:{5:[2,18],7:[2,2],24:[2,21],31:[2,20]},parseError:function(t,e){var r;if(!e.recoverable)throw(r=new Error(t)).hash=e,r;this.trace(t)},parse:function(t){var e,r=this,i=[0],n=[],a=[null],s=[],o=this.table,l="",c=0,h=0,u=1,d=s.slice.call(arguments,1),p=Object.create(this.lexer),f={yy:{}};for(e in this.yy)Object.prototype.hasOwnProperty.call(this.yy,e)&&(f.yy[e]=this.yy[e]);p.setInput(t,f.yy),f.yy.lexer=p,f.yy.parser=this,"u"<typeof p.yylloc&&(p.yylloc={});var g=p.yylloc,y=(s.push(g),p.options&&p.options.ranges);"function"==typeof f.yy.parseError?this.parseError=f.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;for(var m,b,_,x,v,k,w={};;){if(b=i[i.length-1],"u"<typeof(_=this.defaultActions[b]||((null===m||"u"<typeof m)&&(T=void 0,"number"!=typeof(T=n.pop()||p.lex()||u)&&(T instanceof Array&&(T=(n=T).pop()),T=r.symbols_[T]||T),m=T),o[b]&&o[b][m]))||!_.length||!_[0]){var T="",C=[];for(x in o[b])this.terminals_[x]&&2<x&&C.push("'"+this.terminals_[x]+"'");T=p.showPosition?"Parse error on line "+(c+1)+`:
`+p.showPosition()+`
Expecting `+C.join(", ")+", got '"+(this.terminals_[m]||m)+"'":"Parse error on line "+(c+1)+": Unexpected "+(m==u?"end of input":"'"+(this.terminals_[m]||m)+"'"),this.parseError(T,{text:p.match,token:this.terminals_[m]||m,line:p.yylineno,loc:g,expected:C})}if(_[0]instanceof Array&&1<_.length)throw new Error("Parse Error: multiple actions possible at state: "+b+", token: "+m);switch(_[0]){case 1:i.push(m),a.push(p.yytext),s.push(p.yylloc),i.push(_[1]),m=null,h=p.yyleng,l=p.yytext,c=p.yylineno,g=p.yylloc;break;case 2:if(v=this.productions_[_[1]][1],w.$=a[a.length-v],w._$={first_line:s[s.length-(v||1)].first_line,last_line:s[s.length-1].last_line,first_column:s[s.length-(v||1)].first_column,last_column:s[s.length-1].last_column},y&&(w._$.range=[s[s.length-(v||1)].range[0],s[s.length-1].range[1]]),typeof(k=this.performAction.apply(w,[l,h,c,f.yy,_[1],a,s].concat(d)))<"u")return k;v&&(i=i.slice(0,-1*v*2),a=a.slice(0,-1*v),s=s.slice(0,-1*v)),i.push(this.productions_[_[1]][0]),a.push(w.$),s.push(w._$),k=o[i[i.length-2]][i[i.length-1]],i.push(k);break;case 3:return!0}}return!0}}).lexer={EOF:1,parseError:function(t,e){if(!this.yy.parser)throw new Error(t);this.yy.parser.parseError(t,e)},setInput:function(t,e){return this.yy=e||this.yy||{},this._input=t,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var t=this._input[0];return this.yytext+=t,this.yyleng++,this.offset++,this.match+=t,this.matched+=t,t.match(/(?:\r\n?|\n).*/g)?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),t},unput:function(t){var e=t.length,r=t.split(/(?:\r\n?|\n)/g),t=(this._input=t+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-e),this.offset-=e,this.match.split(/(?:\r\n?|\n)/g)),i=(this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),r.length-1&&(this.yylineno-=r.length-1),this.yylloc.range);return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:r?(r.length===t.length?this.yylloc.first_column:0)+t[t.length-r.length].length-r[0].length:this.yylloc.first_column-e},this.options.ranges&&(this.yylloc.range=[i[0],i[0]+this.yyleng-e]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){return this.options.backtrack_lexer?(this._backtrack=!0,this):this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},less:function(t){this.unput(this.match.slice(t))},pastInput:function(){var t=this.matched.substr(0,this.matched.length-this.match.length);return(20<t.length?"...":"")+t.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var t=this.match;return t.length<20&&(t+=this._input.substr(0,20-t.length)),(t.substr(0,20)+(20<t.length?"...":"")).replace(/\n/g,"")},showPosition:function(){var t=this.pastInput(),e=new Array(t.length+1).join("-");return t+this.upcomingInput()+`
`+e+"^"},test_match:function(t,e){var r,i;if(this.options.backtrack_lexer&&(i={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges)&&(i.yylloc.range=this.yylloc.range.slice(0)),(r=t[0].match(/(?:\r\n?|\n).*/g))&&(this.yylineno+=r.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:r?r[r.length-1].length-r[r.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+t[0].length},this.yytext+=t[0],this.match+=t[0],this.matches=t,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(t[0].length),this.matched+=t[0],r=this.performAction.call(this,this.yy,this,e,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),r)return r;if(this._backtrack)for(var n in i)this[n]=i[n];return!1},next:function(){if(this.done)return this.EOF;var t,e,r,i;this._input||(this.done=!0),this._more||(this.yytext="",this.match="");for(var n=this._currentRules(),a=0;a<n.length;a++)if((r=this._input.match(this.rules[n[a]]))&&(!e||r[0].length>e[0].length)){if(e=r,i=a,this.options.backtrack_lexer){if(!1!==(t=this.test_match(r,n[a])))return t;if(this._backtrack){e=!1;continue}return!1}if(!this.options.flex)break}return e?!1!==(t=this.test_match(e,n[i]))&&t:""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){return this.next()||this.lex()},begin:function(t){this.conditionStack.push(t)},popState:function(){return 0<this.conditionStack.length-1?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return(this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]]:this.conditions.INITIAL).rules},topState:function(t){return 0<=(t=this.conditionStack.length-1-Math.abs(t||0))?this.conditionStack[t]:"INITIAL"},pushState:function(t){this.begin(t)},stateStackSize:function(){return this.conditionStack.length},options:{"case-insensitive":!0},performAction:function(t,e,r,i){switch(r){case 0:return this.begin("open_directive"),26;case 1:return this.begin("type_directive"),27;case 2:return this.popState(),this.begin("arg_directive"),15;case 3:return this.popState(),this.popState(),29;case 4:return 28;case 5:case 6:break;case 7:return 11;case 8:case 9:break;case 10:return 4;case 11:return 17;case 12:return this.begin("acc_title"),18;case 13:return this.popState(),"acc_title_value";case 14:return this.begin("acc_descr"),20;case 15:return this.popState(),"acc_descr_value";case 16:this.begin("acc_descr_multiline");break;case 17:this.popState();break;case 18:return"acc_descr_multiline_value";case 19:return 23;case 20:return 24;case 21:return 25;case 22:return 15;case 23:return 6;case 24:return"INVALID"}},rules:[/^(?:%%\{)/i,/^(?:((?:(?!\}%%)[^:.])*))/i,/^(?::)/i,/^(?:\}%%)/i,/^(?:((?:(?!\}%%).|\n)*))/i,/^(?:%(?!\{)[^\n]*)/i,/^(?:[^\}]%%[^\n]*)/i,/^(?:[\n]+)/i,/^(?:\s+)/i,/^(?:#[^\n]*)/i,/^(?:journey\b)/i,/^(?:title\s[^#\n;]+)/i,/^(?:accTitle\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*\{\s*)/i,/^(?:[\}])/i,/^(?:[^\}]*)/i,/^(?:section\s[^#:\n;]+)/i,/^(?:[^#:\n;]+)/i,/^(?::[^#\n;]+)/i,/^(?::)/i,/^(?:$)/i,/^(?:.)/i],conditions:{open_directive:{rules:[1],inclusive:!1},type_directive:{rules:[2,3],inclusive:!1},arg_directive:{rules:[3,4],inclusive:!1},acc_descr_multiline:{rules:[17,18],inclusive:!1},acc_descr:{rules:[15],inclusive:!1},acc_title:{rules:[13],inclusive:!1},INITIAL:{rules:[0,5,6,7,8,9,10,11,12,14,16,19,20,21,22,23,24],inclusive:!0}}};var E,A,D,Ux,L,M,Wx,N,O,Hx,B=new((Vx.prototype=E).Parser=Vx);function qx(t,e,r,i){for(r=r||{},i=t.length;i--;r[t[i]]=e);return r}function Vx(){this.yy={}}const Gx=B.parser=B,Xx=t=>null!==t.match(/^\s*journey/);let Zx="";function Qx(){var t,e,r;let i=!0;for([t,e]of iv.entries())r=t,iv[r].processed,i=i&&e.processed;return i}function Kx(t,e){return(t=t.append("rect")).attr("x",e.x),t.attr("y",e.y),t.attr("fill",e.fill),t.attr("stroke",e.stroke),t.attr("width",e.width),t.attr("height",e.height),t.attr("rx",e.rx),t.attr("ry",e.ry),void 0!==e.class&&t.attr("class",e.class),t}function Jx(t,e){return(t=t.append("circle")).attr("cx",e.cx),t.attr("cy",e.cy),t.attr("class","actor-"+e.pos),t.attr("fill",e.fill),t.attr("stroke",e.stroke),t.attr("r",e.r),void 0!==t.class&&t.attr("class",t.class),void 0!==e.title&&t.append("title").text(e.title),t}function tv(t,e){var r=e.text.replace(/<br\s*\/?>/gi," "),i=((t=t.append("text")).attr("x",e.x),t.attr("y",e.y),t.attr("class","legend"),t.style("text-anchor",e.anchor),void 0!==e.class&&t.attr("class",e.class),t.append("tspan"));return i.attr("x",e.x+2*e.textMargin),i.text(r),t}const ev=[],rv=[],iv=[],nv={parseDirective:function(t,e,r){Jv.parseDirective(this,t,e,r)},getConfig:()=>J().journey,clear:function(){ev.length=0,rv.length=0,Zx="",iv.length=0,Bu()},setDiagramTitle:$u,getDiagramTitle:Yu,setAccTitle:Iu,getAccTitle:Fu,setAccDescription:Ru,getAccDescription:Pu,addSection:function(t){Zx=t,ev.push(t)},getSections:function(){return ev},getTasks:function(){let t=Qx();let e=0;for(;!t&&e<100;)t=Qx(),e++;return rv.push(...iv),rv},addTask:function(t,e){e=e.substr(1).split(":");let r=0,i=[];e=(i=1===e.length?(r=Number(e[0]),[]):(r=Number(e[0]),e[1].split(","))).map(t=>t.trim()),e={section:Zx,type:Zx,people:e,task:t,score:r};iv.push(e)},addTaskOrg:function(t){t={section:Zx,type:Zx,description:t,task:t,classes:[]};rv.push(t)},getActors:function(){{const e=[];return rv.forEach(t=>{t.people&&e.push(...t.people)}),[...new Set(e)].sort()}}};let av=-1;function sv(){return{x:0,y:0,width:100,anchor:"start",height:100,rx:0,ry:0}}const ov=function(t){return"fo"===t.textPlacement?dv:"old"===t.textPlacement?hv:uv},lv={drawRect:Kx,drawCircle:Jx,drawSection:function(t,e,r){var t=t.append("g"),i=sv();i.x=e.x,i.y=e.y,i.fill=e.fill,i.width=r.width,i.height=r.height,i.class="journey-section section-type-"+e.num,i.rx=3,i.ry=3,Kx(t,i),ov(r)(e.text,t,i.x,i.y,i.width,i.height,{class:"journey-section section-type-"+e.num},r,e.colour)},drawText:tv,drawLabel:function(t,e){var r,i,n,a,s,o=t.append("polygon");o.attr("points",(r=e.x,i=e.y,r+","+i+" "+(r+(n=50))+","+i+" "+(r+n)+","+(i+(a=20)-(s=7))+" "+(r+n-1.2*s)+","+(i+a)+" "+r+","+(i+a))),o.attr("class","labelBox"),e.y=e.y+e.labelMargin,e.x=e.x+.5*e.labelMargin,tv(t,e)},drawTask:function(t,r,e){const i=r.x+e.width/2,n=t.append("g");av++;n.append("line").attr("id","task"+av).attr("x1",i).attr("y1",r.y).attr("x2",i).attr("y2",450).attr("class","task-line").attr("stroke-width","1px").attr("stroke-dasharray","4 2").attr("stroke","#666"),t=n,a={cx:i,cy:300+30*(5-r.score),score:r.score},t.append("circle").attr("cx",a.cx).attr("cy",a.cy).attr("class","face").attr("r",15).attr("stroke-width",2).attr("overflow","visible"),(t=t.append("g")).append("circle").attr("cx",a.cx-5).attr("cy",a.cy-5).attr("r",1.5).attr("stroke-width",2).attr("fill","#666").attr("stroke","#666"),t.append("circle").attr("cx",a.cx+5).attr("cy",a.cy-5).attr("r",1.5).attr("stroke-width",2).attr("fill","#666").attr("stroke","#666"),3<a.score?(s=t,o=ks().startAngle(Math.PI/2).endAngle(Math.PI/2*3).innerRadius(7.5).outerRadius(6.8181818181818175),s.append("path").attr("class","mouth").attr("d",o).attr("transform","translate("+a.cx+","+(a.cy+2)+")")):a.score<3?(s=t,o=ks().startAngle(3*Math.PI/2).endAngle(Math.PI/2*5).innerRadius(7.5).outerRadius(6.8181818181818175),s.append("path").attr("class","mouth").attr("d",o).attr("transform","translate("+a.cx+","+(a.cy+7)+")")):t.append("line").attr("class","mouth").attr("stroke",2).attr("x1",a.cx-5).attr("y1",a.cy+7).attr("x2",a.cx+5).attr("y2",a.cy+7).attr("class","mouth").attr("stroke-width","1px").attr("stroke","#666");var a,s,o,t=sv();t.x=r.x,t.y=r.y,t.fill=r.fill,t.width=e.width,t.height=e.height,t.class="task task-type-"+r.num,t.rx=3,t.ry=3,Kx(n,t);let l=r.x+14;r.people.forEach(t=>{var e=r.actors[t].color,e={cx:l,cy:r.y,r:7,fill:e,stroke:"#000",title:t,pos:r.actors[t].position};Jx(n,e),l+=10}),ov(e)(r.task,n,t.x,t.y,t.width,t.height,{class:"task"},e,r.colour)},drawBackgroundRect:function(t,e){Kx(t,{x:e.startx,y:e.starty,width:e.stopx-e.startx,height:e.stopy-e.starty,fill:e.fill,class:"rect"}).lower()},getTextObj:function(){return{x:0,y:0,fill:void 0,"text-anchor":"start",width:100,height:100,textMargin:0,rx:0,ry:0}},getNoteRect:sv,initGraphics:function(t){t.append("defs").append("marker").attr("id","arrowhead").attr("refX",5).attr("refY",2).attr("markerWidth",6).attr("markerHeight",4).attr("orient","auto").append("path").attr("d","M 0,0 V 4 L6,2 Z")}},cv={};function hv(t,e,r,i,n,a,s,o){pv(e.append("text").attr("x",r+n/2).attr("y",i+a/2+5).style("font-color",o).style("text-anchor","middle").text(t),s)}function uv(t,e,r,i,n,a,s,o,l){var{taskFontSize:c,taskFontFamily:h}=o,u=t.split(/<br\s*\/?>/gi);for(let t=0;t<u.length;t++){var d=t*c-c*(u.length-1)/2,p=e.append("text").attr("x",r+n/2).attr("y",i).attr("fill",l).style("text-anchor","middle").style("font-size",c).style("font-family",h);p.append("tspan").attr("x",r+n/2).attr("dy",d).text(u[t]),p.attr("y",i+a/2).attr("dominant-baseline","central").attr("alignment-baseline","central"),pv(p,s)}}function dv(t,e,r,i,n,a,s,o){var e=e.append("switch"),l=e.append("foreignObject").attr("x",r).attr("y",i).attr("width",n).attr("height",a).attr("position","fixed").append("xhtml:div").style("display","table").style("height","100%").style("width","100%");l.append("div").attr("class","label").style("display","table-cell").style("text-align","center").style("vertical-align","middle").text(t),uv(t,e,r,i,n,a,s,o),pv(l,s)}function pv(t,e){for(const r in e)r in e&&t.attr(r,e[r])}const fv=J().journey,gv=fv.leftMargin,yv={data:{startx:void 0,stopx:void 0,starty:void 0,stopy:void 0},verticalPos:0,sequenceItems:[],init:function(){this.sequenceItems=[],this.data={startx:void 0,stopx:void 0,starty:void 0,stopy:void 0},this.verticalPos=0},updateVal:function(t,e,r,i){void 0===t[e]?t[e]=r:t[e]=i(r,t[e])},updateBounds:function(r,i,n,a){const s=J().journey,o=this;let l=0;var c;this.sequenceItems.forEach(function(t){l++;var e=o.sequenceItems.length-l+1;o.updateVal(t,"starty",i-e*s.boxMargin,Math.min),o.updateVal(t,"stopy",a+e*s.boxMargin,Math.max),o.updateVal(yv.data,"startx",r-e*s.boxMargin,Math.min),o.updateVal(yv.data,"stopx",n+e*s.boxMargin,Math.max),"activation"!==c&&(o.updateVal(t,"startx",r-e*s.boxMargin,Math.min),o.updateVal(t,"stopx",n+e*s.boxMargin,Math.max),o.updateVal(yv.data,"starty",i-e*s.boxMargin,Math.min),o.updateVal(yv.data,"stopy",a+e*s.boxMargin,Math.max))})},insert:function(t,e,r,i){var n=Math.min(t,r),t=Math.max(t,r),r=Math.min(e,i),e=Math.max(e,i);this.updateVal(yv.data,"startx",n,Math.min),this.updateVal(yv.data,"starty",r,Math.min),this.updateVal(yv.data,"stopx",t,Math.max),this.updateVal(yv.data,"stopy",e,Math.max),this.updateBounds(n,r,t,e)},bumpVerticalPos:function(t){this.verticalPos=this.verticalPos+t,this.data.stopy=this.verticalPos},getVerticalPos:function(){return this.verticalPos},getBounds:function(){return this.data}},mv=fv.sectionFills,bv=fv.sectionColours,_v={setConf:function(e){Object.keys(e).forEach(function(t){fv[t]=e[t]})},draw:function(a,s,t,o){const e=J().journey;o.db.clear(),o.parser.parse(a+`
`);a=J().securityLevel;let r;"sandbox"===a&&(r=K("#i"+s));var a=K("sandbox"===a?r.nodes()[0].contentDocument.body:"body"),a=(yv.init(),a.select("#"+s)),s=(lv.initGraphics(a),o.db.getTasks()),i=o.db.getDiagramTitle(),o=o.db.getActors();for(const b in cv)delete cv[b];let n=0;o.forEach(t=>{cv[t]={color:e.actorColours[n%e.actorColours.length],position:n},n++});{var l=a;const _=J().journey;let r=60;Object.keys(cv).forEach(t=>{var e=cv[t].color,e={cx:20,cy:r,r:7,fill:e,stroke:"#000",pos:cv[t].position},e=(lv.drawCircle(l,e),{x:40,y:r+7,fill:"#666",text:t,textMargin:5|_.boxTextMargin});lv.drawText(l,e),r+=20})}yv.insert(0,0,gv,50*Object.keys(cv).length);{var c=a,h=(o=s,s=0,J().journey);let t="";var u=2*h.height+h.diagramMarginY,d=s+u,p,f;let e=0,r="#CCC",i="black",n=0;for([p,f]of o.entries()){var g,y=(t!==f.section&&(r=mv[e%mv.length],n=e%mv.length,i=bv[e%bv.length],g={x:p*h.taskMargin+p*h.width+gv,y:50,text:f.section,fill:r,num:n,colour:i},lv.drawSection(c,g,h),t=f.section,e++),f.people.reduce((t,e)=>(cv[e]&&(t[e]=cv[e]),t),{}));f.x=p*h.taskMargin+p*h.width+gv,f.y=d,f.width=h.diagramMarginX,f.height=h.diagramMarginY,f.colour=i,f.fill=r,f.num=n,f.actors=y,lv.drawTask(c,f,h),yv.insert(f.x,f.y,f.x+f.width+h.taskMargin,450)}}var s=yv.getBounds(),o=(i&&a.append("text").text(i).attr("x",gv).attr("font-size","4ex").attr("font-weight","bold").attr("y",25),s.stopy-s.starty+2*e.diagramMarginY),m=gv+s.stopx+2*e.diagramMarginX,i=(K1(a,o,m,e.useMaxWidth),a.append("line").attr("x1",gv).attr("y1",4*e.height).attr("x2",m-gv-4).attr("y2",4*e.height).attr("stroke-width",4).attr("stroke","black").attr("marker-end","url(#arrowhead)"),i?70:0);a.attr("viewBox",s.startx+` -25 ${m} `+(o+i)),a.attr("preserveAspectRatio","xMinYMin meet"),a.attr("height",o+i+25)}};let xv={};const vv={setConf:function(t){xv={...xv,...t}},draw:(t,e,r)=>{try{S.debug(`Renering svg for syntax error
`);var i=K("#"+e),n=i.append("g");n.append("path").attr("class","error-icon").attr("d","m411.313,123.313c6.25-6.25 6.25-16.375 0-22.625s-16.375-6.25-22.625,0l-32,32-9.375,9.375-20.688-20.688c-12.484-12.5-32.766-12.5-45.25,0l-16,16c-1.261,1.261-2.304,2.648-3.31,4.051-21.739-8.561-45.324-13.426-70.065-13.426-105.867,0-192,86.133-192,192s86.133,192 192,192 192-86.133 192-192c0-24.741-4.864-48.327-13.426-70.065 1.402-1.007 2.79-2.049 4.051-3.31l16-16c12.5-12.492 12.5-32.758 0-45.25l-20.688-20.688 9.375-9.375 32.001-31.999zm-219.313,100.687c-52.938,0-96,43.063-96,96 0,8.836-7.164,16-16,16s-16-7.164-16-16c0-70.578 57.422-128 128-128 8.836,0 16,7.164 16,16s-7.164,16-16,16z"),n.append("path").attr("class","error-icon").attr("d","m459.02,148.98c-6.25-6.25-16.375-6.25-22.625,0s-6.25,16.375 0,22.625l16,16c3.125,3.125 7.219,4.688 11.313,4.688 4.094,0 8.188-1.563 11.313-4.688 6.25-6.25 6.25-16.375 0-22.625l-16.001-16z"),n.append("path").attr("class","error-icon").attr("d","m340.395,75.605c3.125,3.125 7.219,4.688 11.313,4.688 4.094,0 8.188-1.563 11.313-4.688 6.25-6.25 6.25-16.375 0-22.625l-16-16c-6.25-6.25-16.375-6.25-22.625,0s-6.25,16.375 0,22.625l15.999,16z"),n.append("path").attr("class","error-icon").attr("d","m400,64c8.844,0 16-7.164 16-16v-32c0-8.836-7.156-16-16-16-8.844,0-16,7.164-16,16v32c0,8.836 7.156,16 16,16z"),n.append("path").attr("class","error-icon").attr("d","m496,96.586h-32c-8.844,0-16,7.164-16,16 0,8.836 7.156,16 16,16h32c8.844,0 16-7.164 16-16 0-8.836-7.156-16-16-16z"),n.append("path").attr("class","error-icon").attr("d","m436.98,75.605c3.125,3.125 7.219,4.688 11.313,4.688 4.094,0 8.188-1.563 11.313-4.688l32-32c6.25-6.25 6.25-16.375 0-22.625s-16.375-6.25-22.625,0l-32,32c-6.251,6.25-6.251,16.375-0.001,22.625z"),n.append("text").attr("class","error-text").attr("x",1440).attr("y",250).attr("font-size","150px").style("text-anchor","middle").text("Syntax error in graph"),n.append("text").attr("class","error-text").attr("x",1250).attr("y",400).attr("font-size","100px").style("text-anchor","middle").text("mermaid version "+r),i.attr("height",100),i.attr("width",500),i.attr("viewBox","768 0 912 512")}catch(t){S.error("Error while rendering info diagram"),S.error((e=t)instanceof Error?e.message:String(e))}}};let kv=!1;const wv=()=>{kv||(kv=!0,Cu("error",{db:{clear:()=>{}},styles:ou,renderer:vv,parser:{parser:{yy:{}},parse:()=>{}},init:()=>{}},t=>"error"===t.toLowerCase().trim()),Cu("c4",{parser:v0,db:P0,renderer:sd,styles:yu,init:t=>{sd.setConf(t.c4)}},k0),Cu("class",{parser:cd,db:Ed,renderer:pm,styles:au,init:t=>{t.class||(t.class={}),t.class.arrowMarkerAbsolute=t.arrowMarkerAbsolute,Ed.clear()}},hd),Cu("classDiagram",{parser:cd,db:Ed,renderer:e3,styles:au,init:t=>{t.class||(t.class={}),t.class.arrowMarkerAbsolute=t.arrowMarkerAbsolute,Ed.clear()}},ud),Cu("er",{parser:n3,db:c3,renderer:E3,styles:su},a3),Cu("gantt",{parser:K4,db:L5,renderer:O5,styles:cu},J4),Cu("info",{parser:R5,db:Y5,renderer:j5,styles:hu},z5),Cu("pie",{parser:q5,db:Z5,renderer:J5,styles:uu},V5),Cu("requirement",{parser:gb,db:kb,renderer:Nb,styles:du},yb),Cu("sequence",{parser:o_,db:E_,renderer:h6,styles:pu,init:t=>{if(t.sequence||(t.sequence={}),t.sequence.arrowMarkerAbsolute=t.arrowMarkerAbsolute,"sequenceDiagram"in t)throw new Error("`mermaid config.sequenceDiagram` has been renamed to `config.sequence`. Please update your mermaid config.");E_.setWrap(t.wrap),h6.setConf(t.sequence)}},l_),Cu("state",{parser:A6,db:lx,renderer:kx,styles:fu,init:t=>{t.state||(t.state={}),t.state.arrowMarkerAbsolute=t.arrowMarkerAbsolute,lx.clear()}},D6),Cu("stateDiagram",{parser:A6,db:lx,renderer:zx,styles:fu,init:t=>{t.state||(t.state={}),t.state.arrowMarkerAbsolute=t.arrowMarkerAbsolute,lx.clear()}},L6),Cu("journey",{parser:Gx,db:nv,renderer:_v,styles:gu,init:t=>{_v.setConf(t.journey),nv.clear()}},Xx),Cu("flowchart",{parser:D3,db:r4,renderer:G4,styles:lu,init:t=>{t.flowchart||(t.flowchart={}),t.flowchart.arrowMarkerAbsolute=t.arrowMarkerAbsolute,q4.setConf(t.flowchart),r4.clear(),r4.setGen("gen-1")}},L3),Cu("flowchart-v2",{parser:D3,db:r4,renderer:G4,styles:lu,init:t=>{t.flowchart||(t.flowchart={}),t.flowchart.arrowMarkerAbsolute=t.arrowMarkerAbsolute,V1({flowchart:{arrowMarkerAbsolute:t.arrowMarkerAbsolute}}),G4.setConf(t.flowchart),r4.clear(),r4.setGen("gen-2")}},M3),Cu("gitGraph",{parser:Du,db:n0,renderer:m0,styles:b0},Lu))};class Tv{constructor(t,e){F(this,"type","graph"),F(this,"parser"),F(this,"renderer"),F(this,"db"),F(this,"detectTypeFailed",!1),this.txt=t;var r,i,n=J();this.txt=t;try{this.type=Zc(t,n)}catch(t){this.handleError(t,e),this.type="error",this.detectTypeFailed=!0}t=Eu(this.type);S.debug("Type "+this.type),this.db=t.db,null!=(i=(r=this.db).clear)&&i.call(r),this.renderer=t.renderer,this.parser=t.parser;const a=this.parser.parse.bind(this.parser);this.parser.parse=t=>{return a((t=t,e=this.db,(n=t.match(Hc))?(null!=(i=Wc(n[1],{schema:Uc}))&&i.title&&null!=(r=e.setDiagramTitle)&&r.call(e,i.title),t.slice(n[0].length)):t));var e,r,i,n},this.parser.parser.yy=this.db,t.init&&(t.init(n),S.debug("Initialized diagram "+this.type,n)),this.txt+=`
`,this.parse(this.txt,e)}parse(t,e){var r,i;if(!this.detectTypeFailed)try{return t+=`
`,null!=(i=(r=this.db).clear)&&i.call(r),this.parser.parse(t),!0}catch(t){this.handleError(t,e)}return!1}handleError(t,e){if(void 0===e)throw t;Jh(t)?e(t.str,t.hash):e(t)}getParser(){return this.parser}getType(){return this.type}}const Cv=(e,r)=>{const i=Zc(e,J());try{Eu(i)}catch{var t=Kc(i);if(t)return t().then(({diagram:t})=>(Cu(i,t,void 0),new Tv(e,r)));throw new Error(`Diagram ${i} not found.`)}return new Tv(e,r)},Ev=Tv;const Sv=["graph","flowchart","flowchart-v2","stateDiagram","stateDiagram-v2"],Av="graph TB;a[Maximum text size in diagram exceeded];style a fill:#faa",Dv="sandbox",Lv="http://www.w3.org/2000/svg",Mv="http://www.w3.org/1999/xlink",Nv="http://www.w3.org/1999/xhtml",Ov="100%",Bv="100%",Iv="border:0;margin:0;",Fv="margin:0",Rv="allow-top-navigation-by-user-activation allow-popups",Pv='The "iframe" tag is not supported by your browser.',$v=["foreignobject"],Yv=["dominant-baseline"];function jv(t){let e=t;return e=(e=(e=e.replace(/style.*:\S*#.*;/g,function(t){return t.substring(0,t.length-1)})).replace(/classDef.*:\S*#.*;/g,function(t){return t.substring(0,t.length-1)})).replace(/#\w+;/g,function(t){t=t.substring(1,t.length-1);return/^\+?\d+$/.test(t)?"ﬂ°°"+t+"¶ß":"ﬂ°"+t+"¶ß"})}const zv=function(t){let e=t;return e=(e=(e=e.replace(/ﬂ°°/g,"&#")).replace(/ﬂ°/g,"&")).replace(/¶ß/g,";")},Uv=(t,e,r=[])=>`
.${t} ${e} { ${r.join(" !important; ")} !important; }`,Wv=(t,e,r={})=>{let i="";if(void 0!==t.themeCSS&&(i+=`
`+t.themeCSS),void 0!==t.fontFamily&&(i+=`
:root { --mermaid-font-family: ${t.fontFamily}}`),void 0!==t.altFontFamily&&(i+=`
:root { --mermaid-alt-font-family: ${t.altFontFamily}}`),!mg(r)&&Sv.includes(e)){var n=t.htmlLabels||null!=(e=t.flowchart)&&e.htmlLabels?["> *","span"]:["rect","polygon","ellipse","circle","path"];for(const a in r){const s=r[a];mg(s.styles)||n.forEach(t=>{i+=Uv(s.id,t,s.styles)}),mg(s.textStyles)||(i+=Uv(s.id,"tspan",s.textStyles))}}return i},Hv=(t,e,r,i)=>{r=Wv(t,e,r);return R1(O1(i+`{${bu(e,r,t.themeVariables)}}`),P1)},qv=(t="",e,r)=>{let i=t;return r||e||(i=i.replace(/marker-end="url\(.*?#/g,'marker-end="url(#')),i=(i=zv(i)).replace(/<br>/g,"<br/>")},Vv=(t="",e)=>{e=e?e.viewBox.baseVal.height+"px":Bv,t=btoa('<body style="'+Fv+'">'+t+"</body>");return`<iframe style="width:${Ov};height:${e};${Iv}" src="data:text/html;base64,${t}" sandbox="${Rv}">
  ${Pv}
</iframe>`},Gv=(t,e,r,i,n)=>{var a=t.append("div"),r=(a.attr("id",r),i&&a.attr("style",i),a.append("svg").attr("id",e).attr("width","100%").attr("xmlns",Lv));return n&&r.attr("xmlns:xlink",n),r.append("g"),t};function Xv(t,e){return t.append("iframe").attr("id",e).attr("style","width: 100%; height: 100%;").attr("sandbox","")}const Zv=(t,e,r,i)=>{null!=(e=t.getElementById(e))&&e.remove(),null!=(e=t.getElementById(r))&&e.remove(),null!=(r=t.getElementById(i))&&r.remove()};let Qv={};function Kv(t,e,r,i){var n,a;a=e,mg(t=t)||a.attr("aria-roledescription",t),a=r,t=i,i=(r=e).attr("id"),void 0!==r.insert&&(a||t)&&(t&&(r.attr("aria-describedby",n="chart-desc-"+i),r.insert("desc",":first-child").attr("id",n).text(t)),a)&&(r.attr("aria-labelledby",n="chart-title-"+i),r.insert("title",":first-child").attr("id",n).text(a))}const Jv=Object.freeze({render:function(e,r,t,i){wv(),Z1();var n=t1.detectInit(r),n=(n&&(Qh(n),X1(n)),J()),a=(S.debug(n),r=(r=r.length>(null!=(a=null==n?void 0:n.maxTextSize)?a:5e4)?Av:r).replace(/\r\n?/g,`
`),"#"+e),s="i"+e,o="#"+s,l="d"+e,c="#"+l;let h=K("body");var u=n.securityLevel===Dv,d="loose"===n.securityLevel,p=n.fontFamily;void 0!==i?(i&&(i.innerHTML=""),u?(y=Xv(K(i),s),(h=K(y.nodes()[0].contentDocument.body)).node().style.margin=0):h=K(i),Gv(h,e,l,"font-family: "+p,Mv)):(Zv(document,e,l,s),u?(y=Xv(K("body"),s),(h=K(y.nodes()[0].contentDocument.body)).node().style.margin=0):h=K("body"),Gv(h,e,l)),r=jv(r);let f,g;try{if("then"in(f=Cv(r)))throw new Error("Diagram is a promise. Use renderAsync.")}catch(t){f=new Ev("error"),g=t}var i=h.select(c).node(),p=f.type,s=i.firstChild,y=s.firstChild,l=Sv.includes(p)?f.renderer.getClasses(r,f):{},i=Hv(n,p,l,a),l=document.createElement("style");l.innerHTML=i,s.insertBefore(l,y);try{f.renderer.draw(r,e,$1.version,f)}catch(t){throw vv.draw(r,e,$1.version),t}Kv(p,h.select(c+" svg"),null==(i=(a=f.db).getAccTitle)?void 0:i.call(a),null==(l=(s=f.db).getAccDescription)?void 0:l.call(s)),h.select(`[id="${e}"]`).selectAll("foreignobject > *").attr("xmlns",Nv);let m=h.select(c).node().innerHTML;if(S.debug("config.arrowMarkerAbsolute",n.arrowMarkerAbsolute),m=qv(m,u,Ko(n.arrowMarkerAbsolute)),u?(y=h.select(c+" svg").node(),m=Vv(m,y)):d||(m=Ho.sanitize(m,{ADD_TAGS:$v,ADD_ATTR:Yv})),void 0!==t)switch(p){case"flowchart":case"flowchart-v2":t(m,r4.bindFunctions);break;case"gantt":t(m,L5.bindFunctions);break;case"class":case"classDiagram":t(m,Ed.bindFunctions);break;default:t(m)}else S.debug("CB = undefined!");L_();r=K(u?o:c).node();if(r&&"remove"in r&&r.remove(),g)throw g;return m},renderAsync:async function(e,r,t,i){wv(),Z1();var n=t1.detectInit(r),n=(n&&(Qh(n),X1(n)),J()),a=(S.debug(n),r=(r=r.length>(null!=(a=null==n?void 0:n.maxTextSize)?a:5e4)?Av:r).replace(/\r\n?/g,`
`),"#"+e),s="i"+e,o="#"+s,l="d"+e,c="#"+l;let h=K("body");var u=n.securityLevel===Dv,d="loose"===n.securityLevel,p=n.fontFamily;void 0!==i?(i&&(i.innerHTML=""),u?(y=Xv(K(i),s),(h=K(y.nodes()[0].contentDocument.body)).node().style.margin=0):h=K(i),Gv(h,e,l,"font-family: "+p,Mv)):(Zv(document,e,l,s),u?(y=Xv(K("body"),s),(h=K(y.nodes()[0].contentDocument.body)).node().style.margin=0):h=K("body"),Gv(h,e,l)),r=jv(r);let f,g;try{f=await Cv(r)}catch(t){f=new Ev("error"),g=t}var i=h.select(c).node(),p=f.type,s=i.firstChild,y=s.firstChild,l=Sv.includes(p)?f.renderer.getClasses(r,f):{},i=Hv(n,p,l,a),l=document.createElement("style");l.innerHTML=i,s.insertBefore(l,y);try{await f.renderer.draw(r,e,$1.version,f)}catch(t){throw vv.draw(r,e,$1.version),t}Kv(p,h.select(c+" svg"),null==(i=(a=f.db).getAccTitle)?void 0:i.call(a),null==(l=(s=f.db).getAccDescription)?void 0:l.call(s)),h.select(`[id="${e}"]`).selectAll("foreignobject > *").attr("xmlns",Nv);let m=h.select(c).node().innerHTML;if(S.debug("config.arrowMarkerAbsolute",n.arrowMarkerAbsolute),m=qv(m,u,Ko(n.arrowMarkerAbsolute)),u?(y=h.select(c+" svg").node(),m=Vv(m,y)):d||(m=Ho.sanitize(m,{ADD_TAGS:$v,ADD_ATTR:Yv})),void 0!==t)switch(p){case"flowchart":case"flowchart-v2":t(m,r4.bindFunctions);break;case"gantt":t(m,L5.bindFunctions);break;case"class":case"classDiagram":t(m,Ed.bindFunctions);break;default:t(m)}else S.debug("CB = undefined!");L_();r=K(u?o:c).node();if(r&&"remove"in r&&r.remove(),g)throw g;return m},parse:function(t,e){return wv(),new Ev(t,e).parse(t,e)},parseAsync:async function(t,e){return wv(),(await Cv(t,e)).parse(t,e)},parseDirective:function(t,e,r,i){try{if(void 0!==e)switch(e=e.trim(),r){case"open_directive":Qv={};break;case"type_directive":if(!Qv)throw new Error("currentDirective is undefined");Qv.type=e.toLowerCase();break;case"arg_directive":if(!Qv)throw new Error("currentDirective is undefined");Qv.args=JSON.parse(e);break;case"close_directive":var n=t,a=Qv,s=i;switch(S.debug(`Directive type=${a.type} with args:`,a.args),a.type){case"init":case"initialize":{["config"].forEach(t=>{a.args[t]!==void 0&&(s==="flowchart-v2"&&(s="flowchart"),a.args[s]=a.args[t],delete a.args[t])}),S.debug("sanitize in handleDirective",a.args),Qh(a.args),S.debug("sanitize in handleDirective (done)",a.args),X1(a.args);break}case"wrap":case"nowrap":n&&n.setWrap&&n.setWrap(a.type==="wrap");break;case"themeCss":S.warn("themeCss encountered");break;default:S.warn(`Unhandled directive: source: '%%{${a.type}: ${JSON.stringify(a.args?a.args:{})}}%%`,a);break}Qv=void 0}}catch(t){S.error(`Error while rendering sequenceDiagram directive: ${e} jison context: `+r),S.error(t.message)}},initialize:function(t={}){null==t||!t.fontFamily||null!=(e=t.themeVariables)&&e.fontFamily||(t.themeVariables={fontFamily:t.fontFamily}),e=t,z1=Jc({},e),null!=t&&t.theme&&t.theme in Ll?t.themeVariables=Ll[t.theme].getThemeVariables(t.themeVariables):t&&(t.themeVariables=Ll.default.getThemeVariables(t.themeVariables));var e,t="object"==typeof t?(t=t,j1=Jc({},Y1),j1=Jc(j1,t),t.theme&&Ll[t.theme]&&(j1.themeVariables=Ll[t.theme].getThemeVariables(t.themeVariables)),H1(j1,U1),j1):q1();R(t.logLevel),wv()},getConfig:J,setConfig:V1,getSiteConfig:q1,updateSiteConfig:t=>(j1=Jc(j1,t),H1(j1,U1),j1),reset:()=>{Z1()},globalReset:()=>{Z1(Y1)},defaultConfig:Y1});R(J().logLevel),Z1(J());let tk=!1;function ek(t,e,r){var i=Jv.getConfig();t&&(lk.sequenceConfig=t),S.debug(`${r?"":"No "}Callback function found`);let n;if(void 0===e)n=document.querySelectorAll(".mermaid");else if("string"==typeof e)n=document.querySelectorAll(e);else if(e instanceof HTMLElement)n=[e];else{if(!(e instanceof NodeList))throw new Error("Invalid argument nodes for mermaid.init");n=e}S.debug(`Found ${n.length} diagrams`),void 0!==(null==t?void 0:t.startOnLoad)&&(S.debug("Start On Load: "+(null==t?void 0:t.startOnLoad)),Jv.updateSiteConfig({startOnLoad:null==t?void 0:t.startOnLoad}));var a=new t1.initIdGenerator(i.deterministicIds,i.deterministicIDSeed),s=[];for(const c of Array.from(n))if(S.info("Rendering diagram: "+c.id),!c.getAttribute("data-processed")){c.setAttribute("data-processed","true");const h="mermaid-"+a.next();o=c.innerHTML;var o=t1.entityDecode(o).trim().replace(/<br\s*\/?>/gi,"<br/>"),l=t1.detectInit(o);l&&S.debug("Detected early reinit: ",l);try{Jv.render(h,o,(t,e)=>{c.innerHTML=t,void 0!==r&&r(h),e&&e(c)},c)}catch(t){nk(t,s,lk.parseError)}}if(0<s.length)throw s[0]}async function rk(t,e,r){var i=Jv.getConfig();t&&(lk.sequenceConfig=t),S.debug(`${r?"":"No "}Callback function found`);let n;if(void 0===e)n=document.querySelectorAll(".mermaid");else if("string"==typeof e)n=document.querySelectorAll(e);else if(e instanceof HTMLElement)n=[e];else{if(!(e instanceof NodeList))throw new Error("Invalid argument nodes for mermaid.init");n=e}S.debug(`Found ${n.length} diagrams`),void 0!==(null==t?void 0:t.startOnLoad)&&(S.debug("Start On Load: "+(null==t?void 0:t.startOnLoad)),Jv.updateSiteConfig({startOnLoad:null==t?void 0:t.startOnLoad}));var a=new t1.initIdGenerator(i.deterministicIds,i.deterministicIDSeed),s=[];for(const c of Array.from(n))if(S.info("Rendering diagram: "+c.id),!c.getAttribute("data-processed")){c.setAttribute("data-processed","true");const h="mermaid-"+a.next();o=c.innerHTML;var o=t1.entityDecode(o).trim().replace(/<br\s*\/?>/gi,"<br/>"),l=t1.detectInit(o);l&&S.debug("Detected early reinit: ",l);try{await Jv.renderAsync(h,o,(t,e)=>{c.innerHTML=t,void 0!==r&&r(h),e&&e(c)},c)}catch(t){nk(t,s,lk.parseError)}}if(0<s.length)throw s[0]}function ik(){lk.startOnLoad&&Jv.getConfig()["startOnLoad"]&&lk.init()}const nk=(t,e,r)=>{S.warn(t),Jh(t)?(r&&r(t.str,t.hash),e.push({...t,message:t.str,error:t})):(r&&r(t),t instanceof Error&&e.push({str:t.message,message:t.message,hash:t.name,error:t}))},ak=(typeof document<"u"&&window.addEventListener("load",ik,!1),[]);let sk=!1;const ok=async()=>{if(!sk){for(sk=!0;0<ak.length;){var t=ak.shift();if(t)try{await t()}catch(t){S.error("Error executing queue",t)}}sk=!1}},lk={startOnLoad:!0,diagrams:{},mermaidAPI:Jv,parse:t=>Jv.parse(t,lk.parseError),parseAsync:t=>new Promise((i,n)=>{ak.push(()=>new Promise((e,r)=>{Jv.parseAsync(t,lk.parseError).then(t=>{e(t),i(t)},t=>{S.error("Error parsing",t),r(t),n(t)})})),ok()}),render:Jv.render,renderAsync:(t,a,s,o)=>new Promise((i,n)=>{ak.push(()=>new Promise((e,r)=>{Jv.renderAsync(t,a,s,o).then(t=>{e(t),i(t)},t=>{S.error("Error parsing",t),r(t),n(t)})})),ok()}),init:async function(t,e,r){try{tk?await rk(t,e,r):ek(t,e,r)}catch(t){S.warn("Syntax Error rendering"),Jh(t)&&S.warn(t.str),lk.parseError&&lk.parseError(t)}},initThrowsErrors:ek,initThrowsErrorsAsync:rk,registerExternalDiagrams:async(t,{lazyLoad:e=!0}={})=>{if(e)for(var{id:r,detector:i,loader:n}of e=t)Qc(r,i,n);else{if(e=t,S.debug(`Loading ${e.length} external diagrams`),0<(e=(await Promise.allSettled(e.map(async({id:t,detector:e,loader:r})=>{r=(await r()).diagram;Cu(t,r,e)}))).filter(t=>"rejected"===t.status)).length){S.error(`Failed to load ${e.length} external diagrams`);for(const a of e)S.error(a);throw new Error(`Failed to load ${e.length} external diagrams`)}await 0}tk=!0},initialize:function(t){Jv.initialize(t)},parseError:void 0,contentLoaded:ik,setParseErrorHandler:function(t){lk.parseError=t}};return lk},"object"==typeof uk&&typeof hk<"u"?hk.exports=e():"function"==typeof define&&define.amd?define(e):(t=typeof globalThis<"u"?globalThis:t||self).mermaid=e()}.call(this)}.call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],3:[function(t,e,r){"use strict";var t=t("@babel/runtime/helpers/interopRequireDefault")(t("mermaid")),i=(document.querySelectorAll("pre.mermaid, pre>code.language-mermaid").forEach(t=>{(t="CODE"===t.tagName?t.parentElement:t).outerHTML=`
    <div class="mermaid">${t.textContent}</div>
    <details>
      <summary>Diagram source</summary>
      <pre>${t.textContent}</pre>
    </details>
  `}),window.matchMedia("(prefers-color-scheme: dark)").matches);t.default.initialize({startOnLoad:!0,logLevel:"error",securityLevel:"loose",theme:i?"dark":"default"})},{"@babel/runtime/helpers/interopRequireDefault":1,mermaid:2}]},{},[3]);